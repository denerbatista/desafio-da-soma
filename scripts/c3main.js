// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let P=function(t){bh=t},k=function(t){return t*Ph},F=function(t,s){return Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},j=function(){var t=new bh(4);return bh!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},z=function(t){var s=new bh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},B=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},U=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},W=function(t,s,i,e){var h=new bh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Q=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},J=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},V=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*(s=s[3])-h*e;return r?(t[0]=s*(r=1/r),t[1]=-e*r,t[2]=-h*r,t[3]=i*r,t):null},Y=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},H=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*n+r*o,t[1]=h*n+s*o,t[2]=e*a+r*i,t[3]=h*a+s*i,t},q=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*n,t[1]=h*i+s*n,t[2]=e*-n+r*i,t[3]=h*-n+s*i,t},Z=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],i=i[1];return t[0]=e*n,t[1]=h*n,t[2]=r*i,t[3]=s*i,t},X=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},K=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},$=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},ht=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Th*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=Th*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=Th*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},rt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},nt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new bh(6);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new bh(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},ut=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},lt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,h,r){var n=new bh(6);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n[4]=h,n[5]=r,n},ft=function(t,s,i,e,h,r,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t},dt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],s=s[5],o=i*r-e*h;return o?(t[0]=r*(o=1/o),t[1]=-e*o,t[2]=-h*o,t[3]=i*o,t[4]=(h*s-r*n)*o,t[5]=(e*n-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],u=i[1],l=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+r*u,t[1]=h*a+n*u,t[2]=e*l+r*c,t[3]=h*l+n*c,t[4]=e*f+r*i+o,t[5]=h*f+n*i+s,t},mt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*a,t[1]=h*i+n*a,t[2]=e*-a+r*i,t[3]=h*-a+n*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=h*a,t[2]=r*i,t[3]=n*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=e*a+r*i+o,t[5]=h*a+n*i+s,t},Mt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},St=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Tt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},bt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},vt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},xt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Gt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},It=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},Ct=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],t=t[5],o=s[0],a=s[1],u=s[2],l=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=Th*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=Th*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(h-u)<=Th*Math.max(1,Math.abs(h),Math.abs(u))&&Math.abs(r-l)<=Th*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-c)<=Th*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},h=function(){var t=new bh(9);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},_t=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Et=function(t){var s=new bh(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Dt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},At=function(t,s,i,e,h,r,n,o,a){var u=new bh(9);return u[0]=t,u[1]=s,u[2]=i,u[3]=e,u[4]=h,u[5]=r,u[6]=n,u[7]=o,u[8]=a,u},Nt=function(t,s,i,e,h,r,n,o,a,u){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=u,t},Lt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ot=function(t,s){var i,e,h;return t===s?(i=s[1],e=s[2],h=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=h):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Rt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=(s=s[8])*n-o*u,c=-s*r+o*a,f=u*r-n*a,d=i*l+e*c+h*f;return d?(t[0]=l*(d=1/d),t[1]=(-s*e+h*u)*d,t[2]=(o*e-h*n)*d,t[3]=c*d,t[4]=(s*i-h*a)*d,t[5]=(-o*i+h*r)*d,t[6]=f*d,t[7]=(-u*i+e*a)*d,t[8]=(n*i-e*r)*d,t):null},Pt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],s=s[8];return t[0]=n*s-o*u,t[1]=h*u-e*s,t[2]=e*o-h*n,t[3]=o*a-r*s,t[4]=i*s-h*a,t[5]=h*r-i*o,t[6]=r*u-n*a,t[7]=e*a-i*u,t[8]=i*n-e*r,t},kt=function(t){var s=t[0],i=t[3],e=t[4],h=t[5],r=t[6],n=t[7],o=t[8];return s*(o*e-h*n)+t[1]*(-o*i+h*r)+t[2]*(n*i-e*r)},r=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],M=i[7],i=i[8];return t[0]=c*e+f*n+d*u,t[1]=c*h+f*o+d*l,t[2]=c*r+f*a+d*s,t[3]=p*e+m*n+g*u,t[4]=p*h+m*o+g*l,t[5]=p*r+m*a+g*s,t[6]=y*e+M*n+i*u,t[7]=y*h+M*o+i*l,t[8]=y*r+M*a+i*s,t},Ft=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=c*e+i*n+u,t[7]=c*h+i*o+l,t[8]=c*r+i*a+s,t},jt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*n,t[1]=i*h+c*o,t[2]=i*r+c*a,t[3]=i*n-c*e,t[4]=i*o-c*h,t[5]=i*a-c*r,t[6]=u,t[7]=l,t[8]=s,t},zt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Ut=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Qt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Jt=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(u=i+i),r=(n=s[1])*u,n=n*(l=n+n),o=e*u,a=e*l,u=(s=s[3])*u,l=s*l,s=s*h;return t[0]=1-n-(e=e*h),t[3]=r-s,t[6]=o+l,t[1]=r+s,t[4]=1-i-e,t[7]=a-u,t[2]=o-l,t[5]=a+u,t[8]=1-i-n,t},Vt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,M=i*a-h*n,w=i*u-r*n,S=e*a-h*o,T=e*u-r*o,b=h*u-r*a,v=l*m-c*p,x=l*g-f*p,G=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-M*(c=c*s-d*m)+w*G+S*(l=l*s-d*p)-T*x+b*v)?(t[0]=(o*f-a*c+u*G)*(d=1/d),t[1]=(a*l-n*f-u*x)*d,t[2]=(n*c-o*l+u*v)*d,t[3]=(h*c-e*f-r*G)*d,t[4]=(i*f-h*l+r*x)*d,t[5]=(e*l-i*c-r*v)*d,t[6]=(m*b-g*T+s*S)*d,t[7]=(g*w-p*b-s*M)*d,t[8]=(p*T-m*w+s*y)*d,t):null},Yt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Ht=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},qt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Zt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},n=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Xt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Kt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},$t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],u=t[7],t=t[8],l=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-l)<=Th*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-c)<=Th*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(h-f)<=Th*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(r-d)<=Th*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-p)<=Th*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-m)<=Th*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=Th*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(u-y)<=Th*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new bh(16);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new bh(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},hs=function(t,s,i,e,h,r,n,o,a,u,l,c,f,d,p,m){var g=new bh(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=h,g[5]=r,g[6]=n,g[7]=o,g[8]=a,g[9]=u,g[10]=l,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},rs=function(t,s,i,e,h,r,n,o,a,u,l,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=u,t[9]=l,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i,e,h,r,n,o;return t===s?(i=s[1],e=s[2],h=s[3],r=s[6],n=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=h,t[13]=n,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,M=i*a-h*n,w=i*u-r*n,S=e*a-h*o,T=e*u-r*o,b=h*u-r*a,v=l*m-c*p,x=l*g-f*p,G=l*(s=s[15])-d*p,I=c*g-f*m,C=c*s-d*m,_=f*s-d*g,E=y*_-M*C+w*I+S*G-T*x+b*v;return E?(t[0]=(o*_-a*C+u*I)*(E=1/E),t[1]=(h*C-e*_-r*I)*E,t[2]=(m*b-g*T+s*S)*E,t[3]=(f*T-c*b-d*S)*E,t[4]=(a*G-n*_-u*x)*E,t[5]=(i*_-h*G+r*x)*E,t[6]=(g*w-p*b-s*M)*E,t[7]=(l*b-f*w+d*M)*E,t[8]=(n*C-o*G+u*v)*E,t[9]=(e*G-i*C-r*v)*E,t[10]=(p*T-m*w+s*y)*E,t[11]=(c*w-l*T-d*y)*E,t[12]=(o*x-n*I-a*v)*E,t[13]=(i*I-e*x+h*v)*E,t[14]=(m*M-p*S-g*y)*E,t[15]=(l*S-c*M+f*y)*E,t):null},as=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,M=i*a-h*n,w=i*u-r*n,S=e*a-h*o,T=e*u-r*o,b=h*u-r*a,v=l*m-c*p,x=l*g-f*p,G=l*(s=s[15])-d*p,I=c*g-f*m,C=c*s-d*m,_=f*s-d*g;return t[0]=o*_-a*C+u*I,t[1]=h*C-e*_-r*I,t[2]=m*b-g*T+s*S,t[3]=f*T-c*b-d*S,t[4]=a*G-n*_-u*x,t[5]=i*_-h*G+r*x,t[6]=g*w-p*b-s*M,t[7]=l*b-f*w+d*M,t[8]=n*C-o*G+u*v,t[9]=e*G-i*C-r*v,t[10]=p*T-m*w+s*y,t[11]=c*w-l*T-d*y,t[12]=o*x-n*I-a*v,t[13]=i*I-e*x+h*v,t[14]=m*M-p*S-g*y,t[15]=l*S-c*M+f*y,t},us=function(t){var s=t[0],i=t[1],e=t[2],h=t[4],r=t[5],n=t[6],o=t[8],a=t[9],u=t[10],l=t[12],c=t[13],f=t[14],d=s*r-i*h,p=s*n-e*h,m=i*n-e*r,g=o*c-a*l,y=o*f-u*l,M=a*f-u*c;return t[7]*(s*M-i*y+e*g)-t[3]*(h*M-r*y+n*g)+t[15]*(o*m-a*p+u*d)-t[11]*(l*m-c*p+f*d)},o=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],M=i[0],w=i[1],S=i[2],T=i[3];return t[0]=M*e+w*o+S*c+T*m,t[1]=M*h+w*a+S*f+T*g,t[2]=M*r+w*u+S*d+T*y,t[3]=M*n+w*l+S*p+T*s,t[4]=(M=i[4])*e+(w=i[5])*o+(S=i[6])*c+(T=i[7])*m,t[5]=M*h+w*a+S*f+T*g,t[6]=M*r+w*u+S*d+T*y,t[7]=M*n+w*l+S*p+T*s,t[8]=(M=i[8])*e+(w=i[9])*o+(S=i[10])*c+(T=i[11])*m,t[9]=M*h+w*a+S*f+T*g,t[10]=M*r+w*u+S*d+T*y,t[11]=M*n+w*l+S*p+T*s,t[12]=(M=i[12])*e+(w=i[13])*o+(S=i[14])*c+(T=i[15])*m,t[13]=M*h+w*a+S*f+T*g,t[14]=M*r+w*u+S*d+T*y,t[15]=M*n+w*l+S*p+T*s,t},ls=function(t,s,i){var e,h,r,n,o,a,u,l,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=u,t[7]=l,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=h*m+a*g+f*i+s[13],t[14]=r*m+u*g+d*i+s[14],t[15]=n*m+l*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],h=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=s[7]*h,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var h,r,n,o,a,u,l,c,f,d,p,m,g,y,M,w,S,T,b,v,x=e[0],G=e[1],e=e[2],I=Math.hypot(x,G,e);return I<Th?null:(x*=I=1/I,G*=I,e*=I,I=Math.sin(i),i=Math.cos(i),r=s[0],n=s[1],o=s[2],a=s[3],l=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],M=x*G*(h=1-i)-e*I,w=G*G*h+i,S=e*G*h+x*I,T=x*e*h+G*I,b=G*e*h-x*I,v=e*e*h+i,t[0]=r*(i=x*x*h+i)+(u=s[4])*(y=G*x*h+e*I)+(d=s[8])*(e=e*x*h-G*I),t[1]=n*i+l*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=r*M+u*w+d*S,t[5]=n*M+l*w+p*S,t[6]=o*M+c*w+m*S,t[7]=a*M+f*w+g*S,t[8]=r*T+u*b+d*v,t[9]=n*T+l*b+p*v,t[10]=o*T+c*b+m*v,t[11]=a*T+f*b+g*v,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[4],r=s[5],n=s[6],o=s[7],a=s[8],u=s[9],l=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=h*i+a*e,t[5]=r*i+u*e,t[6]=n*i+l*e,t[7]=o*i+c*e,t[8]=a*i-h*e,t[9]=u*i-r*e,t[10]=l*i-n*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[8],u=s[9],l=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i-a*e,t[1]=r*i-u*e,t[2]=n*i-l*e,t[3]=o*i-c*e,t[8]=h*e+a*i,t[9]=r*e+u*i,t[10]=n*e+l*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[4],u=s[5],l=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i+a*e,t[1]=r*i+u*e,t[2]=n*i+l*e,t[3]=o*i+c*e,t[4]=a*i-h*e,t[5]=u*i-r*e,t[6]=l*i-n*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ms=function(t,s,i){var e,h=i[0],r=i[1],i=i[2],n=Math.hypot(h,r,i);return n<Th?null:(h*=n=1/n,r*=n,i*=n,n=Math.sin(s),s=Math.cos(s),t[0]=h*h*(e=1-s)+s,t[1]=r*h*e+i*n,t[2]=i*h*e-r*n,t[3]=0,t[4]=h*r*e-i*n,t[5]=r*r*e+s,t[6]=i*r*e+h*n,t[7]=0,t[8]=h*i*e+r*n,t[9]=r*i*e-h*n,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},ws=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ss=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ts=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],h=s[2],r=h+h,n=e*(l=e+e),o=e*(c=(u=s[1])+u),e=e*r,a=u*c,u=u*r,l=(s=s[3])*l,c=s*c,s=s*r;return t[0]=1-(a+(h=h*r)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(n+h),t[6]=u+l,t[7]=0,t[8]=e+c,t[9]=u-l,t[10]=1-(n+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},bs=function(t,s){var i=new bh(3),e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=e*e+h*h+r*r+n*n;return 0<c?(i[0]=2*(o*n+l*e+a*r-u*h)/c,i[1]=2*(a*n+l*h+u*e-o*r)/c,i[2]=2*(u*n+l*r+o*h-a*e)/c):(i[0]=2*(o*n+l*e+a*r-u*h),i[1]=2*(a*n+l*h+u*e-o*r),i[2]=2*(u*n+l*r+o*h-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],h=s[5],r=s[6],n=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,h,r),t[2]=Math.hypot(n,o,a),t},u=function(t,s){var i=new bh(3),e=(d(i,s),1/i[0]),h=s[0]*e,r=s[1]*(l=1/i[1]),n=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*l,u=s[6]*i,e=s[8]*e,l=s[9]*l,c=0;return 0<(i=h+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(u-l)/c,t[1]=(e-n)/c,t[2]=(r-o)/c):a<h&&s<h?(c=2*Math.sqrt(1+h-a-s),t[3]=(u-l)/c,t[0]=.25*c,t[1]=(r+o)/c,t[2]=(e+n)/c):s<a?(c=2*Math.sqrt(1+a-h-s),t[3]=(e-n)/c,t[0]=(r+o)/c,t[1]=.25*c,t[2]=(u+l)/c):(c=2*Math.sqrt(1+s-h-a),t[3]=(r-o)/c,t[0]=(e+n)/c,t[1]=(u+l)/c,t[2]=.25*c),t},vs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],h=e[1],r=e[2],n=e[4],o=e[5],a=e[6],u=e[8],l=e[9],e=e[10],c=(i[0]=Math.hypot(s,h,r),i[1]=Math.hypot(n,o,a),i[2]=Math.hypot(u,l,e),1/i[0]),f=1/i[1],s=s*c,h=h*f,r=r*(i=1/i[2]),n=n*c,a=a*i,u=u*c,c=l*f,l=e*i,e=0;return 0<(f=s+(o=o*f)+l)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(u-r)/e,t[2]=(h-n)/e):o<s&&l<s?(e=2*Math.sqrt(1+s-o-l),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(h+n)/e,t[2]=(u+r)/e):l<o?(e=2*Math.sqrt(1+o-s-l),t[3]=(u-r)/e,t[0]=(h+n)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+l-s-o),t[3]=(h-n)/e,t[0]=(u+r)/e,t[1]=(a+c)/e,t[2]=.25*e),t},xs=function(t,s,i,e){var h=(n=s[0])*(l=n+n),r=n*(c=(a=s[1])+a),n=n*(f=(u=s[2])+u),o=a*c,a=a*f,u=u*f,l=(s=s[3])*l,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+u))*f,t[1]=(r+s)*f,t[2]=(n-c)*f,t[3]=0,t[4]=(r-s)*d,t[5]=(1-(h+u))*d,t[6]=(a+l)*d,t[7]=0,t[8]=(n+c)*e,t[9]=(a-l)*e,t[10]=(1-(h+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Gs=function(t,s,i,e,h){var r=(o=s[0])*(c=o+o),n=o*(f=(u=s[1])+u),o=o*(d=(l=s[2])+l),a=u*f,u=u*d,l=l*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=h[0],g=h[1],h=h[2],y=(1-(a+l))*d,M=(n+s)*d,d=(o-f)*d,n=(n-s)*p,s=(1-(r+l))*p,l=(u+c)*p,p=(o+f)*e,o=(u-c)*e,f=(1-(r+a))*e;return t[0]=y,t[1]=M,t[2]=d,t[3]=0,t[4]=n,t[5]=s,t[6]=l,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+n*g+p*h),t[13]=i[1]+g-(M*m+s*g+o*h),t[14]=i[2]+h-(d*m+l*g+f*h),t[15]=1,t},Is=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(u=i+i),r=(n=s[1])*u,n=n*(l=n+n),o=e*u,a=e*l,u=(s=s[3])*u,l=s*l,s=s*h;return t[0]=1-n-(e=e*h),t[1]=r+s,t[2]=o-l,t[3]=0,t[4]=r-s,t[5]=1-i-e,t[6]=a+u,t[7]=0,t[8]=o+l,t[9]=a-u,t[10]=1-i-n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Cs=function(t,s,i,e,h,r,n){var o=1/(i-s),a=1/(h-e),u=1/(r-n);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(h+e)*a,t[10]=(n+r)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r*2*u,t[15]=0,t},l=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=(h+e)*(i=1/(e-h)),t[14]=2*h*e*i):(t[10]=-1,t[14]=-2*e),t},_s=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=h*(i=1/(e-h)),t[14]=h*e*i):(t[10]=-1,t[14]=-e),t},Es=function(t,s,i,e){var h=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),n=Math.tan(s.leftDegrees*Math.PI/180),o=2/(n+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(h+r);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(n-s)*o*.5,t[9]=(h-r)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),u=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=(n+r)*u,t[15]=1,t},Ds=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),n=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=r*n,t[15]=1,t},As=function(t,s,i,e){var h,r,n,o,a=s[0],u=s[1],s=s[2],l=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<Th&&Math.abs(u-d)<Th&&Math.abs(s-i)<Th?p(t):(f=a-f,d=u-d,i=s-i,h=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-l*i,l=l*d-c*f,(o=Math.hypot(h,e,l))?(h*=o=1/o,e*=o,l*=o):l=e=h=0,c=d*l-i*e,r=i*h-f*l,n=f*e-d*h,(o=Math.hypot(c,r,n))?(c*=o=1/o,r*=o,n*=o):n=r=c=0,t[0]=h,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=r,t[6]=d,t[7]=0,t[8]=l,t[9]=n,t[10]=i,t[11]=0,t[12]=-(h*a+e*u+l*s),t[13]=-(c*a+r*u+n*s),t[14]=-(f*a+d*u+i*s),t[15]=1,t)},Ns=function(t,s,i,e){var h=s[0],r=s[1],s=s[2],n=e[0],o=e[1],e=e[2],a=h-i[0],u=r-i[1],l=a*a+u*u+(i=s-i[2])*i,c=(0<l&&(a*=l=1/Math.sqrt(l),u*=l,i*=l),o*i-e*u);return 0<(l=c*c+(e=e*a-n*i)*e+(n=n*u-o*a)*n)&&(c*=l=1/Math.sqrt(l),e*=l,n*=l),t[0]=c,t[1]=e,t[2]=n,t[3]=0,t[4]=u*n-i*e,t[5]=i*c-a*n,t[6]=a*e-u*c,t[7]=0,t[8]=a,t[9]=u,t[10]=i,t[11]=0,t[12]=h,t[13]=r,t[14]=s,t[15]=1,t},Ls=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Os=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Rs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Ps=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},ks=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Fs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},js=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},zs=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],u=t[7],l=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],M=s[1],w=s[2],S=s[3],T=s[4],b=s[5],v=s[6],x=s[7],G=s[8],I=s[9],C=s[10],_=s[11],E=s[12],D=s[13],A=s[14],s=s[15];return Math.abs(i-y)<=Th*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-M)<=Th*Math.max(1,Math.abs(e),Math.abs(M))&&Math.abs(h-w)<=Th*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(r-S)<=Th*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(n-T)<=Th*Math.max(1,Math.abs(n),Math.abs(T))&&Math.abs(o-b)<=Th*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-v)<=Th*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-x)<=Th*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(l-G)<=Th*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(c-I)<=Th*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(f-C)<=Th*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(d-_)<=Th*Math.max(1,Math.abs(d),Math.abs(_))&&Math.abs(p-E)<=Th*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(m-D)<=Th*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(g-A)<=Th*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new bh(3);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Bs=function(t){var s=new bh(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Us=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new bh(3);return e[0]=t,e[1]=s,e[2]=i,e},Ws=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Qs=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},Js=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Vs=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},Ys=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},Hs=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},qs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Zs=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Xs=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Ks=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},$s=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},hi=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ri=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},ni=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],h=s[2];return 0<(i=i*i+e*e+h*h)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},M=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},w=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[0],n=i[1],i=i[2];return t[0]=h*i-s*n,t[1]=s*r-e*i,t[2]=e*n-h*r,t},oi=function(t,s,i,e){var h=s[0],r=s[1],s=s[2];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var h=Math.acos(Math.min(Math.max(M(s,i),-1),1)),r=Math.sin(h),n=Math.sin((1-e)*h)/r,e=Math.sin(e*h)/r;return t[0]=n*s[0]+e*i[0],t[1]=n*s[1]+e*i[1],t[2]=n*s[2]+e*i[2],t},ui=function(t,s,i,e,h,r){var n=r*r,o=n*(2*r-3)+1,a=n*(r-2)+r,u=n*(r-1);return t[0]=s[0]*o+i[0]*a+e[0]*u+h[0]*(n=n*(3-2*r)),t[1]=s[1]*o+i[1]*a+e[1]*u+h[1]*n,t[2]=s[2]*o+i[2]*a+e[2]*u+h[2]*n,t},li=function(t,s,i,e,h,r){var n=1-r,o=n*n,a=r*r,u=o*n;return t[0]=s[0]*u+i[0]*(o=3*r*o)+e[0]*(n=3*a*n)+h[0]*(a=a*r),t[1]=s[1]*u+i[1]*o+e[1]*n+h[1]*a,t[2]=s[2]*u+i[2]*o+e[2]*n+h[2]*a,t},ci=function(t,s){s=s||1;var i=2*Oh()*Math.PI,e=2*Oh()-1,h=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*h,t[1]=Math.sin(i)*h,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[3]*e+i[7]*h+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*h+i[8]*s+i[12])/(r=r||1),t[1]=(i[1]*e+i[5]*h+i[9]*s+i[13])/r,t[2]=(i[2]*e+i[6]*h+i[10]*s+i[14])/r,t},di=function(t,s,i){var e=s[0],h=s[1],s=s[2];return t[0]=e*i[0]+h*i[3]+s*i[6],t[1]=e*i[1]+h*i[4]+s*i[7],t[2]=e*i[2]+h*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],h=i[1],r=s[0],n=s[1],o=h*(s=s[2])-(c=i[2])*n,a=c*r-e*s,u=e*n-h*r,l=h*u-c*a,c=c*o-e*u,e=e*a-h*o;return a*=h=2*i[3],u*=h,c*=2,e*=2,t[0]=r+(o*=h)+(l*=2),t[1]=n+a+c,t[2]=s+u+e,t},mi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0],r[1]=h[1]*Math.cos(e)-h[2]*Math.sin(e),r[2]=h[1]*Math.sin(e)+h[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},gi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[2]*Math.sin(e)+h[0]*Math.cos(e),r[1]=h[1],r[2]=h[2]*Math.cos(e)-h[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},yi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0]*Math.cos(e)-h[1]*Math.sin(e),r[1]=h[0]*Math.sin(e)+h[1]*Math.cos(e),r[2]=h[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Mi=function(t,s){var i=t[0],e=t[1],h=t[2],r=s[0],n=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+h*h)*(r*r+n*n+o*o)))&&M(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},wi=function(t){return t[0]=0,t[1]=0,t[2]=0,t},Si=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Ti=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},bi=function(t,s){var i=t[0],e=t[1],t=t[2],h=s[0],r=s[1],s=s[2];return Math.abs(i-h)<=Th*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-r)<=Th*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},S=function(){var t=new bh(4);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},vi=function(t){var s=new bh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},xi=function(t,s,i,e){var h=new bh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Gi=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Ii=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},Ci=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},_i=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ei=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Di=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ai=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ni=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Li=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Oi=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Ri=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Pi=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},ki=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Fi=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},ji=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return i*i+e*e+h*h+(s=s[3]-t[3])*s},T=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},b=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},zi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},Bi=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Ui=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return 0<r&&(r=1/Math.sqrt(r)),t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=s*r,t},v=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Wi=function(t,s,i,e){var h=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],n=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],u=s[1],l=s[2],s=s[3];return t[0]=u*i-l*a+s*o,t[1]=-e*i+l*n-s*r,t[2]=e*a-u*n+s*h,t[3]=-e*o+u*r-l*h,t},Qi=function(t,s,i,e){var h=s[0],r=s[1],n=s[2],s=s[3];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=n+e*(i[2]-n),t[3]=s+e*(i[3]-s),t},Ji=function(t,s){var i,e,h,r,n,o;for(s=s||1;1<=(n=(i=2*Oh()-1)*i+(e=2*Oh()-1)*e););for(;1<=(o=(h=2*Oh()-1)*h+(r=2*Oh()-1)*r););var a=Math.sqrt((1-n)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*h*a,t[3]=s*r*a,t},Vi=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3];return t[0]=i[0]*e+i[4]*h+i[8]*r+i[12]*s,t[1]=i[1]*e+i[5]*h+i[9]*r+i[13]*s,t[2]=i[2]*e+i[6]*h+i[10]*r+i[14]*s,t[3]=i[3]*e+i[7]*h+i[11]*r+i[15]*s,t},Yi=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=i[0],o=i[1],a=i[2],u=(i=i[3])*e+o*r-a*h,l=i*h+a*e-n*r,c=i*r+n*h-o*e;return t[0]=u*i+(e=-n*e-o*h-a*r)*-n+l*-a-c*-o,t[1]=l*i+e*-o+c*-n-u*-a,t[2]=c*i+e*-a+u*-o-l*-n,t[3]=s[3],t},Hi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},qi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Zi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Xi=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Th*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=Th*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=Th*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},x=function(){var t=new bh(4);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ki=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},G=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},$i=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return Th<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=Jh(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*n+h*a-r*o,t[1]=h*i+s*o+r*n-e*a,t[2]=r*i+s*a+e*o-h*n,t[3]=s*i-e*n-h*o-r*a,t},I=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*n,t[1]=h*i+r*n,t[2]=r*i-h*n,t[3]=s*i-e*n,t},C=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i-r*n,t[1]=h*i+s*n,t[2]=r*i+e*n,t[3]=s*i-h*n,t},_=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+h*n,t[1]=h*i-e*n,t[2]=r*i+s*n,t[3]=s*i-r*n,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},E=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=Math.sqrt(i*i+e*e+h*h),s=Math.exp(s),n=0<r?s*Math.sin(r)/r:0;return t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=s*Math.cos(r),t},D=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=0<(r=Math.sqrt(i*i+e*e+h*h))?Math.atan2(r,s)/r:0;return t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=.5*Math.log(i*i+e*e+h*h+s*s),t},ee=function(t,s,i){return D(t,s),Qh(t,t,i),E(t,t),t},A=function(t,s,i,e){var h,r,n=s[0],o=s[1],a=s[2],s=s[3],u=i[0],l=i[1],c=i[2],f=n*u+o*l+a*c+s*(i=i[3]);return f<0&&(f=-f,u=-u,l=-l,c=-c,i=-i),f=Th<1-f?(f=Math.acos(f),h=Math.sin(f),r=Math.sin((1-e)*f)/h,Math.sin(e*f)/h):(r=1-e,e),t[0]=r*n+f*u,t[1]=r*o+f*l,t[2]=r*a+f*c,t[3]=r*s+f*i,t},he=function(t){var s=Oh(),i=Oh(),e=Oh(),h=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=h*Math.sin(2*Math.PI*i),t[1]=h*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},re=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return t[0]=-i*(r=r?1/r:0),t[1]=-e*r,t[2]=-h*r,t[3]=s*r,t},ne=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},N=function(t,s){var i,e,h,r=s[0]+s[4]+s[8];return 0<r?(h=Math.sqrt(r+1),t[3]=.5*h,t[0]=(s[5]-s[7])*(h=.5/h),t[1]=(s[6]-s[2])*h,t[2]=(s[1]-s[3])*h):(i=(1+(r=s[3*(r=s[4]>s[0]?1:0)+r]<s[8]?2:r))%3,e=(2+r)%3,h=Math.sqrt(s[3*r+r]-s[3*i+i]-s[3*e+e]+1),t[r]=.5*h,t[3]=(s[3*i+e]-s[3*e+i])*(h=.5/h),t[i]=(s[3*i+r]+s[3*r+i])*h,t[e]=(s[3*e+r]+s[3*r+e])*h),t},oe=function(t,s,i,e){var h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Rh,r=Math.PI/360,n=(e*=r,i*=r,Math.sin(s*=r)),o=Math.cos(s),a=Math.sin(i),u=Math.cos(i),l=Math.sin(e),c=Math.cos(e);switch(h){case"xyz":t[0]=n*u*c+o*a*l,t[1]=o*a*c-n*u*l,t[2]=o*u*l+n*a*c,t[3]=o*u*c-n*a*l;break;case"xzy":t[0]=n*u*c-o*a*l,t[1]=o*a*c-n*u*l,t[2]=o*u*l+n*a*c,t[3]=o*u*c+n*a*l;break;case"yxz":t[0]=n*u*c+o*a*l,t[1]=o*a*c-n*u*l,t[2]=o*u*l-n*a*c,t[3]=o*u*c+n*a*l;break;case"yzx":t[0]=n*u*c+o*a*l,t[1]=o*a*c+n*u*l,t[2]=o*u*l-n*a*c,t[3]=o*u*c-n*a*l;break;case"zxy":t[0]=n*u*c-o*a*l,t[1]=o*a*c+n*u*l,t[2]=o*u*l+n*a*c,t[3]=o*u*c-n*a*l;break;case"zyx":t[0]=n*u*c-o*a*l,t[1]=o*a*c+n*u*l,t[2]=o*u*l-n*a*c,t[3]=o*u*c+n*a*l;break;default:throw new Error("Unknown angle order "+h)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},ue=function(t,s){return Math.abs(v(t,s))>=1-Th},le=function(){var t=new bh(8);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new bh(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,h,r,n,o){var a=new bh(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=h,a[5]=r,a[6]=n,a[7]=o,a},de=function(t,s,i,e,h,r,n){var o=new bh(8),h=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*h),r=.5*r,n=.5*n;return o[4]=h*e+r*i-n*s,o[5]=r*e+n*t-h*i,o[6]=n*e+h*s-r*t,o[7]=-h*t-r*s-n*i,o},L=function(t,s,i){var e=.5*i[0],h=.5*i[1],i=.5*i[2],r=s[0],n=s[1],o=s[2],s=s[3];return t[0]=r,t[1]=n,t[2]=o,t[3]=s,t[4]=e*s+h*o-i*n,t[5]=h*s+i*r-e*o,t[6]=i*s+e*n-h*r,t[7]=-e*r-h*n-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=x(),e=(u(i,s),new bh(3));return a(e,s),L(t,i,e),t},O=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Me=function(t,s,i,e,h,r,n,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t},we=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Se=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Te=function(t,s){var i=s[4],e=s[5],h=s[6],r=s[7],n=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+r*n+e*a-h*o),t[1]=2*(e*s+r*o+h*n-i*a),t[2]=2*(h*s+r*a+i*o-e*n),t},be=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],u=s[4],l=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=n*o+h*i-r*a+u,t[5]=n*a+r*o-e*i+l,t[6]=n*i+e*a-h*o+c,t[7]=-e*o-h*a-r*i+s,t},ve=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=o*n+(d=s[7])*e+a*r-u*h,c=a*n+d*h+u*e-o*r,f=u*n+d*r+o*h-a*e,d=d*n-o*e-a*h-u*r;return I(t,s,i),e=t[0],t[4]=l*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-l*r,t[6]=f*n+d*r+l*h-c*e,t[7]=d*n-l*e-c*h-f*r,t},xe=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=o*n+(d=s[7])*e+a*r-u*h,c=a*n+d*h+u*e-o*r,f=u*n+d*r+o*h-a*e,d=d*n-o*e-a*h-u*r;return C(t,s,i),e=t[0],t[4]=l*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-l*r,t[6]=f*n+d*r+l*h-c*e,t[7]=d*n-l*e-c*h-f*r,t},Ge=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=o*n+(d=s[7])*e+a*r-u*h,c=a*n+d*h+u*e-o*r,f=u*n+d*r+o*h-a*e,d=d*n-o*e-a*h-u*r;return _(t,s,i),e=t[0],t[4]=l*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-l*r,t[6]=f*n+d*r+l*h-c*e,t[7]=d*n-l*e-c*h-f*r,t},Ie=function(t,s,i){var e=i[0],h=i[1],r=i[2],i=i[3],n=s[0],o=s[1],a=s[2],u=s[3];return t[0]=n*i+u*e+o*r-a*h,t[1]=o*i+u*h+a*e-n*r,t[2]=a*i+u*r+n*h-o*e,t[3]=u*i-n*e-o*h-a*r,t[4]=(n=s[4])*i+(u=s[7])*e+(o=s[5])*r-(a=s[6])*h,t[5]=o*i+u*h+a*e-n*r,t[6]=a*i+u*r+n*h-o*e,t[7]=u*i-n*e-o*h-a*r,t},Ce=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],u=i[3];return t[0]=e*u+s*n+h*a-r*o,t[1]=h*u+s*o+r*n-e*a,t[2]=r*u+s*a+e*o-h*n,t[3]=s*u-e*n-h*o-r*a,t[4]=e*(u=i[7])+s*(n=i[4])+h*(a=i[6])-r*(o=i[5]),t[5]=h*u+s*o+r*n-e*a,t[6]=r*u+s*a+e*o-h*n,t[7]=s*u-e*n-h*o-r*a,t},_e=function(t,s,i,e){var h,r,n,o,a,u;return Math.abs(e)<Th?O(t,s):(u=Math.hypot(i[0],i[1],i[2]),e*=.5,h=(n=Math.sin(e))*i[0]/u,r=n*i[1]/u,n=n*i[2]/u,i=Math.cos(e),u=s[0],t[0]=u*i+(e=s[3])*h+(o=s[1])*n-(a=s[2])*r,t[1]=o*i+e*r+a*h-u*n,t[2]=a*i+e*n+u*r-o*h,t[3]=e*i-u*h-o*r-a*n,t[4]=(e=s[4])*i+(u=s[7])*h+(o=s[5])*n-(a=s[6])*r,t[5]=o*i+u*r+a*h-e*n,t[6]=a*i+u*n+e*r-o*h,t[7]=u*i-e*h-o*r-a*n,t)},Ee=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},De=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=i[4],a=i[5],u=i[6],l=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+n*p+h*g-r*m,t[1]=h*i+n*m+r*p-e*g,t[2]=r*i+n*g+e*m-h*p,t[3]=n*i-e*p-h*m-r*g,t[4]=e*l+n*o+h*u-r*a+c*i+s*p+f*g-d*m,t[5]=h*l+n*a+r*o-e*u+f*i+s*m+d*p-c*g,t[6]=r*l+n*u+e*a-h*o+d*i+s*g+c*m-f*p,t[7]=n*l-e*o-h*a-r*u+s*i-c*p-f*m-d*g,t},Ae=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Ne=function(t,s,i,e){var h=1-e;return Zh(s,i)<0&&(e=-e),t[0]=s[0]*h+i[0]*e,t[1]=s[1]*h+i[1]*e,t[2]=s[2]*h+i[2]*e,t[3]=s[3]*h+i[3]*e,t[4]=s[4]*h+i[4]*e,t[5]=s[5]*h+i[5]*e,t[6]=s[6]*h+i[6]*e,t[7]=s[7]*h+i[7]*e,t},Le=function(t,s){var i=Xh(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},Oe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Re=function(t,s){var i,e,h,r,n,o,a,u,l=Xh(s);return 0<l&&(l=Math.sqrt(l),u=(i=s[0]/l)*(n=s[4])+(e=s[1]/l)*(o=s[5])+(h=s[2]/l)*(a=s[6])+(r=s[3]/l)*(s=s[7]),t[0]=i,t[1]=e,t[2]=h,t[3]=r,t[4]=(n-i*u)/l,t[5]=(o-e*u)/l,t[6]=(a-h*u)/l,t[7]=(s-r*u)/l),t},Pe=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},ke=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Fe=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],t=t[7],u=s[0],l=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-u)<=Th*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-l)<=Th*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(h-c)<=Th*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(r-f)<=Th*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=Th*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-p)<=Th*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=Th*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},R=function(){var t=new bh(2);return bh!=Float32Array&&(t[0]=0,t[1]=0),t},je=function(t){var s=new bh(2);return s[0]=t[0],s[1]=t[1],s},ze=function(t,s){var i=new bh(2);return i[0]=t,i[1]=s,i},Be=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ue=function(t,s,i){return t[0]=s,t[1]=i,t},We=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Qe=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},Je=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Ve=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},Ye=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},He=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},qe=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Ze=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Xe=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ke=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},$e=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},th=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sh=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},ih=function(t){var s=t[0];return Math.hypot(s,t[1])},eh=function(t){var s=t[0];return s*s+(t=t[1])*t},hh=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},rh=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},nh=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},oh=function(t,s){return t[0]*s[0]+t[1]*s[1]},ah=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},uh=function(t,s,i,e){var h=s[0],s=s[1];return t[0]=h+e*(i[0]-h),t[1]=s+e*(i[1]-s),t},lh=function(t,s){s=s||1;var i=2*Oh()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},ch=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},fh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},dh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},ph=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},mh=function(t,s,i,e){var h=s[0]-i[0],s=s[1]-i[1],r=Math.sin(e),e=Math.cos(e);return t[0]=h*e-s*r+i[0],t[1]=h*r+s*e+i[1],t},gh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],h=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(h&&(i*e+t*s)/h,-1),1))},yh=function(t){return t[0]=0,t[1]=0,t},Mh=function(t){return"vec2("+t[0]+", "+t[1]+")"},wh=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Sh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=Th*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))};h,p,f,a,d,u,m,g,y,M,w,S,v,x,G,I,C,_,E,D,A,N,L,O,R,Th=1e-6,bh="undefined"!=typeof Float32Array?Float32Array:Array,Oh=Math.random,Rh="zyx",Ph=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),kh={__proto__:null,EPSILON:Th,get M(){return bh},S:Oh,T:Rh,G:P,I:k,equals:F},Fh=Object.freeze({__proto__:null,create:j,clone:z,C:B,identity:U,_:W,set:Q,D:J,A:V,N:Y,L:H,multiply:t,rotate:q,scale:Z,O:X,R:K,P:$,F:tt,j:st,add:it,B:s,U:et,equals:ht,W:rt,J:nt,mul:t,sub:s}),jh=Object.freeze({__proto__:null,create:ot,clone:at,C:ut,identity:lt,_:ct,set:ft,A:dt,L:pt,multiply:i,rotate:mt,scale:gt,translate:yt,O:Mt,R:wt,V:St,P:Tt,F:bt,add:vt,B:e,W:xt,J:Gt,U:It,equals:Ct,mul:i,sub:e}),zh=Object.freeze({__proto__:null,create:h,Y:_t,clone:Et,C:Dt,_:At,set:Nt,identity:Lt,D:Ot,A:Rt,N:Pt,L:kt,multiply:r,translate:Ft,rotate:jt,scale:zt,V:Bt,O:Ut,R:Wt,H:Qt,Z:Jt,X:Vt,K:Yt,P:Ht,F:qt,add:Zt,B:n,W:Xt,J:Kt,U:$t,equals:ts,mul:r,sub:n}),vh=Object.freeze({__proto__:null,create:ss,clone:is,C:es,_:hs,set:rs,identity:p,D:ns,A:os,N:as,L:us,multiply:o,translate:ls,scale:cs,rotate:fs,$:ds,tt:ps,it:ms,V:gs,R:ys,O:Ms,et:ws,ht:Ss,nt:Ts,ot:f,ut:bs,lt:a,ct:d,dt:u,gt:vs,yt:xs,Mt:Gs,Z:Is,St:Cs,Tt:l,perspective:l,bt:_s,vt:Es,xt:c,ortho:c,Gt:Ds,It:As,Ct:Ns,P:Ls,F:Os,add:Rs,B:Ps,W:ks,J:Fs,U:js,equals:zs,mul:o,sub:Ps}),qh=Vs,Kh=Ys,Wh=Hs,$h=ii,tr=ei,Bh=Us,sr=hi,Lh=m(),xh=Object.freeze({__proto__:null,create:m,clone:Bs,length:Us,_:g,C:Ws,set:Qs,add:Js,B:Vs,multiply:Ys,_t:Hs,ceil:qs,floor:Zs,min:Xs,max:Ks,round:$s,scale:ti,Et:si,Dt:ii,At:ei,Nt:hi,Lt:ri,inverse:ni,normalize:y,Ot:M,Rt:w,Pt:oi,kt:ai,Ft:ui,jt:li,random:ci,zt:fi,Bt:di,Ut:pi,$:mi,tt:gi,it:yi,angle:Mi,Wt:wi,P:Si,U:Ti,equals:bi,sub:qh,mul:Kh,div:Wh,Qt:$h,Jt:tr,Vt:Bh,Yt:sr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Lh[0]=t[n],Lh[1]=t[n+1],Lh[2]=t[n+2],h(Lh,Lh,r),t[n]=Lh[0],t[n+1]=Lh[1],t[n+2]=Lh[2];return t}}),qh=_i,Kh=Ei,Wh=Di,$h=Fi,tr=ji,sr=T,ir=b,Nh=S(),Uh=Object.freeze({__proto__:null,create:S,clone:vi,_:xi,C:Gi,set:Ii,add:Ci,B:_i,multiply:Ei,_t:Di,ceil:Ai,floor:Ni,min:Li,max:Oi,round:Ri,scale:Pi,Et:ki,Dt:Fi,At:ji,length:T,Nt:b,Lt:zi,inverse:Bi,normalize:Ui,Ot:v,Rt:Wi,Pt:Qi,random:Ji,zt:Vi,Ut:Yi,Wt:Hi,P:qi,U:Zi,equals:Xi,sub:qh,mul:Kh,div:Wh,Qt:$h,Jt:tr,Vt:sr,Yt:ir,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Nh[0]=t[n],Nh[1]=t[n+1],Nh[2]=t[n+2],Nh[3]=t[n+3],h(Nh,Nh,r),t[n]=Nh[0],t[n+1]=Nh[1],t[n+2]=Nh[2],t[n+3]=Nh[3];return t}}),qh=vi,Kh=xi,Wh=Gi,$h=Ii,tr=Ci,sr=se,Qh=Pi,Jh=v,ir=Qi,er=Vh=T,hr=Yh=b,Hh=Ui,rr=Zi,Eh=m(),Dh=g(1,0,0),Ah=g(0,1,0),nr=function(t,s,i){var e=M(s,i);return e<-.999999?(w(Eh,Dh,s),Bh(Eh)<1e-6&&w(Eh,Ah,s),y(Eh,Eh),G(t,Eh,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(w(Eh,s,i),t[0]=Eh[0],t[1]=Eh[1],t[2]=Eh[2],t[3]=1+e,Hh(t,t))},Ch=x(),_h=x(),or=function(t,s,i,e,h,r){return A(Ch,s,h,r),A(_h,i,e,r),A(t,Ch,_h,2*r*(1-r)),t},Ih=h(),qh=Object.freeze({__proto__:null,create:x,identity:Ki,Ht:G,qt:$i,Zt:te,multiply:se,$:I,tt:C,it:_,Xt:ie,exp:E,Kt:D,pow:ee,kt:A,random:he,A:re,$t:ne,ts:N,ss:oe,P:ae,clone:qh,_:Kh,C:Wh,set:$h,add:tr,mul:sr,scale:Qh,Ot:Jh,Pt:ir,length:Vh,Vt:er,Nt:Yh,Yt:hr,normalize:Hh,U:rr,equals:ue,es:nr,hs:or,rs:function(t,s,i,e){return Ih[0]=i[0],Ih[3]=i[1],Ih[6]=i[2],Ih[1]=e[0],Ih[4]=e[1],Ih[7]=e[2],Ih[2]=-s[0],Ih[5]=-s[1],Ih[8]=-s[2],Hh(t,N(t,Ih))}}),Zh=Jh,Kh=Xh=Yh,$h=Object.freeze({__proto__:null,create:le,clone:ce,_:fe,ns:de,ot:L,V:pe,O:me,Y:ge,C:O,identity:ye,set:Me,os:Wh,us:we,ls:Wh,cs:Se,lt:Te,translate:be,$:ve,tt:xe,it:Ge,ds:Ie,gs:Ce,ys:_e,add:Ee,multiply:De,mul:De,scale:Ae,Ot:Zh,Pt:Ne,A:Le,$t:Oe,length:Vh,Vt:Vh,Nt:Xh,Yt:Kh,normalize:Re,P:Pe,U:ke,equals:Fe}),tr=ih,sr=Qe,ir=Je,er=Ve,hr=th,rr=sh,nr=eh,Gh=R(),or=Object.freeze({__proto__:null,create:R,clone:je,_:ze,C:Be,set:Ue,add:We,B:Qe,multiply:Je,_t:Ve,ceil:Ye,floor:He,min:qe,max:Ze,round:Xe,scale:Ke,Et:$e,Dt:th,At:sh,length:ih,Nt:eh,Lt:hh,inverse:rh,normalize:nh,Ot:oh,Rt:ah,Pt:uh,random:lh,Ms:ch,ws:fh,Bt:dh,zt:ph,rotate:mh,angle:gh,Wt:yh,P:Mh,U:wh,equals:Sh,Vt:tr,sub:sr,mul:ir,div:er,Qt:hr,Jt:rr,Yt:nr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Gh[0]=t[n],Gh[1]=t[n+1],h(Gh,Gh,r),t[n]=Gh[0],t[n+1]=Gh[1];return t}}),globalThis.Ss=kh,globalThis.Ss.Ts=Fh,globalThis.Ss.bs=jh,globalThis.Ss.vs=zh,globalThis.Ss.xs=vh,globalThis.Ss.Gs=qh,globalThis.Ss.Is=$h,globalThis.Ss.Cs=or,globalThis.Ss._s=xh,globalThis.Ss.Es=Uh}var Gh,Ih,Ch,_h,Eh,Dh,Ah,Nh,Lh,Th,bh,Oh,Rh,Ph,kh,Fh,jh,zh,vh,Bh,xh,Uh,Wh,Qh,Jh,Vh,Yh,Hh,qh,Zh,Xh,Kh,$h,tr,sr,ir,er,hr,rr,nr,or,O,R,P,k;{let a=function(t,s,i){var e=[0,0],h=t[1][1]-t[0][1],r=t[0][0]-t[1][0],t=h*t[0][0]+r*t[0][1],n=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=n*s[0][0]+o*s[0][1],a=h*o-n*r;return m(a,0,i=i||0)||(e[0]=(o*t-r*s)/a,e[1]=(h*s-n*t)/a),e},h=function(t,s,i,e){var h,r=s[0]-t[0],s=s[1]-t[1],n=e[0]-i[0];return n*s-(e=e[1]-i[1])*r!=0&&(h=(n*(t[1]-i[1])+e*(i[0]-t[0]))/(e*r-n*s),0<=(t=(r*(i[1]-t[1])+s*(t[0]-i[0]))/(n*s-e*r)))&&t<=1&&0<=h&&h<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},v=function(t,s,i){return 0<o(t,s,i)},x=function(t,s,i){return 0<=o(t,s,i)},G=function(t,s,i){return o(t,s,i)<0},I=function(t,s,i){return o(t,s,i)<=0},r=function(t,s,i,e){var h,r,n;return e?(n=R,(r=O)[0]=s[0]-t[0],r[1]=s[1]-t[1],n[0]=i[0]-s[0],n[1]=i[1]-s[1],h=r[0]*n[0]+r[1]*n[1],r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.acos(h/(r*n))<e):0===o(t,s,i)},C=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},_=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},n=function(t){t.length=0},E=function(t,s,i,e){for(var h=i;h<e;h++)t.push(s[h])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!v(_(t,s-1),_(t,s),_(t,s+1))&&(u(t),!0)},u=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},D=function(t,s){return G(_(t,s-1),_(t,s),_(t,s+1))},l=function(t,s,i){var e,h=P,r=k;if(x(_(t,s+1),_(t,s),_(t,i))&&I(_(t,s-1),_(t,s),_(t,i)))return!1;for(var n=C(_(t,s),_(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&x(_(t,s),_(t,i),_(t,o+1))&&I(_(t,s),_(t,i),_(t,o))&&(h[0]=_(t,s),h[1]=_(t,i),r[0]=_(t,o),r[1]=_(t,o+1),e=a(h,r),C(_(t,s),e)<n))return!1;return!0},A=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&h(_(t,s),_(t,i),_(t,e),_(t,e+1)))return!1;return!0},c=function(t,s,i,e){var h=e||[];if(n(h),s<i)for(var r=s;r<=i;r++)h.push(t[r]);else{for(r=0;r<=i;r++)h.push(t[r]);for(r=s;r<t.length;r++)h.push(t[r])}return h},f=function(t){for(var s=[],i=[],e=[],h=Number.MAX_VALUE,r=0;r<t.length;++r)if(D(t,r))for(var n=0;n<t.length;++n)if(l(t,r,n)){for(var i=f(c(t,r,n,e)),o=f(c(t,n,r,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<h&&(h=(s=i).length,s.push([_(t,r),_(t,n)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var h=s[e],r=0;r<i.length;r++){var n=d(i[r],h);if(n){i.splice(r,1),i.push(n[0],n[1]);break}}return i}return e=t.indexOf((h=s)[0]),r=t.indexOf(h[1]),-1!==e&&-1!==r&&[c(t,e,r),c(t,r,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(h(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(h(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},N=function(t,s,i,e,h){var r=s[1]-t[1],s=t[0]-s[0],t=r*t[0]+s*t[1],n=e[1]-i[1],e=i[0]-e[0],i=n*i[0]+e*i[1],o=r*e-n*s;return m(o,0,h=h||0)?[0,0]:[(e*t-s*i)/o,(r*i-n*t)/o]},L=function(t,s,i,e,h,r,n){r=r||100,n=n||0,h=h||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],u=[0,0],l=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],M=[],w=t,S=t;if(!(S.length<3))if(r<++n)console.warn("quickDecomp: max level ("+r+") reached.");else{for(var T=0;T<t.length;++T)if(D(w,T)){i.push(w[T]);for(var l=c=Number.MAX_VALUE,b=0;b<t.length;++b)v(_(w,T-1),_(w,T),_(w,b))&&I(_(w,T-1),_(w,T),_(w,b-1))&&(u=N(_(w,T-1),_(w,T),_(w,b),_(w,b-1)),G(_(w,T+1),_(w,T),u))&&(f=C(w[T],u))<c&&(c=f,a=u,m=b),v(_(w,T+1),_(w,T),_(w,b+1))&&I(_(w,T+1),_(w,T),_(w,b))&&(u=N(_(w,T+1),_(w,T),_(w,b),_(w,b+1)),v(_(w,T-1),_(w,T),u))&&(f=C(w[T],u))<l&&(l=f,o=u,p=b);if(m===(p+1)%t.length)u[0]=(a[0]+o[0])/2,u[1]=(a[1]+o[1])/2,e.push(u),T<p?(E(y,w,T,p+1),y.push(u),M.push(u),0!==m&&E(M,w,m,w.length),E(M,w,0,T+1)):(0!==T&&E(y,w,T,w.length),E(y,w,0,p+1),y.push(u),M.push(u),E(M,w,m,T+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(b=m;b<=p;++b)x(_(w,T-1),_(w,T),_(w,b))&&I(_(w,T+1),_(w,T),_(w,b))&&(f=C(_(w,T),_(w,b)))<d&&A(w,T,b)&&(d=f,g=b%t.length);T<g?(E(y,w,T,g+1),0!==g&&E(M,w,g,S.length),E(M,w,0,T+1)):(0!==T&&E(y,w,T,S.length),E(y,w,0,g+1),E(M,w,g,T+1))}return y.length<M.length?(L(y,s,i,e,h,r,n),L(M,s,i,e,h,r,n)):(L(M,s,i,e,h,r,n),L(y,s,i,e,h,r,n)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)r(_(t,e-1),_(t,e),_(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],h=i-1;0<=h;--h)g(e,t[h],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,h,o,v,x,G,I,r,C,_,n,E,u,D,l,A,c,f,d,N,L,m,g,O=[],R=[],P=[],k=[],self.Ds={As:s,Ns:L,Ls:i,Os:e,Rs:p,Ps:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),h=14,r=self.ks=class{constructor(){throw TypeError("static class can't be instantiated")}static Fs(){if(h<=0)throw new Error("cannot obtain internal API token");return--h,e}static zs(){t=!0}static Bs(){return t}static Us(){s=!0}static Ws(){return s}static Qs(t){i=t}static Js(){return i}static Vs(){return"final"===i}};r.isDebug=!1,r.Ys=!1,r.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Hs={}}{const s=self.ks;s.qs=class{constructor(t){this.Zs=t,this.Xs=new Map,this.Ks()}Ks(){let t=this.Zs,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.$s(i)}$s(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Xs.set(i,e)}else this.Xs.set(t,null)}ti(){for(const t of this.Xs)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}si(t){return this.Xs.has(t)}ei(t){const s=this.Xs.get(t);return void 0===s?null:s}hi(){history.replaceState("",document.title,location.pathname+location.search)}ri(t){this.Zs=t,this.Xs.clear(),this.Ks()}},s.ni=new s.qs(location.search),s.oi=new s.qs(location.hash),s.ni.si("perf")&&(s.ai=!0),"dev"!==s.ni.ei("mode")&&s.Qs("final")}{let e=function(t){const s=parseFloat(t),i=B.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.ks,z="(unknown)",B=(a.li={ci:z,fi:z,di:z,mi:z,gi:NaN,yi:z,Mi:"browser",wi:!0,Si:!1,Ti:!1,bi:!1,vi:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),U=navigator.userAgent,W=navigator.userAgentData;if(W&&0<W.brands.length){let s=function(t){let s="",i="",e="",h="";for(const r of t){const n=Q.get(r.brand),o=(!s&&n&&(s=n,i=r.version),J.get(r.brand));!e&&o&&(e=o,h=r.version)}s||"Chromium"!==e||(a.li.di="Chromium",a.li.mi=h),a.li.di=s||z,a.li.mi=i||z,a.li.yi=e||z};s,a.li.ci=W.platform,a.li.Si=W.mobile,a.li.wi=!a.li.Si;const Q=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),J=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(W.brands);let i=!1;a.li.vi=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.li.ci?a.li.fi=e(t.platformVersion):a.li.fi=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const h=e.exec(U);if(h){s(h);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.li.ci="Windows";const s=t[1];a.li.fi=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.li.ci="macOS",a.li.fi=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.li.ci="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.li.ci="Linux"}),t(/android/i,()=>{a.li.ci="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.li.ci="Android",a.li.fi=t[1]}),a.li.ci===z&&(t(/(iphone|ipod|ipad)/i,t=>{a.li.ci="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.li.ci="iOS",a.li.fi=t[1].replace(/_/g,".")}));const V=/chrome\//i.test(U),Y=/chromium\//i.test(U),H=/edg\//i.test(U),q=/OPR\//.test(U),Z=/nwjs/i.test(U),X=/safari\//i.test(U),K=/webkit/i.test(U),$=(H||q||t(/chrome\/([\d\.]+)/i,t=>{a.li.di="Chrome",a.li.mi=t[1],a.li.yi="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.li.di="Edge",a.li.mi=t[1],a.li.yi="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.li.di="Opera",a.li.mi=t[1],a.li.yi="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.li.di="Chromium",a.li.mi=t[1],a.li.yi="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.li.di="NW.js",a.li.mi=t[1],a.li.yi="Chromium",a.li.Mi="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.li.di="Firefox",a.li.mi=t[1],a.li.yi="Gecko"}),!X||V||Y||H||q||Z||(a.li.di="Safari",a.li.yi="WebKit",t(/version\/([\d\.]+)/i,t=>{a.li.mi=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.li.di="Chrome for iOS",a.li.mi=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.li.di="Firefox for iOS",a.li.mi=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.li.di="Edge for iOS",a.li.mi=t[1]})),a.li.yi===z&&K&&(a.li.yi="WebKit"),"Android"===a.li.ci&&"Safari"===a.li.di&&(a.li.di="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),tt=$.has(a.li.ci)||"nwjs"===a.li.Mi;a.li.wi=tt,a.li.Si=!tt}"Chrome"===a.li.di&&"browser"===a.li.Mi&&/wv\)/.test(U)&&(a.li.Mi="webview"),"nwjs"!==a.li.Mi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.li.Mi="webapp"),a.li.gi=parseFloat(a.li.mi);const i="macOS"===a.li.ci&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.li.ci="iOS",a.li.fi=a.li.mi,a.li.wi=!1,a.li.Si=!0,a.li.bi=!0),a.li.Ti="macOS"===a.li.ci||"iOS"===a.li.ci}{let n=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return F(t,s)},s=function(t,s){return F(t,s,!0)},a=function(s){e(s);let t=et.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,st);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(it)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),n(t)})(s),et.set(s,t),t.catch(t=>et.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},r=function(t,h){const s=t.objectStore(it).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(h){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};n,o,t,s,a,e,r;const st=2,it="keyvaluepairs",et=new Map,ht="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function F(s,i,e=!1,h=!0){const t=await a(s);try{const r=t.transaction([it],e?"readwrite":"readonly");return i(r)}catch(t){if(h&&"InvalidStateError"===t.name)return et.delete(s),F(s,i,e,!1);throw t}}class nt{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(h,r){return e(h),s(this.name,async t=>{const s=t.objectStore(it).put(r,h),i=n(s),e=o(t);await Promise.all([e,i])})}get(r){return e(r),t(this.name,async t=>{const s=t.objectStore(it).get(r),i=n(s),e=o(t),[,h]=await Promise.all([e,i]);return h})}delete(h){return e(h),s(this.name,async t=>{const s=t.objectStore(it).delete(h),i=n(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(it).clear(),i=n(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(rt){const h=t.objectStore(it).getAllKeys();s=n(h)}else s=r(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(ht){const h=t.objectStore(it).getAll();s=n(h)}else s=r(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=r(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self.xi=nt}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},h=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,h;const ot=self.xi,at=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class ut{constructor(t){this.Gi=t,this.Ii=!this.Gi,this.Ii||"undefined"!=typeof indexedDB||(this.Ii=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.Ci=new Map}_i(t){if(!this.Ii)for(const s of at)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.Ii=!0;break}}async Ei(t){const s=this.Ci.get(t),i=await h(s);return void 0===i?null:i}async Di(t,s){s=await h(s),this.Ci.set(t,s)}Ai(t){this.Ci.delete(t)}Ni(){this.Ci.clear()}Li(){return Array.from(this.Ci.keys())}Oi(){return this.Ii}Ri(){return this.Ci}Pi(t){this.Ci=t}async getItem(s,t){if(e(t),this.Ii)return this.Ei(s);let i;try{i=await this.Gi.get(s)}catch(t){return this._i(t),this.Ii?this.Ei(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.Ii)await this.Di(s,i);else try{await this.Gi.set(s,i)}catch(t){if(this._i(t),!this.Ii)throw t;await this.Di(s,i)}}async removeItem(s,t){if(e(t),this.Ii)this.Ai(s);else try{await this.Gi.delete(s)}catch(t){this._i(t),this.Ii?this.Ai(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.Ii)this.Ni();else try{await this.Gi.clear()}catch(t){this._i(t),this.Ii?this.Ni():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.Ii)return this.Li();let s=[];try{s=await this.Gi.keys()}catch(t){if(this._i(t),this.Ii)return this.Li();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.Ii?Promise.resolve(!0):this.Gi.ready()}ki(t){if(t.forceInMemoryFallback)return new ut(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new ot(s);return new ut(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}Fi(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}ji(t){i("localforage.defineDriver()")}Bi(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new ut(new ot("localforage"))}{const e=self.ks;if(e.Ui={},e.Ui.Wi=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.Ui.Qi="undefined"!=typeof HTMLDialogElement,e.Ui.Ji=!!self.requestIdleCallback,e.Ui.ImageBitmap=!!self.createImageBitmap,e.Ui.ImageBitmapOptions=!1,e.Ui.Vi=!1,e.Ui.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.Ui.ImageBitmapOptions=!0}).catch(()=>{e.Ui.ImageBitmapOptions=!1})}catch(t){e.Ui.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.Ui.Vi=10===t.width&&10===t.height}).catch(()=>{e.Ui.Vi=!1})}catch(t){e.Ui.Vi=!1}}if(e.Ui.Yi=!(!navigator.clipboard||!navigator.clipboard.readText),e.Ui.Hi=!(!navigator.permissions||!navigator.permissions.query),e.Ui.Zi=!1,e.Ui.Hi){const lt={name:"clipboard-read"};navigator.permissions.query(lt).then(()=>{e.Ui.Zi=!0}).catch(()=>{e.Ui.Zi=!1})}e.Ui.Xi=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.Ui.Ki="undefined"!=typeof Proxy,e.Ui.$i=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.Ui.te="function"==typeof fetch,e.Ui.ie=!!(self.isSecureContext&&"Opera"!==e.li.di&&navigator.storage&&navigator.storage.persist),e.Ui.he=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.Ui.re=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.li.ci)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.Ui.ImageDecoder=void 0!==self.ImageDecoder,e.Ui.ne=!!self.VideoEncoder,e.Ui.oe=!!self.showOpenFilePicker,e.Ui.ae=!!self.queryLocalFonts,e.Ui.UserActivation=!!navigator.userActivation,e.Ui.ue=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.Ui.ue=i&&"image/webp"===i.type}catch(t){e.Ui.ue=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ct=self.ks;if(!String.prototype.trimStart){const ft=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(ft,"")}}if(!String.prototype.trimEnd){const dt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(dt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ct.le(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=pt.fe(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const pt=self.ks;self.assert=function(t,s){t||i(s)}}{const h=self.ks,mt=self.Hs,gt=(h.de=function(t){return"number"==typeof t},h.pe=function(t){return h.de(t)&&isFinite(t)},h.me=function(t){if(!h.de(t))throw new TypeError("expected number")},h.ge=function(t){h.ye(t)},h.Me=function(t,s,i){if(!h.de(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},h.we=function(...s){for(let t of s);},h.Se=function(t){if(!h.pe(t))throw new TypeError("expected finite number")},h.Te=function(t){h.ye(t)},h.ve=function(...s){for(let t of s);},h.xe=function(t){return"string"==typeof t},h.Ge=function(t){if(!h.xe(t))throw new TypeError("expected string")},h.Ie=function(t){h.ye(t)},h.Ce=function(...s){for(let t of s);},h._e=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},h.Ee=function(t){if(!h._e(t))throw new TypeError("expected simple object")},h.De=function(t){if(!h.ye(t)&&!h._e(t))throw new TypeError("expected simple object")},h.Ae=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},h.Ne=function(t){if(!h.Ae(t))throw new TypeError("expected object")},h.Le=function(t){h.ye(t)},h.Oe=function(...s){for(let t of s);},h.Re=function(t){return h.Pe(t,Blob)&&"string"==typeof t.name},h.ke=function(t){if(!h.Re(t))throw new TypeError("expected file")},h.Fe=function(t){h.ye(t)},h.je=function(t){return Array.isArray(t)},h.Be=function(t){if(!h.je(t))throw new TypeError("expected array")},h.Ue=function(t){h.ye(t)},h.We=function(...s){for(let t of s);},h.Qe=function(t){return!(!h.je(t)||t.length&&!h.je(t[0]))},h.Je=function(s){if(!h.Qe(s))throw new TypeError("expected 2d array");for(let t of s)if(!h.je(t))throw new TypeError("expected 2d array")},h.Ve=function(t){h.ye(t)},h.Ye=function(t){return"function"==typeof t},h.He=function(t,s){if(!h.Ye(t))throw new TypeError("expected function");if(!h.ye(s)&&t!==s)throw new TypeError("expected same function reference")},h.qe=function(t){h.ye(t)},h.Ze=function(...s){for(let t of s);},h.Xe=function(s,...i){if(!h.Ye(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!h.ye(t)&&s===t)return;throw new TypeError("expected same function reference")},h.Ke=function(...s){if(!h.ye(s))for(let t of s);},h.$e=function(t,s){return t instanceof s},h.th=function(s,...i){for(let t of i)if(h.$e(s,t))return!0;return!1},h.ih=function(t,s){if(!h.$e(t,s))throw new TypeError("unexpected type")},h.eh=function(t,s){h.ye(t)},h.hh=function(t,...s){for(let t of s);},h.rh=function(t,...s){if(!h.th(t,...s))throw new TypeError("unexpected type")},h.nh=function(t,...s){if(!h.ye(t)&&!h.th(t,...s))throw new TypeError("unexpected type")},h.oh=function(s,i){for(let t of s)if(!h.$e(t,i))return!1;return!0},h.ah=function(s){for(let t of s)if(!h.pe(t))return!1;return!0},h.uh=function(s,t){for(let t of s);},h.lh=function(s,t){if(!h.ye(s))for(let t of s);},h.fh=function(s,t){if(!h.ye(s))for(let t of s);},h.dh=function(s){for(let t of s);},h.ph=function(s){if(!h.ye(s))for(let t of s);},h.mh=function(t,s){return!(h.ye(t)||!h.xe(t.nodeName))&&(!s||h.gh(t.nodeName,s))},h.yh=function(t,s){if(h.ye(t)||!h.xe(t.nodeName))throw new TypeError("expected DOM node");if(s&&!h.gh(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},h.Mh=function(t,s){h.ye(t)},h.wh=function(t,s){return!(h.ye(t)||!h.xe(t.tagName))&&(!s||h.gh(t.tagName,s))},h.Sh=function(t,s){if(h.ye(t)||!h.xe(t.tagName))throw new TypeError("expected HTML element");if(s&&!h.gh(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},h.Th=function(t,s){h.ye(t)},h.bh=function(t){return h.wh(t,"img")||h.wh(t,"canvas")||h.wh(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},h.xh=function(t){if(!h.bh(t))throw new TypeError("expected drawable")},h.Gh=function(t){h.ye(t)},h.Ih=function(t){return t instanceof ImageData||h.bh(t)},h.Ch=function(t){if(!h.Ih(t))throw new TypeError("expected drawable or image data")},h._h=function(t){if(!h.ye(t)&&!h.Ih(t))throw new TypeError("expected drawable or image data")},h.Eh=function(t){return"string"==typeof t||h.HtmlString&&t instanceof h.HtmlString||t instanceof h.Dh},h.Ah=function(t){if(!h.Eh(t))throw new TypeError("expected string-like")},h.Nh=function(t){h.ye(t)},h.Lh=function(...s){for(let t of s);},h.Oh=function(){throw new Error("must be overridden")},h.Rh=function(){throw new Error("not yet implemented")},h.Ph=function(t){return t.constructor===function*(){}.constructor},h.kh=function(t){if(!h.Ph(t))throw new Error("expected generator function")},h.Fh=function(t){return"function"===t[Symbol.iterator]},h.jh=function(t){if(!h.Fh(t))throw new Error("expected iterable")},h.zh=function(t){return!h.ye(t)},h.ye=function(t){return null==t},h.Bh=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},h.Uh=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));h.Wh=function(t){return h.$e(t,gt)},h.Qh=function(t){},h.Jh=function(t){h.Vh(t,gt)},h.Yh=function(t,...s){if(!h.Hh(t,...s))throw new TypeError("unexpected type")},h.Hh=function(t,...s){for(const i of s)if(h.Pe(t,i))return!0;return!1},h.Vh=function(t,s){if(!h.Pe(t,s))throw new TypeError("unexpected type")},h.Pe=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},mt.me=h.me,mt.ge=h.ge,mt.Se=h.Se,mt.Te=h.Te,mt.Ge=h.Ge,mt.Ie=h.Ie,mt.Ne=h.Ne,mt.Le=h.Le,mt.Be=h.Be,mt.Ue=h.Ue,mt.He=h.He,mt.qe=h.qe,mt.ih=h.ih,mt.eh=h.eh,mt.ye=h.ye}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},h=function(t){console.warn("[Defence] "+t+" @",p.fe())},i=function(){if(f=-1,0<a.size||0<u.size){let t=new Set([...a.keys()].map(t=>p.qh(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),u.clear()}},r=function(s){let i=new Set;for(let t in s)i.add(t);return i},n=function(t,s){let i=r(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.Zh(s,[...i]),s.length&&console.warn(`[Defence] '${p.qh(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,h,i,r,n;const p=self.ks,yt=new Map;p.Xh=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.Kh=function(t,...s){yt.has(t)||yt.set(t,-1),-1===yt.get(t)&&yt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),yt.set(t,-1)}))};let o,a=(p.$h=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,tr:0,ir:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.tr.toPrecision(3)} :: calls => `+this.ir}})},p.er=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.tr=i.total/i.ir,console.log(i.toString()),i.ir++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.fe=function(){return(new Error).stack},p.hr=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.qh=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.de(t)?"<number>":p.xe(t)?"<string>":p.je(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.Ye(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),u=new Map,l=new WeakMap,c=new WeakMap;p.rr={};const Mt=new Set(["then","splice"]);p.rr.get=function(t,s){return s in t||"symbol"==typeof s||Mt.has(s)||h(`Accessed missing property '${s}' from defended object '${p.qh(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!Mt.has(s)&&h(`Accessed property '${s}' on a released object '${p.qh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.rr.set=function(t,s,i){return s in t||a.has(t)||h(`Set non-existent property '${s}' to '${i}' on defended object '${p.qh(t)}'`),e(t[s],i)||a.has(t)||h(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.qh(t)}'`),c.has(t)&&h(`Set property '${s}' on a released object '${p.qh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.rr.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.qh(t)}'`)},p.rr.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.qh(t)}'`)},p.rr.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.qh(t)}'`)};let f=-1,d=(p.nr=class{constructor(){if(p.Ys&&p.Ui.Ki){let t=Object.create(new.target.prototype),s=new Proxy(t,p.rr);return a.set(t,s),u.set(s,t),l.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.ur=function(s){if(p.Ys&&p.Ui.Ki&&s instanceof p.nr){if(u.has(s)){let t=u.get(s);u.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.lr=function(t,...s){let i;try{i=new t(...s)}catch(t){throw u.clear(),a.clear(),t}return p.Ys&&n(t,i),p.ur(i)},p.cr=function(t){let s=l.get(t);s&&c.set(s,p.fe())},p.dr=function(t){let s=l.get(t);return!!s&&!!c.get(s)},new Map);p.pr=class{constructor(t){this.mr="",t&&this.start(t)}start(t){p.ai&&(this.mr=t,performance.mark(this.mr+"-Start"))}end(){p.ai&&(performance.mark(this.mr+"-End"),performance.measure(this.mr,this.mr+"-Start",this.mr+"-End"))}next(t){p.ai&&(this.end(),this.mr=t,performance.mark(this.mr+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.ks,wt=2*Math.PI,St=Math.PI/180,Tt=180/Math.PI,bt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const h=i-(s-t)%e;return h===i?0:h}return s+(t-s)%e},y.Mr=function(t,s,i,e,h){const r=i-s;if(0==r&&0===e)return t;const n=h-e;return(t-s)*n/r+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.Sr=function(t,s,i){return t<s?s:i<t?i:t},y.Tr=function(t){return(t%=wt)<0&&(t+=wt),t},y.br=function(t){return t*St},y.vr=function(t){return t*Tt},y.Gr=function(t,s){return Math.sqrt(t*t+s*s)},y.Ir=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},y.Cr=function(t,s,i,e){return y.Gr(i-t,e-s)},y._r=function(t,s,i,e){const h=i-t,r=e-s;return h*h+r*r},y.Er=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.Dr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s),n=i*h+e*r;return 1<=n?0:n<=-1?Math.PI:Math.acos(n)},y.Ar=function(t,s,i){let e=Math.sin(t),h=Math.cos(t),r=Math.sin(s),n=Math.cos(s);return Math.acos(e*r+h*n)>i?0<h*r-e*n?y.Tr(t+i):y.Tr(t-i):y.Tr(s)},y.Nr=function(t,s){let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s);return e*h-i*r<=0},y.Lr=function(t,s,i,e=0){let h=y.Dr(t,s),r=wt*e;return y.Nr(s,t)?y.Tr(t+(h+r)*i):y.Tr(t-(h+r)*i)},y.Or=function(t,s,i,e=0){const h=y.Dr(t,s),r=wt*e;return y.Nr(s,t)?y.Tr(t+(h+r)*i):y.Tr(t+(wt-h+r)*i)},y.Rr=function(t,s,i,e=0){const h=y.Dr(t,s),r=wt*e;return y.Nr(s,t)?y.Tr(t-(-wt+h-r)*i):y.Tr(t-(h+r)*i)},y.Pr=function(t,s){const i=y.Dr(t,s);return y.Nr(t,s)?y.Tr(s-i):y.Tr(s+i)},y.Pt=function(t,s,i){return t+i*(s-t)},y.kr=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.Fr=function(t,s,i,e,h){return y.Pt(e,h,y.kr(t,s,i))},y.jr=function(t,s,i,e){return y.Pt(y.Pt(t,s,e),y.Pt(s,i,e),e)},y.zr=function(t,s,i,e,h){return y.Pt(y.jr(t,s,i,h),y.jr(s,i,e,h),h)},y.Br=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Ur=function(t){return 0<t&&0==(t-1&t)},y.Wr=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.Qr=function(t,s){return Math.round(t*s)/s},y.Jr=function(t,s){return Math.floor(t*s)/s},y.Vr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.Yr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.Hr=function(t,s,i){return y.Sr(t,0,255)|y.Sr(s,0,255)<<8|y.Sr(i,0,255)<<16},1024),vt=16384,xt=8191,Gt=(y.qr=function(t,s,i,e){return t=y.Sr(Math.floor(1024*t),-8192,xt),s=y.Sr(Math.floor(1024*s),-8192,xt),i=y.Sr(Math.floor(1024*i),-8192,xt),e=y.Sr(Math.floor(1023*e),0,1023),t<0&&(t+=vt),s<0&&(s+=vt),i<0&&(i+=vt),-(t*vt*vt*bt+s*vt*bt+i*bt+e)},y.Zr=function(t,s,i){return y.qr(t,s,i,1)},y.Xr=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(vt*vt*bt));return t>xt&&(t-=vt),t/1024}},y.Kr=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(vt*vt*bt)/(vt*bt));return t>xt&&(t-=vt),t/1024}},y.$r=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(vt*bt)/bt);return t>xt&&(t-=vt),t/1024}},y.tn=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%bt);return s/1023}},y.sn=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.hn=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of Gt){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.sn(i,e);return[i/t,e/t]},y.rn=function(t,s,i,e,h,r,n,o){const a=Math.min(t,i),u=Math.max(t,i),l=Math.min(h,n),c=Math.max(h,n);if(u<l||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||m<f)return!1;const g=h-t+n-i,y=r-s+o-e,M=i-t,w=e-s,S=n-h,T=o-r,b=Math.abs(w*S-T*M),v=S*y-T*g;if(Math.abs(v)>b)return!1;const x=M*y-w*g;return Math.abs(x)<=b},y.nn=function(t,s,i,e,h,r,n,o,a,u,l,c){const f=Math.min(a,l),d=Math.max(a,l);if(r<f||d<h)return!1;const p=Math.min(u,c),m=Math.max(u,c);if(o<p||m<n)return!1;const g=a-t+l-i,y=u-s+c-e,M=i-t,w=e-s,S=l-a,T=c-u,b=Math.abs(w*S-T*M),v=S*y-T*g;if(Math.abs(v)>b)return!1;const x=M*y-w*g;return Math.abs(x)<=b},y.an=function(t,s,i,e,h){const r=Math.min(t,i),n=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),u=h.un(),l=h.ln(),c=h.cn(),f=h.dn(),d=h.pn(),p=h.mn(),m=h.gn(),g=h.yn();return y.nn(t,s,i,e,r,n,o,a,u,l,c,f)||y.nn(t,s,i,e,r,n,o,a,c,f,d,p)||y.nn(t,s,i,e,r,n,o,a,d,p,m,g)||y.nn(t,s,i,e,r,n,o,a,m,g,u,l)},y.Mn=function(s,i,e,h,r){let n=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,h),u=Math.max(i,h),l=0;for(let t=r.length-4;l<=t;l+=2)if(y.nn(s,i,e,h,n,o,a,u,r[l],r[l+1],r[l+2],r[l+3]))return!0;return y.nn(s,i,e,h,n,o,a,u,r[l],r[l+1],r[0],r[1])};y.wn=function(t,s,i,e,h,r,n,o){const a=i-t,u=e-s,l=n-h,c=o-r,f=a*c-u*l;if(0==f)return 2;const d=((s-e)*(n-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(n-t)+(h-n)*(o-s))/f:2},y.Sn=function(t,s,i,e,h,r,n,o,a){const u=(n-h)*a,l=(o-r)*a;return y.wn(t,s,i,e,h-u,r-l,n+u,o+l)},y.Tn=function(t,s,i,e,h,r,n,o){const a=h-i,u=r-e,l=n-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,g=a*f+u*d,y=l*l+c*c,M=l*f+c*d,w=1/(p*y-m*m),S=(y*g-m*M)*w,T=(p*M-m*g)*w;return 0<=S&&0<=T&&S+T<=1},y.bn=function(t,s,i,e,h,r,n,o){const a=h-i,u=r-e,l=n-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,g=l*l+c*c,y=f*a+d*u,M=f*l+d*c,w=p*g-m*m,S=(g*y-m*M)/w,T=(p*M-m*y)/w,b=1-S-T;return[b,S,T]},y.vn=function(t,s,i,e,h,r,n,o,a,u,l,c){return[t*e+s*n+i*u,t*h+s*o+i*l,t*r+s*a+i*c]}}{let u=self.ks,s=null,i="";if("undefined"!=typeof document){const It=(s=document).querySelector("base");(i=It&&It.hasAttribute("href")?It.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}u.xn=function(){return i},u.Gn=function(){if(!s)return"";const t=s.location;return u.In(t.origin+t.pathname)+i},u.In=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},u.Cn=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},u._n=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},u.En=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},u.Dn=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},u.An=function(t){return t.replace(/\\/g,"/")},u.Nn=function(t,s){const i=t?u._n(t).slice(1):"";return s===i},u.Ln=function(t,s){let i,e;return u.Re(t)&&(i=u.Dn(t.name)),u.xe(t)&&(i=u.Dn(t)),u.Re(s)&&(e=u.Dn(s.name)),u.xe(s)&&(e=u.Dn(s)),i===e},u.On=function(t){t=u.An(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",h=t,r,n="";0<i&&(e=t.slice(0,i),h=t.slice(i));const o=(r=h).lastIndexOf("."),a=(0<o&&(n=h.slice(o),r=h.slice(0,-n.length)),s+e+h);return{dir:e,Rn:h,name:r,root:s,ext:n,Pn:a}},u.kn=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},u.Fn=function(t){try{t()}catch(t){u.isDebug&&console.warn("Swallowed exception: ",t)}},u.jn=function(){},u.gh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},u.zn=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},u.Bn=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},u.Un=function(t,s){t.length=s},u.Wn=function(t){t&&0!==t.length&&u.Un(t,0)},u.Qn=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];u.Un(t,0)}u.Un(i,0)}},u.Jn=function(s,i,e){const h=s.length;if(!((i|=0)<=h))for(let t=h;t<i;++t)s.push(e)},u.Vn=function(t,s,i){const e=t.length;(s|=0)<e?u.Un(t,s):e<s&&u.Jn(t,s,i)},u.Yn=function(t,s){u.Wn(t),u.Zh(t,s)},u.Zh=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},u.Hn=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];u.Un(i,s)}},u.qn=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},u.Zn=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},u.Xn=function(i,e){let h=[],r=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?h.push(t):(i[r]=t,++r)}return u.Un(i,r),h},u.Kn=function(i,e){let t=i.length,h=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[h++]=t)}return u.Un(i,h),t-h},u.$n=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},u.eo=function(t,s){if(!u.$n(t,s))throw new RangeError("array index out of bounds")},u.ho=function(t){return t.slice()},u.ro=function(t,i){let e=[];for(let s of t)if(u.Ae(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else u.je(s)?e.push(u.ro(s,i)):e.push(s);return e},u.no=function(s){let i=[];for(let t of s)i.push(t.slice());return i},u.ao=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},u.uo=function(t,s,i){const e=new Set;for(const h of t.values())s(h)&&(i?e.add(i(h)):e.add(h));return e},u.lo=function(t,s){return t.union?t.union(s):new Set([...t,...s])},u.co=function(t,s){for(const i of s)t.add(i);return t},u.first=function(s){for(let t of s)return t;return null},u.xor=function(t,s){return!t!=!s},u.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},u.fo=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},u.do=function(o,a){return o.length?new Promise((i,e)=>{let h=[],r=0,n=!1;for(let s=0,t=o.length;s<t;++s)h.push(void 0),o[s].then(t=>{n||(h[s]=t,++r===o.length?i(h):a(r,o.length))}).catch(t=>{n=!0,e(t)})}):Promise.resolve([])};let e=[],h=(u.po=function(t){e.push(t)},u.mo=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),r=new Map,n=new MessageChannel,o=(n.port2.onmessage=function(t){const s=t.data,i=r.get(s);r.delete(s),i&&i(performance.now())},u.yo=function(t){const s=h++;return r.set(s,t),n.port1.postMessage(s),s},u.Mo=function(t){r.delete(t)},u.wo=u.yo,u.So=function(){return new Promise(t=>u.wo(t))},new Set);u.To=function(s){const i=self.requestAnimationFrame(async t=>{await u.So(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},u.bo=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const r=self.ks;r.vo=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},r.xo=function(t){return!r.vo(t)},r.Go=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},r.Io=function(t,s){return fetch(t,s).then(t=>(r.Go(t),t))},r.Co=function(t){return r.Io(t).then(t=>t.text())},r._o=function(t){return r.Io(t).then(t=>t.json())},r.Eo=function(t){return r.Io(t).then(t=>t.blob())},r.Do=function(t){return r.Io(t).then(t=>t.arrayBuffer())},r.Ao=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},r.No=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},r.Lo=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},r.Oo=function(t){return r.Lo(t).then(t=>JSON.parse(t))},r.Ro=async function(t,s){let i=URL.createObjectURL(t);try{const e=await r.Ao(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},r.Po=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},r.ko=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=r.Sr(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},r.Fo=function(t,s,i){const e=r.Po(t.width,t.height),h=e.getContext("2d");return h.drawImage(t,0,0),r.ko(e,s,i)},r.jo=function(t,s,i){if(r.Ui.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>r.Fo(t,s,i));if(r.Ui.ImageBitmap)return createImageBitmap(t).then(t=>r.Fo(t,s,i));{const e=r.Po(t.width,t.height),h=e.getContext("2d");return h.putImageData(t,0,0),r.ko(e,s,i)}},r.zo=function(t,s){t.clear();for(const i of s)t.add(i)},r.Bo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},r.Uo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},r.Wo=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}},r.Qo=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}}return t},r.Jo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const h of t)"-"===h?0<e&&(i=!0):i?(s+=h.toUpperCase(),i=!1):s+=h,++e;return s},r.Vo=function(t){return"object"==typeof t&&"function"==typeof t.next},r.Yo=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},u=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,u;const l=self.ks,Ct=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,_t=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;l.Ho=class{constructor(t,s,i,e){this.qo=NaN,this.Zo=NaN,this.Xo=NaN,this.Ko=NaN,this.qo=0,this.Zo=0,this.Xo=0,this.Ko=0,t instanceof l.Ho?this.set(t):this.$o(t||0,s||0,i||0,e||0)}ta(t,s,i){return this.qo=+t,this.Zo=+s,this.Xo=+i,this.Sr(),this}$o(t,s,i,e){return this.qo=+t,this.Zo=+s,this.Xo=+i,this.Ko=+e,this.Sr(),this}set(t){return this.qo=t.qo,this.Zo=t.Zo,this.Xo=t.Xo,this.Ko=t.Ko,this}C(t){return this.set(t)}add(t){this.qo+=t.qo,this.Zo+=t.Zo,this.Xo+=t.Xo,this.Ko+=t.Ko,this.Sr()}ia(t,s,i,e=0){this.qo+=+t,this.Zo+=+s,this.Xo+=+i,this.Ko+=+e,this.Sr()}ea(t){this.ra(Math.max(this.qo,t.qo)-Math.min(this.qo,t.qo)),this.na(Math.max(this.Zo,t.Zo)-Math.min(this.Zo,t.Zo)),this.oa(Math.max(this.Xo,t.Xo)-Math.min(this.Xo,t.Xo)),this.aa(Math.max(this.Ko,t.Ko)-Math.min(this.Ko,t.Ko)),this.Sr()}ua(t){this.qo=t.qo,this.Zo=t.Zo,this.Xo=t.Xo}ra(t){this.qo=l.Sr(+t,0,1)}la(){return this.qo}na(t){this.Zo=l.Sr(+t,0,1)}ca(){return this.Zo}oa(t){this.Xo=l.Sr(+t,0,1)}fa(){return this.Xo}aa(t){this.Ko=l.Sr(+t,0,1)}da(){return this.Ko}clone(){return l.lr(l.Ho,this.qo,this.Zo,this.Xo,this.Ko)}toArray(){return[this.qo,this.Zo,this.Xo,this.Ko]}pa(){return new Float64Array(this.toArray())}ma(t,s){t[s++]=this.qo,t[s++]=this.Zo,t[s++]=this.Xo,t[s]=this.Ko}ya(t,s){t[s++]=this.qo,t[s++]=this.Zo,t[s]=this.Xo}equals(t){return this.qo===t.qo&&this.Zo===t.Zo&&this.Xo===t.Xo&&this.Ko===t.Ko}Ma(t){return this.qo===t.qo&&this.Zo===t.Zo&&this.Xo===t.Xo}wa(t,s,i){return this.qo===t&&this.Zo===s&&this.Xo===i}Sa(t,s,i,e){return this.qo===t&&this.Zo===s&&this.Xo===i&&this.Ko===e}Ta(t,s){return t[s]===Math.fround(this.qo)&&t[s+1]===Math.fround(this.Zo)&&t[s+2]===Math.fround(this.Xo)&&t[s+3]===Math.fround(this.Ko)}ba(t,s){return t[s]===Math.fround(this.qo)&&t[s+1]===Math.fround(this.Zo)&&t[s+2]===Math.fround(this.Xo)}multiply(t){this.qo*=t.qo,this.Zo*=t.Zo,this.Xo*=t.Xo,this.Ko*=t.Ko}xa(t){this.qo*=t,this.Zo*=t,this.Xo*=t,this.Ko*=t}Ga(){return this.qo*=this.Ko,this.Zo*=this.Ko,this.Xo*=this.Ko,this}Ia(){return this.qo/=this.Ko,this.Zo/=this.Ko,this.Xo/=this.Ko,this}Sr(){return this.qo=l.Sr(this.qo,0,1),this.Zo=l.Sr(this.Zo,0,1),this.Xo=l.Sr(this.Xo,0,1),this.Ko=l.Sr(this.Ko,0,1),this}Ca(t){this.qo=l.Xr(t),this.Zo=l.Kr(t),this.Xo=l.$r(t),this.Ko=l.tn(t)}_a(t,s,i){const e=l.pe(t)?t:this.la(),h=l.pe(s)?s:this.ca(),r=l.pe(i)?i:this.fa();return`rgb(${100*e}%, ${100*h}%, ${100*r}%)`}Ea(t,s,i,e){const h=l.pe(t)?t:this.la(),r=l.pe(s)?s:this.ca(),n=l.pe(i)?i:this.fa(),o=l.pe(e)?e:this.da();return`rgba(${100*h}%, ${100*r}%, ${100*n}%, ${o})`}Da(){const t=Math.round(255*this.la()),s=Math.round(255*this.ca()),i=Math.round(255*this.fa());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}Aa(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.ra(s),isFinite(i)&&this.na(i),isFinite(e)&&this.oa(e),this.aa(1),!0}Na(){const t=Math.round(255*this.la()),s=Math.round(255*this.ca()),i=Math.round(255*this.fa());return t+`, ${s}, `+i}La(){const t=Math.round(255*this.la()),s=Math.round(255*this.ca()),i=Math.round(255*this.fa());return[t,s,i]}Oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.ra(i),isFinite(e)&&this.na(e),isFinite(h)&&this.oa(h),this.aa(1),!0}Ra(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.ra(i),isFinite(e)&&this.na(e),isFinite(h)&&this.oa(h),this.aa(1),!0}Pa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.ra(i),isFinite(e)&&this.na(e),isFinite(h)&&this.oa(h),isFinite(r)&&this.aa(r),!0}ka(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.ra(i),isFinite(e)&&this.na(e),isFinite(h)&&this.oa(h),isFinite(r)&&this.aa(r),!0}Fa(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.Ra(t):this.Oa(t);if(t.startsWith("rgba("))return t.includes("%")?this.ka(t):this.Pa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.ja(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.Ra(t):4===s.length&&this.ka(t):3===s.length?this.Oa(t):4===s.length&&this.Pa(t)}}return this.Aa(t)}toJSON(){return[this.qo,this.Zo,this.Xo,this.Ko]}za(t,s,i,e){let h,r,n;if(t%=360,s=l.Sr(s,0,100),i=l.Sr(i,0,100),e=l.Sr(e,0,1),t/=360,i/=100,0==(s/=100))h=r=n=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;h=u(a,o,t+1/3),r=u(a,o,t),n=u(a,o,t-1/3)}return this.ra(h),this.na(r),this.oa(n),this.aa(e),this}ja(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=Ct.exec(s),e=_t.exec(s);return i&&4===i.length?(this.za(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.za(+i[1],+i[2],+i[3],+i[4]),0))}Ba(){const t=this.qo,s=this.Zo,i=this.Xo,e=this.Ko,h=l.Ho.Ua(t,s,i),r=l.Ho.Wa(t,s,i),n=l.Ho.Qa(t,s,i);return`hsla(${h}, ${r}%, ${n}%, ${e})`}Ja(){const t=this.qo,s=this.Zo,i=this.Xo;return[l.Ho.Ua(t,s,i),l.Ho.Wa(t,s,i),l.Ho.Qa(t,s,i),this.Ko]}Va(t){!Array.isArray(t)||t.length<3||(this.qo=t[0],this.Zo=t[1],this.Xo=t[2],this.Ko=4<=t.length?t[3]:1)}set r(t){this.ra(t)}get r(){return this.la()}set g(t){this.na(t)}get g(){return this.ca()}set b(t){this.oa(t)}get b(){return this.fa()}set a(t){this.aa(t)}get a(){return this.da()}Ya(t,s){switch(t){case 0:this.ra(s);break;case 1:this.na(s);break;case 2:this.oa(s);break;case 3:this.aa(s);break;default:throw new RangeError("invalid color index")}}Ha(t){switch(t){case 0:return this.la();case 1:return this.ca();case 2:return this.fa();case 3:return this.da();default:throw new RangeError("invalid color index")}}static qa(t,s){let i,e;if(Array.isArray(t))(i=new l.Ho).Va(t);else{if(!(t instanceof l.Ho))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new l.Ho).Va(s);else{if(!(s instanceof l.Ho))throw new Error("unexpected type");e=s}return i.equals(e)}static Za(t,s){return l.Sr(Math.max(t,s)-Math.min(t,s),0,1)}static Xa(t,s){const i=new l.Ho;return i.ra(Math.max(t.qo,s.qo)-Math.min(t.qo,s.qo)),i.na(Math.max(t.Zo,s.Zo)-Math.min(t.Zo,s.Zo)),i.oa(Math.max(t.Xo,s.Xo)-Math.min(t.Xo,s.Xo)),i.aa(Math.max(t.Ko,s.Ko)-Math.min(t.Ko,s.Ko)),i}static Ka(t,s){const i=new l.Ho(0,0,0,1);return i.ra(Math.max(t.qo,s.qo)-Math.min(t.qo,s.qo)),i.na(Math.max(t.Zo,s.Zo)-Math.min(t.Zo,s.Zo)),i.oa(Math.max(t.Xo,s.Xo)-Math.min(t.Xo,s.Xo)),i}static Ua(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;let r=0;switch(e){case t:r=(s-i)/(e-h)+(s<i?6:0);break;case s:r=(i-t)/(e-h)+2;break;case i:r=(t-s)/(e-h)+4}return Math.round(r/6*360)}static Wa(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;const r=(e+h)/2,n=e-h,o=.5<r?n/(2-e-h):n/(e+h);return Math.round(100*o)}static Qa(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i),r=(e+h)/2;return e?Math.round(100*r):0}},l.Ho.$a=Object.freeze(l.lr(l.Ho,1,1,1,1)),l.Ho.tu=Object.freeze(l.lr(l.Ho,0,0,0,1)),l.Ho.su=Object.freeze(l.lr(l.Ho,0,0,0,0))}{const Et=self.ks;Et.iu=class{constructor(t,s){this.eu=0,this.hu=0,t instanceof Et.iu?this.C(t):this.set(t||0,s||0)}set(t,s){this.eu=+t,this.hu=+s}C(t){this.eu=t.eu,this.hu=t.hu}equals(t){return this.eu===t.eu&&this.hu===t.hu}ru(t,s){return this.eu===t&&this.hu===s}Ta(t,s){return t[s]===Math.fround(this.eu)&&t[s+1]===Math.fround(this.hu)}nu(t){this.eu=+t}ou(){return this.eu}au(t){this.hu=+t}uu(){return this.hu}toArray(){return[this.eu,this.hu]}pa(){return new Float64Array(this.toArray())}ma(t,s){t[s++]=this.eu,t[s]=this.hu}offset(t,s){this.eu+=+t,this.hu+=+s}scale(t,s){this.eu*=t,this.hu*=s}_t(t,s){this.eu/=t,this.hu/=s}round(){this.eu=Math.round(this.eu),this.hu=Math.round(this.hu)}floor(){this.eu=Math.floor(this.eu),this.hu=Math.floor(this.hu)}ceil(){this.eu=Math.ceil(this.eu),this.hu=Math.ceil(this.hu)}angle(){return Et.Er(0,0,this.eu,this.hu)}lu(){return this.eu*this.eu+this.hu*this.hu}length(){return Et.Gr(this.eu,this.hu)}cu(t,s){const i=this.eu*s-this.hu*t;this.hu=this.hu*s+this.eu*t,this.eu=i}rotate(t){0!==t&&this.cu(Math.sin(t),Math.cos(t))}fu(t,s,i){0===t||s===this.eu&&i===this.hu||(this.eu-=s,this.hu-=i,this.cu(Math.sin(t),Math.cos(t)),this.eu+=+s,this.hu+=+i)}move(t,s){0!==s&&(this.eu+=Math.cos(t)*s,this.hu+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.eu/=t,this.hu/=t)}Sr(t,s){this.eu=Et.Sr(this.eu,t,s),this.hu=Et.Sr(this.hu,t,s)}Ot(t){return this.eu*t.eu+this.hu*t.hu}reverse(){this.eu=-this.eu,this.hu=-this.hu}du(){let t=this.eu;return this.eu=this.hu,this.hu=-t,this}}}{const Dt=self.ks;Dt.Rect=class{constructor(t,s,i,e){this.pu=NaN,this.mu=NaN,this.gu=NaN,this.yu=NaN,this.pu=0,this.mu=0,this.gu=0,this.yu=0,t instanceof Dt.Rect?this.C(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.pu=+t,this.mu=+s,this.gu=+i,this.yu=+e}Mu(t,s,i,e){s=+s,this.pu=t=+t,this.mu=s,this.gu=t+ +i,this.yu=s+ +e}C(t){this.pu=+t.pu,this.mu=+t.mu,this.gu=+t.gu,this.yu=+t.yu}clone(){return new Dt.Rect(this.pu,this.mu,this.gu,this.yu)}static wu(t,s){const i=new Dt.Rect;return i.Su(Math.min(t.pu,s.pu)),i.Tu(Math.min(t.mu,s.mu)),i.bu(Math.max(t.gu,s.gu)),i.vu(Math.max(t.yu,s.yu)),i}static xu(t){return new Dt.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.pu===t.pu&&this.mu===t.mu&&this.gu===t.gu&&this.yu===t.yu}Gu(t,s,i,e){return this.pu===t&&this.mu===s&&this.width()===i&&this.height()===e}Ta(t,s){return t[s]===Math.fround(this.pu)&&t[s+1]===Math.fround(this.mu)&&t[s+2]===Math.fround(this.gu)&&t[s+3]===Math.fround(this.yu)}Su(t){this.pu=+t}Iu(){return this.pu}Tu(t){this.mu=+t}Cu(){return this.mu}bu(t){this.gu=+t}_u(){return this.gu}vu(t){this.yu=+t}Eu(){return this.yu}toArray(){return[this.pu,this.mu,this.gu,this.yu]}pa(){return new Float64Array(this.toArray())}Du(){return new DOMRect(this.pu,this.mu,this.width(),this.height())}static Au(t){return Dt.lr(Dt.Rect,t.left,t.top,t.right,t.bottom)}ma(t,s){t[s++]=this.pu,t[s++]=this.mu,t[s++]=this.gu,t[s]=this.yu}Nu(t,s){t[s++]=this.pu,t[s++]=this.mu,t[s++]=this.gu,t[s++]=this.mu,t[s++]=this.gu,t[s++]=this.yu,t[s++]=this.pu,t[s]=this.yu}Lu(t,s,i){t[s++]=this.pu,t[s++]=this.mu,t[s++]=i,t[s++]=this.gu,t[s++]=this.mu,t[s++]=i,t[s++]=this.gu,t[s++]=this.yu,t[s++]=i,t[s++]=this.pu,t[s++]=this.yu,t[s]=i}width(){return this.gu-this.pu}height(){return this.yu-this.mu}Ou(){return(this.pu+this.gu)/2}Ru(){return(this.mu+this.yu)/2}offset(t,s){s=+s,this.pu+=t=+t,this.mu+=s,this.gu+=t,this.yu+=s}offsetLeft(t){this.pu+=+t}offsetTop(t){this.mu+=+t}Pu(t){this.gu+=+t}ku(t){this.yu+=+t}Fu(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.mu<this.yu?this.pu<this.gu?this.yu=this.mu+this.width():this.yu=this.mu-this.width():this.pu<this.gu?this.yu=this.mu-this.width():this.yu=this.mu+this.width()}ju(t,s){s=+s,this.pu-=t=+t,this.mu-=s,this.gu+=t,this.yu+=s}zu(t,s){s=+s,this.pu+=t=+t,this.mu+=s,this.gu-=t,this.yu-=s}multiply(t,s){this.pu*=t,this.mu*=s,this.gu*=t,this.yu*=s}_t(t,s){this.pu/=t,this.mu/=s,this.gu/=t,this.yu/=s}Bu(t){this.pu=+t-this.pu,this.gu=+t-this.gu}Uu(t){this.mu=+t-this.mu,this.yu=+t-this.yu}Wu(t,s){const i=this.width(),e=this.height(),h=this.Iu()+i*t,r=this.Cu()+e*s;this.Mu(h-e*s,r-i*t,e,i)}Qu(){const t=this.pu;this.pu=this.gu,this.gu=t}Ju(){const t=this.mu;this.mu=this.yu,this.yu=t}Vu(t){const s=this.mu;this.mu=+t-this.yu,this.yu=+t-s}round(){this.pu=Math.round(this.pu),this.mu=Math.round(this.mu),this.gu=Math.round(this.gu),this.yu=Math.round(this.yu)}Yu(){this.pu=Math.ceil(this.pu),this.mu=Math.ceil(this.mu),this.gu=Math.floor(this.gu),this.yu=Math.floor(this.yu)}Hu(){this.pu=Math.floor(this.pu),this.mu=Math.floor(this.mu),this.gu=Math.ceil(this.gu),this.yu=Math.ceil(this.yu)}floor(){this.pu=Math.floor(this.pu),this.mu=Math.floor(this.mu),this.gu=Math.floor(this.gu),this.yu=Math.floor(this.yu)}ceil(){this.pu=Math.ceil(this.pu),this.mu=Math.ceil(this.mu),this.gu=Math.ceil(this.gu),this.yu=Math.ceil(this.yu)}Sr(t,s,i,e){this.pu=Math.max(this.pu,+t),this.mu=Math.max(this.mu,+s),this.gu=Math.min(this.gu,+i),this.yu=Math.min(this.yu,+e)}qu(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.pu=Dt.Sr(this.pu,t,i),this.mu=Dt.Sr(this.mu,s,e),this.gu=Dt.Sr(this.gu,t,i),this.yu=Dt.Sr(this.yu,s,e)}normalize(){this.pu>this.gu&&this.Qu(),this.mu>this.yu&&this.Ju()}Zu(t){return!(t.gu<this.pu||t.yu<this.mu||t.pu>this.gu||t.mu>this.yu)}Xu(t,s,i){return!(t.gu+s<this.pu||t.yu+i<this.mu||t.pu+s>this.gu||t.mu+i>this.yu)}Ku(t,s){return t>=this.pu&&t<=this.gu&&s>=this.mu&&s<=this.yu}$u(t){return t.pu>=this.pu&&t.mu>=this.mu&&t.gu<=this.gu&&t.yu<=this.yu}tl(t){t.pu<this.pu&&(this.pu=+t.pu),t.mu<this.mu&&(this.mu=+t.mu),t.gu>this.gu&&(this.gu=+t.gu),t.yu>this.yu&&(this.yu=+t.yu)}sl(t){this.pu=Dt.Pt(t.pu,t.gu,this.pu),this.mu=Dt.Pt(t.mu,t.yu,this.mu),this.gu=Dt.Pt(t.pu,t.gu,this.gu),this.yu=Dt.Pt(t.mu,t.yu,this.yu)}}}{const At=self.ks;At.il=class{constructor(t,s,i,e,h,r,n,o){this.el=NaN,this.hl=NaN,this.rl=NaN,this.nl=NaN,this.ol=NaN,this.al=NaN,this.ul=NaN,this.ll=NaN,this.el=0,this.hl=0,this.rl=0,this.nl=0,this.ol=0,this.al=0,this.ul=0,this.ll=0,t instanceof At.il?this.C(t):this.set(t||0,s||0,i||0,e||0,h||0,r||0,n||0,o||0)}set(t,s,i,e,h,r,n,o){this.el=+t,this.hl=+s,this.rl=+i,this.nl=+e,this.ol=+h,this.al=+r,this.ul=+n,this.ll=+o}cl(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}C(t){this.el=t.el,this.hl=t.hl,this.rl=t.rl,this.nl=t.nl,this.ol=t.ol,this.al=t.al,this.ul=t.ul,this.ll=t.ll}equals(t){return this.el===t.el&&this.hl===t.hl&&this.rl===t.rl&&this.nl===t.nl&&this.ol===t.ol&&this.al===t.al&&this.ul===t.ul&&this.ll===t.ll}fl(t){this.el=+t}un(){return this.el}dl(t){this.hl=+t}ln(){return this.hl}pl(t){this.rl=+t}cn(){return this.rl}ml(t){this.nl=+t}dn(){return this.nl}gl(t){this.ol=+t}pn(){return this.ol}yl(t){this.al=+t}mn(){return this.al}Ml(t){this.ul=+t}gn(){return this.ul}wl(t){this.ll=+t}yn(){return this.ll}Sl(){return new DOMQuad(new DOMPoint(this.el,this.hl),new DOMPoint(this.rl,this.nl),new DOMPoint(this.ol,this.al),new DOMPoint(this.ul,this.ll))}static Tl(t){return At.lr(At.il,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.el,this.hl,this.rl,this.nl,this.ol,this.al,this.ul,this.ll]}pa(){return new Float64Array(this.toArray())}ma(t,s){t[s++]=this.el,t[s++]=this.hl,t[s++]=this.rl,t[s++]=this.nl,t[s++]=this.ol,t[s++]=this.al,t[s++]=this.ul,t[s]=this.ll}bl(t,s,i){t[s++]=this.el,t[s++]=this.hl,t[s++]=i,t[s++]=this.rl,t[s++]=this.nl,t[s++]=i,t[s++]=this.ol,t[s++]=this.al,t[s++]=i,t[s++]=this.ul,t[s++]=this.ll,t[s]=i}offset(t,s){s=+s,this.el+=t=+t,this.hl+=s,this.rl+=t,this.nl+=s,this.ol+=t,this.al+=s,this.ul+=t,this.ll+=s}round(){this.el=Math.round(this.el),this.hl=Math.round(this.hl),this.rl=Math.round(this.rl),this.nl=Math.round(this.nl),this.ol=Math.round(this.ol),this.al=Math.round(this.al),this.ul=Math.round(this.ul),this.ll=Math.round(this.ll)}floor(){this.el=Math.floor(this.el),this.hl=Math.floor(this.hl),this.rl=Math.floor(this.rl),this.nl=Math.floor(this.nl),this.ol=Math.floor(this.ol),this.al=Math.floor(this.al),this.ul=Math.floor(this.ul),this.ll=Math.floor(this.ll)}ceil(){this.el=Math.ceil(this.el),this.hl=Math.ceil(this.hl),this.rl=Math.ceil(this.rl),this.nl=Math.ceil(this.nl),this.ol=Math.ceil(this.ol),this.al=Math.ceil(this.al),this.ul=Math.ceil(this.ul),this.ll=Math.ceil(this.ll)}vl(t){this.el=t.pu,this.hl=t.mu,this.rl=t.gu,this.nl=t.mu,this.ol=t.gu,this.al=t.yu,this.ul=t.pu,this.ll=t.yu}xl(t,s){0===s?this.vl(t):this.Gl(t,Math.sin(s),Math.cos(s))}Gl(t,s,i){const e=t.pu*s,h=t.mu*s,r=t.gu*s,n=t.yu*s,o=t.pu*i,a=t.mu*i,u=t.gu*i,l=t.yu*i;this.el=o-h,this.hl=a+e,this.rl=u-h,this.nl=a+r,this.ol=u-n,this.al=l+r,this.ul=o-n,this.ll=l+e}Il(t){t.set(Math.min(this.el,this.rl,this.ol,this.ul),Math.min(this.hl,this.nl,this.al,this.ll),Math.max(this.el,this.rl,this.ol,this.ul),Math.max(this.hl,this.nl,this.al,this.ll))}Ku(t,s){let i=this.rl-this.el,e=this.nl-this.hl,h=this.ol-this.el,r=this.al-this.hl,n=t-this.el,o=s-this.hl,a=i*i+e*e,u=i*h+e*r,l=i*n+e*o,c=h*h+r*r,f=h*n+r*o,d=1/(a*c-u*u),p=(c*l-u*f)*d,m=(a*f-u*l)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.ul-this.el)*i+(e=this.ll-this.hl)*e)*f-(u=i*h+e*r)*(l=i*n+e*o))*(d=1/(a*c-u*u)),0<=(p=(c*l-u*f)*d)&&0<m&&p+m<1)}Ou(){return(this.el+this.rl+this.ol+this.ul)/4}Ru(){return(this.hl+this.nl+this.al+this.ll)/4}Cl(t,s,i,e){return!(!this.Ku(t,s)&&!this.Ku(i,e))||At.an(t,s,i,e,this)}_l(t){let s=t.Ou(),i=t.Ru();if(this.Ku(s,i))return!0;if(s=this.Ou(),i=this.Ru(),t.Ku(s,i))return!0;const e=this.el,h=this.hl,r=this.rl,n=this.nl,o=this.ol,a=this.al,u=this.ul,l=this.ll;return At.an(e,h,r,n,t)||At.an(r,n,o,a,t)||At.an(o,a,u,l,t)||At.an(u,l,e,h,t)}El(){const t=this.el,s=this.hl;this.el=this.rl,this.hl=this.nl,this.rl=this.ol,this.nl=this.al,this.ol=this.ul,this.al=this.ll,this.ul=t,this.ll=s}Dl(){this.Al(0,2),this.Al(1,3),this.Al(6,4),this.Al(7,5)}Nl(){this.Al(0,6),this.Al(1,7),this.Al(2,4),this.Al(3,5)}Ll(){this.Al(2,6),this.Al(3,7)}Al(t,s){const i=this.Ol(t);this.Rl(t,this.Ol(s)),this.Rl(s,i)}Ol(t){switch(t){case 0:return this.el;case 1:return this.hl;case 2:return this.rl;case 3:return this.nl;case 4:return this.ol;case 5:return this.al;case 6:return this.ul;case 7:return this.ll;default:throw new RangeError("invalid quad point index")}}Rl(t,s){switch(s=+s,t){case 0:this.el=s;break;case 1:this.hl=s;break;case 2:this.rl=s;break;case 3:this.nl=s;break;case 4:this.ol=s;break;case 5:this.al=s;break;case 6:this.ul=s;break;case 7:this.ll=s;break;default:throw new RangeError("invalid quad point index")}}}}{const Nt=self.ks,Lt=[0,0,1,0,1,1,0,1],Ot=Nt.lr(Nt.il);Nt.Pl=class extends Nt.nr{constructor(t,s=!0){super(),t=t||Lt,this.kl=Float64Array.from(t),this.Fl=new Nt.Rect,this.jl=!0,this.zl=s}cr(){}Bl(){return this.kl}Ul(){return this.kl.length/2}Wl(t){this.kl.length===t.length?this.kl.set(t):this.kl=Float64Array.from(t),this.jl=!0}Ql(){this.Wl(Lt)}C(t){this.Wl(t.kl)}Jl(){this.jl=!0}Vl(){if(this.jl){let i=this.kl,e=i[0],h=i[1],r=e,n=h;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>r&&(r=o),a<h&&(h=a),a>n&&(n=a)}this.Fl.set(e,h,r,n),this.jl=!1}}vl(t,s,i){let e=this.kl;8!==e.length&&(e=new Float64Array(8),this.kl=e),e[0]=t.Iu()-s,e[1]=t.Cu()-i,e[2]=t._u()-s,e[3]=t.Cu()-i,e[4]=t._u()-s,e[5]=t.Eu()-i,e[6]=t.Iu()-s,e[7]=t.Eu()-i,this.Fl.C(t),0===s&&0===i||this.Fl.offset(-s,-i),this.jl=!1}Yl(t,s,i){Ot.C(t),Ot.offset(s,i),this.Wl(Ot.toArray()),this.jl=!0}transform(t,s,i){let e=0,h=1;0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.Hl(t,s,e,h)}Hl(i,e,h,r){const n=this.kl;for(let t=0,s=n.length;t<s;t+=2){const o=t+1,a=n[t]*i,u=n[o]*e;n[t]=a*r-u*h,n[o]=u*r+a*h}this.jl=!0}offset(i,e){const h=this.kl;for(let t=0,s=h.length;t<s;t+=2)h[t]+=i,h[t+1]+=e}Ku(i,e){const h=this.kl;if(i===h[0]&&e===h[1])return!0;this.Vl();let t=this.Fl,r=t.Iu()-110,n=t.Cu()-101,o=t._u()+131,a=t.Eu()+120,u=0,l=0,c,f,d=0,p=0,m,g,y=(c=r<i?(u=r,i):(u=i,r),f=n<e?(l=n,e):(l=e,n),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),M=0;for(let t=0,s=h.length;t<s;t+=2){const w=(t+2)%s,S=h[t],T=h[t+1],b=h[w],v=h[1+w];Nt.nn(r,n,i,e,u,c,l,f,S,T,b,v)&&++y,Nt.nn(o,a,i,e,d,m,p,g,S,T,b,v)&&++M}return y%2==1||M%2==1}ql(t,c,f){const d=t.kl,p=this.kl;if(this.Ku(d[0]+c,d[1]+f))return!0;if(t.Ku(p[0]-c,p[1]-f))return!0;for(let s=0,l=p.length;s<l;s+=2){let t=(s+2)%l,i=p[s],e=p[s+1],h=p[t],r=p[1+t],n=0,o=0,a,u;a=i<h?(n=i,h):(n=h,i),u=e<r?(o=e,r):(o=r,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,M=d[m]+c,w=d[1+m]+f;if(Nt.nn(i,e,h,r,n,a,o,u,g,y,M,w))return!0}}return!1}Cl(i,e,h,r,n,o){if(this.Ku(h-i,r-e))return!0;if(this.Ku(n-i,o-e))return!0;let a=0,u=0,l,c;l=h<n?(a=h,n):(a=n,h),c=r<o?(u=r,o):(u=o,r);const f=this.kl;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(Nt.nn(h,r,n,o,a,l,u,c,p,m,g,y))return!0}return!1}Dl(i){const e=this.kl;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.jl=!0}Nl(i){const e=this.kl;for(let t=0,s=e.length;t<s;t+=2){const h=t+1;e[h]=2*i-e[h]}this.jl=!0}Ll(){const i=this.kl;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,h=i[t];i[t]=i[e],i[e]=h}this.jl=!0}Zl(){let i=this.kl,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.Ul()}Xl(){let i=this.kl,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.Ul()}Kl(){return this.kl}$l(){return this.Ul()}tc(){return this.zl}}}{const Rt=self.ks;Rt.ic=class extends Rt.nr{constructor(t){if(super(),this.ec=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}cr(){this.hc(),this.ec=null}rc(){return 0===this.ec.size}hc(){const t=this.ec;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.ec,h=e.get(t);h||(h=new Map,e.set(t,h)),h.set(s,i)}ei(t,s){const i=this.ec.get(t);return i&&i.get(s)}si(t,s){const i=this.ec.get(t);return!!i&&i.has(s)}nc(t,s){const i=this.ec,e=i.get(t);if(!e)return!1;const h=e.delete(s);return h&&0===e.size&&i.delete(t),h}oc(t){const s=this.ec,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,h]of s.entries())h.delete(t)&&0===h.size&&s.delete(e)}ac(){let t=0;for(const s of this.ec.values())t+=s.size;return t}*values(){for(const t of this.ec.values())yield*t.values()}*uc(){for(const[t,s]of this.ec.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.ec.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const Pt=self.ks;Pt.lc=class extends Pt.nr{constructor(){super(),this.fc=new Set,this.mc=[],this.yc=!1}cr(){this.hc()}hc(){this.fc.clear(),Pt.Wn(this.mc),this.yc=!1}Mc(t){this.fc.has(t)||(this.fc.add(t),this.yc)||this.mc.push(t)}si(t){return this.fc.has(t)}nc(t){this.fc.delete(t)&&(this.yc=!0)}ac(){return this.fc.size}rc(){return 0===this.fc.size}wc(){return this.yc&&(this.Sc(),this.yc=!1),this.mc}Sc(){const t=this.mc;Pt.Wn(t);for(const s of this.fc)t.push(s)}}}{const kt=self.ks,Ft=new Map,jt=new Map,zt=new Map,Bt=new Map,Ut=new Map,Wt=new Map,Qt=new Map,Jt=new Map,Vt=new Map,Yt=(Vt.set("linear","noease"),Vt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),Ht=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],qt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),Zt=(self.Tc=class hs{constructor(){}static vc(){return"default"}static xc(){return"noease"}static Gc(t){return qt.get(t)}static Ic(s,...i){this.Cc();let t,e=(s?(zt.has(s)||zt.set(s,new Map),[...(t=zt.get(s)).keys()].filter(t=>!hs._c(t,s)||hs._c(t,s).transition.IsForAnyPurpose())):[...(t=Ut).keys()]).sort();return[...jt.keys()].concat(e).filter(t=>!i.includes(t))}static Ec(){this.Cc();const t=[...Ut.keys()];return t.sort(),[...jt.keys()].concat(t)}static Dc(){this.Cc();const t=[...Ut.keys()];return t.sort(),t}static Ac(t){for(const s of Yt){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of Ht){const h=self.lang("ui.bars.timeline.short-eases."+e);if(h===t)return!0}}static Nc(t){return this.Cc(),[...jt.keys()].includes(t)}static Lc(t){const s=Vt.get(t);return s?Ft.get(s):hs.Nc(t)?Ft.get(t):Qt.has(t)?Qt.get(t):void 0}static Oc(t){return this.Cc(),Jt.get(t)}static Rc(t,s){this.Cc();const i=hs.Lc(t);if(i)return i;if(s)return zt.get(s).get(t);throw new Error("missing ease function")}static _c(t,s){this.Cc();const i=Bt.get(s);if(i)return i.get(t)}static Pc(t,s){this.Cc();const i=hs.Lc(t);return!!i||!!zt.get(s).get(t)}static kc(t){this.Cc();const s=hs.Lc(t);return s||Ut.get(t)}static Fc(t){return this.Cc(),Wt.get(t)}static jc(t){this.Cc();const s=this.Ec();return s[t]}static zc(t,s){this.Cc();const i=this.Ic(s);return i.indexOf(t)}static Bc(t){return this.zc(t)}static Cc(){0===Ft.size&&(this.Uc("default",()=>{}),this.Uc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Uc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Uc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Uc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Uc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Uc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Uc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Uc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Uc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Uc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Uc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Uc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Uc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Uc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Uc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Uc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Uc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Uc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Uc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Uc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Uc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Uc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Uc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Uc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Uc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Uc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Uc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Uc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Uc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Uc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Uc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Wc("cubicbezier",this.Qc),this.Wc("spline",this.Jc))}static Uc(t,s,i=!1){if("function"==typeof s)hs.Vc(t,s,"predefined");else{if(!kt.je(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const h=kt.lr(self.BuiltInTransition,t,i);h.SetFromJson(s),hs.Vc(t,(t,s,i,e)=>h.Yc(t,s,i,e),"predefined"),Jt.set(t,h)}else{const r=kt.lr(kt.Hc,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.qc(i),hs.Vc(t,(t,s,i,e)=>r.Yc(t,s,i,e),"predefined")}}}static Wc(t,s){hs.Vc(t,s,"private")}static Zc(t,s,i,e){this.Cc(),hs.Vc(t,s,"custom",i,e)}static Xc(t,s){if(!this.Nc(t)&&![...Qt.keys()].includes(t)){const i=zt.get(s),e=(i&&i.delete(t),Bt.get(s));e&&e.delete(t)}}static Vc(t,s,i,e,h){switch(i){case"predefined":Ft.set(t,s),jt.set(t,s);break;case"custom":if(e){zt.has(e)||zt.set(e,new Map),Bt.has(e)||Bt.set(e,new Map);const r=zt.get(e),n=(r.set(t,s),Bt.get(e));n.set(t,h)}else Ut.set(t,s),Wt.set(t,h);break;case"private":Ft.set(t,s),Qt.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Kc(t,s,i,e){return 0===e?s:i*t/e+s}static Qc(t,s,i,e,h){const r=s,n=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(h-s+3*i-3*e);return r+n+o+a}static Jc(t,s,i,e,h,r,n,o,a,u){if(e===h&&r===n)return t;const l=es(t,s,e,r,o,u),c=Kt(i,h,n,a),f=$t(i,h,n,a),d=ts(i,h,n,a);return ss(l,c,f,d)}static $c(t,s,i,e){const h=[],r=Kt(t,s,i,e),n=$t(t,s,i,e),o=ts(t,s,i,e);for(let t=0;t<Zt;++t){const a=ss(t*Xt,r,n,o);h.push(a)}return h}},11),Xt=1/(Zt-1),Kt=(t,s,i,e)=>e-3*i+3*s-t,$t=(t,s,i,e)=>3*i-6*s+3*t,ts=(t,s,i,e)=>3*(s-t),ss=(t,s,i,e)=>((s*t+i)*t+e)*t,is=(t,s,i,e)=>3*s*t*t+2*i*t+e,es=(n,t,s,i,e,h)=>{if(1==n)return 1;let o=0,r=1,a=h[r],u=Zt-1;for(Zt;r!=u&&a<=n;)r++,a=h[r],o+=Xt;r--;let l=(n-(a=h[r]))/(h[r+1]-a),c=o+l*Xt,f=Kt(t,s,i,e),d=$t(t,s,i,e),p=ts(t,s,i,e),m=is(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=ss(c,f,d,p)-n,y=is(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Xt,e=0,h,r;do{c=s+(i-s)/2;let t=ss(c,f,d,p)-n;0<t?i=c:s=c,h=1e-7<Math.abs(t),r=++e<10}while(h&&r);return c}}}{let o=function(t){rs.xe(t)};o;const rs=self.ks;rs.tf=class{constructor(t){this.if=[],this.mr=t||"",this.ef=0}cr(){this.hc(),this.if=null}hf(){return this.mr}hc(){rs.Qn(this.if),this.ef=0}rf(){return this.ef}nf(t=Math.random()*this.rf()){let s=0;for(const[i,e]of this.if)if(t<(s+=i))return e;return 0}uf(t,s){o(s),this.ef+=t,this.if.push([t,s])}lf(s,i){o(i);const e=0===s;for(let t=0;t<this.if.length;t++){const h=this.if[t],r=e||h[0]===s,n=h[1]===i;if(r&&n){this.if.splice(t,1),this.ef-=h[0];break}}}cf(){return JSON.stringify(this.if)}static ff(t,s){const i=new rs.tf(s),e=JSON.parse(t);for(const h of e){const r=h[0],n=h[1];i.uf(r,n)}return i}}}{let t=self.ks,i=0;t.df=class{constructor(t,s){this.pf=t,this.gf=s,this.yf=i++,this.pf.Mf("runtime","screen-reader-text",{type:"create",id:this.yf,text:this.gf})}cr(){this.pf.Mf("runtime","screen-reader-text",{type:"release",id:this.yf}),this.pf=null,this.gf="",this.yf=-1}wf(t){this.gf!==t&&(this.gf=t,this.pf.Mf("runtime","screen-reader-text",{type:"update",id:this.yf,text:this.gf}))}}}{const ns=self.ks;ns.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Sf=!1,this.Tf=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Tf)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Sf=!0}}}{const os=self.ks;os.Event.bf=class extends os.nr{constructor(t){super(),this.vf=t,this.xf=[],this.Gf=new Set,this.If=[],this.Cf=new Set,this._f=0,this.Ef=[]}cr(){0<this._f||(os.Wn(this.xf),this.Gf.clear(),os.Wn(this.If),this.Cf.clear(),os.Wn(this.Ef),os.cr(this))}Df(t,s){this.Af()?this.Ef.push({Nf:"add",Lf:t,capture:s}):s?this.Gf.has(t)||(this.xf.push(t),this.Gf.add(t)):this.Cf.has(t)||(this.If.push(t),this.Cf.add(t))}Of(t,s){this.Af()?this.Ef.push({Nf:"remove",Lf:t,capture:s}):s?this.Gf.has(t)&&(this.Gf.delete(t),os.qn(this.xf,t)):this.Cf.has(t)&&(this.Cf.delete(t),os.qn(this.If,t))}Rf(){return!this.xf.length&&!this.If.length}Af(){return 0<this._f}Pf(){const t=new Set,s=new Set;for(const i of this.Ef)if("add"===i.Nf)this.Df(i.Lf,i.capture),(i.capture?s:t).delete(i.Lf);else{if("remove"!==i.Nf)throw new Error("invalid op");(i.capture?(this.Gf.delete(i.Lf),s):(this.Cf.delete(i.Lf),t)).add(i.Lf)}os.Kn(this.If,t),os.Kn(this.xf,s),os.Wn(this.Ef)}kf(i){this.Ff();let e=!1;for(let t=0,s=this.xf.length;t<s;++t)if(this.xf[t](i),i.Sf){e=!0;break}if(!e)for(let t=0,s=this.If.length;t<s&&(this.If[t](i),!i.Sf);++t);return this.jf(),!i.defaultPrevented}zf(i){this.Ff();for(let t=0,s=this.xf.length;t<s;++t)this.xf[t](i);for(let t=0,s=this.If.length;t<s;++t)this.If[t](i);return this.jf(),!0}Ff(){this._f++}jf(){this._f--,0===this._f&&0<this.Ef.length&&this.Pf()}Bf(t){t?this.Ff():this.jf()}Uf(i){let e=[];for(let s=0,t=this.xf.length;s<t;++s){let t=this.xf[s];e.push(os.Wf(()=>t(i)))}for(let s=0,t=this.If.length;s<t;++s){let t=this.If[s];e.push(os.Wf(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}Qf(i){const e=[];this.Ff();for(let t=0,s=this.xf.length;t<s;++t){const h=this.xf[t](i);h instanceof Promise&&e.push(h)}for(let t=0,s=this.If.length;t<s;++t){const r=this.If[t](i);r instanceof Promise&&e.push(r)}return this.jf(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async Jf(t){return this.Qf(t)}async Vf(i){this.Ff();for(let t=0,s=this.xf.length;t<s;++t){const e=this.xf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.If.length;t<s;++t){const h=this.If[t](i);h instanceof Promise&&await h}return this.jf(),!i.defaultPrevented}*Yf(i){this.Ff();for(let t=0,s=this.xf.length;t<s;++t){const e=this.xf[t](i);os.Vo(e)&&(yield*e)}for(let t=0,s=this.If.length;t<s;++t){const h=this.If[t](i);os.Vo(h)&&(yield*h)}this.jf()}}}{const as=self.ks;as.Event.Hf=class extends as.nr{constructor(){super(),this.qf=new Map,this.Zf=!1}cr(){if(this.Zf)throw new Error("already released");this.Xf(),this.Zf=!0,as.cr(this)}dr(){return this.Zf}Xf(){if(this.qf){for(let t of this.qf.values())t.cr();this.qf.clear()}}Kf(t,s){let i=this.qf.get(t);return i||(s?(i=as.lr(as.Event.bf,t),this.qf.set(t,i),i):null)}$f(t){return this.qf.has(t)}addEventListener(t,s,i){let e=this.Kf(t,!0);e.Df(s,!!i)}removeEventListener(t,s,i){let e=this.Kf(t,!1);e&&(e.Of(s,!!i),e.Rf())&&this.qf.delete(t)}dispatchEvent(t){const s=this.Kf(t.type,!1);return!s||(t.cancelable?s.kf(t):s.zf(t))}t0(t){const s=this.Kf(t.type,!1);return s?(t.Tf=!0,s.Uf(t)):Promise.resolve(!0)}async s0(t){const s=this.Kf(t.type,!1);if(!s)return!0;this.qf.delete(t.type),t.Tf=!0;const i=await s.Uf(t);return s.cr(),i}async i0(t){const s=this.Kf(t.type,!1);return!s||s.Jf(t)}e0(t){const s=this.Kf(t.type,!1);return!s||s.Qf(t)}async h0(t){const s=this.Kf(t.type,!1);return!s||s.Vf(t)}r0(t){const s=this.Kf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.Yf(t)}Bf(t){for(const s of this.qf.values())s.Bf(t)}}}{let r=function(t){c=u&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(h){if(c=-1,l.length){let i=performance.now(),e=i,t=0,s;for(;n(l.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,l.length&&(u&&0===f&&void 0!==h?s<h.timeRemaining():e-i+s<o););if(-1===c&&l.length){let t=e-i,s=Math.max(a-t,4);r(s)}}},n=function(s){let t;try{t=s.Lf()}catch(t){return void s.reject(t)}s.resolve(t)},t=(r,s,n,self.ks),o=12,a=16,i=35,u="undefined"!=typeof requestIdleCallback,l=[],c=-1,f=0,h=t.ni.si("disable-asyncify");h&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.Wf=function(i){let e=null;return t.isDebug&&(e=t.fe()),new Promise((t,s)=>{l.push({Lf:i,resolve:t,reject:s,stack:e}),h?n(l.pop()):-1===c&&r(a)})},t.Wf.n0=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){r=-1},s=function(){n=-1,o=-1;let i=Date.now();for(let s of a)if(s.o0(i)){let t=s.a0();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+h,e);n=self.setTimeout(s,t)}},i=(t,s,self.ks),e=1e3,h=100,r=-1,n=(i.u0=function(){return-1===r&&(r=Date.now(),self.setTimeout(t,16)),r},-1),o=-1,a=new Set;i.l0=class{constructor(t,s){this.c0=t,this.f0=1e3*s,this.d0=0,this.p0=!1}m0(){let t=i.u0();this.d0=t+this.f0,this.p0||(a.add(this),this.p0=!0),-1===n?(o=this.d0,n=self.setTimeout(s,this.f0+h)):this.d0<o&&o>t+e&&(self.clearTimeout(n),o=this.d0,n=self.setTimeout(s,this.f0+h))}o0(t){return!(t>=this.d0)||(this.c0()?(this.d0=t+this.f0,!0):this.p0=!1)}a0(){return this.d0}g0(){this.p0&&(a.delete(this),this.p0=!1,0===a.size)&&-1!==n&&(self.clearTimeout(n),n=-1,o=-1)}cr(){this.g0(),this.c0=null}}}{const us=self.ks;us.y0=class ls{constructor(t){this.M0=!1,this.w0=t}S0(){this.M0||(this.M0=!0,this.w0&&(this.w0(),this.w0=null))}T0(){return this.M0}cr(){this.S0()}static cr(t){return new ls(()=>t.cr())}static b0(s,i,e,h,t){if(null==h)h=!1;else if("boolean"!=typeof h&&"object"!=typeof h)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const r=new us.v0;for(let t of i)s.addEventListener(t,e,h),r.Mc(us.lr(us.y0,()=>s.removeEventListener(t,e,h)));return r}return s.addEventListener(i,e,h),us.lr(us.y0,()=>s.removeEventListener(i,e,h))}},us.x0=class extends us.y0{G0(t){this.w0=t}},us.v0=class extends us.y0{constructor(...s){super(),this.I0=new Set;for(let t of s)this.Mc(t)}Mc(...s){if(this.M0)throw new Error("already disposed");for(let t of s)this.I0.add(t)}C0(t){if(this.M0)throw new Error("already disposed");this.I0.delete(t)}_0(){if(this.M0)throw new Error("already disposed");if(this.I0){for(let t of this.I0)t.S0();this.I0.clear()}}T0(){return this.M0}S0(){if(this.M0)throw new Error("already disposed");this.M0=!0;for(let t of this.I0)t.S0();this.I0.clear(),this.I0=null}cr(){this.S0()}}}{const cs=self.ks;cs.E0=class extends cs.nr{constructor(){super(),this.D0=0,this.hu=0,this.A0=0,this.N0=0}Mc(t){this.hu=(t=+t)-this.D0,this.A0=this.N0+this.hu,this.D0=this.A0-this.N0-this.hu,this.N0=this.A0}L0(t){this.N0-=+t}ei(){return this.N0}m0(){this.D0=0,this.hu=0,this.A0=0,this.N0=0}Set(t){this.D0=0,this.hu=0,this.A0=0,this.N0=+t}O0(t){this.D0=t.D0,this.hu=t.hu,this.A0=t.A0,this.N0=t.N0}cr(){}}}{const fs=self.ks,n={};n.R0=function(t){this.P0=t,this.right=this.P0.k0,this.left=this.P0.k0,this.parent=null,this.color=!1,this.key=null},n.F0=function(t){this.size=0,this.k0=new n.R0(this),this.k0.color=!1,this.root=this.k0,this.root.parent=this.k0,this.compare=t||this.j0},n.F0.prototype.j0=function(t,s){return t<s?-1:s<t?1:0},n.F0.prototype.clone=function(){var t=new n.F0(this.compare);return t.z0(this),t},n.F0.prototype.clear=function(){this.size=0,this.k0=new n.R0(this),this.k0.color=!1,this.root=this.k0,this.root.parent=this.k0},n.F0.prototype.B0=function(t){var s=t.right;t.right=s.left,s.left!=this.k0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.k0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},n.F0.prototype.U0=function(t){var s=t.left;t.left=s.right,s.right!=this.k0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.k0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},n.F0.prototype.W0=function(t){if(this.contains(t))this.Q0(t).key=t;else{for(var s=new n.R0(this),i=(s.key=t,this.k0),e=this.root;e!=this.k0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.k0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.k0,s.right=this.k0,s.color=!0,this.J0(s),this.size++}},n.F0.prototype.J0=function(t){for(;t!=this.k0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.B0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.k0&&this.U0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.U0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.k0&&this.B0(t.parent.parent))}this.root.color=!1},n.F0.prototype.V0=function(t){var s=t.left==this.k0||t.right==this.k0?t:this.Y0(t),i=s.left!=this.k0?s.left:s.right;i.parent=s.parent,s.parent==this.k0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.H0(i),this.size--},n.F0.prototype.H0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.B0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.U0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.B0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.U0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.B0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.U0(t.parent),this.root))}t.color=!1},n.F0.prototype.remove=function(t){var s;return(t=this.Q0(t))!=this.k0?(s=t.key,this.V0(t),s):null},n.F0.prototype.q0=function(t,s){this.remove(s)},n.F0.prototype.min=function(t){for(;t.left!=this.k0;)t=t.left;return t},n.F0.prototype.max=function(t){for(;t.right!=this.k0;)t=t.right;return t},n.F0.prototype.Y0=function(t){if(t.right!=this.k0)return this.min(t.right);for(var s=t.parent;s!=this.k0&&t==s.right;)s=(t=s).parent;return s},n.F0.prototype.Z0=function(t){if(t.left!=this.k0)return this.max(t.left);for(var s=t.parent;s!=this.k0&&t==s.left;)s=(t=s).parent;return s},n.F0.prototype.X0=function(t){if(0<this.size){var s=this.Q0(t);if(s==this.k0)return null;if(s.right!=this.k0)return this.min(s.right).key;for(var i=s.parent;i!=this.k0&&s==i.right;)i=(s=i).parent;return i!=this.k0?i.key:null}return null},n.F0.prototype.K0=function(t){if(0<this.size){var s=this.Q0(t);if(s==this.k0)return null;if(s.left!=this.k0)return this.max(s.left).key;for(var i=s.parent;i!=this.k0&&s==i.left;)i=(s=i).parent;return i!=this.k0?i.key:null}return null},n.F0.prototype.$0=function(){return this.min(this.root).key},n.F0.prototype.td=function(){return this.max(this.root).key},n.F0.prototype.Q0=function(t){for(var s=this.root;s!=this.k0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},n.F0.prototype.contains=function(t){return null!=this.Q0(t).key},n.F0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},n.F0.prototype.z0=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.W0(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.W0,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.W0(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.W0(t[e])},n.F0.prototype.sd=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.q0,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.remove(t[e])},n.F0.prototype.ed=function(t){if("array"==n.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==n.typeOf(t.forEach))return t.every(this.contains,this);if("function"==n.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==n.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},n.F0.prototype.range=function(t,s){var i=[];return this.hd(function(t){i.push(t)},t,s),i},n.F0.prototype.rd=function(t,s){if(!this.nd())for(var i=this.min(this.root);i!=this.k0;){if(t.call(s,i.key,this))return;i=this.Y0(i)}},n.F0.prototype.od=function(t,s,i){if(!this.nd())for(var e=this.Q0(s);e!=this.k0;){if(t.call(i,e.key,this))return;e=this.Y0(e)}},n.F0.prototype.ad=function(t,s,i){if(!this.nd())for(var e=this.min(this.root),h=this.Q0(s);e!=h;){if(t.call(i,e.key,this))return;e=this.Y0(e)}},n.F0.prototype.hd=function(t,s,i,e){if(!this.nd())for(var h=this.Q0(s),r=this.Q0(i);h!=r;){if(t.call(e,h.key,this))return;h=this.Y0(h)}},n.F0.prototype.ud=function(t,s){if(!this.nd())for(var i=this.max(this.root);i!=this.k0;){if(t.call(s,i.key,this))return;i=this.Z0(i)}},n.F0.prototype.forEach=function(t,s){if(!this.nd())for(var i=this.min(this.root);i!=this.k0;i=this.Y0(i))t.call(s,i.key,i.key,this)},n.F0.prototype.some=function(t,s){if(!this.nd())for(var i=this.min(this.root);i!=this.k0;i=this.Y0(i))if(t.call(s,i.key,i.key,this))return!0;return!1},n.F0.prototype.every=function(t,s){if(this.nd())return!1;for(var i=this.min(this.root);i!=this.k0;i=this.Y0(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},n.F0.prototype.map=function(t,s){var i=[];if(!this.nd())for(var e=this.min(this.root);e!=this.k0;e=this.Y0(e))i.push(t.call(s,e.key,e.key,this));return i},n.F0.prototype.filter=function(t,s){var i=[];if(!this.nd())for(var e=this.min(this.root);e!=this.k0;e=this.Y0(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},n.F0.prototype.getCount=function(){return this.size},n.F0.prototype.nd=function(){return 0==this.size},n.F0.prototype.isSubsetOf=function(t){var s=n.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.nd())return!0;for(var e=this.min(this.root);e!=this.k0;e=this.Y0(e))n.contains.call(t,t,e.key)&&i++;return i==this.getCount()},n.F0.prototype.intersection=function(t){var s=new n.F0(this.compare);if(!this.nd())for(var i=this.min(this.root);i!=this.k0;i=this.Y0(i))t.contains.call(t,i.key,i.key,this)&&s.W0(i.key);return s},fs.F0=class extends fs.nr{constructor(t){super(),this.ld=new n.F0(t),this.fd=!1,this.dd=new Set,this.pd=new Set}Mc(t){this.fd?this.ld.contains(t)?this.pd.delete(t):this.dd.add(t):this.ld.W0(t)}C0(t){this.fd?this.ld.contains(t)?this.pd.add(t):this.dd.delete(t):this.ld.remove(t)}si(t){return this.fd?!!this.dd.has(t)||!this.pd.has(t)&&this.ld.contains(t):this.ld.contains(t)}hc(){this.ld.clear(),this.dd.clear(),this.pd.clear()}toArray(){if(this.fd)throw new Error("cannot be used in queueing mode");return this.ld.getValues()}ac(){return this.ld.getCount()+this.dd.size-this.pd.size}rc(){return 0===this.ac()}md(){if(this.rc())throw new Error("empty set");if(this.fd)throw new Error("cannot be used in queueing mode");const t=this.ld,s=t.min(t.root);return s.key}gd(){if(this.rc())throw new Error("empty set");if(this.fd)throw new Error("cannot be used in queueing mode");const t=this.md();return this.C0(t),t}yd(t){if(this.fd!==(t=!!t)&&!(this.fd=t)){for(const s of this.pd)this.ld.remove(s);this.pd.clear();for(const i of this.dd)this.ld.W0(i);this.dd.clear()}}Md(t){this.ld.forEach(t)}*values(){if(!this.rc()){const s=this.ld;for(let t=s.min(s.root);t!=s.k0;t=s.Y0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ds=self.ks;ds.wd=class{constructor(t=ds.hardwareConcurrency){this.Sd=t,this.Td=[],this.bd=0}Mc(i){return new Promise((t,s)=>{this.Td.push({Lf:i,resolve:t,reject:s}),this.vd()})}xd(i){for(let t=0,s=this.Td.length;t<s;++t)if(this.Td[t].Lf===i)return t;return-1}Gd(t,s){const i=this.xd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.Td[i].resolve(s),this.Td.splice(i,1)}Id(t,s){const i=this.xd(t);if(-1===i)throw new Error("cannot find promise to reject");this.Td[i].reject(s),this.Td.splice(i,1)}async vd(){if(this.Td.length&&!(this.bd>=this.Sd)){this.bd++;const s=this.Td.shift();try{const t=await s.Lf();s.resolve(t)}catch(t){s.reject(t)}this.bd--,this.vd()}}static async Cd(t,s){let i=[],e=!1,h=[];for(;t--;)h.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(h),i}}}{const ps=self.ks;ps._d=class{constructor(t,s,i){this.c0=t,this.Ed=s,this.Dd=i||2*s,this.Ad=-1,this.Nd=-1/0,this.Ld=()=>this.Od(),this.Rd=!1,this.Pd=!1,this.kd=null}Fd(t){this.Pd=!!t}jd(){return void 0!==ps.Battery&&ps.Battery.IsOnBatteryPower()?this.Dd:this.Ed}zd(...e){if(-1===this.Ad){this.kd=e;let t=ps.u0(),s=t-this.Nd,i=this.jd();i<=s&&this.Pd?(this.Nd=t,this.Bd()):this.Ad=self.setTimeout(this.Ld,Math.max(i-s,4))}}Bd(){this.Rd=!0;const t=this.kd;this.kd=null,t?this.c0(...t):this.c0(),this.Rd=!1}m0(){this.Rd||(this.Ud(),this.kd=null,this.Nd=ps.u0())}Od(){this.Ad=-1,this.Nd=ps.u0(),this.Bd()}Ud(){-1!==this.Ad&&(self.clearTimeout(this.Ad),this.Ad=-1)}cr(){this.Ud(),this.c0=null,this.kd=null,this.Ld=null}}}{const ms=self.ks;ms.Wd=class{constructor(){this.Qd=new Map,this.Jd=!1,this.Vd=null,this.Yd=null,this.Hd=null,this.qd=null}Zd(t){this.Jd=!!t}Xd(){return this.Jd}Kd(t){this.Vd=t}$d(t){if(this.Vd)return this.Vd(t);throw new Error("no get base size callback set")}t1(t){this.Yd=t}s1(t,s,i,e,h,r){if(this.Yd)return this.Yd(t,s,i,e,h,r);throw new Error("no raster at size callback set")}i1(t){this.Hd=t}e1(t){if(!this.Hd)throw new Error("no release result callback set");this.Hd(t)}h1(t){this.qd=t}n1(){if(!this.qd)throw new Error("no redraw callback set");this.qd()}o1(t){let s=this.Qd.get(t);return s||(s=ms.lr(ms.a1,this,t),this.Qd.set(t,s)),s.u1(),s}l1(t){this.Qd.delete(t.c1())}f1(){for(const t of this.Qd.values())t.d1(),t.m1()}}}{const gs=self.ks;gs.a1=class{constructor(t,s){this.M1=t,this.w1=s,this.S1=0,this.T1=0,this.b1=0,this.v1=this.M1.$d(s).then(t=>{this.M1&&(this.T1=t[0],this.b1=t[1],this.M1.n1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.G1=!0,this.M1&&this.M1.n1()}),this.I1=0,this.C1=0,this._1=0,this.E1=0,this.D1=!1,this.A1=null,this.N1=!1,this.G1=!1}cr(){if(this.S1<=0)throw new Error("already released");this.S1--,0===this.S1&&this.L1()}d1(){this.A1&&(this.M1.e1(this.A1),this.A1=null)}L1(){this.d1(),this.M1.l1(this),this.M1=null}c1(){return this.w1}u1(){this.S1++}O1(){return 0<this.S1}R1(){return this.A1}m1(){this.N1=!0}async P1(e,h,r){if(0!==h&&0!==r&&!this.G1&&!this.D1){let t=gs.Wr(Math.ceil(h)),s=gs.Wr(Math.ceil(r)),i=Math.max(t,s);if(4096<i){const n=4096/i;h*=n,r*=n,t=Math.min(Math.ceil(t*n),4096),s=Math.min(Math.ceil(s*n),4096)}if(h<t&&r<s){const o=h/r,a=t/s;r=o<a?(h=s*o,s):(h=t)/o}if(this.M1.Xd()&&(t=Math.ceil(h),s=Math.ceil(r)),!(t<=this.I1&&s<=this.C1)||this.N1){this.D1=!0,this.I1=t,this.C1=s;const u=await this.M1.s1(this.w1,e,this.I1,this.C1,h,r);this.M1&&(this.d1(),this.A1=u,this._1=h,this.E1=r,this.D1=!1,this.N1=!1,this.M1.n1())}}}F1(){return this.v1}j1(){return this.T1}z1(){return this.b1}B1(){return this._1}U1(){return this.E1}W1(){return this.G1}}}{let s=function(t){return Ss.get(t)};s;const c=self.ks,ys=(c.Q1="\ufeff",new Set("0123456789")),Ms=(c.J1=function(t){return ys.has(t)},new Set(" \t\n\r\u2028\u2029"));c.V1=function(t){return Ms.has(t)},c.Y1=function(t){return[...t].filter(t=>!c.V1(t)).join("")},c.H1=function(t){for(const s of t)if(!c.V1(s))return!1;return!0},c.q1=function(t){for(const s of t)if(!c.V1(s))return!1;return!0},c.Z1=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.X1=function(t){return[...t].filter(t=>!c.Z1(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.K1=function(t){return!c.V1(t)&&i&&i.test(t)};const ws=new Set("0123456789.+-e"),Ss=(c.tp=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ys.has(t))return!1;for(let t of s)if(!ws.has(t))return!1;return!0},c.sp=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.J1(t))break;--i}return s.substr(0,i)},c.ip=function(t){let s=c.sp(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),Ts=/[&<>"']/g,bs=(c.ep=function(t){return t.replace(Ts,s)},c.hp=function(t){let s=c.rp(t,"\\","\\\\");return s=c.rp(s,'"','\\"'),s=c.rp(s,"\t","\\t"),s=c.rp(s,"\r",""),c.rp(s,"\n","\\n")},c.np=function(t){let s=c.rp(t,"&","&amp;");return s=c.rp(s,"<","&lt;"),s=c.rp(s,">","&gt;"),c.rp(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),vs=(c.le=function(t){return t.replace(bs,"\\$&")},c.op=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.up=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,h=0,r,n=[];for(;-1<(r=t.indexOf(s,h));)n.push(r),h=r+e;return n},c.rp=function(t,s,i){return t.replaceAll(s,()=>i)},c.lp=function(t,s,i){return t.replace(new RegExp(c.le(s),"gi"),()=>i)},c.cp=function(t,s){"string"==typeof s?t.textContent=s:s.fp()?t.textContent=s.toString():(t.innerHTML=s.pp(),s instanceof c.Dh&&s.mp(t))},c.gp=function(t,s){return t instanceof c.HtmlString||t instanceof c.Dh?t.equals(s):s instanceof c.HtmlString||s instanceof c.Dh?s.equals(t):t===s},c.yp=function(i,...e){let h=i;for(let t=0,s=e.length;t<s;++t){const r=`{${t}}`;if(!i.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);h=h.replace(r,e[t].toString())}return h},c.Mp=function(i,...e){let h=i,r=-1,n=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(n=t,h=h.replace(o,e[t].toString())):-1===r&&(r=t)}if(0<=r&&0<=n&&r<n)throw new Error(`missing placeholder '${r}' in string substitution`);return h},c.wp=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.Sp=function(t,s){return s<t?1:t<s?-1:0},c.Tp=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),xs=(c.bp=function(t){const s=[];for(const i of vs.segment(t))s.push(i.segment);return s},c.vp=function*(t){for(const s of vs.segment(t))yield s.segment},c.xp=function(t){let s=0;for(const i of vs.segment(t))++s;return s},1073741824),Gs=1024*xs,Is={Gp:!(c.Ip=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<xs){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<Gs){let t=s/xs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/Gs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),Cp:!0,_p:!0,Ep:!0,Dp:!0};c.Ap=function(t,s){s=Object.assign({},Is,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,h=self.langPluralSub;if(s.Cp){const n=Math.floor(t/86400);0<n&&(t-=24*n*3600,i.push(h(".days",null,n)))}if(s._p){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(h(".hours",null,o)))}if(s.Ep){const a=Math.floor(t/60);(0<a||i.length||!s.Dp)&&(t-=60*a,i.push(h(".minutes",null,a)))}if(s.Dp){const u=Math.floor(t%60);i.push(h(".seconds",null,u))}const r=(s.Gp?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),r},c.Np=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),h=s-e.length;for(let t=0;t<h;++t)i+="0";return i+e},c.Lp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.Op=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.Vn(i,4,"0"),c.Vn(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const h=i[t]-e[t];if(0!=h)return h<0?-1:1}return 0},c.Rp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.Pp=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let h=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++h;return h},c.kp=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,h,r,n,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,h=1;h<=t.length;h++)n=s[e-1]===t[h-1]?o[h-1]:Math.min(o[h-1]+1,Math.min(r+1,o[h]+1)),o[h-1]=r,r=n;o[t.length]=r}return o[t.length]}}{let s=function(t,i,e){const h=o.get(e);if(!h)return"class"===e?i?"</span>":`<span class="bbclass${l++}">`:t;if("string"==typeof h){if("a"===h&&0===a.length||"abbr"===h&&0===u.length)return t;if("a"!==h||i){if("abbr"!==h||i)return"<"+i+h+">";{const r=parseInt(e.substring(3),10)-1;if(r<0||r>=u.length)throw new Error("invalid bbcode tip substitution");let t=u[r],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.rp(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const n=a[s];if("string"==typeof n)return`<a href="${a[s]}">`;if("function"==typeof n)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(h)){let t=h[0],s=h[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.ks),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,u=null,l=0,e=/\n/g;f.Dh=class{constructor(t,s){if(this.Fp=s&&s.jp?t:f.ep(t),this.zp="",this.Bp=!1,this.Up=[],this.Wp=[],s){if(this.Bp=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.Up=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.Wp=s.tips}}this.Qp=this.Fp.includes("["),this.Jp=this.Bp&&this.Fp.includes("\n"),this.Vp=!this.Qp&&!this.Jp&&!this.Fp.includes("&"),this.Yp=!1,this.Hp=[]}toString(){return this.Fp}valueOf(){return this.Fp}fp(){return this.Vp}qp(){return this.Qp?this.Fp.replace(i,""):this.Fp}pp(){if(this.Vp)return this.Fp;if(!this.zp&&this.Fp){let t=this.Fp;this.Qp&&(l=0,a=this.Up,u=this.Wp,t=t.replace(i,s),a=null,u=null),this.Jp&&(t=t.replace(e,"<br>")),this.zp=t}return this.zp}mp(i){if(this.Up.length)for(let t=0,s=this.Up.length;t<s;++t){const e=this.Up[t];if("function"==typeof e){const h=i.querySelector(".bblink"+t);if(!h)throw new Error("unable to attach BBString link handler");h.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.pp()===t.pp():t instanceof f.Dh?this.Fp===t.Fp:this.Fp===t}Zp(){if(!this.Yp){let e=[],t=this.Fp,h=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const r=i.index;if(!(0<r&&"\\"===t.charAt(r-1))){const n=i[0],o=i[1],a=i[2],u=t.substring(s,r);if(s=r+n.length,u&&e.push({text:u,Xp:h.slice(0)}),a)if(o){const l=a.toLowerCase();for(let t=h.length-1;0<=t;--t)if(h[t].tag===l){h.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,Xp:h.slice(0)})}else h.push({tag:t,param:s})}}}s<t.length&&e.push({text:t.substring(s),Xp:h.slice(0)});for(const c of e)c.text&&(c.text=this.Kp(c.text));this.Hp=e.map(t=>t.icon?f.lr(f.$p,{icon:t.icon,Xp:t.Xp}):f.lr(f.tm,{im:f.bp(t.text),Xp:t.Xp})),this.Yp=!0}return this.Hp}Kp(t){return t=f.rp(t,"\\[","["),f.rp(t,"\\\\","\\")}static hm(t){return f.lr(f.Dh,t,{jp:!0}).qp()}static rm(t){return t.replace(p,"")}}}{let u=function(t){return""!==t&&""!==t&&M.V1(t)},a=function(t){return Cs.has(t)},l=function(t){return M.K1(t)&&!a(t)},c=function(t){for(;0<t.length&&u(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};u,a,l,c,y;const M=self.ks,Cs=new Set("");M.nm=class{constructor(){this.om=[],this.um=null}lm(){return this.om}fm(){return this.om.length}pm(t){this.um=t}gm(t,s){let i=0,e=0,h=0,r=0,n=0;for(const o of t){if(-1===o.ym()){const a=s(o);o.Mm(a.height),o.wm(a.fontBoundingBoxAscent||0),o.Sm(a.fontBoundingBoxDescent||0),o.Tm(a.vm||0),o.xm()?o.Gm(a.width):o.Im()&&o.Cm(this.um)}i+=o.ym(),e=Math.max(e,o._m()),h=Math.max(h,o.Em()),r=Math.max(r,o.Dm()),n=Math.max(n,o.Am())}return{width:i,height:e,fontBoundingBoxAscent:h,fontBoundingBoxDescent:r,vm:n}}Nm(t,s,i,e,h,r){this.om.push(M.lr(M.nm.Lm,{Om:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:h,vm:r}))}nm(s,r,n,i,o){if("string"==typeof s&&(s=[M.lr(M.tm,{im:M.bp(s)})]),M.Wn(this.om),!(!s.length||1===s.length&&s[0].xm()&&s[0].rc()||n<2)){if(1===s.length){const a=s[0];if(a.xm()&&a.Rm()<=100&&!a.Pm()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,vm:h}=r(a);if(t+=o,a.Gm(t),a.Mm(s),a.wm(i||0),a.Sm(e||0),a.Tm(h||0),t<=n)return void this.Nm([a],t,s,i,e,h)}}let t;t="word"===i?this.km(s):"cjk"===i?this.Fm(s):this.jm(s),this.zm(t,r,n,o)}}km(t){let s=[],i=[],e=!1;for(const h of t){const r=h.Bm();if(h.Im())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.Um())if(y(n))0<i.length&&s.push(i),s.push([M.lr(M.tm,{im:["\n"],Xp:r})]),i=[];else if(0===i.length)i.push(M.lr(M.tm,{im:[n],Xp:r})),e=u(n);else{const o=u(n);if(o===e){const a=i.at(-1);a.Bm()===r?a.Wm(n):i.push(M.lr(M.tm,{im:[n],Xp:r}))}else s.push(i),i=[M.lr(M.tm,{im:[n],Xp:r})],e=o}}return 0<i.length&&s.push(i),s}Fm(t){let s=[],i=[],e=!1;for(const h of t){const r=h.Bm();if(h.Im())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.Um())if(y(n))0<i.length&&s.push(i),s.push([M.lr(M.tm,{im:["\n"],Xp:r})]),i=[];else{if(0===i.length)i.push(M.lr(M.tm,{im:[n],Xp:r}));else if(e||l(n)){const o=i.at(-1);o.Bm()===r?o.Wm(n):i.push(M.lr(M.tm,{im:[n],Xp:r}))}else s.push(i),i=[M.lr(M.tm,{im:[n],Xp:r})];e=a(n)}}return 0<i.length&&s.push(i),s}jm(t){const s=[];for(const i of t)if(i.xm()){const e=i.Um();M.Zh(s,e.map(t=>[M.lr(M.tm,{im:[t],Xp:i.Bm()})]))}else s.push([i]);return s}Qm(t){return t.map(t=>t.Jm())}Vm(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.xm()&&i[0].xm()&&i[0].Bm()===t.Bm()&&(t.Ym(i[0].Um()),e=1);for(let t=i.length;e<t;++e){const h=i[e];s.push(h.Jm())}}zm(t,s,i,e){let h=[],r=0,n=0,o=0,a=0,u=0;for(const l of t)if(1===l.length&&l[0].xm()&&1===l[0].Rm()&&y(l[0].Um()[0])){if(0===n){const c=M.lr(M.tm,{im:[" "],Xp:l[0].Bm()}),f=s(c);n=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,u=f.vm||0}this.Nm(h,r,n,o,a,u),h=[],r=0,n=0,o=0,a=0,u=0}else{const d=this.Qm(h),p=(this.Vm(d,l),this.gm(d,s)),m=p.width;if(i<=m)if(0<h.length&&this.Nm(h,r,n,o,a,u),h=[],l[0].xm()&&M.q1(l[0].Um()))r=0,n=0,o=0,a=0,u=0;else{this.Vm(h,l);const g=this.gm(h,s);r=g.width,n=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,u=g.vm}else h=d,r=m,n=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,u=p.vm}0<h.length&&this.Nm(h,r,n,o,a,u),this.Hm(s,e)}Hm(s,i){for(const e of this.om){const h=e.qm();if(h.length){let t=h.at(-1);if(t.xm()){const r=t.Um(),n=r.slice(0);if(c(n),0===n.length)e.Zm(-t.ym()),h.pop();else if(n.length<r.length){t.Xm(n);const o=s(t).width,a=t.ym()-o;t.Gm(o),e.Zm(-a)}0!==i&&0<h.length&&((t=h.at(-1)).Zm(i),e.Zm(i))}}}}hc(){M.Wn(this.om)}Km(){return this.om.reduce((t,s)=>Math.max(t,s.ym()),0)}$m(){return this.om.reduce((t,s)=>t+s._m(),0)}}}{const _s=self.ks;_s.nm.Lm=class{constructor(t){this.Hp=t.Om||[],this.tg=t.width||-1,this.sg=t.height||-1,this.ig=t.fontBoundingBoxAscent||-1,this.eg=t.fontBoundingBoxDescent||-1,this.hg=t.vm||-1,this.rg=0,this.ng=0}Om(){return this.Hp.values()}*og(){const s=this.Hp;for(let t=s.length-1;0<=t;--t)yield s[t]}qm(){return this.Hp}Zm(t){this.tg+=t}ym(){return this.tg}_m(){return this.sg}ag(){return this.ig}Dm(){return this.eg}Am(){return this.hg}ug(t){this.rg=t}lg(){return this.rg}fg(t){this.ng=t}dg(){return this.ng}}}{const Es=self.ks;Es.pg=class{constructor(t){this.mg=t.Xp||[],this.tg=t.width||-1,this.sg=t.height||-1,this.ig=t.fontBoundingBoxAscent||-1,this.eg=t.fontBoundingBoxDescent||-1,this.hg=t.vm||-1,this.rg=0,this.ng=0}xm(){return!1}Im(){return!1}Bm(){return this.mg}gg(s){const i=this.mg;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}yg(t){return!!this.gg(t)}Mg(){const t=new Map;for(const s of this.mg)t.set(s.tag,s.param);return t}Zm(t){this.tg+=t}Gm(t){this.tg=t}ym(){return this.tg}Mm(t){this.sg=t}_m(){return this.sg}wm(t){this.ig=t}Em(){return this.ig}Sm(t){this.eg=t}Dm(){return this.eg}Tm(t){this.hg=t}Am(){return this.hg}ug(t){this.rg=t}lg(){return this.rg}fg(t){this.ng=t}dg(){return this.ng}}}{const Ds=self.ks;Ds.tm=class extends Ds.pg{constructor(t){super(t),this.wg=t.im}xm(){return!0}Ym(t){Ds.Zh(this.wg,t),this.tg=-1,this.sg=-1,this.ig=-1,this.eg=-1,this.hg=-1}Wm(t){this.wg.push(t)}Jm(){return Ds.lr(Ds.tm,{im:this.wg.slice(0),Xp:this.mg,width:this.tg,height:this.sg,fontBoundingBoxAscent:this.ig,fontBoundingBoxDescent:this.eg,vm:this.hg})}Um(){return this.wg}Xm(t){this.wg=t}Rm(){return this.wg.length}rc(){return 0===this.wg.length}Pm(){return this.wg.includes("\n")}}}{const As=self.ks;As.$p=class extends As.pg{constructor(t){super(t),this.Sg=t.icon}Im(){return!0}Tg(){return this.Sg}Jm(){return As.lr(As.$p,{icon:this.Sg,Xp:this.mg,width:this.tg,height:this.sg,fontBoundingBoxAscent:this.ig,fontBoundingBoxDescent:this.eg,vm:this.hg})}bg(t){if(!t)return null;let s=Number(this.Sg);return String(s)===this.Sg?(s=Math.floor(s),t.vg(s)):t.xg(this.Sg)}Cm(t){const s=this.bg(t);this.tg=s?this.sg*s.ym()/s._m():0}Gg(t){const s=this.bg(t);return s?s.Gg():null}Rm(){return 1}}}{const Ns=self.ks;Ns.Ig=class{constructor(t){this.Cg=new Map,this._g=t.Eg,this.Dg=t.Ag}cr(){for(const t of this.Cg.values())t.cr();this.Cg.clear()}Ng(t){let s=this.Cg.get(t);if(!s){const i=this._g(t);s=Ns.lr(Ns.Lg,this,{source:t,Og:i}),this.Cg.set(t,s)}return s}Rg(t){return this.Cg.has(t)}Pg(t){const s=this.Cg.get(t);s&&s.cr(),this.Cg.delete(t)}async kg(t){return this.Dg(t)}}}{const Ls=self.ks;Ls.Lg=class{constructor(t,s){this.Fg=t,this.jg=s.source,this.zg=[],this.Bg=new Map,this.Ug=!1,this.Wg=!1,this.Qg=null;const i=s.Og.Jg;for(let t=0,s=i.length;t<s;++t){const e=i[t],h=Ls.lr(Ls.Vg,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.zg.push(h),e.tag&&this.Bg.set(e.tag.toLowerCase(),h)}}cr(){for(const t of this.zg)t.cr();Ls.Wn(this.zg),this.Bg.clear(),this.Fg=null,this.jg=null}Yg(){return this.Ug}Hg(){return this.Wg}qg(){return this.Qg||(this.Qg=this.Zg()),this.Qg}async Zg(){if(!this.Ug){this.Ug=!0,this.Wg=!0;const t=await this.Fg.kg(this.jg);if(this.Fg){const i=t.Jg;for(let t=0,s=Math.min(i.length,this.zg.length);t<s;++t){const e=i[t].Xg;this.zg[t].Kg(e)}this.Wg=!1}}}vg(t){return(t=Math.floor(t))<0||t>=this.zg.length?null:this.zg[t]}xg(t){return this.Bg.get(t.toLowerCase())||null}}}{const Os=self.ks;Os.Vg=class{constructor(t,s){this.$g=t,this.jg=s.source||null,this.ty=s.index,this.iy=s.tag,this.tg=s.width,this.sg=s.height,this.ey=null}cr(){this.tg=0,this.sg=0,this.$g=null}hy(){return this.jg}ym(){return this.tg}_m(){return this.sg}Kg(t){this.ey=t}Gg(){return this.ey}}}{let e=function(t,s,i,e){const h=js;xh.B(ks,i,s),xh.B(Fs,t,s),xh.Rt(h,ks,Fs),xh.normalize(h,h),e.set(h[0],h[1],h[2],xh.Ot(t,h))},n=function(t,s,i,e,h,r,n){const o=n.x,a=n.y,u=n.z,l=n.w,c=n.ny,f=n.oy,d=n.uy,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*h*m+u*i*d+u*r*g;if(l<=y)return!0;const M=o*e*c+o*t*p+a*h*f+a*s*m+u*r*d+u*i*g;return l<M},h=function(t,s,i,e){const h=e.x,r=e.y,n=e.z,o=e.w,a=h*t+r*s+n*i;return o<=a};e,n,h;const Rs=self.ks,Ps=self.Ss,xh=Ps._s,Uh=Ps.Es,vh=Ps.xs,ks=xh.create(),Fs=xh.create(),js=xh.create(),zs=Uh.create(),Bs=vh.create(),Us=xh.create(),Ws=xh.create(),Qs=xh.create(),Js=xh.create(),Vs=xh.create(),Ys=xh.create(),Hs=xh.create(),qs=xh.create(),Zs=Uh._(0,0,1,1);Rs.my={gy(t,s,i,e,h,r,n){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],u=e[2]*t+e[6]*s+e[10]*i+e[14],l=e[3]*t+e[7]*s+e[11]*i+e[15],c=h[0]*o+h[4]*a+h[8]*u+h[12]*l,f=h[1]*o+h[5]*a+h[9]*u+h[13]*l,d=h[2]*o+h[6]*a+h[10]*u+h[14]*l,p=h[3]*o+h[7]*a+h[11]*u+h[15]*l;return 0!=p&&(f*=p=1/p,d*=p,n[0]=(.5*(c*=p)+.5)*r[2]+r[0],n[1]=(.5*f+.5)*r[3]+r[1],n[2]=.5*(1+d),!0)},yy(t,s,i,e,h,r,n){const o=Bs,a=zs;return vh.multiply(o,h,e),null!==vh.A(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,Uh.zt(a,a,o),0!==a[3])&&(a[3]=1/a[3],n[0]=a[0]*a[3],n[1]=a[1]*a[3],n[2]=a[2]*a[3],!0)},My(t,s,i,e,h,r,n){const o=ks,a=Fs;if(!Rs.my.yy(t,s,0,e,h,r,o))return!1;if(!Rs.my.yy(t,s,1,e,h,r,a))return!1;let u=Fs,l=(xh.B(u,a,o),js),c=(xh.set(l,0,0,1),-i),f=xh.Ot(l,u),d=0;if(0===f){const p=xh.Ot(l,o)+c;if(0!==p)return!1}else if((d=-(xh.Ot(o,l)+c)/f)<0)return!1;return xh.Et(n,o,u,d),!0}};class Xs{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.ny=NaN,this.oy=NaN,this.uy=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.ny=0<t?1:0,this.oy=0<s?1:0,this.uy=0<i?1:0}}Rs.my.wy=class{constructor(){this.Sy=new Xs,this.Ty=new Xs,this.by=new Xs,this.vy=new Xs,this.xy=new Xs,this.Gy=new Xs}Iy(t,s){const i=Zs;Rs.my.yy(0,1,0,t,s,i,Us),Rs.my.yy(1,1,0,t,s,i,Ws),Rs.my.yy(0,0,0,t,s,i,Qs),Rs.my.yy(1,0,0,t,s,i,Js),Rs.my.yy(0,1,1,t,s,i,Vs),Rs.my.yy(1,1,1,t,s,i,Ys),Rs.my.yy(0,0,1,t,s,i,Hs),Rs.my.yy(1,0,1,t,s,i,qs),e(Qs,Us,Vs,this.Sy),e(Us,Ws,Ys,this.Ty),e(Ws,Js,qs,this.by),e(Js,Qs,Hs,this.vy),e(Hs,Vs,Ys,this.Gy),e(Js,Ws,Us,this.xy)}Cy(t,s,i,e,h,r){return n(t,s,i,e,h,r,this.Sy)&&n(t,s,i,e,h,r,this.Ty)&&n(t,s,i,e,h,r,this.by)&&n(t,s,i,e,h,r,this.vy)&&n(t,s,i,e,h,r,this.xy)&&n(t,s,i,e,h,r,this.Gy)}_y(t,s,i){return!h(t,s,i,this.xy)}}}{const Ks=self.ks,$s=self.Ss,xh=$s._s,Uh=$s.Es,vh=$s.xs,ti=vh.create(),si=xh._(0,0,0),ii=xh._(0,0,0),ei=xh._(0,0,0),hi=xh._(0,1,0),ri=(Uh._(0,0,0,0),new Ks.il),ni=new Ks.Rect,oi=new Ks.il(0,0,1,0,1,1,0,1),ai={Ey:1,Dy:1e4},ui=vh._(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Ks.my.Ay=class{constructor(t){t=Object.assign({},ai,t),this.tg=0,this.sg=0,this.Ny=Ks.br(45),this.Ly=Math.tan(this.Ny/2),this.Oy=vh.create(),this.Ry=vh.create(),this.Py=!1,this.ky=t.Ey,this.Fy=t.Dy,this.jy=[],this.zy=new Map,this.By=null,this.Uy=null,this.Wy=null,this.Qy=null,this.Jy=null,this.Vy=null,this.Yy=null,this.Hy=null,this.qy=null,this.Zy=null,this.Xy=null,this.Ky=null,this.$y=new Map,this.tM=null,this.sM=[],this.iM=new Map,this.eM=0,this.hM=0,this.rM=1,this.nM=[this.rM],this.oM=1,this.aM=[this.oM],this.uM=.5,this.lM=[this.uM],this.cM=0,this.fM=!0,this.dM=!1}pM(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}mM(){this.eM=0,this.hM=0,this.By=null,this.Uy=null,this.Wy=null,this.Qy=null,this.Jy=null,this.Vy=null,this.Yy=null,this.Hy=null,this.qy=null,this.Zy=null,this.Xy=null,this.Ky=null,this.gM()}yM(){this.mM(),this.tM=null}MM(){for(const t of this.jy)t.cr();this.mM()}ym(){return this.tg}_m(){return this.sg}wM(t){return this.SM()?100:t/(2*this.TM())}bM(t){if(this.SM()){const s=t/(2*this.TM());return s/this.wM(t)}return 1}vM(t){this.ky=t}xM(){return this.ky}GM(t){this.Fy=t}IM(){return this.Fy}CM(t){this.Ny=t,this.Ly=Math.tan(this.Ny/2)}_M(){return this.Ny}TM(){return this.Ly}EM(){this.Py=!1}DM(){this.Py=!0}SM(){return!this.Py}AM(){return this.Py}NM(t,s,i=.5,e=.5){const h=this.xM(),r=this.IM(),n=this._M();if(.5===i&&.5===e)this.LM()?vh.bt(t,n,s,h,r):vh.perspective(t,n,s,h,r);else{const o=2*(i=1-i)-2,a=2*i,u=2*e-2,l=2*e,c=this.TM()*h,f=c*s;vh.St(t,o*f,a*f,u*c,l*c,h,r),this.LM()&&vh.mul(t,ui,t)}}OM(t,s,i,e=1){const h=self.devicePixelRatio,r=2*this.wM(i)*h*this.TM()/i,n=s*r/(2*h*e),o=i*r/(2*h*e),a=-n,u=n,l=-o,c=o;this.LM()?vh.Gt(t,a,u,l,c,this.xM(),this.IM()):vh.ortho(t,a,u,l,c,this.xM(),this.IM())}RM(t,s,i,e,h,r=1){let n=1;this.SM()&&(n=200*this.TM()/h);const o=ei,a=(xh.set(o,n,-n,1),si),u=ii;xh.multiply(a,s,o),xh.multiply(u,i,o),vh.It(t,a,u,e||hi),o[2]=r,vh.scale(t,t,o)}PM(t,s,i,e,h,r,n,o){return xh.set(si,t,s,i),xh.set(ii,e,h,r),this.RM(ti,si,ii,hi,n,o),ti}kM(t){this.jy.push(t),this.zy.set(t.hf(),t)}FM(t){const s=this.jy.indexOf(t);-1!==s&&this.jy.splice(s,1),this.zy.delete(t.hf())}gM(){Ks.Wn(this.jy),this.zy.clear()}jM(t){return this.zy.get(t)||null}zM(){return this.By}BM(){this.UM(this.By)}WM(){return this.Uy}QM(){this.UM(this.Uy)}JM(){this.UM(this.Wy)}VM(){this.UM(this.Qy)}YM(){this.UM(this.Jy)}HM(){this.UM(this.Vy)}qM(){this.UM(this.Yy)}ZM(){this.UM(this.Hy)}XM(){this.UM(this.qy)}KM(){this.UM(this.Zy)}$M(){this.UM(this.Xy)}iw(){this.UM(this.Ky)}ew(t){this.tM=t}hw(){return this.tM}rw(t,s,i,e){let h=Ks.my.aw.ow(t,s,i,e),r=this.$y.get(h);return r||(r=Ks.lr(Ks.my.aw,this,t,s,i,e),this.$y.set(h,r)),r.uw(),r}lw(t){t.cw(),0===t.fw()&&(this.tM===t&&(this.tM=null),this.$y.delete(t.dw()),t.cr())}pw(t){Ks.Wn(this.sM),this.iM.clear();let s=0;for(const i of t){const e=i[0],h=i[1],r=i[2];this.sM.push([h,r]),this.iM.set(e,{number:s,mw:h,gw:r}),s++}}yw(t){return this.sM[t]}Mw(t){return this.yw(t)[0]}ww(t){return this.yw(t)[1]}Sw(t){const s=this.iM.get(t);if(void 0===s)throw new Error("invalid blend name");return s}Tw(t){const s=this.iM.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}bw(t){this.eM=t}xw(){return this.eM}Gw(t){this.hM=t,this.tM=null}Iw(){return this.hM}Lm(t,s,i,e){const h=Ks.Er(t,s,i,e),r=Math.sin(h),n=Math.cos(h),o=.5*this.rM,a=r*o,u=n*o,l=this.oM;2===l?this.Cw(t,s,0,i,e,0,a,u):1===l?this._w(t,s,0,i,e,0,a,u):this.Ew(t,s,0,i,e,0,a,u)}Dw(t,s,i,e,h,r){const n=Ks.Er(t,s,e,h),o=Math.sin(n),a=Math.cos(n),u=.5*this.rM,l=o*u,c=a*u,f=this.oM;2===f?this.Cw(t,s,i,e,h,r,l,c):1===f?this._w(t,s,i,e,h,r,l,c):this.Ew(t,s,i,e,h,r,l,c)}Cw(t,s,i,e,h,r,n,o){const a=this.uM,u=t+a-o,l=s+a-n,c=e+a+o,f=h+a+n,d=2*o,p=2*n,m=u+n,g=l-o,y=u-n+d,M=l+o+p,w=c+n,S=f-o,T=c-n-d,b=f+o-p;this.Aw(m,g,i,w,S,r,T,b,r,y,M,i,oi)}_w(t,s,i,e,h,r,n,o){const a=this.uM,u=t+a-o,l=s+a-n,c=e+a+o,f=h+a+n,d=u+n,p=l-o,m=u-n,g=l+o,y=c+n,M=f-o,w=c-n,S=f+o;this.Aw(d,p,i,y,M,r,w,S,r,m,g,i,oi)}Ew(t,s,i,e,h,r,n,o){const a=this.uM,u=t+a,l=s+a,c=e+a,f=h+a,d=u+n,p=l-o,m=u-n,g=l+o,y=c+n,M=f-o,w=c-n,S=f+o;this.Aw(d,p,i,y,M,r,w,S,r,m,g,i,oi)}Nw(t,s,i,e,h,r){const n=Ks.Er(t,s,i,e),o=Math.sin(n),a=Math.cos(n),u=.5*this.rM,l=o*u,c=a*u,f=this.oM;2===f?this.Lw(t,s,i,e,l,c,h,r):1===f?this.Ow(t,s,i,e,l,c,h,r):this.Rw(t,s,i,e,l,c,h,r)}Lw(t,s,i,e,h,r,n,o){const a=this.uM,u=t+a-r,l=s+a-h,c=i+a+r,f=e+a+h,d=2*r,p=2*h,m=u+h,g=l-r,y=u-h+d,M=l+r+p,w=c+h,S=f-r,T=c-h-d,b=f+r-p;ri.set(m,g,w,S,T,b,y,M),ni.set(n,0,o,0),this.Pw(ri,ni)}Ow(t,s,i,e,h,r,n,o){const a=this.uM,u=t+a-r,l=s+a-h,c=i+a+r,f=e+a+h,d=u+h,p=l-r,m=u-h,g=l+r,y=c+h,M=f-r,w=c-h,S=f+r;ri.set(d,p,y,M,w,S,m,g),ni.set(n,0,o,0),this.Pw(ri,ni)}Rw(t,s,i,e,h,r,n,o){const a=this.uM,u=t+a,l=s+a,c=i+a,f=e+a,d=u+h,p=l-r,m=u-h,g=l+r,y=c+h,M=f-r,w=c-h,S=f+r;ri.set(d,p,y,M,w,S,m,g),ni.set(n,0,o,0),this.Pw(ri,ni)}kw(t,s,i,e){const h=.5*this.rM,r=this.oM;2===r?this.Fw(t,s,i,e,h):1===r?this.jw(t,s,i,e,h):this.zw(t,s,i,e,h)}Fw(t,s,i,e,h){this.Cw(t,s,0,i,s,0,0,h),this.Cw(i,s,0,i,e,0,h,0),this.Cw(i,e,0,t,e,0,0,-h),this.Cw(t,e,0,t,s,0,-h,0)}jw(t,s,i,e,h){this._w(t,s,0,i,s,0,0,h),this._w(i,s,0,i,e,0,h,0),this._w(i,e,0,t,e,0,0,-h),this._w(t,e,0,t,s,0,-h,0)}zw(t,s,i,e,h){this.Ew(t,s,0,i,s,0,0,h),this.Ew(i,s,0,i,e,0,h,0),this.Ew(i,e,0,t,e,0,0,-h),this.Ew(t,e,0,t,s,0,-h,0)}Bw(t){this.kw(t.Iu(),t.Cu(),t._u(),t.Eu())}Uw(t){const s=Ks.Er(t.un(),t.ln(),t.cn(),t.dn()),i=Math.sin(s),e=Math.cos(s),h=.5*this.rM,r=i*h,n=e*h,o=this.oM;2===o?this.Ww(t,r,n):1===o?this.Qw(t,r,n):this.Jw(t,r,n)}Ww(t,s,i){this.Cw(t.un(),t.ln(),0,t.cn(),t.dn(),0,s,i),this.Cw(t.cn(),t.dn(),0,t.pn(),t.mn(),0,i,-s),this.Cw(t.pn(),t.mn(),0,t.gn(),t.yn(),0,-s,-i),this.Cw(t.gn(),t.yn(),0,t.un(),t.ln(),0,-i,s)}Qw(t,s,i){this._w(t.un(),t.ln(),0,t.cn(),t.dn(),0,s,i),this._w(t.cn(),t.dn(),0,t.pn(),t.mn(),0,i,-s),this._w(t.pn(),t.mn(),0,t.gn(),t.yn(),0,-s,-i),this._w(t.gn(),t.yn(),0,t.un(),t.ln(),0,-i,s)}Jw(t,s,i){this.Ew(t.un(),t.ln(),0,t.cn(),t.dn(),0,s,i),this.Ew(t.cn(),t.dn(),0,t.pn(),t.mn(),0,i,-s),this.Ew(t.pn(),t.mn(),0,t.gn(),t.yn(),0,-s,-i),this.Ew(t.gn(),t.yn(),0,t.un(),t.ln(),0,-i,s)}Vw(t){this.rM=t,this.nM[this.nM.length-1]=t}Yw(){return this.rM}Hw(t){if(100<=this.nM.length)throw new Error("pushed too many line widths - check push/pop pairs");this.nM.push(t),this.rM=t}qw(){if(this.nM.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.nM.pop(),this.rM=this.nM.at(-1)}Zw(){this.oM=0,this.aM[this.aM.length-1]=0}Xw(){this.oM=1,this.aM[this.aM.length-1]=0}Kw(){this.oM=2,this.aM[this.aM.length-1]=0}$w(t){if("butt"===t)this.tS();else if("square"===t)this.sS();else{if("zag"!==t)throw new Error("invalid line cap");this.iS()}}tS(){if(100<=this.aM.length)throw new Error("pushed too many line caps - check push/pop pairs");this.aM.push(0),this.oM=0}sS(){if(100<=this.aM.length)throw new Error("pushed too many line caps - check push/pop pairs");this.aM.push(1),this.oM=1}iS(){if(100<=this.aM.length)throw new Error("pushed too many line caps - check push/pop pairs");this.aM.push(2),this.oM=2}eS(){if(this.aM.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.aM.pop(),this.oM=this.aM.at(-1)}hS(t){this.uM=t,this.lM[this.lM.length-1]=t}rS(){return this.uM}nS(t){if(100<=this.lM.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.lM.push(t),this.uM=t}oS(){if(this.lM.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.lM.pop(),this.uM=this.lM.at(-1)}aS(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,h=s[0],r=s[1];for(let t=0;t<i;t+=2){const n=2*t,o=s[2+n],a=s[3+n],u=s[4+n],l=s[5+n];if(t===e)this.uS(h,r,o,a,u,l,u,l);else{const c=s[6+n],f=s[7+n];this.uS(h,r,o,a,u,l,c,f)}}}lS(){return 3}cS(){this.fS(!0),this.cM++}dS(){return this.cM}pS(){this.cM++}mS(t){this.fM=!!t}gS(){return this.fM}yS(t){this.dM=!!t}MS(){return this.dM}wS(){return!1}LM(){return!1}SS(){}TS(){}bS(){}vS(){return this.SS()+this.TS()+this.bS()}xS(){return Ks.lr(Ks.my.GS,this)}}}{const li=self.ks;li.my.IS=class{constructor(t,s){this.mr=s.name,this.CS=t,this._S=s.ES||0,this.DS=s.AS||0,this.NS=!!s.LS,this.OS=!!s.RS,this.PS=!!s.kS,this.FS=!!s.jS,this.zS=!!s.BS,this.US=!!s.WS,this.QS=!!s.JS,this.VS=!1,this.YS=this.NS||this.US||0!==this._S||0!==this.DS}cr(){this.CS=null}HS(){return this.CS}hf(){return this.mr}qS(){return 0!==this._S||0!==this.DS}ZS(){return this._S}XS(){return this.DS}KS(){return this.NS}$S(){return this.OS}tT(){return this.PS}sT(){return this.FS}iT(){return this.zS}eT(){return this.US}hT(){return this.QS}rT(){return this.VS}nT(){return this.YS}oT(){return!1}}}{const ci=self.ks;ci.my.aw=class{constructor(t,s,i,e,h){this.CS=t,this.S1=0,this.aT=null,this.uT="",this.lT=i,this.cT=ci.lr(ci.Ho),this.cT.set(e),this.fT=h,"string"==typeof s?this.uT=s:(this.aT=s,this.uT=this.aT.hf())}cr(){if(0<this.S1)throw new Error("releasing state group still in use");this.CS=null,this.aT=null,this.uT=""}dT(){const t=this.CS;t.UM(this.aT),t.pT(this.lT),t.mT(this.cT),t.Gw(this.fT),t.ew(this)}dw(){return ci.my.aw.ow(this.uT,this.lT,this.cT,this.fT)}uw(){++this.S1}cw(){--this.S1}fw(){return this.S1}gT(){this.aT=null}yT(t){if(this.aT=t.jM(this.uT),!this.aT)throw new Error("failed to restore shader program")}static ow(t,s,i,e){const h="string"==typeof t?t:t.hf();return h+","+s+","+i.la()+","+i.ca()+","+i.fa()+","+i.da()+","+e}}}{let e=function(t,s,i){const e=i.un(),h=i.ln(),r=i.cn()-e,n=i.dn()-h,o=i.gn()-e,a=i.yn()-h,u=r*t,l=n*t,c=o*s,f=a*s;return[e+u+c,h+l+f]};e;const I=self.ks,fi=I.lr(I.il);I.my.MT=class{constructor(t,s,i){this.wT=t,this.ST=s,this.TT=i,this.eu=NaN,this.hu=NaN,this.fT=NaN,this.bT=NaN,this.vT=NaN,this.eu=0,this.hu=0,this.fT=0,this.bT=0,this.vT=0}xT(t,s,i,e){this.eu=t,this.hu=s,this.bT=i,this.vT=e}GT(){return this.eu}IT(t){this.eu!==t&&(this.eu=t,this.wT.CT())}_T(){return this.hu}ET(t){this.hu!==t&&(this.hu=t,this.wT.CT())}DT(){return this.fT}AT(t){this.fT!==t&&(this.fT=Math.max(t,0),this.wT.CT())}NT(){return this.bT}LT(t){this.bT=t}OT(){return this.vT}RT(t){this.vT=t}PT(t,s,i){[this.eu,this.hu]=e(t.eu,t.hu,s),this.fT=t.fT,this.bT=I.Pt(i.Iu(),i._u(),t.bT),this.vT=I.Pt(i.Cu(),i.Eu(),t.vT)}kT(t,s,i){[this.eu,this.hu]=e(t.eu,t.hu,s),this.fT=t.fT,[this.bT,this.vT]=e(t.bT,t.vT,i)}FT(){return{x:this.GT(),y:this._T(),z:this.DT(),u:this.NT(),v:this.OT()}}jT(t){this.IT(t.x),this.ET(t.y),t.hasOwnProperty("z")&&this.AT(t.z),this.LT(t.u),this.RT(t.v)}zT(){return this.wT}BT(){return this.ST}UT(){return this.TT}},I.my.WT=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.QT=i,this.JT=t,this.VT=s||null,this.YT=[],this.HT=0,this.qT=0,this.ZT=1,this.XT=1,this.KT=0,this.$T=!1;const e=i-1,h=t-1;for(let s=0;s<t;++s){const r=[];for(let t=0;t<i;++t){const n=I.lr(I.my.MT,this,t,s),o=t/e,a=s/h;n.xT(o,a,o,a),r.push(n)}this.YT.push(r)}}cr(){I.Wn(this.YT)}t2(){return this.QT}s2(){return this.JT}i2(){return this.VT}e2(){return this.YT}CT(){this.$T=!0}h2(){if(this.$T){let t=1/0,s=1/0,i=-1/0,e=-1/0,h=0;for(const r of this.YT)for(const n of r){const o=n.GT(),a=n._T();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),h=Math.max(h,n.DT())}this.HT=t,this.qT=s,this.ZT=i,this.XT=e,this.KT=h,this.$T=!1}}n2(){return this.h2(),this.HT}o2(){return this.h2(),this.qT}a2(){return this.h2(),this.ZT}u2(){return this.h2(),this.XT}l2(){return this.h2(),this.KT}c2(){return 0<this.l2()}f2(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.QT||s<0||s>=this.JT?null:this.YT[s][t]}d2(t,i,e){const h=e instanceof I.Rect;if(t.t2()!==this.t2()||t.s2()!==this.s2())throw new Error("source mesh wrong size");const r=t.YT,n=this.YT;for(let t=0,s=n.length;t<s;++t){const o=r[t],a=n[t];for(let t=0,s=a.length;t<s;++t){const u=o[t],l=a[t];h?l.PT(u,i,e):l.kT(u,i,e)}}}m2(r){let n=this.YT,o=n[0];for(let t=1,s=n.length;t<s;++t){let i=n[t],e=o[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],u=i[t];fi.set(e.NT(),e.OT(),a.NT(),a.OT(),u.NT(),u.OT(),h.NT(),h.OT()),r.Aw(e.GT(),e._T(),e.DT(),a.GT(),a._T(),a.DT(),u.GT(),u._T(),u.DT(),h.GT(),h._T(),h.DT(),fi),e=a,h=u}o=i}}g2(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.YT,u=t[0];for(let r=1,n=t.length;r<n;++r){let i=t[r],e=u[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const l=u[t],c=i[t],[f,d,p]=a(e.GT(),e._T(),e.DT()),[m,g,y]=a(l.GT(),l._T(),l.DT()),[M,w,S]=a(c.GT(),c._T(),c.DT()),[T,b,v]=a(h.GT(),h._T(),h.DT());o.Dw(f,d,p,m,g,y),o.Dw(f,d,p,M,w,S),o.Dw(f,d,p,T,b,v),t===s-1&&o.Dw(m,g,y,M,w,S),r===n-1&&o.Dw(T,b,v,M,w,S),e=l,h=c}u=i}}M2(t){let i=.99999999,e=t.Bl(),h=[],r=this.t2()-1,n=this.s2()-1,o=1/r,a=1/n,u=r-1,l=n-1,c=e[0],f=e[1],d=I.Sr(Math.floor(c*r),0,u),p=I.Sr(Math.floor(f*n),0,l),m=!0,g=0,y=0,M=0,w=-1,S=()=>{c=I.Sr(I.Pt(c,g,M),0,1),f=I.Sr(I.Pt(f,y,M),0,1),h.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],h.push(c,f),d=I.Sr(Math.floor(c*r),0,u),p=I.Sr(Math.floor(f*n),0,l);const T=(t+2)%s;for(g=e[T],y=e[1+T],w=-1;;){if(1e6<h.length)throw new Error("Too many mesh poly points");const b=d*o,v=p*a,x=(d+1)*o,G=(p+1)*a;if(m=I.Tn(c,f,b,v,x,v,x,G),0!==w&&0<=(M=I.Sn(c,f,g,y,b,v,x,G,-.001))&&M<=i)S(),m=!m,w=0;else if(0<p&&2!==w&&0<=(M=I.Sn(c,f,g,y,b,v,x,v,.001))&&M<=i)S(),p--,m=!1,w=4;else if(d<u&&3!==w&&0<=(M=I.Sn(c,f,g,y,x,v,x,G,.001))&&M<=i)S(),d++,m=!1,w=1;else if(0<d&&1!==w&&0<=(M=I.Sn(c,f,g,y,b,v,b,G,.001))&&M<=i)S(),d--,m=!0,w=3;else{if(!(p<l&&4!==w&&0<=(M=I.Sn(c,f,g,y,b,G,x,G,.001))&&M<=i))break;S(),p++,m=!0,w=2}}}return I.lr(I.Pl,h)}w2(t,s){const i=this.S2(t);this.T2(i),s.Wl(i)}S2(t){const i=[],e=t.Bl();for(let t=0,s=e.length;t<s;t+=2){const h=e[t],r=e[t+1],[n,o]=this.b2(h,r);i.push(n,o)}return i}b2(t,s){const i=this.t2()-1,e=this.s2()-1,h=1/i,r=1/e,n=I.Sr(Math.floor(t*i),0,i-1),o=I.Sr(Math.floor(s*e),0,e-1),a=n*h,u=o*r,l=(n+1)*h,c=(o+1)*r,f=this.f2(n,o),d=this.f2(n+1,o+1),p=I.Tn(t,s,a,u,l,u,l,c),m=p?a+h:a,g=p?u:u+r,y=this.f2(n+(p?1:0),o+(p?0:1)),[M,w,S]=I.bn(t,s,a,u,m,g,l,c);return I.vn(M,w,S,f.GT(),f._T(),f.DT(),y.GT(),y._T(),y.DT(),d.GT(),d._T(),d.DT())}T2(i){let e=[],h=i[0],r=i[1],n=h-i.at(-2),o=r-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,u=i[a],l=i[1+a],c=u-h,f=l-r,d=Math.abs(c)<1e-7&&Math.abs(n)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(n);(!d&&!p&&.001<Math.abs(c/n-f/o)||0==c&&0==f)&&e.push(h,r),h=u,r=l,n=c,o=f}6<=e.length&&e.length<i.length&&I.Yn(i,e)}FT(){return{cols:this.t2(),rows:this.s2(),points:this.YT.map(t=>t.map(t=>t.FT()))}}jT(t){const i=this.t2(),e=this.s2();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const h=t.points;for(let s=0;s<e;++s){const r=h[s];for(let t=0;t<i;++t){const n=this.f2(t,s);n.jT(r[t])}}}}}{let d=function(t,s){let i,e,h,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,h=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,h=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{v2:i,G2:e,format:h,type:r}};d;const di=self.ks,pi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),mi=new Set(["nearest","bilinear","trilinear"]),gi=new Set(["default","low","high"]),yi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Mi={I2:"clamp-to-edge",C2:"clamp-to-edge",_2:"trilinear",E2:0,D2:"rgba8",A2:!0,N2:"default",premultiplyAlpha:!0,L2:!1,width:-1,height:-1},wi={premultiplyAlpha:!0,flipY:!1},Si=new Set;di.my.O2=class{constructor(t){this.CS=t,this.R2=null,this.tg=0,this.sg=0,this.P2=!0,this.F2="clamp-to-edge",this.j2="clamp-to-edge",this.z2="trilinear",this.B2=0,this.U2="rgba8",this.W2=!1,this.Q2="default",this.S1=0}J2(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},Mi,t),this.R2)throw new Error("already created texture");if(this.F2=t.I2,this.j2=t.C2,this.z2=t._2,this.B2=t.E2,this.U2=t.D2,this.W2=!!t.A2&&this.CS.gS(),this.Q2=t.N2,!yi.has(this.F2)||!yi.has(this.j2))throw new Error("invalid wrap mode");if(!mi.has(this.z2))throw new Error("invalid sampling");if(!pi.has(this.U2))throw new Error("invalid pixel format");if(!gi.has(this.Q2))throw new Error("invalid mipmap quality");if(this.P2=!0,s instanceof ArrayBuffer||null===s||t.L2){if(this.tg=t.width,this.sg=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.tg*this.sg*4)throw new Error("ArrayBuffer wrong size")}else this.tg=s.width,this.sg=s.height;if(this.tg<=0||this.sg<=0)throw new Error("invalid texture data size");if(t.L2){const o=di.Po(this.tg,this.sg),a=o.getContext("2d");a.drawImage(s,0,0,this.tg,this.sg),s=o}const i=di.Ur(this.tg)&&di.Ur(this.sg),e=this.CS.V2();if(this.tg>e||this.sg>e)throw new Error("texture data exceeds maximum texture size");const h=this.CS.Y2(),r=this.CS.H2(),n=(this.R2=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.R2),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),d(this.U2,h));if(this.CS.q2()||i||!this.Z2())if(2<=r){let t;t=this.W2?Math.floor(Math.log2(Math.max(this.tg,this.sg))+1):1,h.texStorage2D(h.TEXTURE_2D,t,n.v2,this.tg,this.sg),s instanceof ArrayBuffer?h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.tg,this.sg,n.format,n.type,new Uint8Array(s)):null!==s&&h.texSubImage2D(h.TEXTURE_2D,0,0,0,n.format,n.type,s)}else s instanceof ArrayBuffer?h.texImage2D(h.TEXTURE_2D,0,n.G2,this.tg,this.sg,0,n.format,n.type,new Uint8Array(s)):null===s?h.texImage2D(h.TEXTURE_2D,0,n.G2,this.tg,this.sg,0,n.format,n.type,null):h.texImage2D(h.TEXTURE_2D,0,n.G2,n.format,n.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.tg,this.sg):s)instanceof ImageData){const c=di.Po(this.tg,this.sg),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const u=di.Po(di.Wr(this.tg),di.Wr(this.sg)),l=u.getContext("2d");l.imageSmoothingEnabled="nearest"!==this.z2,l.drawImage(s,0,0,this.tg,this.sg,0,0,u.width,u.height),h.texImage2D(h.TEXTURE_2D,0,n.G2,n.format,n.type,u)}null!==s&&this.X2(h),h.bindTexture(h.TEXTURE_2D,null),this.CS.K2(),this.S1=1,Si.add(this)}tb(t,s,i){if(i=Object.assign({},Mi,i),this.R2)throw new Error("already created texture");if(this.F2=i.I2,this.j2=i.C2,this.z2=i._2,this.U2=i.D2,this.W2=!!i.A2&&this.CS.gS(),this.Q2=i.N2,!yi.has(this.F2)||!yi.has(this.j2))throw new Error("invalid wrap mode");if(!mi.has(this.z2))throw new Error("invalid sampling");if(!pi.has(this.U2))throw new Error("invalid pixel format");if(!gi.has(this.Q2))throw new Error("invalid mipmap quality");this.P2=!1,this.tg=Math.floor(t),this.sg=Math.floor(s);const e=di.Ur(this.tg)&&di.Ur(this.sg),h=this.CS.V2();if(this.tg<=0||this.sg<=0)throw new Error("invalid texture size");if(this.tg>h||this.sg>h)throw new Error("texture exceeds maximum texture size");if(!this.CS.q2()&&this.Z2()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.CS.Y2(),n=this.CS.H2(),o=(this.R2=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.R2),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),d(this.U2,r)),a=2<=n?o.v2:o.G2;r.texImage2D(r.TEXTURE_2D,0,a,this.tg,this.sg,0,o.format,o.type,null),this.X2(r),r.bindTexture(r.TEXTURE_2D,null),this.CS.K2(),this.S1=1,Si.add(this)}sb(t){if("default"===this.Q2)return this.P2?t.NICEST:t.FASTEST;if("low"===this.Q2)return t.FASTEST;if("high"===this.Q2)return t.NICEST;throw new Error("invalid mipmap quality")}Z2(){return"clamp-to-edge"!==this.F2||"clamp-to-edge"!==this.j2}ib(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}X2(t){const s=di.Ur(this.tg)&&di.Ur(this.sg);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.ib(t,this.F2)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.ib(t,this.j2)),"nearest"===this.z2)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.W2=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.CS.q2())&&this.W2){t.hint(t.GENERATE_MIPMAP_HINT,this.sb(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.z2&&!this.CS.MS();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.W2=!1;const i=this.CS.eb();i&&0<this.B2&&"nearest"!==this.z2&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.B2,this.CS.hb()))}rb(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.R2||this.S1<=0)throw new Error("texture not created");if(this.P2)throw new Error("cannot update static texture");s=Object.assign({},wi,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,h=this.CS.H2(),r=this.CS.Y2(),n=(r.bindTexture(r.TEXTURE_2D,this.R2),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.U2,r)),o=2<=h?n.v2:n.G2;try{if(this.tg===i&&this.sg===e){const a=di.Ur(this.tg)&&di.Ur(this.sg);r.texSubImage2D(r.TEXTURE_2D,0,0,0,n.format,n.type,t),(a||this.CS.q2())&&this.W2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.sb(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.tg=i,this.sg=e;const u=di.Ur(this.tg)&&di.Ur(this.sg);if(!this.CS.q2()&&this.Z2()&&!u)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,n.format,n.type,t),(u||this.CS.q2())&&this.W2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.sb(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.CS.K2()}nb(){if(0<this.S1)throw new Error("texture still has references");if(!this.R2)throw new Error("already deleted texture");Si.delete(this);const t=this.CS.Y2();t.deleteTexture(this.R2),this.R2=null}ob(){return!!this.R2}ab(){return this.R2}HS(){return this.CS}ub(){this.S1++}lb(){if(this.S1<=0)throw new Error("no more references");this.S1--}cb(){return this.S1}ym(){return this.tg}_m(){return this.sg}fb(){return this.P2}pb(){let t=this.tg*this.sg;switch(this.U2){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.W2&&(t+=Math.floor(t/3)),t}static gT(){Si.clear()}static mb(){return Si.values()}}}{const Ti=self.ks,bi=self.Ss,xh=bi._s,vh=bi.xs,vi=new Set(["nearest","bilinear","trilinear"]),xi={_2:"trilinear",alpha:!0,depth:!1,gb:!0,yb:!0,Mb:0},Gi=new Set;Ti.my.wb=class{constructor(t){this.CS=t,this.Sb=null,this.Tb=null,this.R2=null,this.bb=null,this.tg=0,this.sg=0,this.vb=!0,this.z2="trilinear",this.xb=!0,this.Gb=!1,this.Ib=!0,this.Cb=0,this._b=vh.create(),this.Eb=0,this.Db=0,this.Ab=0}Nb(t,s,i){i=Object.assign({},xi,i);const e=this.CS.H2();if(this.R2||this.bb)throw new Error("already created render target");if(this.z2=i._2,this.xb=!!i.alpha,this.Gb=!!i.depth,this.Ib=!!i.gb,this.vb=!!i.yb,this.Cb=i.Mb,!vi.has(this.z2))throw new Error("invalid sampling");if(0<this.Cb&&(e<2||this.Ib))throw new Error("invalid use of multisampling");if(e<2&&(this.Ib=!0),this.tg=t,this.sg=s,this.tg<=0||this.sg<=0)throw new Error("invalid render target size");this.Lb();const h=this.CS.Y2();if(this.Sb=h.createFramebuffer(),this.Gb&&(this.Tb=h.createFramebuffer()),this.Ib){this.R2=this.CS.Ob(this.tg,this.sg,{_2:this.z2,D2:this.xb?"rgba8":"rgb8",A2:!1});const n=this.R2.ab();h.bindFramebuffer(h.FRAMEBUFFER,this.Sb),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),this.Gb&&(h.bindFramebuffer(h.FRAMEBUFFER,this.Tb),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0))}else{this.bb=h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,this.bb);const o=this.xb?h.RGBA8:h.RGB8;if(0<this.Cb){const a=h.getInternalformatParameter(h.RENDERBUFFER,o,h.SAMPLES);if(a&&a[0]){const u=a[0];this.Cb>u&&(this.Cb=u)}else this.Cb=0}0===this.Cb?h.renderbufferStorage(h.RENDERBUFFER,o,this.tg,this.sg):h.renderbufferStorageMultisample(h.RENDERBUFFER,this.Cb,o,this.tg,this.sg),h.bindFramebuffer(h.FRAMEBUFFER,this.Sb),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.bb),this.Gb&&(h.bindFramebuffer(h.FRAMEBUFFER,this.Tb),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.bb)),h.bindRenderbuffer(h.RENDERBUFFER,null)}const r=this.CS.Rb();this.Gb&&r&&(h.bindFramebuffer(h.FRAMEBUFFER,this.Sb),this.CS.Pb()?h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,r,0):h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,r)),h.bindFramebuffer(h.FRAMEBUFFER,null),Gi.add(this)}kb(t,s){if(this.tg!==t||this.sg!==s){this.tg=t,this.sg=s,this.Lb();const i=this.CS.Y2(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.Sb),this.R2?this.R2.rb(new ImageData(this.tg,this.sg)):(i.bindRenderbuffer(i.RENDERBUFFER,this.bb),i.renderbufferStorage(i.RENDERBUFFER,this.xb?i.RGBA8:i.RGB8,this.tg,this.sg),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.CS.Rb());this.Gb&&e&&(this.CS.Pb()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}nb(){if(!this.R2&&!this.bb)throw new Error("already deleted render target");Gi.delete(this);const t=this.CS.Y2(),s=(this.R2?(t.bindFramebuffer(t.FRAMEBUFFER,this.Sb),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.Gb&&(t.bindFramebuffer(t.FRAMEBUFFER,this.Tb),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.CS.Fb(this.R2),this.R2=null):this.bb&&(t.bindFramebuffer(t.FRAMEBUFFER,this.Sb),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.Gb&&(t.bindFramebuffer(t.FRAMEBUFFER,this.Tb),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.bb),this.bb=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.CS.H2()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.Sb),this.Gb&&t.deleteFramebuffer(this.Tb),this.CS.jb());s.zb=null,this.Sb=s.Bb=null}Lb(){this.CS.NM(this._b,this.tg/this.sg),this.Eb=this.CS._M(),this.Db=this.CS.xM(),this.Ab=this.CS.IM()}Ub(){return this.Sb}Wb(){return this.Tb}HS(){return this.CS}Qb(){return this.R2}Jb(){return this.CS._M()===this.Eb&&this.CS.xM()===this.Db&&this.CS.IM()===this.Ab||this.Lb(),this._b}Vb(){return"nearest"!==this.z2}Yb(){return this.xb}Hb(){return this.Ib}qb(){return this.Gb}ym(){return this.tg}_m(){return this.sg}Zb(){return this.vb}Xb(){return this.Cb}Kb(){const t={_2:this.z2,alpha:this.xb,gb:this.Ib};return this.vb||(t.width=this.tg,t.height=this.sg),t}$b(t){return"nearest"!==(t=Object.assign({},xi,t))._2===this.Vb()&&!!t.alpha===this.Yb()&&!!t.depth===this.qb()&&!(2<=this.CS.H2()&&!!t.gb!==this.Hb())&&("number"==typeof t.width||"number"==typeof t.height?!this.Zb()&&this.ym()===Math.floor(t.width)&&this._m()===Math.floor(t.height):this.Zb())}tv(){return this.R2?this.R2.ab():null}pb(){return this.R2?this.R2.pb():this.tg*this.sg*(this.xb?4:3)}static async sv(t,s){const i=await t.hv(s,!0);return Ti.jo(i)}static gT(){Gi.clear()}static rv(){return Gi.values()}static nv(t,s){for(const i of Gi)i.Zb()&&i.kb(t,s)}}}{const m=self.ks,Ii=self.Ss,xh=Ii._s,vh=Ii.xs,Ci=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.my.ov=class extends m.my.IS{static async av(t,s){const i=t.Y2(),e=s.src,h=s.uv,r=s.name,n=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(n,e),i.compileShader(n),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,h),i.compileShader(o),i.createProgram()),u=(i.attachShader(a,n),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.lv());if(u?await t.cv(()=>i.getProgramParameter(a,u.COMPLETION_STATUS_KHR)):await m.kn(5),!i.getShaderParameter(n,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(n);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const l=m.X1(i.getProgramInfoLog(a)||"").trim();return l&&!m.H1(l)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,l),i.deleteShader(n),i.deleteShader(o),a}static async dv(t,s){const i=await m.my.ov.av(t,s);return new m.my.ov(t,i,s)}constructor(t,s,i){super(t,i);const e=t.Y2(),h=t.jb(),r=(t.fS(),e.useProgram(s),this.pv=e,this.aT=s,this.mv="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),n=e.getAttribLocation(s,"aTex"),o=(this.gv=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.yv),e.vertexAttribPointer(r,t.lS(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.Mv),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==this.gv&&(e.bindBuffer(e.ARRAY_BUFFER,t.wv),e.vertexAttribPointer(this.gv,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.gv)),e.bindBuffer(e.ARRAY_BUFFER,null),this.Sv=new m.my.Tv(this,"matP","mat4"),this.bv=new m.my.Tv(this,"matMV","mat4"),this.vv=new m.my.Tv(this,"color","vec4"),this.xv=new m.my.Tv(this,"samplerFront","sampler"),this.Gv=new m.my.Tv(this,"pointTexStart","vec2"),this.Iv=new m.my.Tv(this,"pointTexEnd","vec2"),this.Cv=new m.my.Tv(this,"zElevation","float"),this._v=new m.my.Tv(this,"tileSize","vec2"),this.Ev=new m.my.Tv(this,"tileSpacing","vec2"),this.Dv=new m.my.Tv(this,"color2_","vec4"),this.Av=new m.my.Tv(this,"outlineThickness","float"),this.Nv=new m.my.Tv(this,"samplerBack","sampler"),this.Lv=new m.my.Tv(this,"samplerDepth","sampler"),this.Ov=new m.my.Tv(this,"destStart","vec2"),this.Rv=new m.my.Tv(this,"destEnd","vec2"),this.Pv=new m.my.Tv(this,"srcStart","vec2"),this.kv=new m.my.Tv(this,"srcEnd","vec2"),this.Fv=new m.my.Tv(this,"srcOriginStart","vec2"),this.jv=new m.my.Tv(this,"srcOriginEnd","vec2"),this.zv=new m.my.Tv(this,"pixelSize","vec2"),this.Bv=new m.my.Tv(this,"seconds","float"),this.Uv=new m.my.Tv(this,"devicePixelRatio","float"),this.Wv=new m.my.Tv(this,"layerScale","float"),this.Qv=new m.my.Tv(this,"layerAngle","float"),this.Jv=new m.my.Tv(this,"layoutStart","vec2"),this.Vv=new m.my.Tv(this,"layoutEnd","vec2"),this.Yv=new m.my.Tv(this,"zNear","float"),this.Hv=new m.my.Tv(this,"zFar","float"),this.qv=!!(this.zv.Zv()||this.Bv.Zv()||this.Nv.Zv()||this.Ov.Zv()||this.Rv.Zv()||this.Pv.Zv()||this.kv.Zv()||this.Fv.Zv()||this.jv.Zv()||this.Uv.Zv()||this.Wv.Zv()||this.Qv.Zv()||this.Jv.Zv()||this.Vv.Zv()),i.parameters||[]);this.Xv=[],this.VS=this.zv.Zv()||this.Pv.Zv()||this.kv.Zv()||this.Fv.Zv()||this.jv.Zv(),this.Kv=!1,this.$v=!1,this.vv.tx(1,1,1,1),this.Dv.tx(1,1,1,1),this.xv.ix(0),this.Nv.ix(1),this.Lv.ix(2),this.Gv.hx(0,0),this.Iv.hx(1,1),this.Cv.nx(0),this._v.hx(0,0),this.Ev.hx(0,0),this.Ov.hx(0,0),this.Rv.hx(1,1),this.Pv.hx(0,0),this.kv.hx(0,0),this.Fv.hx(0,0),this.jv.hx(0,0),this.zv.hx(0,0),this.Uv.nx(1),this.Yv.nx(t.xM()),this.Hv.nx(t.IM()),this.Wv.nx(1),this.Qv.nx(0),this.Bv.nx(0),this.Jv.hx(0,0),this.Vv.hx(0,0),this.Av.nx(1);for(const u of o){const l=u[0],c=u[2],f=new m.my.Tv(this,l,c);"color"===c?f.ox(0,0,0):f.nx(0),this.Xv.push(f)}this.mv?this.ux(h.mx):(this.gx(h.mx,!0),this.yx(h.Mx,!0));const a=h.wx;e.useProgram(a?a.aT:null)}cr(){this.pv.deleteProgram(this.aT),this.aT=null,this.CS.FM(this),this.pv=null,super.cr()}Sx(){return this.pv}Tx(){return this.aT}bx(){return this.Xv.length}vx(t){return t<0||t>=this.Xv.length?null:this.Xv[t].xx()}Gx(i){for(let t=0,s=i.length;t<s;++t)if(!this.Xv[t].Ix(i[t]))return!1;return!0}Cx(i){for(let t=0,s=i.length;t<s;++t)this.Xv[t]._x(i[t])}Ex(t,s,i,e,h,r,n,o,a,u){return!this.Nv.Zv()&&!(this.zv.Zv()&&!this.zv.Dx(h,r)||this.Ov.Zv()&&!this.Ov.Dx(t.Iu(),t.Cu())||this.Rv.Zv()&&!this.Rv.Dx(t._u(),t.Eu())||this.Uv.Zv()&&!this.Uv.Ax(n)||this.Wv.Zv()&&!this.Wv.Ax(o)||this.Qv.Zv()&&!this.Qv.Ax(a)||this.Pv.Zv()&&!this.Pv.Dx(s.Iu(),s.Cu())||this.kv.Zv()&&!this.kv.Dx(s._u(),s.Eu())||this.Fv.Zv()&&!this.Fv.Dx(i.Iu(),i.Cu())||this.jv.Zv()&&!this.jv.Dx(i._u(),i.Eu())||this.Jv.Zv()&&!this.Jv.Dx(e.Iu(),e.Cu())||this.Vv.Zv()&&!this.Vv.Dx(e.Cu(),e.Eu())||this.Bv.Zv()&&!this.Bv.Ax(u))}Nx(t,s,i,e,h,r,n,o,a,u){this.Nv.Zv()||(this.zv.Zv()&&this.zv.Lx(h,r),this.Ov.Zv()&&this.Ov.Lx(t.Iu(),t.Cu()),this.Rv.Zv()&&this.Rv.Lx(t._u(),t.Eu()),this.Uv.Zv()&&this.Uv.Ox(n),this.Wv.Zv()&&this.Wv.Ox(o),this.Qv.Zv()&&this.Qv.Ox(a),this.Pv.Zv()&&this.Pv.Lx(s.Iu(),s.Cu()),this.kv.Zv()&&this.kv.Lx(s._u(),s.Eu()),this.Fv.Zv()&&this.Fv.Lx(i.Iu(),i.Cu()),this.jv.Zv()&&this.jv.Lx(i._u(),i.Eu()),this.Jv.Zv()&&this.Jv.Lx(e.Iu(),e.Cu()),this.Vv.Zv()&&this.Vv.Lx(e.Cu(),e.Eu()),this.Bv.Zv()&&this.Bv.Ox(u))}gx(t,s){this.Kv&&!s||this.mv||(this.Sv.Zv()&&this.Sv.Rx(t),this.Kv=!0)}Px(){this.Kv=!1}yx(t,s){this.$v&&!s||this.mv||(this.bv.Zv()&&this.bv.Rx(t),this.$v=!0)}kx(){this.$v=!1}ux(t){if(!this.mv)throw new Error("not device transform shader");this.Sv.Rx(t);const s=this.CS,i=s.ym()/2,e=s._m()/2,h=s.PM(i,e,s.wM(s._m()),i,e,0,s._m());this.bv.Rx(h)}Fx(t){this.vv.Zv()&&this.vv.jx(t[0],t[1],t[2],t[3])}static zx(){return Ci}static Bx(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static Ux(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static Wx(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static Qx(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Jx(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Vx(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static Yx(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Hx(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static qx(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static Zx(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static Xx(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static Kx(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static $x(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static tG(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static sG(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static iG(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static eG(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static hG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static rG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static nG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static oG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static aG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const _i=self.ks,Ei=self.Ss,vh=Ei.xs,Di=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);_i.my.Tv=class{constructor(t,s,i){if(!Di.has(i))throw new Error("invalid uniform type");this.VT=t,this.pv=this.VT.Sx(),this.mr=s,this.vf=i,this.uG="color"===this.vf,this.lG=this.pv.getUniformLocation(this.VT.Tx(),s),this.cG=!!this.lG;const e=Di.get(i);this.fG=new Float32Array(e),this.dG=new Float32Array(e)}cr(){this.VT=null,this.pv=null,this.lG=null}Zv(){return this.cG}xx(){return this.vf}pG(){return this.uG}nx(t){this.Zv()&&(this.fG[0]=t,this.dG.set(this.fG),this.pv.uniform1f(this.lG,t))}ix(t){this.Zv()&&(this.fG[0]=t,this.dG.set(this.fG),this.pv.uniform1i(this.lG,t))}hx(t,s){this.Zv()&&(this.fG[0]=t,this.fG[1]=s,this.dG.set(this.fG),this.pv.uniform2f(this.lG,t,s))}ox(t,s,i){this.Zv()&&(this.fG[0]=t,this.fG[1]=s,this.fG[2]=i,this.dG.set(this.fG),this.pv.uniform3f(this.lG,t,s,i))}tx(t,s,i,e){this.Zv()&&(this.fG[0]=t,this.fG[1]=s,this.fG[2]=i,this.fG[3]=e,this.dG.set(this.fG),this.pv.uniform4f(this.lG,t,s,i,e))}mG(t){t=Math.fround(t);const s=this.fG;s[0]!==t&&(s[0]=t,this.pv.uniform1f(this.lG,t))}gG(t){const s=this.fG;s[0]!==t&&this.pv.uniform1i(this.lG,s[0]=t)}yG(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.fG;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.pv.uniform2f(this.lG,t,s))}MG(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.fG;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.pv.uniform3f(this.lG,t,s,i))}jx(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const h=this.fG;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(h[0]=t,h[1]=s,h[2]=i,h[3]=e,this.pv.uniform4f(this.lG,t,s,i,e))}Rx(t){const s=this.fG;vh.U(s,t)||(_i.Bn(s,t,0),this.pv.uniformMatrix4fv(this.lG,!1,t))}Ix(t){const s=this.dG;return this.pG()?s[0]===Math.fround(t.la())&&s[1]===Math.fround(t.ca())&&s[2]===Math.fround(t.fa()):s[0]===Math.fround(t)}_x(t){const s=this.dG;this.pG()?(s[0]=t.la(),s[1]=t.ca(),s[2]=t.fa()):s[0]=t}Ax(t){return this.dG[0]===Math.fround(t)}Dx(t,s){const i=this.dG;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}Ox(t){this.dG[0]=t}Lx(t,s){const i=this.dG;i[0]=t,i[1]=s}}}{const Ai=self.ks,Ni=self.Ss,Uh=Ni.Es,vh=Ni.xs;Ai.my.wG=class{constructor(t){this.renderer=t,this.Mx=vh.create(),this.mx=vh.create(),this.zb=null,this.Bb=null,this.SG=!1,this.TG=Uh._(1,1,1,1),this.wx=null,this.bG=new Ai.Rect,this.clearColor=Ai.lr(Ai.Ho,0,0,0,0)}},Ai.my.vG=class{constructor(t){const s=new ArrayBuffer(96);this.vf=0,this.xG=t,this.pv=t.renderer.Y2(),this.GG=0,this.IG=0,this.CG=null,this._G=new Float32Array(s,0,16),this.EG=new Float32Array(s,64,4),this.DG=new Float32Array(s,80,4),this.AG=[]}NG(t,s){this.vf=1,this.GG=t,this.IG=s}LG(){const t=this.pv;t.drawElements(t.TRIANGLES,this.IG,t.UNSIGNED_SHORT,this.GG)}OG(t){this.vf=2,this.CG=t}PG(){const t=this.pv,s=this.CG;t.bindTexture(t.TEXTURE_2D,s?s.ab():null)}kG(t){this.vf=3,t.ma(this.EG,0)}FG(){const t=this.EG,s=this.xG;Uh.C(s.TG,t),s.wx.Fx(t)}jG(t){this.vf=21,t.ma(this.EG,0)}zG(){const t=this.EG,s=this.xG.wx;s.Dv.Zv()&&s.Dv.jx(t[0],t[1],t[2],t[3])}BG(t,s){this.vf=4,this.GG=t,this.IG=s}UG(){this.pv.blendFunc(this.GG,this.IG)}WG(t,s,i,e){this.vf=5;const h=this.EG;h[0]=t,h[1]=s,h[2]=i,h[3]=e}QG(){const t=this.EG;this.pv.viewport(t[0],t[1],t[2],t[3])}JG(t){this.vf=6,vh.C(this._G,t)}VG(){const t=this.xG,i=t.renderer.jy,e=t.wx,h=this._G;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.gx(h,!0):r.Px()}vh.C(t.mx,h)}YG(t){this.vf=7,vh.C(this._G,t)}HG(){const t=this.xG,i=t.renderer.jy,e=t.wx,h=this._G;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.yx(h,!0):r.kx()}vh.C(t.Mx,h)}qG(t){this.vf=8,this.CG=t}ZG(){const t=this.pv,s=this.CG,i=this.xG;s?(i.zb=s.Ub(),i.Bb=s.Wb(),i.SG&&i.Bb?t.bindFramebuffer(t.FRAMEBUFFER,i.Bb):t.bindFramebuffer(t.FRAMEBUFFER,i.zb)):(i.zb=null,i.Bb=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}XG(t){this.vf=9,t.ma(this._G,0)}KG(t,s,i,e){this.vf=9;const h=this._G;h[0]=t,h[1]=s,h[2]=i,h[3]=e}$G(){const t=this.pv,s=this._G,i=this.xG,e=i.clearColor,h=s[0],r=s[1],n=s[2],o=s[3];e.Sa(h,r,n,o)||(t.clearColor(h,r,n,o),e.$o(h,r,n,o)),t.clear(t.COLOR_BUFFER_BIT)}tI(t){this.vf=15,t.ma(this._G,0)}sI(){const t=this._G;this.xG.bG.set(t[0],t[1],t[2],t[3])}iI(t,s){this.vf=10,this.GG=t,this.IG=1,this._G[0]=s}eI(){const t=this.pv,s=this.xG,i=s.renderer,e=i.Uy,h=(t.useProgram(e.aT),e.gx(s.mx,!1),e.yx(s.Mx,!1),s.bG),r=(e.Gv.Zv()&&e.Gv.yG(h.Iu(),h.Cu()),e.Iv.Zv()&&e.Iv.yG(h._u(),h.Eu()),this._G[0]);if(e.Cv.Zv()&&e.Cv.mG(r),e.vv.Zv()){const n=s.TG;e.vv.jx(n[0],n[1],n[2],n[3])}t.drawArrays(t.POINTS,this.GG/4,this.IG),t.useProgram(s.wx.aT)}hI(t){this.vf=11,this.CG=t}rI(){const t=this.pv,s=this.xG,i=this.CG;if(s.wx=i,t.useProgram(i.aT),i.gx(s.mx,!1),i.yx(s.Mx,!1),i.vv.Zv()){const e=s.TG;i.vv.jx(e[0],e[1],e[2],e[3])}}nI(){this.vf=12}oI(){const t=this.xG.wx,s=this.pv,i=this._G,e=this.EG,h=this.DG;if(t.Nv.Zv()){const r=this.xG.renderer,n=this.CG;r.aI!==n&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,n?n.ab():null),r.aI=n,s.activeTexture(s.TEXTURE0))}t.zv.Zv()&&t.zv.yG(i[0],i[1]),t.Ov.Zv()&&t.Ov.yG(i[2],i[3]),t.Rv.Zv()&&t.Rv.yG(i[4],i[5]),t.Uv.Zv()&&t.Uv.mG(this.IG),t.Wv.Zv()&&t.Wv.mG(i[6]),t.Qv.Zv()&&t.Qv.mG(i[7]),t.Pv.Zv()&&t.Pv.yG(i[12],i[13]),t.kv.Zv()&&t.kv.yG(i[14],i[15]),t.Fv.Zv()&&t.Fv.yG(h[0],h[1]),t.jv.Zv()&&t.jv.yG(h[2],h[3]),t.Jv.Zv()&&t.Jv.yG(e[0],e[1]),t.Vv.Zv()&&t.Vv.yG(e[2],e[3]),t.Bv.Zv()&&t.Bv.mG(this.GG)}uI(){this.vf=13}lI(){const t=this.xG.wx,i=t.Xv,e=this.AG;for(let t=0,s=i.length;t<s;++t){const h=i[t],r=e[t];h.pG()?h.MG(r.la(),r.ca(),r.fa()):h.mG(r)}}cI(t){this.vf=14,this.CG=t}fI(){const t=this.pv,s=this.CG,i=this.xG.zb;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}dI(t,s,i){this.vf=17;const e=this._G,h=this.xG.renderer,r=(e[0]=t.ym(),e[1]=t._m(),e[2]=(s||h).ym(),e[3]=(s||h)._m(),e[4]=t.Vb()?1:0,e[5]="stretch"===i,this.AG);Ai.Wn(r),r.push(t.Ub()),r.push(s?s.Ub():null)}pI(){const t=this._G,s=this.AG,i=this.pv,e=t[0],h=t[1],r=t[2],n=t[3],o=0!==t[4],a=0!==t[5],u=s[0],l=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,u),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,l),a)i.blitFramebuffer(0,0,e,h,0,0,r,n,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,r),f=Math.min(h,n),d=Math.max(h-n,0),p=Math.max(n-h,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}mI(t){this.vf=18,this.CG=t}gI(){this.CG.yI(),this.CG=null}MI(t){this.vf=19,this.CG=t}wI(){this.CG.SI(),this.CG=null}TI(t,s,i){this.vf=20;const e=this._G;e[0]=t,e[1]=s,e[2]=i}bI(){const t=this.xG.wx,s=this._G;t.zv.Zv()&&t.zv.yG(s[0],s[1]),t.Av.Zv()&&t.Av.mG(s[2])}vI(t,s,i,e,h,r,n){this.vf=16;const o=this._G;t.ma(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=h/i,o[8]=r/s,o[9]=n/i}xI(){const t=this.xG.wx,s=this._G;t.Pv.Zv()&&t.Pv.yG(s[0],s[1]),t.zv.Zv()&&t.zv.yG(s[4],s[5]),t._v.Zv()&&t._v.yG(s[6],s[7]),t.Ev.Zv()&&t.Ev.yG(s[8],s[9])}GI(t,s,i,e,h,r,n){this.vf=29;const o=this._G;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=h,o[5]=r,o[6]=n}II(){const t=this.xG.wx,s=this._G;t.zv.Zv()&&t.zv.yG(s[0],s[1]),t._v.Zv()&&t._v.yG(s[2],s[3]),t.Av.Zv()&&t.Av.mG(s[4]),t.Ev.Zv()&&t.Ev.yG(s[5],s[6])}CI(t){this.vf=22,this.GG=t?1:0}_I(){const t=this.pv,s=0!==this.GG;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}EI(t){this.vf=23,this.GG=t?1:0}DI(){const t=this.pv;0===this.GG?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}AI(t){this.vf=24,this.GG=t?1:0}NI(){const t=this.pv,s=this.xG,i=s.renderer,e=0!==this.GG;s.SG=e,t.activeTexture(t.TEXTURE2),e?(s.Bb&&t.bindFramebuffer(t.FRAMEBUFFER,s.Bb),t.bindTexture(t.TEXTURE_2D,i.Rb())):(t.bindTexture(t.TEXTURE_2D,null),s.Bb&&t.bindFramebuffer(t.FRAMEBUFFER,s.zb)),t.activeTexture(t.TEXTURE0)}LI(){this.vf=25}OI(){const t=this.pv;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}RI(){this.vf=26}kI(){const t=this.pv;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}FI(){this.vf=27}jI(){const t=this.pv;t.disable(t.STENCIL_TEST)}zI(t,s,i,e,h){this.vf=28,this.GG=t?1:0;const r=this._G;r[0]=s,r[1]=i,r[2]=e,r[3]=h}BI(){const t=this.pv,s=this._G;1===this.GG?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}UI(){switch(this.vf){case 1:return void this.LG();case 2:return void this.PG();case 3:return void this.FG();case 4:return void this.UG();case 5:return void this.QG();case 6:return void this.VG();case 7:return void this.HG();case 8:return void this.ZG();case 9:return void this.$G();case 10:return void this.eI();case 11:return void this.rI();case 12:return void this.oI();case 13:return void this.lI();case 14:return void this.fI();case 15:return void this.sI();case 16:return void this.xI();case 17:return void this.pI();case 18:return void this.gI();case 19:return void this.wI();case 20:return void this.bI();case 21:return void this.zG();case 22:return void this._I();case 23:return void this.DI();case 24:return void this.NI();case 25:return void this.OI();case 26:return void this.kI();case 27:return void this.jI();case 28:return void this.BI();case 29:return void this.II()}}}}{let C=function(t,s,i,e,h,r){s?t.strokeRect(i,e,h,r):t.fillRect(i,e,h,r)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};C,t,o;const Li=self.ks,Oi=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Ri={timeout:60},Pi=new Li.Ho(0,0,0,1),ki=new Set(["left","center","right"]),Fi=new Set(["top","center","bottom"]),ji=new Set(["word","cjk","character"]),zi=new Set(["ltr","rtl"]),Bi=new Set;Li.FontManager&&Li.FontManager.addEventListener("fontload",t=>{const s=t.font.hf();for(const i of Bi)(i.WI()||Li.gh(i.QI(),s))&&i.JI()});let s=!1,i=!1;Li.my.GS=class{constructor(t,s){s=Object.assign({},Ri,s),this.CS=t,this.VI="Arial",this.YI=16,this.HI=1,this.qI=0,this.ZI=!1,this.XI=!1,this.KI="black",this.$I=!1,this.um=null,this.tC=!0,this.sC=null,this.iC=new Set,this.eC="left",this.hC="top",this.gf="",this.rC=null,this.nC=Li.lr(Li.nm),this.oC="word",this.aC="ltr",this.uC=!1,this.lC=!1,this.cC=!1,this.fC=-1,this.dC=0,this.pC=0,this.mC=0,this.tg=0,this.sg=0,this.gC=1,this.yC=null,this.MC=null,this.wC=null,this.SC=null,this.TC=-1,this.bC=-1,this.vC="",this.xC="",this.GC="",this.IC=1,this.CC=1,this._C=t=>this.EC(t),this.R2=null,this.DC=new Li.Rect,this.AC=1,this.NC=new Li.l0(()=>{this.LC(),this.OC(8,8)},s.timeout),this.RC=null,this.PC=!1,Bi.add(this)}cr(){this.sC=null,this.iC.clear(),this.um=null,this.rC=null,this.yC=null,this.MC=null,this.wC=null,this.SC=null,this._C=null,this.NC.cr(),this.RC=null,this.LC(),this.nC.hc(),this.nC=null,this.CS=null,this.PC=!0,Bi.delete(this)}kC(){this.cC=!0}FC(){this.kC(),this.lC=!0}JI(){this.FC(),this.uC=!0}jC(t){if(this.$I!==(t=!!t)){this.$I=t;const s=this.$I?"alphabetic":"top";this.MC&&(this.MC.textBaseline=s),this.wC&&(this.wC.textBaseline=s),this.JI()}}WI(){return this.$I}pm(t){this.um!==t&&(this.um=t,this.nC.pm(t),this.um&&this.um.Hg()&&this.um.qg().then(()=>this.kC()),this.JI())}zC(t){this.tC!==(t=!!t)&&(this.tC=t,this.kC())}BC(t){this.VI!==(t=t||"serif")&&(this.VI=t,this.JI())}QI(){return this.VI}UC(t){this.YI!==(t=t<.1?.1:t)&&(this.YI=t,this.JI())}WC(){return this.YI}QC(t){this.HI!==t&&(this.HI=t,this.JI())}JC(t){this.qI!==t&&(this.qI=t,this.FC())}VC(){return this.qI}YC(t){this.ZI!==(t=!!t)&&(this.ZI=t,this.JI())}HC(){return this.ZI}qC(t){this.XI!==(t=!!t)&&(this.XI=t,this.JI())}ZC(){return this.XI}XC(t){t=Math.floor(t),this.fC!==t&&(this.fC=t,this.kC())}KC(){return this.fC}$C(t,s){let i=[];(this.ZI||s.yg("b"))&&i.push("bold"),(this.XI||s.yg("i"))&&i.push("italic");const e=s.gg("size"),h=(e?parseFloat(e.param):this.YI)*this.HI;i.push(t?h+"pt":h*this.t_()+"pt");let r=this.VI,n=s.gg("font");return n&&n.param&&(r=n.param,this.sC)&&!this.iC.has(r)&&(this.sC(r),this.iC.add(r)),r&&(Oi.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}mT(t){t instanceof Li.Ho&&(t=t._a()),this.KI!==t&&(this.KI=t,this.kC())}s_(t,s,i){Pi.ta(t,s,i),this.mT(Pi)}i_(t){if(!ki.has(t))throw new Error("invalid horizontal alignment");this.eC!==t&&(this.eC=t,this.FC())}e_(){return this.eC}h_(t){if(!Fi.has(t))throw new Error("invalid vertical alignment");this.hC!==t&&(this.hC=t,this.FC())}r_(){return this.hC}n_(t){if(!ji.has(t))throw new Error("invalid word wrap mode");this.oC!==t&&(this.oC=t,this.JI())}o_(){return this.oC}a_(t){if(!zi.has(t))throw new Error("invalid text direction");this.aC!==t&&(this.aC=t,this.MC&&(this.MC.direction=this.aC),this.wC&&(this.wC.direction=this.aC),this.JI())}u_(){return this.aC}wf(t){this.gf!==t&&(this.gf=t,this.JI())}l_(){return this.gf}t_(){return this.AC*this.gC*self.devicePixelRatio}c_(r,n,o){if(void 0===o&&(o=1),!(r<=0||this.pC===r&&this.mC===n&&this.gC===o)){let t=this.pC,s=(this.pC=r,this.mC=n,this.gC=o,self.devicePixelRatio),i=(this.tg=this.pC*this.gC*s,this.sg=this.mC*this.gC*s,Math.max(this.tg,this.sg)),e=Math.min(this.CS.V2(),4096),h=1;e<i&&(h=e/i,this.tg=Math.min(this.tg*h,e),this.sg=Math.min(this.sg*h,e)),this.AC=h,this.pC!==t?this.JI():this.FC()}}ym(){return this.tg}_m(){return this.sg}f_(){return this.gC}d_(){return this.p_(),this.nC.Km()}m_(){return this.p_(),this.nC.$m()+this.nC.fm()*(this.qI+4)-this.qI}g_(){this.p_();let t=0;for(const s of this.nC.lm())for(const i of s.Om())t+=i.Rm();return t}Qb(){return this.NC.m0(),this.y_(),this.R2}M_(t,s){this.p_();const i=this.t_(),e=this.nC.lm();for(const h of e){const r=h.Dm()*i;if(s>=h.dg()-h._m()*i+r&&s<h.dg()+r)for(const n of h.Om())if(t>=n.lg()&&t<n.lg()+n.ym()*i)return n}return null}*w_(t){this.p_();const s=this.nC.lm();for(const i of s)for(const e of i.Om()){const h=e.gg("tag");h&&Li.gh(h.param,t)&&(yield e)}}S_(t,s){for(const i of this.w_(t)){if(0===s)return i;--s}return null}T_(t){let s=0;for(const i of this.w_(t))++s;return s}y_(){this.R2&&!this.cC&&!this.lC&&!this.uC||this.PC||this.tg<=0||this.sg<=0||(this.cC=!1,this.b_())}b_(){this.PC||(this.p_(),this.OC(Math.max(Li.Wr(Math.ceil(this.tg)),128),Math.max(Li.Wr(Math.ceil(this.sg)),64)),this.v_(),this.x_(),this.NC.m0())}OC(t,s){this.yC||(this.yC=Li.Po(16,16));let i=!1;this.TC===t&&this.bC===s||(this.TC=t,this.bC=s,this.yC.width=t,this.yC.height=s,i=!0),this.MC||(this.MC=this.yC.getContext("2d"),i=!0),i?(this.MC.textBaseline=this.$I?"alphabetic":"top",this.MC.direction=this.aC,this.MC.font=this.vC,this.MC.fillStyle=this.GC,this.MC.strokeStyle=this.GC,this.MC.globalAlpha=this.IC,this.MC.lineWidth=this.CC):this.MC.clearRect(0,0,t,s)}G_(){this.wC||(this.wC=Li.Po(16,16).getContext("2d"),this.SC=Li.Po(16,16).getContext("2d"),this.wC.textBaseline=this.$I?"alphabetic":"top",this.SC.textBaseline="top",this.wC.direction=this.aC,this.SC.direction=this.aC)}I_(t){this.xC!==t&&(this.xC=t,this.wC.font=t,this.SC.font=t)}C_(){if(!s){s=!0,this.G_();const t=this.wC.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}p_(){this.__(),this.E_()}__(){this.uC&&(this.G_(),!this.$I||this.rC&&this.rC.toString()===this.gf||(this.rC=new Li.Dh(this.gf,{jp:!0})),this.nC.nm(this.$I?this.rC.Zp():this.gf,this._C,this.pC,this.oC,0),this.uC=!1)}E_(){this.lC&&(this.D_(),this.lC=!1)}EC(t){let s=t.xm()?t.Um().join(""):" ",i=(this.I_(this.$C(!0,t)),t.gg("size")),e=(i?parseFloat(i.param):this.YI)*this.HI,h=this.wC.measureText(s),r=0;if(this.$I&&this.C_()){const n=this.SC.measureText(s);r=h.fontBoundingBoxAscent-n.fontBoundingBoxAscent}return{width:h.width,height:4/3*e,fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,vm:r}}A_(t){this.vC!==t&&(this.vC=t,this.MC.font=t)}N_(t){this.GC!==t&&(this.GC=t,this.MC.fillStyle=t,this.MC.strokeStyle=t)}L_(t){this.IC!==t&&(this.IC=t,this.MC.globalAlpha=t)}O_(t){this.CC!==t&&(this.CC=t,this.MC.lineWidth=t)}D_(){let e=this.t_(),h=(4+this.qI)*e,r=0,n=this.nC.lm();if(0!==n.length){for(const s of n){s.ug(NaN),s.fg(NaN);for(const o of s.Om())o.ug(NaN),o.fg(NaN)}let t=this.$I&&this.C_(),i=n[0]._m()*e;if("center"===this.hC){const a=n.reduce((t,s)=>t+s._m()*e+h,0)-h;r=Math.max(this.sg/2-a/2,0),t&&(i=n[0].Am()*e)}else if("bottom"===this.hC){const u=n.reduce((t,s)=>t+s._m()*e+h,0)-this.qI*e,l=t?n.at(-1).Dm()*e:0;r=this.sg-u-l-2}for(let t=0,s=n.length;t<s;++t){const c=n[t],f=c._m()*e,d=r;if(this.$I){if(r+=0===t?i:f,0<t&&r>this.sg-4*e)break}else if(0<t&&r>=this.sg-f)break;0<=d&&this.R_(c,r,e),this.$I||(r+=f),r+=h}}}R_(t,s,i){let e=0;"center"===this.eC?e=Math.floor((this.tg-t.ym()*i)/2):"right"===this.eC&&(e=this.tg-t.ym()*i),t.ug(e),t.fg(s);for(const h of"ltr"===this.aC?t.Om():t.og())this.P_(h,e,s,i),e+=h.ym()*i}P_(t,s,i,e){const h=t.gg("offsetx"),r=(s+=h?o(h.param,t._m())*e:0,t.gg("offsety"));if(i+=r?o(r.param,t._m())*e:0,t.Im()){const n=t.gg("iconoffsety");i+=n?o(n.param,t._m())*e:.2*t._m()*e}t.ug(s),t.fg(i)}v_(){this.MC.imageSmoothingEnabled=this.tC,this.MC.imageSmoothingQuality="high",this.dC=0;const t=this.t_(),s=this.nC.lm();for(const i of s)this.k_(i,t)}k_(t,s){const i=t.lg(),e=t.dg();if(Number.isFinite(i)&&Number.isFinite(e))for(const h of"ltr"===this.aC?t.Om():t.og())this.F_(h,s,t._m())}F_(n,o,a){const u=this.MC,l=n.lg(),c=n.dg();if(Number.isFinite(l)&&Number.isFinite(c)){let t=a/16,s=n.ym()*o,i=n._m()*o,e=n._m()/16,h=(4+this.qI)*o,r=n.xm()?n.Um():null;if(-1!==this.fC){if(this.dC>=this.fC)return;n.xm()&&this.dC+r.length>this.fC&&(r=r.slice(0,this.fC-this.dC),s=this.EC(n).width*o),this.dC+=n.Rm()}const f=n.gg("background"),d=n.yg("u"),p=n.yg("s");if((!n.xm()||!Li.q1(r)||f||d||p)&&!n.yg("hide")){const m=n.gg("color"),g=n.gg("opacity"),y=(this.L_(g?parseFloat(g.param)/100:1),f&&(this.N_(f.param),u.fillRect(l,c-i,s,i+h)),n.gg("linethickness")),M=y?parseFloat(y.param):1,w=n.yg("stroke");if(w&&this.O_(.5*e*M*this.t_()),n.xm()){const S=r.join("");if(this.A_(this.$C(!1,n)),!w){this.O_(.5*e*M*this.t_());const T=n.gg("outlineback");T&&(this.N_(T.param),this.j_(!0,S,l,c,s))}if(this.N_(m?m.param:this.KI),this.j_(w,S,l,c,s),!w){this.O_(.5*e*M*this.t_());const b=n.gg("outline");b&&(this.N_(b.param),this.j_(!0,S,l,c,s))}}else if(n.Im()&&0<n.ym()){const v=n.Gg(this.um);v&&u.drawImage(v,l,c-i,s,i)}if(this.N_(m?m.param:this.KI),d&&C(u,w,l,c+o*t,s,o*t*M),p){const x=c-i/4,G=o*e,I=x+G/2;u.fillRect(l,I-G*M/2,s,G*M)}}}}j_(t,s,i,e,h){"rtl"===this.aC&&(i+=h),t?"Gecko"===Li.li.yi?this.MC.strokeText(s,i,e,h):this.MC.strokeText(s,i,e):"Gecko"===Li.li.yi?this.MC.fillText(s,i,e,h):this.MC.fillText(s,i,e)}x_(){this.CS.z_()||(this.R2||(this.R2=this.CS.Ob(this.yC.width,this.yC.height,{A2:!0,N2:"high"})),this.CS.B_(this.yC,this.R2),this.DC.set(0,0,this.tg/this.R2.ym(),this.sg/this.R2._m()),this.RC&&this.RC())}U_(){return this.DC}LC(){this.R2&&(this.CS.z_()||this.CS.Fb(this.R2),this.R2=null)}static gT(){for(const t of Bi)t.LC()}static W_(){return Bi.values()}}}{const Ui=self.ks;class Wi{constructor(t){this.pv=t.Y2(),this.Q_=t.H2(),this.J_=t.V_(),this.Y_=null,this.p0=!1,this.H_=!1,this.q_=0,1===this.Q_?this.Y_=this.J_.createQueryEXT():this.Y_=this.pv.createQuery()}cr(){this.Z_(),this.pv=null,this.J_=null,this.H_=!1}Z_(){this.Y_&&(1===this.Q_?this.J_.deleteQueryEXT(this.Y_):this.pv.deleteQuery(this.Y_),this.Y_=null)}yI(){if(this.p0)throw new Error("query already active");1===this.Q_?this.J_.beginQueryEXT(this.J_.TIME_ELAPSED_EXT,this.Y_):this.pv.beginQuery(this.J_.TIME_ELAPSED_EXT,this.Y_),this.p0=!0}SI(){if(!this.p0)throw new Error("query not active");1===this.Q_?this.J_.endQueryEXT(this.J_.TIME_ELAPSED_EXT):this.pv.endQuery(this.J_.TIME_ELAPSED_EXT),this.p0=!1}X_(){if(this.Y_&&!this.H_&&!this.p0){let t;t=1===this.Q_?this.J_.getQueryObjectEXT(this.Y_,this.J_.QUERY_RESULT_AVAILABLE_EXT):this.pv.getQueryParameter(this.Y_,this.pv.QUERY_RESULT_AVAILABLE);const s=this.pv.getParameter(this.J_.GPU_DISJOINT_EXT);t&&!s&&(1===this.Q_?this.q_=this.J_.getQueryObjectEXT(this.Y_,this.J_.QUERY_RESULT_EXT):this.q_=this.pv.getQueryParameter(this.Y_,this.pv.QUERY_RESULT),this.q_/=1e9,this.H_=!0),(t||s)&&this.Z_()}}K_(){return this.H_}tE(){if(this.H_)return this.q_;throw new Error("no result available")}}Ui.my.sE=class{constructor(t){this.CS=t,this.cM=t.dS(),this.p0=!1,this.iE=null,this.eE=!1,this.hE=null,this.rE=[]}cr(){for(const t of this.rE)t instanceof Wi&&t.cr();Ui.Wn(this.rE),this.iE=null,this.hE=null,this.CS=null}yI(){if(this.p0)throw new Error("query already active");const t=this.CS.nE();0<t.length?(this.eE=!0,this.iE=t.at(-1),this.iE.oE(),this.iE.rE.push(this)):(this.eE=!1,this.iE=null),this.p0=!0,t.push(this),this.aE()}SI(){if(!this.p0)throw new Error("query not active");const t=this.CS.nE().pop();if(t!==this)throw new Error("can only end most nested query");this.p0=!1,this.oE(),this.iE&&(this.iE.aE(),this.iE=null)}aE(){this.hE=Ui.lr(Wi,this.CS),this.rE.push(this.hE),this.hE.yI()}oE(){this.hE.SI(),this.hE=null}X_(){for(const t of this.rE)t.X_()}uE(){return this.eE}K_(){return this.rE.every(t=>t.K_())}tE(){return this.rE.reduce((t,s)=>t+s.tE(),0)}dS(){return this.cM}}}{const Qi=self.ks;Qi.my.lE=class{constructor(t,s=1e3){this.CS=t,this.cE=s,this.fE=[],this.CS.dE(this)}cr(){this.hc(),this.CS.pE(this),this.CS=null}hc(){for(const t of this.fE)t.cr();Qi.Wn(this.fE)}mE(){const t=new Qi.my.sE(this.CS);if(this.fE.push(t),this.fE.length>this.cE){const s=this.fE.shift();s.cr()}return t}gE(t){for(const s of this.fE){if(s.dS()>=t)return;if(s.uE())return;s.X_()}}yE(t,s){if(s<=t)return NaN;let i=0;for(const e of this.fE){if(e.dS()>=s)break;if(!(e.dS()<t)){if(!e.K_())return NaN;i+=e.tE()}}return i}ME(i){for(let t=0,s=this.fE.length;t<s;++t){const e=this.fE[t];if(!(e.dS()<i))return void(0<t&&this.fE.splice(0,t));e.cr()}}}}{let i=function(){h=-1;for(const t of e)t.wE()&&(t.resolve(),e.delete(t));0<e.size&&(h=self.requestAnimationFrame(i))},S=(i,self.ks),t=self.Ss,T=(t._s,t.Es),y=t.xs,r={powerPreference:"default",SE:!0,alpha:!1,depth:!1,TE:!1,bE:2,failIfMajorPerformanceCaveat:!1},n=new Set(["default","low-power","high-performance"]),c=new S.il(0,0,1,0,1,1,0,1),M=y.create(),w=y.create(),b=new S.il,v=new S.Rect,x=null,e=(S.isDebug&&(self.vE=function(){x?x.loseContext():console.warn("WEBGL_lose_context not supported")},self.xE=function(){x?x.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),h=-1;S.my.GE=class extends S.my.Ay{constructor(t,s){if(super(s),s=Object.assign({},r,s),!n.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,h=0;if(2<=s.bE&&(e=t.getContext("webgl2",i),h=2),e||(e=t.getContext("webgl",i),h=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.pv=e,this.IE=e.getContextAttributes(),this.CE=e.getParameter(e.VERSION),this.Q_=h,this._E=T.create(),this.EE=!1,this.DE=y.create(),this.AE=!!s.depth,this.NE=!(!s.depth||!s.TE),this.LE=this.AE,this.OE=!1,this.RE=null,this.PE=!0,this.kE=0,this.FE=0,this.yv=null,this.Mv=null,this.jE=null,this.wv=null,this.zE=new Float32Array(8e3*this.lS()),this.BE=new Uint16Array(12e3),this.UE=new Float32Array(16e3),this.WE=new Float32Array(32e3),this.QE=0,this.JE=0,this.VE=0,this.YE=0,this.HE=null,this.qE=null,this.ZE=[],this.XE=0,this.KE=0,this.$E=null,this.tD=0,this.xG=S.lr(S.my.wG,this),this.sD=S.lr(S.Ho,1,1,1,1),this.iD=null,this.aI=null,this.eD=0,this.hD=0,this.rD=new S.Rect,this.nD=S.lr(S.Rect,0,0,-1,-1),this.oD=0,this.aD=-1,this.uD=0,this.lD=0,this.cD=0,this.fD="(unavailable)",this.dD="(unavailable)",this.pD=[],this.mD=!1,this.gD=null,this.yD=null,this.MD=null,this.wD=null,this.SD=null,this.TD=null,this.bD=0,this.vD=!!s.SE,this.J_=null,this.xD=new Set,this.GD=[],this.pM(this.BE)}wS(){return!0}async yM(){super.yM();const t=this.pv,s=this.lS(),i=(this.sD.$o(1,1,1,1),this.iD=null,this.aI=null,this.QE=0,this.VE=0,this.YE=8e3*s-4*s,S.Wn(this.ZE),this.XE=0,this.KE=0,this.HE=null,this.$E=null,this.rD.set(0,0,1,1),this.tD=0,this.xG),e=(i.wx=null,i.zb=null,i.Bb=null,T.set(i.TG,1,1,1,1),i.clearColor.$o(0,0,0,0),i.bG.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.eD=t.ONE,this.hD=t.ONE_MINUS_SRC_ALPHA,this.ID(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.AE?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.LE=this.AE,this.OE=!1,this.wv=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.wv),t.bufferData(t.ARRAY_BUFFER,this.WE.byteLength,t.DYNAMIC_DRAW),this.yv=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.yv),t.bufferData(t.ARRAY_BUFFER,this.zE.byteLength,t.DYNAMIC_DRAW),this.Mv=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Mv),t.bufferData(t.ARRAY_BUFFER,this.UE.byteLength,t.DYNAMIC_DRAW),this.jE=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.jE),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.BE,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.aD=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),h=(this.uD=e[0],this.lD=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),n=(this.cD=h&&r?Math.min(h.precision,r.precision):0,2048<this.lD&&(this.lD=2048),this.pD=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(n&&(this.fD=t.getParameter(n.UNMASKED_VENDOR_WEBGL),this.dD=t.getParameter(n.UNMASKED_RENDERER_WEBGL)),this.gD=t.getExtension("KHR_parallel_shader_compile"),S.isDebug&&(x=t.getExtension("WEBGL_lose_context")),this.vD&&(1===this.H2()?this.J_=t.getExtension("EXT_disjoint_timer_query"):this.J_=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.yD=t.getExtension("EXT_texture_filter_anisotropic"),this.yD?this.bD=t.getParameter(this.yD.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.bD=0,this.H2()<2&&this.AE&&this.NE&&(this.MD=t.getExtension("WEBGL_depth_texture"),!this.MD))throw new Error("no depth texture support");this.H2()<2&&(this.wD=t.getExtension("EXT_frag_depth"),this.SD=t.getExtension("OES_standard_derivatives"),this.TD=t.getExtension("EXT_shader_texture_lod"));let o=S.my.ov,a=o.Bx(!1),u=o.Wx(),l=a,c=o.Kx(),f=o.Zx(),d=o.Vx(),p=o.Bx(!0),m=!1;this.AE&&(this.H2()<2?this.wD&&(u=o.Qx(),c=o.$x(),d=o.Yx(),m=!0):(l=o.Ux(),u=o.Jx(),c=o.tG(),f=o.Xx(),d=o.Hx(),p=o.Ux(!0)));const g=o.qx(this.H2(),m,this.SD&&this.TD),y=2<=this.H2()?o.Ux():a,M=[[u,l,"<default>"],[u,l,"<default-device-transform>"],[c,f,"<point>"],[o.sG(),a,"<fill>"],[o.iG(),a,"<lineargradient>"],[o.eG(),a,"<penumbra>"],[o.rG(),a,"<hardellipse>"],[o.nG(),a,"<hardellipseoutline>"],[o.oG(),a,"<smoothellipse>"],[o.aG(),a,"<smoothellipseoutline>"],[o.hG(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],w=await Promise.all(M.map(t=>this.CD({src:t[0],uv:t[1],name:t[2]})));this.By=w[0],this.qE=w[1],this.Uy=w[2],this.Jy=w[3],this.Vy=w[4],this.Yy=w[5],this.Hy=w[6],this.qy=w[7],this.Zy=w[8],this.Xy=w[9],this.Ky=w[10],this.Wy=w[11],this.Qy=w[12],this.BM()}async CD(t){const s=await S.my.ov.dv(this,t);return this.kM(s),s}_D(){this.HE=null}c_(t,s,i){if(this.tg!==t||this.sg!==s||i){this.fS();const e=this.pv,h=this.xG;this.tg=t,this.sg=s,this.ED(0,0,t,s),this.NM(this.DE,t/s),this.DD(this.DE),this.qE&&(e.useProgram(this.qE.Tx()),this.qE.ux(this.Oy),this.HE=this.qE,this.xG.wx=this.qE),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.iD=null,this.aI=null,this.AE&&this.PE&&this.AD(this.tg,this.sg),this.$E&&this.$E.kb(this.tg,this.sg),e.bindFramebuffer(e.FRAMEBUFFER,null),this.$E=null,h.zb=null,h.Bb=null}}AD(t,s){const i=this.pv;this.RE&&this.kE===t&&this.FE===s||(this.NE?(this.RE&&i.deleteTexture(this.RE),this.RE=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.RE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.H2()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.MD&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.MD.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.RE&&i.deleteRenderbuffer(this.RE),this.RE=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.RE),i.renderbufferStorage(i.RENDERBUFFER,2<=this.Q_?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.kE=t,this.FE=s)}ND(t,s){this.AE&&(this.PE=!1,this.AD(t,s))}LD(){this.AE&&(this.PE=!0,this.AD(this.tg,this.sg))}ED(t,s,i,e){const h=this._E;if(h[0]!==t||h[1]!==s||h[2]!==i||h[3]!==e){const r=this.OD();r.WG(t,s,i,e),T.set(h,t,s,i,e),this.KE=0}}CM(t){super.CM(t),this.NM(this.DE,this.tg/this.sg)}vM(t){super.vM(t),this.NM(this.DE,this.tg/this.sg)}GM(t){super.GM(t),this.NM(this.DE,this.tg/this.sg)}DD(t){if(!y.U(this.Oy,t)){const s=this.OD();s.JG(t),y.C(this.Oy,t),this.KE=0,this.EE=!0}}RD(){let t,s,i,e=this.$E;i=(null===e?(t=this.DE,s=this.ym(),this):(t=e.Jb(),s=e.ym(),e))._m(),this.DD(t),this.ED(0,0,s,i)}PD(t){if(!y.U(this.Ry,t)){const s=this.OD();s.YG(t),y.C(this.Ry,t),this.KE=0,this.EE=!0}}kD(){this.EE=!1}FD(){return this.EE}jb(){return this.xG}OD(){const t=this.ZE;return this.XE===t.length&&t.push(new S.my.vG(this.xG)),t[this.XE++]}fS(){0===this.XE||this.z_()||(this.jD(),this.zD(),this.XE=0,this.QE=0,this.JE=0,this.VE=0,this.KE=0)}jD(){const t=this.pv;0<this.VE&&(t.bindBuffer(t.ARRAY_BUFFER,this.wv),t.bufferSubData(t.ARRAY_BUFFER,0,this.WE.subarray(0,this.VE))),0<this.QE&&(t.bindBuffer(t.ARRAY_BUFFER,this.yv),t.bufferSubData(t.ARRAY_BUFFER,0,this.zE.subarray(0,this.QE)),t.bindBuffer(t.ARRAY_BUFFER,this.Mv),t.bufferSubData(t.ARRAY_BUFFER,0,this.UE.subarray(0,this.JE)))}zD(){const i=this.ZE;for(let t=0,s=this.XE;t<s;++t)i[t].UI()}BD(){return this.sD.da()}UD(t,s,i,e){const h=this.sD;if(!h.Sa(t,s,i,e)){h.$o(t,s,i,e);const r=this.OD();r.kG(h),this.KE=0,this.tM=null}}WD(t){const s=this.sD;if(s.da()!==t){s.aa(t);const i=this.OD();i.kG(s),this.KE=0,this.tM=null}}mT(t){const s=this.sD;if(!s.equals(t)){s.set(t);const i=this.OD();i.kG(s),this.KE=0,this.tM=null}}QD(){this.UD(1,1,1,1)}JD(){return this.sD}VD(t){if(t!==this.iD){const s=this.OD();s.OG(t),this.iD=t,this.KE=0}}K2(){this.iD=null}pT(t){const s=this.yw(t);this.YD(s[0],s[1])}HD(t){const s=this.Sw(t);this.YD(s.mw,s.gw)}YD(t,s){if(t!==this.eD||s!==this.hD){const i=this.OD();i.BG(t,s),this.eD=t,this.hD=s,this.KE=0,this.tM=null}}qD(){return this.eD===this.pv.ONE&&this.hD===this.pv.ONE_MINUS_SRC_ALPHA}ZD(){this.YD(this.pv.ONE,this.pv.ONE_MINUS_SRC_ALPHA)}XD(){this.YD(this.pv.SRC_ALPHA,this.pv.ONE_MINUS_SRC_ALPHA)}KD(){this.YD(this.pv.ONE,this.pv.ZERO)}Rect(t){this.$D(t.Iu(),t.Cu(),t._u(),t.Eu())}$D(t,s,i,e){this.uS(t,s,i,s,i,e,t,e)}tA(){let t=this.QE;if(t>=this.YE&&(this.fS(),t=0),1===this.KE)this.ZE[this.XE-1].IG+=6;else{const s=this.OD();s.NG(t,6),this.KE=1}}sA(t){t.bl(this.zE,this.QE,this.eM+this.hM),this.QE+=12}il(t){this.tA(),this.sA(t),c.ma(this.UE,this.JE),this.JE+=8}uS(t,s,i,e,h,r,n,o){this.tA();let a=this.zE,u=this.QE,l=this.eM+this.hM;a[u++]=t,a[u++]=s,a[u++]=l,a[u++]=i,a[u++]=e,a[u++]=l,a[u++]=h,a[u++]=r,a[u++]=l,a[u++]=n,a[u++]=o,a[u++]=l,this.QE=u,c.ma(this.UE,this.JE),this.JE+=8}Pw(t,s){this.tA(),this.sA(t),s.Nu(this.UE,this.JE),this.JE+=8}iA(t,s){this.tA(),this.sA(t),s.ma(this.UE,this.JE),this.JE+=8}eA(t,s,i,e,h,r,n,o,a,u,l,c,f){this.tA();let d=this.zE,p=this.QE,m=this.eM+this.hM;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.QE=p,f.Nu(this.UE,this.JE),this.JE+=8}Aw(t,s,i,e,h,r,n,o,a,u,l,c,f){this.tA();let d=this.zE,p=this.QE,m=this.eM+this.hM;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.QE=p,f.ma(this.UE,this.JE),this.JE+=8}hA(e,h,r){const n=this.zE,o=this.UE;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=r.length;i<t;){const a=r[i++],u=r[i++],l=r[i++],c=3*a,f=3*u,d=3*l,p=2*a,m=2*u,g=2*l;this.tA();let t=this.QE,s=this.JE;n[t++]=e[0+c],n[t++]=e[1+c],n[t++]=e[2+c],n[t++]=e[0+f],n[t++]=e[1+f],n[t++]=e[2+f],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],o[s++]=h[0+p],o[s++]=h[1+p],o[s++]=h[0+m],o[s++]=h[1+m],o[s++]=h[0+g],o[s++]=h[1+g],o[s++]=h[0+g],o[s++]=h[1+g],this.QE=t,this.JE=s}}rA(t,s){this.Gw(0),y.C(M,this.Oy),y.C(w,this.Ry),this.RD();const[i,e]=this.nA(this.$E),h=this.PM(0,0,this.wM(e),0,0,0,e);if(this.PD(h),"crop"===t&&this.$E&&s){const r=this.tg/2,n=this.sg/2,o=s.ym(),a=s._m(),u=this.$E.ym(),l=this.$E._m(),c=Math.min(u,o),f=Math.min(l,a),d=Math.max(a-l,0),p=Math.max(l-a,0);v.set(-r,n-p,-r+c,n-f-p),b.vl(v),v.set(0,d,c,f+d),v._t(o,a),this.Pw(b,v)}else{const m=i/2,g=e/2;this.$D(-m,g,m,-g)}this.DD(M),this.PD(w)}oA(t){if(!this.rD.equals(t)){this.rD.C(t);const s=this.OD();s.tI(t),this.KE=0}}aA(){}uA(t,s,i,e){7996<=this.VE&&this.fS();let h=this.VE,r=this.eM+this.hM;if(2===this.KE&&this.tD===r)this.ZE[this.XE-1].IG++;else{const o=this.OD();o.iI(h,r),this.KE=2,this.tD=r}const n=this.WE;n[h++]=t,n[h++]=s,n[h++]=i,n[h++]=e,this.VE=h}UM(t){if(this.HE!==t){const s=this.OD();s.hI(t),this.HE=t,this.KE=0,this.tM=null}}lA(){return this.HE}cA(){this.UM(this.qE)}fA(t){const s=this.OD();s.jG(t),this.KE=0}dA(t,s,i=1){const e=this.OD();e.TI(t,s,i),this.KE=0}pA(t,s,i,e,h,r,n){if(this.HE!==this.Wy)throw new Error("must set tilemap fill mode first");const o=this.OD();o.vI(t,s,i,e,h,r,n),this.KE=0}mA(t,s,i,e,h,r,n){if(this.HE!==this.Qy)throw new Error("must set tile randomization mode first");const o=this.OD();o.GI(t,s,i,e,h,r,n),this.KE=0}gA(t,s,i,e,h,r,n,o,a,u,l){const c=this.HE;if(l%=10800,c.qv&&!c.Ex(s,i,e,h,r,n,o,a,u,l)){const f=this.OD(),d=(f.nI(),c.Nx(s,i,e,h,r,n,o,a,u,l),f._G),p=(d[0]=r,d[1]=n,s.ma(d,2),d[6]=a,d[7]=u,i.ma(d,12),f.EG),m=(h.ma(p,0),p[1]);p[1]=p[3],p[3]=m,e.ma(f.DG,0),f.GG=l,f.IG=o,c.Nv.Zv()?f.CG=t?t.Qb():null:f.CG=null,this.KE=0}}yA(t){const s=this.HE;if(0!==t.length&&!s.Gx(t)){const i=this.OD();i.uI(),s.Cx(t),S.Yn(i.AG,t),this.KE=0}}MA(t,s,i,e){const h=this.OD();h.KG(t,s,i,e),this.KE=0}hc(t){const s=this.OD();s.XG(t),this.KE=0}wA(){}cS(){super.cS(),this.pv.flush()}SA(){if(this.AE&&this.$E&&this.$E.qb()){const t=this.OD();t.CI(this.LE),this.KE=0}}TA(t){if(this.LE!==(t=!!t)&&this.AE){this.LE=t;const s=this.OD();s.EI(t),this.KE=0}}bA(){return this.LE}Rb(){return this.RE}Pb(){return this.NE}vA(t){if(t=!!t,this.NE&&this.OE!==t){if(t&&this.bA())throw new Error("depth still enabled");this.OE=t;const s=this.OD();s.AI(t),this.KE=0}}xA(t,s,i,e,h=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.nD.Gu(t,s,i,e)){this.nD.Mu(t,s,i,e);const r=h||this.nA(this.GA())[1],n=(s=r-s-e,this.OD());n.zI(!0,t,s,i,e),this.KE=0}}IA(){if(-1!==this.nD._u()){this.nD.set(0,0,-1,-1);const t=this.OD();t.zI(!1,0,0,0,0),this.KE=0}}CA(){for(const t of this.xD)t.gE(this.cM)}z_(){return!this.pv||this.pv.isContextLost()||this.mD}gT(){super.MM(),S.my.O2.gT(),S.my.wb.gT(),S.my.GS.gT();for(const t of this.xD)t.hc();this.pD=[],this.J_=null,this.gD=null,this.yD=null,this.MD=null,this.wD=null,this.SD=null,this.TD=null,this.bD=0,this.fD="(unavailable)",this.dD="(unavailable)",this.HE=null,this.qE=null,this.RE=null;for(const s of this.$y.values())s.gT()}async yT(){this.mD=!0,await this.yM(),this.mD=!1;for(const t of this.$y.values())t.yT(this);this.c_(this.tg,this.sg,!0)}_A(t,s){if(this.z_())throw new Error("context lost");this.fS();const i=S.lr(S.my.O2,this);return i.J2(t,s),i}async EA(e,h){if(this.z_())throw new Error("context lost");if(h=Object.assign({},h),S.Ui.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=h.I2&&"clamp-to-edge"!==h.I2||h.C2&&"clamp-to-edge"!==h.C2,i=S.Ur(t.width)&&S.Ur(t.height);return this.q2()||i||!s?h.premultiplyAlpha=!1:S.Ui.Vi?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:S.Wr(t.width),resizeHeight:S.Wr(t.height)}),h.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),S.Wf(()=>this._A(t,h))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await S.Ro(e);e=t}return S.Wf(()=>this._A(e,h))}Ob(t,s,i){this.fS();const e=S.lr(S.my.O2,this);return e.tb(t,s,i),e}B_(t,s,i){this.fS(),s.rb(t,i)}Fb(t){t&&(t.lb(),0<t.cb()||(this.fS(),t===this.iD&&(this.pv.bindTexture(this.pv.TEXTURE_2D,null),this.iD=null),t===this.aI&&(this.pv.activeTexture(this.pv.TEXTURE1),this.pv.bindTexture(this.pv.TEXTURE_2D,null),this.pv.activeTexture(this.pv.TEXTURE0),this.aI=null),t.nb()))}DA(t){let s=this.tg,i=this.sg,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.fS();const h=S.lr(S.my.wb,this);return h.Nb(s,i,Object.assign({yb:e},t)),this.$E=null,this.xG.zb=null,this.xG.Bb=null,h}AA(t,s=!0){if(t!==this.$E){t&&t.Zb()&&t.kb(this.tg,this.sg);const i=this.OD();i.qG(t),this.$E=t,this.KE=0,s&&this.RD()}}GA(){return this.$E}nA(t){return t?[t.ym(),t._m()]:[this.tg,this.sg]}NA(t,s="stretch"){if(this.Q_<2||this.$E&&0<this.$E.Xb())this.KD(),this.QD(),this.LA(t,s);else{const i=this.OD();i.dI(t,this.$E,s),this.KE=0}}LA(t,s="stretch"){const i=t.Qb();if(!i)throw new Error("not a texture-backed render target");this.VD(i),this.rA(s,i)}OA(t){if(!(this.Q_<2)){const s=this.OD();s.cI(t.Ub()),this.KE=0}}RA(t){this.AA(null),this.fS();const s=t.Qb();s===this.iD&&(this.pv.bindTexture(this.pv.TEXTURE_2D,null),this.iD=null),s===this.aI&&(this.pv.activeTexture(this.pv.TEXTURE1),this.pv.bindTexture(this.pv.TEXTURE_2D,null),this.pv.activeTexture(this.pv.TEXTURE0),this.aI=null),t.nb()}async hv(t,s,i){this.fS();let e=this.$E,h,r,n,o=(n=t?(h=t.ym(),r=t._m(),t.Ub()):(h=this.ym(),r=this._m(),null),0),a=0,u=h,l=r;if(i){o=S.Sr(Math.floor(i.Iu()),0,h-1),a=S.Sr(Math.floor(i.Cu()),0,r-1);let t=i.width(),s=(t=0===t?h-o:S.Sr(Math.floor(t),0,h-o),i.height());s=0===s?r-a:S.Sr(Math.floor(s),0,r-a),u=t,l=s,a=r-(a+l)}let c=this.pv,f=(c.bindFramebuffer(c.FRAMEBUFFER,n),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.$E=null,this.xG.zb=null,this.xG.Bb=null,this.AA(e)}),d;if(!s&&2<=this.H2()){c.bindFramebuffer(c.READ_FRAMEBUFFER,n);const p=c.createBuffer(),m=u*l*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.cv(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(u,l),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(u,l),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}PA(){this.TA(!0);const t=this.OD();t.LI(),this.KE=0,this.oD=1}kA(){this.TA(!1);const t=this.OD();t.RI(),this.KE=0,this.oD=2}FA(){return 2===this.oD}jA(){this.TA(!0);const t=this.OD();t.FI(),this.KE=0,this.oD=0}zA(t){if(this.BA()){const s=this.OD();s.mI(t),this.KE=0}}UA(t){if(this.BA()){const s=this.OD();s.MI(t),this.KE=0}}cv(s){const t=new Promise(t=>e.add({resolve:t,wE:s}));return-1===h&&(h=self.requestAnimationFrame(i)),t}SS(){return this.tg*this.sg*(this.IE.alpha?4:3)}TS(){let t=0;for(const s of S.my.wb.rv())s.Qb()||(t+=s.pb());return t}bS(){let t=0;for(const s of S.my.O2.mb())t+=s.pb();return t}WA(){return this.CE}H2(){return this.Q_}QA(){return"webgl"+this.H2()}q2(){return 2<=this.H2()}V2(){return this.aD}JA(){return this.uD}VA(){return this.lD}YA(){return 0!==this.cD}HA(){return this.cD}qA(){return this.fD}ZA(){return this.dD}XA(){if(2<=this.H2())return"webgl2";{const t=[];return this.wD&&t.push("EXT_frag_depth"),this.SD&&t.push("OES_standard_derivatives"),this.TD&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}KA(){return this.pD}BA(){return!!this.J_}V_(){return this.J_}lv(){return this.gD}eb(){return this.yD}hb(){return this.bD}dE(t){this.xD.add(t)}pE(t){this.xD.delete(t)}nE(){return this.GD}Y2(){return this.pv}ID(t){this.pw([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}$A(){return this.xS()}}}{const Ji=self.ks,Vi={tN:null,sN:null,iN:null,getTime:null,eN:null};Ji.my.hN=class{constructor(t){t=Object.assign({},Vi,t),this.rN=t.tN,this.nN=t.sN,this.oN=t.iN,this.aN=t.getTime,this.uN=t.eN,this.lN=null,this.cN=new Set}fN(t){this.cN.add(t)}dN(t){this.cN.delete(t)}gT(){this.lN=null;for(const t of this.cN)t.gT()}pN(t){return this.rN?this.rN(t):[t.ym(),t._m()]}GA(t){return this.nN(t)}mN(t,s){this.oN(t,s)}gN(){return this.aN()}n1(t){this.uN(t)}yN(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.lN||this.lN.ym()===s&&this.lN._m()===i||(t.Fb(this.lN),this.lN=null),null===this.lN&&(this.lN=t._A(null,{width:s,height:i,_2:"nearest",A2:!1})),this.lN}}}{const o=self.ks,Yi=self.Ss,vh=Yi.xs,Hi=o.lr(o.Rect),qi=o.lr(o.Rect),Zi=o.lr(o.Rect),Xi=o.lr(o.Rect),Ki=vh.create(),$i=vh.create(),te={MN:null,wN:null,SN:null,TN:!1},se={bN:null,vN:!1,xN:!1,GN:!1,IN:!1,CN:!1,_N:!1};o.my.EN=class{constructor(t,s){s=Object.assign({},te,s),this.M1=t,this.DN=s.MN,this.AN=s.wN,this.NN=s.SN,this.LN=null,this.ON=[],this.RN=[],this.PN=[],this.kN=!1,this.lT=0,this.FN=!1,this.jN=!1,this.zN=!1,this.BN=!1,this.UN=!1,this.WN=!1,this.EE=!1,this.QN=!1,this.JN=!1,this.VN=!1,this.YN=!1,this.HN=!1,this.qN=0,this.ZN=[null,null,null],this.XN=!!s.TN,this.KN=0,this.$N=0,this.tL=0,this.sL=0,this.iL=null,this.eL=null,this.hL=o.lr(o.Rect),this.rL=o.lr(o.Rect),this.nL=o.lr(o.Rect),this.oL=o.lr(o.Rect),this.aL=o.lr(o.Rect),this.uL=1,this.lL=1,this.cL=0,this.fL=0,this.dL=null,this.pL=null,this.mL=0,this.gL=0,this.yL=!1,this._b=vh.create(),this.ML=vh.create(),this.M1.fN(this)}cr(){this.M1.dN(this),o.Wn(this.PN),o.Wn(this.ON),o.Wn(this.RN),this.iL=null,this.eL=null,this.DN=null,this.AN=null,this.NN=null}gT(){this.kN=!0,o.Wn(this.PN),o.Wn(this.ON),o.Wn(this.RN)}wL(){return this.kN}SL(h,t){if(t=Object.assign({},se,t),o.Wn(this.PN),this.KN=0,this.$N=0,this.FN=!1,this.jN=!1,this.zN=!1,this.BN=!1,this.UN=!1,this.WN=!1,this.qN=0,this.HN=!!t.IN,this.YN=!!t._N,this.kN=!1,o.Yn(this.ON,h),0!==h.length){if(t.bN){if(t.bN.length!==h.length)throw new Error("incorrect indexMap length");o.Yn(this.RN,t.bN)}else{o.Wn(this.RN);for(let t=0,s=h.length;t<s;++t)this.RN.push(t)}for(const s of h)this.KN+=s.ZS(),this.$N+=s.XS(),s.iT()&&(this.FN=!0),s.hT()&&(this.jN=!0),s.eT()&&(this.zN=!0),s.KS()&&(this.BN=!0),s.oT()&&(this.UN=!0);this.WN=this.TL(h[0].HS());const r=this.bL(h[0],t),n=this.vL(h.at(-1),t);if(1!==h.length||r||n){this.VN=!1;let e=0;r&&(this.qN=1,this.PN.push(o.lr(o.my.EN.GL.xL,this,-1,1)),e=1);for(let s=0,i=h.length;s<i;++s)if(0!==s||r){let t=1===e?2:1;s!==i-1||n||(t=0),this.qN=Math.max(this.qN,t),this.PN.push(o.lr(o.my.EN.GL.IL,this,e,t,s)),e=t}else this.qN=1,this.PN.push(o.lr(o.my.EN.GL.CL,this,-1,1,s)),e=1;n&&this.PN.push(o.lr(o.my.EN.GL._L,this,e,0))}else this.VN=!0}}bL(t,s){return!!(s.vN||t.$S()||s.GN&&!t.sT()||t.hT()&&!this.YN||0!==this.KN||0!==this.$N)||(t.HS().wS()?t.eT()&&(s.CN||s.IN)||t.rT()&&s.IN:t.eT()&&!this.WN&&s.CN)}vL(t,s){return!!s.xN||(t.HS().wS()?t.eT()||t.KS():(t.eT()||t.KS())&&this.EL())}TL(t){return t.LM()&&this.zN&&!this.BN}DL(t,s,i){t.LM()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.dL=s,this.iL=i.AL||null,this.eL=i.contextObject||null,this.lT=i.NL||0,this.uL=i.devicePixelRatio||1,this.lL=i.LL||1,this.cL=i.OL||0,this.fL="number"==typeof i.time?i.time:this.M1.gN(),this.EE=!1,t.kD(),this.FN&&this.RL();let e=!1;if(this.PL()&&(this.kL(t,i),e=!0,this.pL=this.M1.yN(t,this.tL,this.sL),Hi.C(this.rL),Hi.Hu(),t.LM()&&t._MaybeDoPendingClearRenderPass(this.dL),t.CopyTextureToTexture(this.dL.Qb(),this.pL,Hi.Iu(),Hi.Cu(),Hi.width(),Hi.height())),this.VN)this.FL(t,i);else if(e||this.kL(t,i),0!==this.nL.width()||0!==this.nL.height()){t.ZD(),t.QD(),t.bw(0),t.Gw(0),this.LN=i.jL||null,this.mL=i.zL||0,this.gL=i.BL||0,this.yL=!!i.UL,this.WL(t),this.ZN[0]=s,this.ZN[1]=1<=this.qN?this.QL():null,this.ZN[2]=2===this.qN?this.QL():null;for(const h of this.PN){const r=this.JL(h.VL()),n=this.JL(h.YL());t.LM()?h.HL(t,r,n):h.qL(t,r,n)}t.VD(null),this.ZN[1]&&this.ZL(this.ZN[1]),this.ZN[2]&&this.ZL(this.ZN[2]),this.ZN.fill(null),this.XL(t),this.dL=null,this.pL=null,this.iL=null,this.eL=null,this.LN=null}}kL(t,s){const[i,e]=this.M1.pN(t);this.KL(t,i,e),this.$L(s)}KL(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.tL===s&&this.sL===i||this.tO(t,s,i,0,0,this._b,this.ML),this.tL=s,this.sL=i}tO(t,s,i,e,h,r,n){const o=s/2+e,a=i/2+h,u=(t.NM(r,s/i),t.PM(o,a,t.wM(i),o,a,0,i));vh.C(n,u)}$L(t){this.hL.C(t.sO),t.iO?this.rL.C(t.iO):this.rL.set(0,0,this.tL,this.sL),this.nL.C(this.rL),this.nL._t(this.tL,this.sL);const s=this.lL*this.uL;this.rL.ju(this.KN*s,this.$N*s),this.aL.C(this.rL),this.aL._t(this.tL,this.sL),this.rL.qu(0,0,this.tL,this.sL),this.oL.C(this.rL),this.oL._t(this.tL,this.sL)}WL(t){if(this.QN=t.bA(),this.JN=t.FA(),this.YN)t.TA(!1),this.jN&&t.vA(!0);else{if(Hi.C(this.rL),t.wS()){const s=this.lL*this.uL;Hi.ju(Math.max(this.KN,1)*s,Math.max(this.$N,1)*s),Hi.Hu(),Hi.Sr(0,0,this.tL,this.sL)}else Hi.Hu();t.xA(Hi.Iu(),Hi.Cu(),Hi.width(),Hi.height(),this.sL)}}eO(t){t.QD(),this.YN||(this.JN&&t.jA(),t.TA(!1),this.jN&&t.vA(!0)),t.LM()&&t.SetNormalizedCoordsProgramVariant(!0)}XL(t){t.vA(!1),this.JN&&t.kA(),t.TA(this.QN),this.YN||t.IA(),t.LM()&&t.SetNormalizedCoordsProgramVariant(!1),this.EE=t.FD()}hO(){this.aL.Sr(0,0,1,1)}JL(t){return t<0?null:this.ZN[t]}QL(){return this.M1.GA(this)}rO(){return this.dL}ZL(t){this.M1.mN(t,this)}nO(t){return this.ON[t]}oO(t){this.LN?this.LN(this,t,()=>this.DN(t,this)):this.DN(t,this),this.VN||this.eO(t)}aO(t){if(this.YN)return!0;if(0!==this.mL||0!==this.gL)return!1;const[s,i]=t.nA(t.GA());return s===this.tL&&i===this.sL}uO(t,s){let i=this._b,e=this.ML;if(s&&!this.aO(t)){i=Ki,e=$i;const[h,r]=t.nA(t.GA());this.tO(t,h,r,this.mL,this.gL,i,e),this.YN||t.IA()}t.DD(i),t.PD(e)}RL(){this.M1.n1(this)}lO(t,s){return this.NN(this.RN[t],s)}cO(t,s){let i=this.aL,e=this.oL,h=this.nL;t.wS()&&(qi.C(i),qi.Uu(1),i=qi,Zi.C(e),Zi.Uu(1),e=Zi,Xi.C(h),Xi.Uu(1),h=Xi),this.fO(t,s,e,h,i,1/this.tL,1/this.sL)}dO(t,s){let e=this.oL,h=this.nL,r=1/this.tL,n=1/this.sL;if(this.AN){let{pO:t,mO:s,gO:i}=this.AN(this.iL);t||(Hi.set(0,0,0,0),t=Hi),s=s||this.tL,i=i||this.sL,e=t,h=t,r=1/s,n=1/i}else t.wS()&&(Zi.C(e),Zi.Uu(1),e=Zi,Xi.C(h),Xi.Uu(1),h=Xi);let i=this.aL;t.wS()&&((i=qi).C(this.aL),i.Uu(1)),this.fO(t,s,e,h,i,r,n),t.LM()&&this.UN&&t.SetProgramParameter_IsSrcTexRotated(this.HN)}yO(t){return this.zN?t.LM()?this.PL()?this.pL:this.dL.Qb():this.dL:null}fO(t,s,i,e,h,r,n){t.gA(this.yO(t),h,i,e,this.hL,r,n,this.uL,this.lL,this.cL,this.fL),t.yA(this.lO(s,t))}FL(t,s){const i=this.ON[0],e=t.bA(),h=i.hT();h&&(t.TA(!1),t.vA(!0),this.aL.set(0,0,1,1),this.nL.set(0,0,1,1)),t.UM(i),t.pT(this.lT),t.AA(this.dL);let r=0,n=1;if(this.nL.set(0,0,1,1),i.rT()&&this.AN){const{pO:o,mO:a,gO:u}=this.AN(this.iL);o&&this.nL.C(o),r=Number.isFinite(a)?1/a:0,n=Number.isFinite(u)?1/u:0}else{const[l,c]=this.M1.pN(t);r=1/l,n=1/c}s.sO?this.hL.C(s.sO):this.hL.set(0,0,0,0),t.gA(this.yO(t),this.aL,this.nL,this.nL,this.hL,r,n,this.uL,this.lL,this.cL,this.fL),t.yA(this.lO(0,t)),t.LM()&&this.UN&&t.SetProgramParameter_IsSrcTexRotated(this.HN),t.bw(0),this.oO(t),h&&(t.vA(!1),t.TA(e))}PL(){return this.WN}EL(){return!this.WN}MO(){return this.zN}wO(){return!!this.VN&&!this.PL()}SO(){return this.YN}TO(){return this.iL}bO(){return this.eL}vO(){return this.lT}xO(){return this.yL}FD(){return this.EE}GO(){return this.rL}IO(){return this.oL}CO(){return this.XN}async _O(t,s,i){}}}{const ie=self.ks;ie.my.EN.GL=class{constructor(t,s,i,e=-1){this.EO=t,this.DO=s,this.AO=i,this.ty=e}NO(){return this.EO}VL(){return this.DO}YL(){return this.AO}LO(){return this.ty}Tx(){return this.NO().nO(this.LO())}qL(t,s,i){}HL(t,s,i){}}}{const ee=self.ks;ee.my.EN.GL.xL=class extends ee.my.EN.GL{constructor(t,s,i,e){super(t,s,i,e)}qL(t,s,i){const e=this.NO();t.ZD(),t.BM(),t.AA(i,e.xO()),t.MA(0,0,0,0),e.oO(t),e.hO()}HL(t,s,i){const e=this.NO();t.ZD(),t.BM(),t.AA(i,!1),t.MA(0,0,0,0),e.oO(t),e.hO()}}}{const he=self.ks,re=he.lr(he.Rect),ne=he.lr(he.il);he.my.EN.GL._L=class extends he.my.EN.GL{constructor(t,s,i,e){super(t,s,i,e)}qL(t,s,i){const e=this.NO();t.BM(),t.AA(i),e.uO(t,!0),t.pT(e.vO()),t.VD(s.Qb()),ne.vl(e.GO()),re.C(e.IO()),re.Uu(1),t.Pw(ne,re),e.CO()&&t.OA(s)}HL(t,s,i){const e=this.NO();t.BM(),t.AA(i,!1),e.aO(t)?ne.vl(e.IO()):(t.SetNormalizedCoordsProgramVariant(!1),e.uO(t,!0),ne.vl(e.GO())),t.SetBackTexture(null),t.pT(e.vO()),t.VD(s.Qb()),e.SO()?t.rA():t.Pw(ne,e.IO())}}}{const oe=self.ks;oe.my.EN.GL.CL=class extends oe.my.EN.GL{constructor(t,s,i,e){super(t,s,i,e)}qL(t,s,i){const e=this.NO();t.AA(i,e.xO()),t.MA(0,0,0,0),t.KD(),t.UM(this.Tx()),e.dO(t,this.LO()),e.oO(t),e.hO()}HL(t,s,i){const e=this.NO();t.AA(i,!1),t.MA(0,0,0,0),t.KD(),t.UM(this.Tx()),e.dO(t,this.LO()),e.oO(t),e.hO()}}}{const ae=self.ks,ue=ae.lr(ae.Rect),le=ae.lr(ae.il);ae.my.EN.GL.IL=class extends ae.my.EN.GL{constructor(t,s,i,e){super(t,s,i,e)}qL(t,s,i){const e=this.NO(),h=(t.AA(i),0===this.YL());h?t.pT(e.vO()):(t.MA(0,0,0,0),t.KD()),t.UM(this.Tx()),e.cO(t,this.LO()),t.VD(s.Qb()),e.uO(t,h),le.vl(e.GO()),ue.C(e.IO()),ue.Uu(1),t.Pw(le,ue),e.CO()&&t.OA(s)}HL(t,s,i){const e=this.NO(),h=(t.AA(i,!1),0===this.YL());h?(t.pT(e.vO()),t.SetBackTexture(null),e.aO(t)?le.vl(e.IO()):(t.SetNormalizedCoordsProgramVariant(!1),e.uO(t,!0),le.vl(e.GO()))):(t.MA(0,0,0,0),t.KD(),le.vl(e.IO())),t.UM(this.Tx()),e.cO(t,this.LO()),t.VD(s.Qb()),e.SO()?t.rA():t.Pw(le,e.IO())}}}{let l=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},c=(l,self.ks),f=self.Hs,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.OO=class{constructor(t){d=t,Object.defineProperties(this,{RO:{value:d.kO().PO(),writable:!1},FO:{value:d.zO().jO(),writable:!1},BO:{value:{},writable:!1},UO:{value:{},writable:!1},WO:{value:d.QO(),writable:!1},JO:{value:d.VO(),writable:!1},YO:{value:new Date(d.HO()),writable:!1},storage:{value:new self.qO(d),writable:!1},isInWorker:{value:d.ZO(),writable:!1},XO:{value:d.KO(),writable:!1},$O:{value:d.t3(),writable:!1},_2:{value:d.s3(),writable:!1},i3:{value:d.e3(),writable:!1},h3:{value:new self.r3(t),writable:!1},n3:{value:new self.o3(t),writable:!1}}),d.a3().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.a3().addEventListener("keyup",t=>s.delete(t.key)),d.Hf().addEventListener("window-blur",()=>s.clear()),d.ZO()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}u3(t){Object.defineProperties(this.BO,t)}l3(t){Object.defineProperties(this.UO,t)}addEventListener(t,s){d.a3().addEventListener(t,s)}removeEventListener(t,s){d.a3().removeEventListener(t,s)}f3(t,...s){f.Ge(t);const i=d.d3(),e=i.m3(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.tc())return e.g3();if(s.length<e.y3())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.y3()} expected)`);let h=e.M3(),r=h.w3(),n=i.S3();if(n){r=r.slice(0);const a=new Set(r);for(const u of n.w3())a.has(u)||(r.push(u),a.add(u));for(const l of i.T3())a.has(l)||(r.push(l),a.add(l))}const o=h.b3(r,e.v3(),e.x3(),e.g3(),...s);return o}G3(t){const s=d.C3().I3();if(!s)throw new Error("not in a function which returns a value");switch(s._3()){case 1:"number"==typeof t&&s.E3(t);break;case 2:"string"==typeof t&&s.E3(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.E3(t)}}signal(t){f.Ge(t),d.d3().D3(t)}A3(t){return f.Ge(t),d.d3().N3(t)}L3(){return[d.KO(),d.t3()]}get isSuspended(){return d.O3()}get R3(){return d.P3()}get F3(){return d.j3()}get gameTime(){return d.z3()}get B3(){return d.U3()}get timeScale(){return d.W3()}set timeScale(t){f.Se(t),d.Q3(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.J3()}get framesPerSecond(){return d.J3()}get V3(){return d.Y3()}get H3(){return d.q3()}get Z3(){return d.X3()}get K3(){return d.tR()}set K3(t){if(!e.has(t))throw new Error("invalid framerate mode");d.sR(t)}get iR(){return d.eR()}set iR(t){f.Se(t),d.hR(t)}get rR(){return d.nR()}set rR(t){d.oR(t)}get aR(){return d.kO().uR()}get lR(){return d.kO().cR()}random(){return d.fR()}get layout(){const t=d.dR();if(t)return t.pR();throw new Error("no layout is running - make sure a layout is loaded before accessing")}mR(t){let s=d.gR(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.yR(t))return i.pR();throw new Error("invalid layout")}MR(){return d.gR().wR().map(t=>t.pR())}SR(t){let s=d.gR(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.yR(t)))throw new Error("invalid layout");s.TR()||s.bR(i)}get keyboard(){const t=d.vR().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get xR(){const t=d.vR().xR;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get GR(){const t=d.vR().GR;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get IR(){const t=d.vR().IR;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}CR(t,s){f.Ge(t),f.Ge(s),d._R(t,s)}ER(t){f.Se(t);const s=d.DR(t);return s?s.AR():null}NR(t,e){f.He(e);const h=d.LR();for(const s of t){const i=d.OR(s),r=i.RR();p.push([r.PR().LO(),r.kR()]),m.push(i)}if(0!==p.length){p.sort(l),m.sort((t,s)=>e(t.AR(),s.AR()));let i=!1;for(let t=0,s=p.length;t<s;++t){const n=m[t],o=h.FR(p[t][0]),a=p[t][1],u=o.jR();u[a]!==n&&((u[a]=n).RR().zR(o,!0),o.BR(n),i=!0)}i&&d.UR(),c.Wn(p),c.Wn(m)}}async WR(t,s){const i=new MessageChannel,e=i.port1,h=i.port2;return await d.QR("runtime","script-create-worker",{url:t,opts:s,port2:h},[h]),e}alert(t){return d.QR("runtime","alert",{message:t+(d.ZO()?" [via Web Worker]":"")})}JR(t){return f.Se(t),d.VR(t)}YR(t){d.HR(t)}}}{let s=self.ks,i=null;self.qR=class{constructor(t){i=t,Object.defineProperties(this,{ZR:{value:!0,writable:!1}})}KR(t){const s=self.tP.$R(t);if(!s)throw new Error("invalid IImageInfo");s.sP(i.iP())}eP(t){return i.Co(t)}hP(t){return i._o(t)}rP(t){return i.Eo(t)}nP(t){return i.Do(t)}oP(t){return i.aP(t)}uP(t){return"flat"===i.lP()&&s.xo(t)&&(t=t.toLowerCase()),i.cP(t)}get fP(){return i.dP()}async pP(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}mP(...t){return i.gP(...t)}yP(t){return i.MP(t)}wP(t){return i.SP(t)}}}{let n=self.ks,i=self.Hs,o=null;self.TP=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.iP(),writable:!1}})}bP(t,s){const i=o.iP(),e=i.OR(t),h=i.OR(s);return o.vP(e,h)}xP(t,s){const i=o.iP(),e=i.OR(t);for(const h of s){const r=i.OR(h);if(o.vP(e,r))return h}return null}GP(t){const s=o.iP().OR(t),i=o.IP(s);return i?i.AR():null}CP(t,s){if(i.Se(t),i.Se(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o._P(t,s)}EP(){return o.DP()}AP(t,s){let i=o.iP(),e;e=Array.isArray(t)?t.map(t=>i.NP(t)):[i.NP(t)];const h=n.Rect.xu(s),r=[];return o.LP(null,e,h,r),r.map(t=>t.AR())}}}{let s=self.ks,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),h=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),r=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.r3=class{constructor(t){i=t,Object.defineProperties(this,{OP:{value:s.li.Si,writable:!1},RP:{value:e.get(s.li.ci)||"unknown",writable:!1},PP:{value:s.li.fi,writable:!1},kP:{value:h.get(s.li.di)||"unknown",writable:!1},FP:{value:s.li.mi,writable:!1},jP:{value:r.get(s.li.yi)||"unknown",writable:!1}})}get exportType(){let t=i.zP();return i.BP()?t="nwjs":i.UP()?t="windows-webview2":"cordova"===t?t="Android"===s.li.ci?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.QP().WP()}get JP(){return i.QP().VP()}get YP(){return i.QP().HP()}get qP(){return i.QP().ZP()}get XP(){return i.QP().KP()}get $P(){return i.QP().t4()}get devicePixelRatio(){return i.s4()}}}{const ce=self.Hs;self.qO=class{constructor(t){this.i4=t.e4()}getItem(t){return ce.Ge(t),this.i4.getItem(t)}setItem(t,s){return ce.Ge(t),this.i4.setItem(t,s)}removeItem(t){return ce.Ge(t),this.i4.removeItem(t)}clear(){return this.i4.clear()}keys(){return this.i4.keys()}}}{const fe=self.ks,de=fe.Fs();self.h4=class{#r4;constructor(){const t=fe.o4.n4(de);this.#r4=t,Object.defineProperties(this,{runtime:{value:t.iP().a4(),writable:!1},u4:{value:t.l4(),writable:!1},c4:{value:t.f4(),writable:!1},d4:{value:t.m4(),writable:!1},g4:{value:t.y4(),writable:!1},M4:{value:t.w4(),writable:!1},S4:{value:t.T4(),writable:!1},b4:{value:t.v4(),writable:!1},x4:{value:t.G4(),writable:!1}}),t.iP().I4(this,t)}static C4(t){if(!t)return null;const s=fe.o4._4(t);return s?s.E4():null}D4(){return this.#r4.N4().A4()}L4(){return this.#r4.O4().AR()}}}{const pe=self.ks,me=self.Hs,ge=pe.Fs();self.R4=class{#r4;constructor(){const t=pe.o4.n4(ge);this.#r4=t,Object.defineProperties(this,{name:{value:t.hf(),writable:!1},runtime:{value:t.iP().a4(),writable:!1},P4:{value:t.F4().E4(),writable:!1}}),t.iP().I4(this,t)}addEventListener(t,s){me.Ge(t),me.He(s),this.#r4.a3().addEventListener(t,s)}removeEventListener(t,s){me.Ge(t),me.He(s),this.#r4.a3().removeEventListener(t,s)}j4(){return[...this.instances()]}z4(){return pe.first(this.instances())}B4(){return[...this.U4()]}W4(){return pe.first(this.U4())}Q4(t){const s=this.#r4,i=s.iP().J4(t),e=s.V4(i);return e?e.AR():null}*instances(){for(const t of this.#r4.Y4())yield t.AR()}*U4(){for(const t of this.#r4.q4().H4())yield t.AR()}Z4(t){me.He(t);const s=this.#r4;if(0<s.X4())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.K4(t)}ki(t,s,i,e,h){if(me.me(s),me.me(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#r4,n=r.iP(),o=n.dR().PR(t);if(!o)throw new Error("invalid layer");const a=n.sk(r,o,s,i,e,h),u=(e&&o.ik(a),n.d3());return u.ek(!0),a.hk(),u.ek(!1),u.rk()||n.gR().nk()||n.ak(),a.AR()}}}{const ye=self.Hs,u=new WeakMap,Me=["above","below","top-sublayer","bottom-sublayer"];self.uk=class{constructor(t){u.set(this,t);const s=[],i=t.lk(),e=i.ck().length;for(let t=0;t<e;++t)s.push(new self.fk(i,t));Object.defineProperties(this,{name:{value:t.hf(),writable:!1},index:{value:t.LO(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){ye.Ge(t),ye.He(s),u.get(this).a3().addEventListener(t,s)}removeEventListener(t,s){ye.Ge(t),ye.He(s),u.get(this).a3().removeEventListener(t,s)}get width(){return u.get(this).ym()}set width(t){ye.Se(t),u.get(this).Gm(t)}get height(){return u.get(this)._m()}set height(t){ye.Se(t),u.get(this).Mm(t)}dk(t,s){ye.Se(t),ye.Se(s);const i=u.get(this);i.Gm(t),i.Mm(s)}getSize(){const t=u.get(this);return[t.ym(),t._m()]}set scale(t){ye.Se(t),u.get(this).pk(t)}get scale(){return u.get(this).mk()}set angle(t){ye.Se(t),u.get(this).gk(t)}get angle(){return u.get(this).yk()}set scrollX(t){ye.me(t),u.get(this).Mk(t)}get scrollX(){return u.get(this).wk()}set scrollY(t){ye.me(t),u.get(this).Sk(t)}get scrollY(){return u.get(this).Tk()}scrollTo(t,s){ye.me(t),ye.me(s);const i=u.get(this);i.Mk(t),i.Sk(s)}bk(){const t=u.get(this);return[t.wk(),t.Tk()]}vk(t){let s=u.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.PR(t))?i.xk():null}Gk(){return u.get(this).Ik().map(t=>t.xk())}*Ck(){for(const t of u.get(this).Ck())yield t.xk()}_k(t,s,i){const e=u.get(this),h=self.Ek,r=(ye.Ge(t),ye.eh(s,h),s?e.iP().Dk(s):null),n=Me.indexOf(i);if(n<0)throw new Error("invalid location");e.Ak(t,r,n)}Nk(t,s,i){const e=u.get(this),h=e.iP(),r=self.Ek,n=(ye.ih(t,r),h.Dk(t));if(!n)throw new Error("invalid layer");ye.eh(s,r);const o=s?h.Dk(s):null,a=Me.indexOf(i);if(a<0)throw new Error("invalid location");e.Lk(n,o,a)}Ok(t){const s=u.get(this),i=self.Ek,e=(ye.ih(t,i),s.iP().Dk(t));if(!e)throw new Error("invalid layer");const h=e.iP();s.Rk(e),h.d3().rk()||h.ak()}Pk(){const t=u.get(this),s=t.iP();t.kk(),s.d3().rk()||s.ak()}Fk(t,s){ye.Se(t),ye.Se(s),u.get(this).jk(t,s)}zk(){return u.get(this).Bk()}set K(t){ye.Ge(t);const s=u.get(this);if("perspective"===t)s.Uk();else{if("orthographic"!==t)throw new Error("invalid projection");s.Wk()}}get K(){return u.get(this).Qk()?"orthographic":"perspective"}}}{const we=self.ks,Se=self.Hs,f=new WeakMap,Te=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),be=new Map([...Te.entries()].map(t=>[t[1],t[0]])),ve=we.lr(we.Ho);self.Ek=class{constructor(t){f.set(this,t);const s=[],i=t.lk(),e=i.ck().length;for(let t=0;t<e;++t)s.push(new self.fk(i,t));Object.defineProperties(this,{name:{value:t.hf(),writable:!1},layout:{value:t.yR().pR(),writable:!1},effects:{value:s,writable:!1}}),t.iP().I4(this,t)}get Jk(){const t=f.get(this).Vk();return t?t.xk():null}*Yk(){for(const t of f.get(this).Yk())yield t.xk()}*Hk(){for(const t of f.get(this).qk())yield t.xk()}*Zk(){for(const t of f.get(this).qk())for(const s of t.Xk())yield s.xk()}get index(){return f.get(this).LO()}get isVisible(){return f.get(this).Kk()}set isVisible(t){f.get(this).$k(t)}get tF(){return f.get(this).sF()}get isInteractive(){return f.get(this).iF()}set isInteractive(t){f.get(this).eF(t)}get hF(){return f.get(this).rF()}set hF(t){f.get(this).nF(!!t)}get oF(){return f.get(this).aF()}get opacity(){return f.get(this).BD()}set opacity(t){t=we.Sr(+t,0,1),isNaN(t)||f.get(this).WD(t)}set scale(t){Se.Se(t),f.get(this).uF(t)}get scale(){return f.get(this).lF()}set scaleRate(t){Se.Se(t),f.get(this).cF(t)}get scaleRate(){return f.get(this).fF()}set angle(t){Se.Se(t),f.get(this).gk(t)}get angle(){return f.get(this).dF()}set parallaxX(t){Se.Se(t),f.get(this).pF(t)}get parallaxX(){return f.get(this).mF()}set parallaxY(t){Se.Se(t),f.get(this).gF(t)}get parallaxY(){return f.get(this).yF()}set MF(t){Se.Se(t),f.get(this).AT(t)}get MF(){return f.get(this).DT()}set wF(t){f.get(this).SF(t)}get wF(){return f.get(this).TF()}set bF(t){f.get(this).vF(t)}get bF(){return f.get(this).xF()}set NL(t){Se.Ge(t);const s=Te.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");f.get(this).pT(s)}get NL(){return be.get(f.get(this).GF())}set backgroundColor(t){if(Se.Be(t),t.length<3)throw new Error("expected 3 elements");ve.ta(t[0],t[1],t[2]);const s=f.get(this),i=s.IF();i.Ma(ve)||(i.ua(ve),s.iP().UR())}get backgroundColor(){const t=f.get(this).IF();return[t.la(),t.ca(),t.fa()]}set scrollX(t){Se.me(t);const s=f.get(this);s.CF(!0),s.Mk(t)}get scrollX(){return f.get(this).wk()}set scrollY(t){Se.me(t);const s=f.get(this);s.CF(!0),s.Sk(t)}get scrollY(){return f.get(this).Tk()}scrollTo(t,s){Se.me(t),Se.me(s);const i=f.get(this);i.CF(!0),i.Mk(t),i.Sk(s)}bk(){const t=f.get(this);return[t.wk(),t.Tk()]}_F(){f.get(this).CF(!1)}getViewport(){return f.get(this).EF().Du()}DF(t,s,i=0){Se.me(t),Se.me(s),Se.me(i);const e=f.get(this),h=e.iP();return e.AF(t-h.NF(),s-h.LF(),i)}OF(t,s,i=0){Se.me(t),Se.me(s),Se.me(i);const e=f.get(this),h=e.iP(),[r,n]=e.RF(t,s,i);return[r+h.NF(),n+h.LF()]}PF(t,s,i=0){return Se.me(t),Se.me(s),Se.me(i),f.get(this).kF(t,s,i)}FF(t,s,i=0){return Se.me(t),Se.me(s),Se.me(i),f.get(this).jF(t,s,i)}get zF(){return f.get(this).BF()}}}{let e=function(t){let s=Ie.get(t);return s||(s=xe.lr(xe.Event.Hf),Ie.set(t,s)),s};e;const xe=self.ks,Ge=self.Hs,Ie=new WeakMap,Ce=xe.Fs();self.UF=class{#r4;constructor(){const t=xe.o4.n4(Ce),s={runtime:{value:(this.#r4=t).iP().a4(),writable:!1},WF:{value:t.QF().A4(),writable:!1},P4:{value:t.F4().E4(),writable:!1}};t.JF(s),t.VF(s),Object.defineProperties(this,s),t.iP().I4(this,t)}static YF(){return xe.o4.HF()}qF(){const t=Ie.get(this);t&&(t.cr(),Ie.delete(this))}addEventListener(t,s,i){Ge.Ge(t),Ge.He(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Ge.Ge(t),Ge.He(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}ZF(){const t=this.#r4,s=t.iP();s.XF(t),s.d3().rk()||s.gR().nk()||s.d3().KF()||s.ak()}$F(){const t=this.#r4.tj();return t?t.map(t=>t.AR()):[]}*sj(){const t=this.#r4;if(t.ij())for(const s of t.ej())yield s.AR()}get uid(){return this.#r4.hj()}get rj(){return this.#r4.nj()}get oj(){return this.#r4.aj()}set timeScale(t){Ge.Se(t),this.#r4.Q3(t)}get timeScale(){return this.#r4.uj()}lj(){this.#r4.cj()}get R3(){const t=this.#r4;return t.iP().P3(t)}fj(...t){Ge.Be(t);const s=new Set(t),i=this.#r4.pj();return s.isSubsetOf(i)}mj(t){Ge.ih(t,Set),this.#r4.gj(t)}yj(){return new Set(this.#r4.pj())}signal(t){Ge.Ge(t);const s=this.#r4;s.iP().d3().Mj(s,t)}A3(t){Ge.Ge(t);const s=this.#r4;return s.iP().d3().wj(s,t)}}}{const _e=self.ks,Ee=self.Hs,De=_e.Fs();self.Sj=class extends self.UF{#r4;#Tj=!1;#bj=null;#vj=!1;#xj=null;#Gj;#Ij;constructor(t){super(),this.#r4=_e.o4.n4(De),this.#Tj=!1,this.#bj=null,this.#vj=!1,this.#xj=null,this.#Gj=t?.domComponentId,this.#Ij=t?.wrapperComponentId}qF(){this.Cj(!1),this._j(!1),super.qF()}Ej(){return _e.o4.Dj()}Aj(t){const s=this.#r4;s.iP().Nj(t,s)}Lj(t){const s=this.#r4;return s.iP().Oj(t,s)}Rj(t,s){if(Ee.Ge(t),Ee.He(s),!this.#Gj)throw new Error("no DOM component id set");const i=this.#r4.iP();i.Pj(this.#Gj,t,s)}kj(t){Ee.Be(t);for(const[s,i]of t)this.Rj(s,i)}Fj(t,s){if(Ee.Ge(t),!this.#Gj)throw new Error("no DOM component id set");const i=this.#r4.iP();i.Mf(this.#Gj,t,s)}jj(t,s){if(Ee.Ge(t),!this.#Gj)throw new Error("no DOM component id set");const i=this.#r4.iP();return i.QR(this.#Gj,t,s)}zj(t,s){const i=this.#r4.iP();if(!i.ZO())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#Gj,handler:t,data:s,responseId:null});this.Fj(t,s)}Cj(t){if(this.#Tj!==(t=!!t)){this.#Tj=t;const s=this.#r4.iP();if(t){if(!this.#bj)if(this.#r4.iP().Bj()){const i=globalThis.C3Debugger,e=this.P4;this.#bj=()=>{const t=performance.now();this.Uj(),i.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.#bj=()=>this.Uj();s.Hf().addEventListener("tick",this.#bj)}else s.Hf().removeEventListener("tick",this.#bj)}}Wj(){return this.#Tj}Uj(){}_j(t){if(this.#vj!==(t=!!t)){this.#vj=t;const s=this.#r4.iP();if(t){if(!this.#xj)if(this.#r4.iP().Bj()){const i=globalThis.C3Debugger,e=this.P4;this.#xj=()=>{const t=performance.now();this.Qj(),i.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.#xj=()=>this.Qj();s.Hf().addEventListener("tick2",this.#xj)}else s.Hf().removeEventListener("tick2",this.#xj)}}Jj(){return this.#vj}Qj(){}Vj(){return[]}Yj(){return null}Hj(t){}qj(){if(!this.#Ij)throw new Error("no wrapper component id set");const t=this.#r4.iP();return t.Zj(this.#Ij)}Xj(t,s){if(Ee.Ge(t),Ee.He(s),!this.#Ij)throw new Error("no wrapper component id set");const i=this.#r4.iP();i.Kj(this.#Ij,t,s)}$j(t){Ee.Be(t);for(const[s,i]of t)this.Xj(s,i)}t5(t,s){if(!this.#Ij)throw new Error("no wrapper component id set");this.runtime.n3.s5(this.#Ij,t,s)}i5(t,s){if(this.#Ij)return this.runtime.n3.e5(this.#Ij,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class h extends t{#h5;#r5;constructor(t){super(t);const s=Ae.o4.n4(Re),i=s.RR(),e=(this.#h5=s,this.#r5=i,Oe.set(this,s),[]),h=i.n5();if(h){const n=i.QF().lk().ck().length;for(let t=0;t<n;++t)e.push(new self.fk(h,t))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#r5.yR().pR()}get o5(){return this.#r5.PR().xk()}get x(){return this.#r5.GT()}set x(t){t=+t;const s=this.#r5;isNaN(t)||s.GT()===t||(s.IT(t),s.a5())}get y(){return this.#r5._T()}set y(t){t=+t;const s=this.#r5;isNaN(t)||s._T()===t||(s.ET(t),s.a5())}setPosition(t,s){t=+t,s=+s;const i=this.#r5;isNaN(t)||isNaN(s)||i.GT()===t&&i._T()===s||(i.u5(t,s),i.a5())}l5(){const t=this.#r5;return[t.GT(),t._T()]}c5(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#r5;i.f5(t,s),i.a5()}}get MF(){return this.#r5.DT()}set MF(t){t=+t;const s=this.#h5,i=this.#r5;isNaN(t)||i.DT()===t||(i.AT(t),s.iP().UR())}get d5(){return this.#r5.p5()}get width(){return this.#r5.ym()}set width(t){t=+t;const s=this.#r5;isNaN(t)||s.ym()===t||(s.Gm(t),s.a5())}get height(){return this.#r5._m()}set height(t){t=+t;const s=this.#r5;isNaN(t)||s._m()===t||(s.Mm(t),s.a5())}dk(t,s){t=+t,s=+s;const i=this.#r5;isNaN(t)||isNaN(s)||i.ym()===t&&i._m()===s||(i.c_(t,s),i.a5())}getSize(){const t=this.#r5;return[t.ym(),t._m()]}get angle(){return this.#r5.yk()}set angle(t){t=Ae.Tr(+t);const s=this.#r5;isNaN(t)||s.yk()===t||(s.gk(t),s.a5())}get m5(){return Ae.vr(this.angle)}set m5(t){this.angle=Ae.br(t)}Il(){return this.#r5.g5().Du()}y5(){return this.#r5.M5().Sl()}w5(){return this.#r5.S5()}get isVisible(){return this.#r5.sF()}set isVisible(t){t=!!t;const s=this.#h5,i=this.#r5;i.sF()!==t&&(i.$k(t),s.iP().UR())}get opacity(){return this.#r5.BD()}set opacity(t){t=Ae.Sr(+t,0,1);const s=this.#h5,i=this.#r5;isNaN(t)||i.BD()===t||(i.WD(t),s.iP().UR())}set T5(t){if(Ne.Be(t),t.length<3)throw new Error("expected 3 elements");Fe.ta(t[0],t[1],t[2]);const s=this.#h5,i=this.#r5;i.b5().Ma(Fe)||(i.v5(Fe),s.iP().UR())}get T5(){const t=this.#r5.b5();return[t.la(),t.ca(),t.fa()]}set NL(t){Ne.Ge(t);const s=Pe.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#h5,e=this.#r5;e.pT(s),i.iP().UR()}get NL(){return ke.get(this.#r5.GF())}x5(){this.#r5.G5()}I5(){this.#r5.C5()}_5(t){Ne.ih(t,Le);const s=this.#h5,i=s.iP().Dk(t);if(!i)throw new Error("invalid layer");s.RR().E5(i)}D5(t,s){Ne.ih(t,h),this.#r5.A5(Oe.get(t),s)}get zIndex(){return this.#r5.kR()}get N5(){return this.#r5.L5()}set N5(t){this.#r5.O5(!!t)}Ku(t,s){return Ne.me(t),Ne.me(s),this.#r5.R5(+t,+s)}bP(t){Ne.ih(t,h);const s=this.#h5,i=Oe.get(t);return s.iP().zO().vP(s,i)}GP(){const t=this.#h5,s=t.iP().zO().IP(t);return s?s.AR():null}getParent(){const t=this.#h5.P5();return t?t.AR():null}k5(){const t=this.#h5.F5();return t?t.AR():null}*j5(){for(const t of this.#h5.j5())yield t.AR()}z5(){return this.#h5.B5()}U5(t){const s=this.#h5.W5(t);return s?s.AR():null}*children(){for(const t of this.#h5.children())yield t.AR()}*Q5(){for(const t of this.#h5.Q5())yield t.AR()}J5(t,s){Ne.ih(t,h),Ne.Le(s),s=s||{};const i=this.#h5,e=Oe.get(t);i.V5(e,s)}removeChild(t){Ne.ih(t,h);const s=this.#h5,i=Oe.get(t);s.Y5(i)}H5(){const t=this.#h5;if(t.q5()){const s=t.P5();s.Y5(t)}}Z5(){const t=this.#r5;return{X5:t.K5(),sz:t.iz(),ez:t.hz(),rz:t.nz(),oz:t.az(),uz:t.lz(),cz:t.fz(),dz:t.pz(),mz:t.gz()}}yz(t,s){Ne.Se(t),Ne.Se(s),this.#r5.Mz(t,s)}wz(){const t=this.#r5;t.Sz(),t.a5()}Tz(t,s,i){Ne.Se(t),Ne.Se(s),Ne.Ne(i);const e=this.#r5;e.bz(t,s,i)&&e.a5()}vz(t,s){let i=NaN,e=NaN,h=NaN,r=NaN,n=NaN,o=this.#r5;if(o.xz()){const a=o.Gz(),u=a.f2(t,s);null!==u&&(i=u.GT(),e=u._T(),h=u.DT(),r=u.NT(),n=u.OT())}return{x:i,y:e,MF:h,u:r,v:n}}Iz(){const t=this.#r5;if(!t.xz())return[0,0];const s=t.Gz();return[s.t2(),s.s2()]}}};0;const Ae=self.ks,Ne=self.Hs,Le=self.Ek,Oe=new WeakMap,Re=Ae.Fs(),Pe=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ke=new Map([...Pe.entries()].map(t=>[t[1],t[0]])),Fe=Ae.lr(Ae.Ho);self.Cz=t(self.UF),self._z=t(self.Sj)}{const je=self.Hs;self.Ez=class extends self.Cz{#r4;constructor(){super(),this.#r4=self.UF.YF()}Dz(){return this.#r4.Nz().Az()}focus(){this.#r4.Nz().Lz()}blur(){this.#r4.Nz().Oz()}Rz(t,s){je.Ge(t),this.#r4.Nz().Pz(t,s)}}}{let e=function(t){let s=Ue.get(t);return s||(s=ze.lr(ze.Event.Hf),Ue.set(t,s)),s};e;const ze=self.ks,Be=self.Hs,Ue=new WeakMap,We=ze.Fs();self.kz=class{#r4;constructor(){const t=ze.o4.n4(We),s={runtime:{value:(this.#r4=t).iP().a4(),writable:!1},behavior:{value:t.jz().Fz(),writable:!1},zz:{value:t.Uz().Bz(),writable:!1}};Object.defineProperties(this,s),t.iP().I4(this,t)}static YF(){return ze.o4.HF()}get Wz(){return this.#r4.Qz().AR()}qF(){const t=Ue.get(this);t&&(t.cr(),Ue.delete(this))}addEventListener(t,s,i){Be.Ge(t),Be.He(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Be.Ge(t),Be.He(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const Qe=self.ks,Je=Qe.Fs();self.Jz=class{constructor(){const t=Qe.o4.n4(Je),s={runtime:{value:t.iP().a4(),writable:!1},behavior:{value:t.jz().Fz(),writable:!1},name:{value:t.hf(),writable:!1}};Object.defineProperties(this,s)}}}{const Ve=self.ks,Ye=Ve.Fs();self.Vz=class{#r4;constructor(){const t=Ve.o4.n4(Ye),s={runtime:{value:(this.#r4=t).iP().a4(),writable:!1}};Object.defineProperties(this,s),t.iP().I4(this,t)}j4(){return this.#r4.H4().map(t=>t.AR())}static C4(t){if(!t)return null;const s=Ve.o4.Yz(t);return s?s.Fz():null}}}{const He=self.ks,qe=self.Hs,Ze=He.lr(He.Ho);self.fk=class{#r4;constructor(t,s){this.#r4=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#r4.ck();return t[this.index].hf()}get isActive(){return this.#r4.qz(this.index)}set isActive(t){t=!!t;const s=this.#r4;s.qz(this.index)!==t&&(s.Zz(this.index,t),s.Xz(),s.iP().UR())}setParameter(t,s){qe.Se(t),t=Math.floor(+t);const i=this.#r4,e=i.Kz(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof He.Ho){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Ze.ta(s[0],s[1],s[2]),s=Ze}else if("number"!=typeof s)throw new TypeError("expected number");const h=i.$z(this.index,t,s);h&&i.qz(this.index)&&i.iP().UR()}getParameter(t){qe.Se(t),t=Math.floor(+t);const s=this.#r4,i=s.Kz(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof He.Ho?[i.la(),i.ca(),i.fa()]:i}}}self.tB=class{#r4;constructor(t){this.#r4=t,Object.defineProperties(this,{name:{value:t.hf(),writable:!1}})}get speed(){return this.#r4.sB()}get isLooping(){return this.#r4.iB()}get repeatCount(){return this.#r4.eB()}get hB(){return this.#r4.rB()}get nB(){return this.#r4.oB()}get frameCount(){return this.#r4.aB()}uB(){return this.#r4.lB().map(t=>t.cB())}*frames(){for(const t of this.#r4.lB())yield t.cB()}};self.tP=class{#r4;constructor(t){this.#r4=t}static $R(t){return t.#r4}get width(){return this.#r4.ym()}get height(){return this.#r4._m()}getSize(){const t=this.#r4;return[t.ym(),t._m()]}fB(t){return t.dB(this)}pB(){return this.#r4.U_().Du()}};{const Xe=self.Hs;self.mB=class extends self.tP{#r4;constructor(t){super(t.gB()),this.#r4=t,Object.defineProperties(this,{duration:{value:t.yB(),writable:!1},MB:{value:t.wB(),writable:!1},SB:{value:t.TB(),writable:!1}})}bB(){const t=this.#r4;return[t.wB(),t.TB()]}vB(){return this.#r4.xB()}GB(t){return this.IB(t)[0]}CB(t){return this.IB(t)[1]}IB(t){let s=this.#r4,i=null;if("number"==typeof t)i=s._B(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.EB(t)}return i?[i.GT(),i._T()]:this.bB()}DB(){const t=this.#r4.AB();return t?t.Ul():0}NB(t){return this.LB(t)[0]}OB(t){return this.LB(t)[1]}LB(t){Xe.Se(t),t=Math.floor(t);const s=this.#r4.AB();if(!s||t<0||t>=s.Ul())return[0,0];const i=s.Bl(),e=i[2*t],h=i[2*t+1];return[e,h]}get tag(){return this.#r4.RB()}}}{let s=function(t){const s=$e.get(t);if(s.PB())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Ke=self.Hs,$e=new WeakMap;self.kB=class{constructor(t){$e.set(this,t),t.iP().I4(this,t)}pause(){s(this).jB()}resume(){s(this).zB()}stop(){s(this).m0()}fj(t){return s(this).BB(t)}set time(t){Ke.Se(t),s(this).UB(t)}get time(){return s(this).gN()}set totalTime(t){Ke.Se(t),s(this).WB(t)}get totalTime(){return s(this).QB()}set isLooping(t){s(this).JB(!!t)}get isLooping(){return s(this).VB()}set nB(t){s(this).YB(!!t)}get nB(){return s(this).HB()}set playbackRate(t){Ke.Se(t),s(this).qB(t)}get playbackRate(){return s(this).ZB()}get progress(){const t=s(this);return t.gN()/t.QB()}get tags(){return s(this).XB()}get finished(){return s(this).KB()}get isPlaying(){return s(this).IsPlaying()}get $B(){return s(this).tU()}get sU(){return $e.get(this).PB()}}}{let i=new WeakMap;self.iU=class extends self.kB{constructor(t){super(t),i.set(this,t);const s={name:{value:t.hf(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=h.get(t);if(s.PB())throw new Error("tween was released and is no longer valid");return s},e=(i,self.Hs),h=new WeakMap,r=new WeakMap,n=null;self.eU=class extends self.kB{constructor(t,s,i){super(t),n=n||i.easeToIndexFunc,h.set(this,t),s&&r.set(this,s)}stop(){const t=i(this),s=r.get(this);s.ReleaseTween(t)}hU(t){e.Ge(t);const s=self.Tc.jc(n(t));i(this).rU(s)}get Wz(){const t=i(this).nU();return t?t.AR():null}get oU(){return i(this).aU()}set oU(t){i(this).uU(!!t)}get value(){const t=i(this);if("value"!==t.lU())throw new Error("not a value tween");return t.fU("value").cU()}}}self.dU=class extends self.h4{constructor(){super()}};{const th=self.ks,sh=self.Hs,ih=th.Fs();self.pU=class extends self.dU{#r4;#Gj;#mU=0;#gU=new Map;constructor(t){if(super(),this.#r4=th.o4.n4(ih),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#Gj=t.domComponentId,this.yU("elem-focused",t=>t.MU()),this.yU("elem-blurred",t=>{t&&t.wU()})}SU(t){const s=this.#mU++;return this.#gU.set(s,t),s}TU(t){this.#gU.delete(t)}yU(t,i){const s=this.#r4.iP();s.Pj(this.#Gj,t,t=>{const s=this.#gU.get(t.elementId);i(s,t)})}bU(t){sh.Be(t);for(const[s,i]of t)this.bU(s,i)}}}{const eh=self.ks,hh=(new WeakMap,eh.Fs());self.vU=class extends self.R4{#r4;constructor(){super(),this.#r4=eh.o4.n4(hh)}xU(){}GU(){return this.#r4.gB().IU()}CU(t){}_U(t){}EU(){}DU(t){}}}{const rh=self.ks,nh=(new WeakMap,rh.Fs());self.AU=class extends self._z{#r4;#NU=null;#LU=null;constructor(t){super(t),this.#r4=rh.o4.n4(nh)}qF(){if(super.qF(),this.#NU){const t=this.#r4.iP().Hf();t.removeEventListener("renderercontextlost",this.#NU),t.removeEventListener("renderercontextrestored",this.#LU),this.#NU=null,this.#LU=null}}OU(){if(!this.#NU){this.#NU=()=>this.RU(),this.#LU=()=>this.PU();const t=this.#r4.iP().Hf();t.addEventListener("renderercontextlost",this.#NU),t.addEventListener("renderercontextrestored",this.#LU)}}RU(){}PU(){}kU(t){}}}{const oh=self.ks,ah=oh.lr(oh.Rect),uh=new WeakMap,lh=oh.Fs();self.FU=class extends self.AU{#jU=-1;#zU=!0;#BU=!1;#UU=!1;#WU=-.2;#QU=oh.lr(oh.Rect,0,0,-1,-1);#JU=0;#VU=0;#YU=-1;#HU=-1;#qU=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=oh.o4.n4(lh),i=(uh.set(this,s),this.#jU=this.P4.SU(this),s.iP().QP());this.#JU=i.ZU(),this.#VU=i.XU(),this.Cj(!0)}qF(){super.qF(),this.P4.TU(this.#jU),this.KU("destroy"),this.#jU=-1,uh.delete(this)}$U(){const t=uh.get(this).iP();if(t.ZO())throw new Error("not valid in worker mode");return this.t6("get-element")}KU(t,s){(s=s||{}).elementId=this.#jU,this.Fj(t,s)}t6(t,s){return(s=s||{}).elementId=this.#jU,this.zj(t,s)}s6(t,s){return(s=s||{}).elementId=this.#jU,this.jj(t,s)}i6(t){t=t||{};const s=uh.get(this).RR();t.elementId=this.#jU,t.isVisible=s.sF(),t.htmlIndex=s.PR().e6(),t.htmlZIndex=s.h6(),Object.assign(t,this.r6()),this.#zU=!!t.isVisible,this.zj("create",t),this.n6(!0)}o6(t){this.#zU!==(t=!!t)&&(this.#zU=t,this.KU("set-visible",{isVisible:t}))}Uj(){this.n6(!1)}a6(){const t=uh.get(this).iP(),s=t.QP().u6();return"Android"===oh.li.ci&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}n6(l){const c=uh.get(this);if(!c.l6()){let t=c.RR(),s=t.PR(),i=t.g5(),[e,h]=s.RF(i.Iu(),i.Cu()),[r,n]=s.RF(i._u(),i.Eu()),o=c.iP().QP(),a=o.HP(),u=o.ZP();if(t.sF()&&s.sF())if(!this.a6()&&(r<=0||n<=0||a<=e||u<=h))this.o6(!1);else{ah.set(e,h,r,n);const f=o.ZU(),d=o.XU(),p=s.e6(),m=t.h6();if(!l&&ah.equals(this.#QU)&&this.#JU===f&&this.#VU===d&&this.#YU===p&&this.#HU===m)this.o6(!0);else{this.#QU.C(ah),this.#JU=f,this.#VU=d,this.#YU=p,this.#HU=m,this.o6(!0);let t=null;this.#UU&&(t=s.c6()+this.#WU),this.KU("update-position",{left:Math.round(this.#QU.Iu()),top:Math.round(this.#QU.Cu()),width:Math.round(this.#QU.width()),height:Math.round(this.#QU.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.o6(!1)}}f6(){this.t6("focus",{focus:!0})}d6(){this.t6("focus",{focus:!1})}MU(){this.#BU=!0}wU(){this.#BU=!1}p6(){return this.#BU}m6(t,s){this.postToDOMElement("set-css-style",{prop:oh.Jo(t),val:s})}g6(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}y6(t){this.postToDOMElement("remove-attribute",{name:t})}M6(){this.#qU||(this.#qU=!0,Promise.resolve().then(()=>{this.#qU=!1,this.KU("update-state",this.r6())}))}r6(){}w6(){return this.#jU}}}self.S6=class extends self.Vz{constructor(){super()}};self.T6=class extends globalThis.Jz{constructor(){super()}xU(){}};{const ch=self.ks,fh=new WeakMap,dh=ch.Fs();self.b6=class extends self.kz{#Tj=!1;#vj=!1;#v6=!1;constructor(){super(),fh.set(this,ch.o4.n4(dh))}qF(){super.qF(),this.Cj(!1),this._j(!1),this.x6(!1),fh.delete(this)}Ej(){return ch.o4.Dj()}G6(){}Aj(t){const s=fh.get(this);s.iP().Nj(t,s.Qz(),s.Uz())}Lj(t){const s=fh.get(this);return s.iP().Oj(t,s.Qz(),s.Uz())}Cj(t){if(this.#Tj!==(t=!!t)){this.#Tj=t;const s=fh.get(this).iP();t?s.I6(this):s.C6(this)}}Wj(){return this.#Tj}Uj(){}_j(t){if(this.#vj!==(t=!!t)){this.#vj=t;const s=fh.get(this).iP();t?s._6(this):s.E6(this)}}Jj(){return this.#vj}Qj(){}x6(t){if(this.#v6!==(t=!!t)){this.#v6=t;const s=fh.get(this).iP();t?s.D6(this):s.A6(this)}}N6(){return this.#v6}L6(){}Vj(){return[]}Yj(){return null}Hj(t){}}}{let e=self.Hs,h=null;self.o3=class{constructor(t){h=t}YR(t){h.HR(t)}s5(t,s,i){e.Ge(t),e.Ge(s),e.Ue(i),h.O6(t,s,i)}e5(t,s,i){return e.Ge(t),e.Ge(s),e.Ue(i),h.R6(t,s,i)}P6(t){return e.Ie(t),new self.k6(h,t)}set F6(t){h.j6(!!t)}get F6(){return h.z6()}B6(t){h.U6(!!t)}W6(t){e.me(t);const s=h.Q6(t);return s?s.A4():null}}}self.k6=class{#J6;#V6;#Y6;#H6;#q6;#Z6;constructor(t,s){const i=(this.#J6=t).d3(),e=t.S3(),h=(this.#V6=e,this.#Y6=e.X6(),t.C3()),r=(this.#H6=h.K6(),this.#q6=h.tW(e),i.sW()),n=r.tW();this.#Z6=n,s&&n.iW(s),t.eW(!1)}hW(){const t=this.#J6.d3(),s=this.#Y6,i=this.#Z6;t.rW(s),this.#V6.nW(this.#H6,this.#q6),t.oW(s),i.aW(i.LO()+1)}get uW(){return this.#Z6.lW()}release(){const t=this.#J6,s=t.C3(),i=t.d3().sW();t.eW(!0),i.cW(),s.cW()}};{let d=self.ks,h=self.Hs,p=null,r=null;self.fW=class{constructor(t,s){r=t,p=s}dW(){p.ZD()}pW(t){p.HD(t)}mW(){p.YM()}gW(){p.BM()}yW(){p.iw()}setColor(t){p.UD(t[0],t[1],t[2],t[3])}MW(t,s,i,e){p.UD(t,s,i,e)}wW(){p.QD()}SW(t){p.WD(t)}TW(t){p.Gw(t)}bW(){p.Iw()}rect(t){p.$D(t.left,t.top,t.right,t.bottom)}vW(t,s,i,e){p.$D(t,s,i,e)}xW(t){p.il(d.il.Tl(t))}GW(t,s,i,e,h,r,n,o){p.uS(t,s,i,e,h,r,n,o)}IW(t,s){p.Pw(d.il.Tl(t),d.Rect.Au(s))}_W(t,s){p.iA(d.il.Tl(t),d.il.Tl(s))}EW(t,s,i,e,h,r,n,o,a,u,l,c,f){p.eA(t,s,i,e,h,r,n,o,a,u,l,c,d.Rect.Au(f))}DW(t,s,i,e,h,r,n,o,a,u,l,c,f){p.Aw(t,s,i,e,h,r,n,o,a,u,l,c,d.il.Tl(f))}AW(t,s,i){p.hA(t,s,i)}NW(t){p.aS(t)}line(t,s,i,e){p.Lm(t,s,i,e)}LW(t,s,i,e,h,r){p.Nw(t,s,i,e,h,r)}OW(t,s,i,e){p.kw(t,s,i,e)}RW(t){p.Bw(d.Rect.Au(t))}PW(t){p.Uw(d.il.Tl(t))}kW(t){p.Hw(t)}FW(){p.qw()}jW(t){p.$w(t)}zW(){p.eS()}BW(t){h.eh(t,self.UW);const s=t?r.Dk(t):null;p.VD(s)}WW(t,s){const i=self.tP.$R(t);if(i)return i.QW(p,{I2:s?.I2??"clamp-to-edge",C2:s?.C2??"clamp-to-edge",_2:s?._2??"trilinear",A2:s?.A2??!0});throw new Error("invalid IImageInfo")}JW(t){const s=self.tP.$R(t);if(!s)throw new Error("invalid IImageInfo");s.LC()}dB(t){const s=self.tP.$R(t);if(!s)throw new Error("invalid IImageInfo");const i=s.Qb();return self.UW.VW(r,i)}YW(t,s,i){h.Se(t),h.Se(s);const e=p.Ob(t,s,{I2:i?.I2??"clamp-to-edge",C2:i?.C2??"clamp-to-edge",_2:i?._2??"trilinear",A2:i?.A2??!0});return self.UW.VW(r,e)}HW(t,s,i){h.ih(s,self.UW);const e=r.Dk(s);p.B_(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){h.ih(t,self.UW);const s=r.Dk(t);p.Fb(s)}qW(){const t=p.xS();return new self.ZW(r,t)}XW(){r.QP().KW(p)}$W(t){h.ih(t,globalThis.Ek);const s=r.Dk(t);s.tQ(p)}}}{const ph=new WeakMap,mh=new WeakMap;self.UW=class{constructor(t,s){ph.set(this,{runtime:t,sQ:s}),mh.set(s,this),t.I4(this,s),Object.defineProperties(this,{width:{value:s.ym(),writable:!1},height:{value:s._m(),writable:!1}})}static VW(t,s){if(!s)return null;const i=mh.get(s);return i||new self.UW(t,s)}}}{let e=function(t){return yh.get(t).iQ};e;const gh=self.Hs,yh=new WeakMap;self.ZW=class{constructor(t,s){yh.set(this,{runtime:t,iQ:s}),t.I4(this,s)}release(){e(this).cr()}set eQ(t){gh.Ge(t),e(this).BC(t)}get eQ(){return e(this).QI()}set hQ(t){gh.Se(t),e(this).UC(t)}get hQ(){return e(this).WC()}set lineHeight(t){gh.Se(t),e(this).JC(t)}get lineHeight(){return e(this).VC()}set rQ(t){e(this).YC(t)}get rQ(){return e(this).HC()}set nQ(t){e(this).qC(t)}get nQ(){return e(this).ZC()}setColor(t){gh.Be(t),this.oQ(t[0],t[1],t[2])}oQ(t,s,i){e(this).s_(t,s,i)}aQ(t){gh.Ge(t),e(this).mT(t)}set uQ(t){e(this).i_(t)}get uQ(){return e(this).e_()}set verticalAlign(t){e(this).h_(t)}get verticalAlign(){return e(this).r_()}set lQ(t){e(this).n_(t)}get lQ(){return e(this).o_()}set cQ(t){e(this).a_(t)}get cQ(){return e(this).u_()}set text(t){gh.Ge(t),e(this).wf(t)}get text(){return e(this).l_()}dk(t,s,i){gh.Se(t),gh.Se(s),gh.Se(i),e(this).c_(t,s,i)}fB(){const{runtime:t,iQ:s}=yh.get(this),i=s.Qb();return self.UW.VW(t,i)}pB(){return e(this).U_().Du()}fQ(t){gh.He(t),e(this).RC=t}dQ(){e(this).LC()}get pQ(){return e(this).d_()}get mQ(){return e(this).m_()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return wh.get(i)||""},r=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,r;const d=self.ks,Mh=new Set(["local","remote"]),wh=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);d.gQ=class extends d.nr{constructor(t,s){super();const i=s.exportType,e=(this.pf=t,this.yQ="folders",this.MQ=new Map,this.wQ="cordova"===i,this.SQ=!!s.isiOSCordova,this.TQ=!!s.isFileProtocol,this.bQ=s.swClientId,this.vQ=s.supportedAudioFormats||{},this.xQ=new Map,this.GQ=!1,this.IQ=s.scriptFolder,this.CQ="",this._Q="",this.EQ="",this.DQ=s.fileMap||new Map,this.AQ=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.NQ=e?"remote":"local",this.LQ=new Map,this.OQ=[],this.RQ=[],this.PQ=!1,this.kQ=0,this.FQ=0,this.jQ=0,this.zQ=!1,this.BQ=d.lr(d._d,()=>this.UQ(),50),this.WQ=d.lr(d.wd,Math.max(d.hardwareConcurrency,8)),this.QQ=d.lr(d.wd,20),this.JQ=new self.qR(this)}cr(){for(const t of this.LQ.values())t.cr();this.LQ.clear(),d.Wn(this.RQ),this.pf=null}iP(){return this.pf}VQ(t){this.yQ=t}lP(){return this.yQ}YQ(){return this.IQ}HQ(t){this.CQ=t}dP(){return this.CQ}qQ(t){this._Q=t}ZQ(){return this._Q}XQ(t){this.EQ=t}KQ(){return this.EQ}$Q(){return this.TQ}Eo(t,s){return s=s||this.NQ,d.xo(t)?("flat"===this.yQ&&(t=t.toLowerCase()),this.wQ&&this.TQ?this.tJ(t):"playable-ad-single-file"===this.pf.zP()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.WQ:this.QQ).Mc(()=>d.Eo(t))):d.Eo(t)}Do(t){return d.xo(t)?("flat"===this.yQ&&(t=t.toLowerCase()),this.wQ&&this.TQ?this.sJ(t):"playable-ad-single-file"===this.pf.zP()?d.No(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.NQ?this.WQ:this.QQ).Mc(()=>d.Do(t))):d.Do(t)}Co(t){return d.xo(t)?("flat"===this.yQ&&(t=t.toLowerCase()),this.wQ&&this.TQ?this.iJ(t):"playable-ad-single-file"===this.pf.zP()?d.Lo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.NQ?this.WQ:this.QQ).Mc(()=>d.Co(t))):d.Co(t)}async _o(t){const s=await this.Co(t);return JSON.parse(s)}eJ(t,s){return"flat"===this.yQ&&(t=t.toLowerCase()),this.pf.QR("runtime","cordova-fetch-local-file",{filename:t,as:s})}iJ(t){return this.eJ(t,"text")}async tJ(t){const s=await this.eJ(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async hJ(t){"flat"===this.yQ&&(t=t.toLowerCase());let s=this.MQ.get(t);if(!s){const i=await this.tJ(t);s=URL.createObjectURL(i),this.MQ.set(t,s)}return s}sJ(t){return this.eJ(t,"buffer")}cP(t){"flat"===this.yQ&&(t=t.toLowerCase());let s=this.CQ+t;return"Gecko"===d.li.yi&&"preview"===this.pf.zP()?this.rJ(s):s}aP(t){return d.vo(t)?Promise.resolve(t):this.wQ&&this.TQ?this.hJ(t):"playable-ad-single-file"===this.pf.zP()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.yQ&&(t=t.toLowerCase()),Promise.resolve(t))}nJ(s){if(d.vo(s)||"preview"!==this.pf.zP()||!this.bQ||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.bQ),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}oJ(t){return this.aP(t)}aJ(t){if(t.uJ&&!Mh.has(t.uJ))throw new Error("invalid load policy");let s=this.LQ.get(t.url);return s||(s=d.lr(d.lJ,this,{url:t.url,size:t.size||0,uJ:t.uJ||this.NQ}),this.LQ.set(s.cJ(),s),this.PQ)||(this.kQ+=s.ac(),this.RQ.push(s.fJ().then(()=>this.dJ(s.ac())))),s}pJ(t){this.LQ.delete(t.cJ())}async mJ(){try{await Promise.all(this.RQ),this.jQ=1}catch(t){console.error("Error loading: ",t),this.zQ=!0,this.UQ()}}gJ(){this.PQ=!0}yJ(){return this.zQ}dJ(t){this.FQ+=t,this.BQ.zd()}UQ(){const t=d.lr(d.Event,"loadingprogress");this.jQ=d.Sr(this.FQ/this.kQ,0,1),t.progress=this.jQ,this.pf.Hf().dispatchEvent(t)}uR(){return this.jQ}cR(){return this.pf.wJ().MJ()}SJ(t){d.Yn(this.OQ,t),this.OQ.length&&this.RQ.push(this.TJ())}async TJ(){const t=[],s=[];for(const[i,e,h]of this.OQ)this.kQ+=h,t.push(this.bJ(i,e,s).then(()=>this.dJ(h)));await Promise.all(t),this.pf.ZO()&&0<s.length&&await this.pf.QR("runtime","load-webfonts",{webfonts:s})}async bJ(s,i,e){try{let t=await this.aP(i);"Gecko"===d.li.yi&&(s=`'${s}'`),("Gecko"===d.li.yi&&"preview"===this.pf.zP()||"playable-ad-single-file"===this.pf.zP())&&(t=this.rJ(t));const h=new FontFace(s,`url('${t}')`);(this.pf.ZO()?self:document).fonts.add(h),await h.load(),this.pf.ZO()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}vJ(t){return!!this.vQ[t]}xJ(t,s){this.GQ=!!s;for(const[i,e,h]of t)this.xQ.set(i,{fileName:i,GJ:e.map(t=>({type:t[0],IJ:t[1],CJ:i+t[1],fileSize:t[2]})),isMusic:h})}_J(t){"flat"===this.yQ&&(t=t.toLowerCase());const s=this.xQ.get(t);if(!s)return null;let i=null;for(const e of s.GJ)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.vJ(e.type))return e;return i}EJ(t){const s=this._J(t);return s?{url:this.cP(s.CJ),type:s.type}:null}DJ(){if(this.GQ){const t=[];for(const s of this.xQ.values())if(!s.isMusic){const i=this._J(s.fileName);i&&t.push({originalUrl:s.fileName,url:this.cP(i.CJ),type:i.type,fileSize:i.fileSize})}return t}return[]}AJ(t){return"preview"===this.pf.zP()&&(t=new URL(t,location.href).toString()),this.DQ.get(t)||null}rJ(t){let s=this.AQ.get(t);if(!s){const i=this.AJ(t);if(!i)return t;s=URL.createObjectURL(i),this.AQ.set(t,s)}return s}PO(){return this.JQ}async gP(...t){const s=await Promise.all(t.map(t=>this.aP(t)));if(this.pf.ZO())if(1===t.length){const i=t[0];await import((d.xo(i)?"./":"")+i)}else{const e=t.map(t=>`import "${d.xo(t)?"./":""}${t}";`).join("\n"),h=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(h)}else await Promise.all(s.map(t=>r(t)))}async MP(t){if(WebAssembly.compileStreaming){const s=await this.aP(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await d.Do(t);return WebAssembly.compile(i)}}async SP(t){const s=await this.aP(t);return this.pf.QR("runtime","add-stylesheet",{url:s})}}}{const Sh=self.ks;Sh.NJ=class extends Sh.nr{constructor(t,s){super(),this.LJ=t,this.pf=t.iP(),this.OJ=s.url||"",this.RJ=s.size,this.PJ=s.uJ,this.kJ=s.blob||null,this.FJ=!!this.kJ,this.Qg=null}cr(){this.Qg=null,this.LJ=null,this.pf=null,this.kJ=null}cJ(){return this.OJ}ac(){return this.RJ}fJ(){return"local"===this.PJ||this.kJ?(this.FJ=!0,Promise.resolve()):(this.Qg||(this.Qg=this.LJ.Eo(this.OJ,this.PJ).then(t=>(this.FJ=!0,this.Qg=null,this.kJ=t)).catch(t=>{console.error("Error loading resource: ",t),this.Qg=null})),this.Qg)}jJ(){return this.FJ}zJ(){return this.kJ?Promise.resolve(this.kJ):this.Qg||this.LJ.Eo(this.OJ,this.PJ)}}}{const ar=self.ks,ur=new ar.wd,lr=new Set;ar.lJ=class extends ar.NJ{constructor(t,s){super(t,s),this.BJ=null,this.UJ=null,this.S1=0,this.WJ=-1,this.QJ=-1,lr.add(this)}cr(){if(0!==this.S1)throw new Error("released image asset which still has texture references");this.LJ.pJ(this),this.BJ=null,lr.delete(this),super.cr()}static JJ(){for(const t of lr)t.BJ=null,t.UJ=null,t.S1=0}QW(t,s){return s=s||{},this.S1++,this.UJ?Promise.resolve(this.UJ):(this.BJ||(s.E2=this.pf.QP().VJ(),this.BJ=this.YJ(t,s)),this.BJ)}async YJ(s,i){try{const e=await this.zJ();return 0===this.S1?this.BJ=null:await ur.Mc(async()=>{const t=await s.EA(e,i);return this.BJ=null,0===this.S1?(s.Fb(t),null):(this.UJ=t,this.WJ=t.ym(),this.QJ=t._m(),this.UJ)})}catch(t){throw console.error("Failed to load texture: ",t),t}}LC(){if(this.S1<=0)throw new Error("texture released too many times");if(this.S1--,0===this.S1&&this.UJ){const t=this.UJ.HS();t.Fb(this.UJ),this.UJ=null}}HJ(){return this.S1}Qb(){return this.UJ}ym(){return this.WJ}_m(){return this.QJ}async qJ(){const t=await this.zJ();return ar.Ui.ImageBitmap?createImageBitmap(t):ar.Ro(t)}}}{let t=function(t,s){return t.RR().ZJ()-s.RR().ZJ()};t;const cr=self.ks;cr.XJ=class extends cr.nr{constructor(t,s,i){super(),this.KJ=t,this.eu=s,this.hu=i,this.$J=[],this.tV=!0,this.sV=new Set,this.iV=!1}cr(){cr.Wn(this.$J),this.sV.clear(),this.KJ=null}m0(){cr.Wn(this.$J),this.tV=!0,this.sV.clear(),this.iV=!1}eV(){this.tV=!1}rc(){if(this.$J.length){if(this.$J.length>this.sV.size)return!1;this.hV()}return!0}rV(t){this.sV.has(t)?(this.sV.delete(t),0===this.sV.size&&(this.iV=!1)):(this.$J.push(t),this.tV=1===this.$J.length)}C0(t){this.sV.add(t),this.iV=!0,50<=this.sV.size&&this.hV()}hV(){this.iV&&(this.$J.length===this.sV.size?this.m0():(cr.Kn(this.$J,this.sV),this.sV.clear(),this.iV=!1))}nV(){this.tV||(this.$J.sort(t),this.tV=!0)}oV(t){this.hV(),this.nV(),this.$J.length&&t.push(this.$J)}}}{const fr=self.ks;fr.aV=class extends fr.nr{constructor(t,s){super(),this.uV=t,this.lV=s,this.cV=fr.lr(fr.ic)}cr(){this.cV.cr(),this.cV=null}fV(t,s,i){let e=this.cV.ei(t,s);return e||(i?(e=fr.lr(fr.XJ,this,t,s),this.cV.Set(t,s,e),e):null)}dV(t){return Math.floor(t/this.uV)}pV(t){return Math.floor(t/this.lV)}mV(e,h,r){if(h)for(let i=h.Iu(),t=h._u();i<=t;++i)for(let t=h.Cu(),s=h.Eu();t<=s;++t)if(!r||!r.Ku(i,t)){const n=this.fV(i,t,!1);n&&(n.C0(e),n.rc())&&this.cV.nc(i,t)}if(r)for(let i=r.Iu(),t=r._u();i<=t;++i)for(let t=r.Cu(),s=r.Eu();t<=s;++t)h&&h.Ku(i,t)||this.fV(i,t,!0).rV(e)}gV(t,s){let i=this.dV(t.Iu()),e=this.pV(t.Cu()),h=this.dV(t._u()),r=this.pV(t.Eu());for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.fV(i,t,!1);n&&n.oV(s)}}yV(t){let s=t.Iu(),i=t.Cu(),e=t._u(),h=t.Eu();for(;s<=e;++s)for(let t=i;t<=h;++t){const r=this.fV(s,t,!1);r&&r.eV()}}}}{let n=function(t,s){return t.RR().ZJ()-s.RR().ZJ()},t=function(t,s){return t.RR().DT()-s.RR().DT()};n,t;const w=self.ks,dr=new w.Rect,pr=new w.il,mr=[],gr=(new w.Rect,new w.Rect,self.Ss),xh=gr._s,Uh=gr.Es,vh=gr.xs,yr=vh.create(),Mr=xh.create(),wr=Uh.create(),Sr=xh.create(),Tr=xh.create(),br=xh.create(),vr=w.lr(w.iu),xr=(w.lr(w.Rect),[]),Gr=[],Ir=[],Cr={name:"",sid:-1,MV:!1,isVisible:!0,isInteractive:!0,hF:!1,backgroundColor:[1,1,1,1],wF:!0,wV:[1,1],opacity:1,bF:!1,SV:!1,TV:!1,bV:!1,scaleRate:1,NL:0,MF:0,vV:[],xV:[],GV:[]};w.IV=class extends w.nr{constructor(t,s,i){super(),i=Object.assign({},Cr,i),this.CV=t,this.pf=t.iP(),this._V=s,this.mr=i.name,this.ty=-1,this.EV=!!i.hF,this.DV=-1,this.AV=i.sid,this.NV=!!i.MV,this.LV=!!i.isVisible,this.OV=!!i.isInteractive,this.RV=w.lr(w.Ho),this.RV.Va(i.backgroundColor),this.PV=!!i.wF,this.kV=i.wV[0],this.FV=i.wV[1],this.cT=w.lr(w.Ho,1,1,1,i.opacity),this.jV=w.lr(w.Ho),this.zV=!!i.bF,this.BV=!!i.SV,this.UV=!!i.TV,this.WV=!!i.bV,this.QV=i.scaleRate,this.lT=i.NL,this.JV=null,this.VV=1,this.fT=i.MF,this.YV=0,this.HV=0,this.qV=0,this.ZV=!1,this._E=w.lr(w.Rect),this.XV=w.lr(w.Rect),this.KV=w.lr(w.Rect),this.$V=!0,this._b=vh.create(),this.t8=!0,this.ML=vh.create(),this.s8=!0,this.i8=w.lr(w.my.wy),this.e8=!0,this.h8=[],this.r8=i.vV,this.n8=[],this.o8=[],this.a8=new Map,this.$J=[],this.u8=!1,this.l8=!1,this.c8=!1;const h=this.pf.QP();this.f8=w.lr(w.d8,this,i.xV),this.EO=w.lr(w.my.EN,h.p8(),{MN:(t,s)=>{const i=s.TO(),e=i.GA();t.mT(i.m8()),t.LA(e),t.OA(e),h.g8(e)},SN:t=>this.lk().y8(t)}),this.M8=!0,this.w8=!0,this.S8=null,this.T8=[],this.b8=!1,this.v8=w.lr(w.Rect,0,0,-1,-1),this.x8=w.lr(w.Rect,0,0,-1,-1),this.G8=new self.Ek(this),this.I8(),this.C8()&&(this.S8=w.lr(w.aV,this.pf.KO(),this.pf.t3())),this._8=i.GV.map(t=>w.IV.E8(this.CV,this,t))}D8(){for(const t of this.r8){const s=this.pf.A8(t[1]);this.CV.N8(s),s.L8()||(s.O8(t),s.P8(this.ty)),this.n8.push(t),this.a8.set(t[2],t)}w.Yn(this.h8,this.n8),this.r8=null}static E8(t,s,i){return w.lr(w.IV,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],hF:i[19],backgroundColor:i[4].map(t=>t/255),wF:i[5],wV:[i[6],i[7]],opacity:i[8],bF:i[9],SV:i[17],TV:i[18],bV:i[10],scaleRate:i[11],NL:i[12],MF:i[16],vV:i[14],xV:i[15],GV:i[20]})}cr(){for(const t of this._8)t.cr();w.Wn(this._8);for(const s of this.$J)this.pf.XF(s);w.Wn(this.$J),this.f8.cr(),this.f8=null,this.EO.cr(),this.EO=null,this.G8=null,this._V=null,this.CV=null,this.pf=null}k8(t){return this.a8.get(t)}F8(h){let r=this.CV.j8(),n=0,o=this.n8;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.pf.A8(t[1]),i=!0;if(!s.z8()||r){const a=this.pf.B8(t,this,!0);h.push(a),s.U8()&&(i=!1,this.o8.push(a.hj()))}i&&(o[n]=o[e],++n)}w.Un(o,n),this.pf.ak(),this.BR()}W8(t,s){if(!t.F4().f4())throw new Error("instance is not of world type");const i=t.RR();if(i.PR()!==this)throw new Error("instance added to wrong layer");this.$J.push(t),0!==i.DT()&&(this.c8=!0),s&&this.C8()&&t.RR().a5(),this.BR(t)}Q8(t){this.$J.includes(t)||(this.$J.push(t),0!==t.RR().DT()&&(this.c8=!0),this.BR(t))}J8(t,s){const i=t.RR();if(i.PR()!==this)throw new Error("instance added to wrong layer");this.$J.unshift(t),0!==i.DT()&&(this.c8=!0),this.BR(t),s&&this.C8()&&t.RR().a5()}V8(t,s){const i=this.$J.indexOf(t);i<0||(s&&this.C8()&&t.RR().Y8(),this.$J.splice(i,1),this.BR(t),this.H8())}q8(){this.c8=!0}H8(){0===this.$J.length&&(this.c8=!1)}Z8(t){if(t){const s=new Set;for(const i of this.$J){const e=i.RR().ZJ();0<=e&&s.add(e)}let t=-1;for(const h of this.$J){const r=h.RR();if(!(0<=r.ZJ())){for(++t;s.has(t);)++t;r.X8(t)}}}this.$J.sort(n)}K8(){}tY(){for(const t of this.$J)t.QF().U8()||this.pf.XF(t);this.pf.ak(),w.Wn(this.$J),this.c8=!1,this.BR()}sY(s,t,i,e,h,r){const n=this.pf.d3(),o=this.pf.iY(),a=s.eY(),u=[];for(const l of this.n8){const c=l[0],f=c[0],d=c[1];if(t.Ku(f,d)){const p=o[l[1]];if(p!==s){if(!a)continue;if(!s.hY(p))continue}let t=h;if(!t){const y=this.pf.LR();t=this.yR()===y?this:(t=y.rY(this.hf()))||y.FR(this.LO())}const m=this.pf.B8(l,t,!1,void 0,void 0,!1,r),g=(t.ik(m),m.RR());g.f5(i,e),g.a5(),n.ek(!0),m.hk(),n.ek(!1),u.push(m)}}return u}X4(){return this.$J.length}yR(){return this.CV}hf(){return this.mr}nY(t){this.ty=t}LO(){return this.ty}aY(t){this.DV=t}e6(){return this.DV}rF(){return this.EV}nF(t){this.EV!==(t=!!t)&&(this.EV=t,this.CV.uY(),this.pf.UR())}lY(){let t=this.Vk();return(t?t.qk():this.yR().cY()).indexOf(this)}fY(){return this.AV}iP(){return this.pf}dY(){return this.NV}pY(){for(const t of this.Yk())if(t.dY())return!0;return!1}s4(){return this.pf.s4()}lk(){return this.f8}NO(){return this.mY(),this.EO}mY(){const t=this.gY();if(this.M8||t!==this.w8||this.EO.wL()){const s=this.lk().yY();this.EO.SL(s.map(t=>t.Tx()),{bN:s.map(t=>t.LO()),vN:!t,_N:!0}),this.M8=!1,this.w8=t}}Xz(){this.lk().Xz(),this.M8=!0}C8(){return this.WV&&!this.UV}MY(){return this.S8}wY(){this.b8=!1}sF(){for(const t of this.SY())if(!t.Kk())return!1;return!0}Kk(){return this.LV}$k(t){this.LV!==(t=!!t)&&(this.LV=t,this.pf.UR())}eF(t){this.OV=!!t}iF(){return this.OV}aF(){for(const t of this.SY())if(!t.iF())return!1;return!0}CF(t){if(this.ZV!==(t=!!t)){if(this.ZV=t){const s=this.yR();this.HV=s.wk(),this.qV=s.Tk()}this.TY(),this.pf.UR()}}bY(){return this.ZV}Mk(t){const s=this.yR(),i=s.vY(),e=s.xY();this.HV!==(t=(t=e<t?e:t)<i?i:t)&&(this.HV=t,this.bY())&&(this.TY(),this.pf.UR())}Sk(t){const s=this.yR(),i=s.GY(),e=s.IY();this.qV!==(t=(t=e<t?e:t)<i?i:t)&&(this.qV=t,this.bY())&&(this.TY(),this.pf.UR())}wk(){return this.bY()?this.HV:this.yR().wk()}Tk(){return this.bY()?this.qV:this.yR().Tk()}EF(){return this.CY(),this._E}_Y(){return this.CY(),this.XV}EY(){return this.CY(),this.KV}Bk(){const t=this.yR();return[t.DY(),t.AY()]}wM(t){return this.pf.wM(t)}NY(c,e){const h=this._Y();if(0===c)e.C(h);else{let o=h.Ou(),a=h.Ru(),t=this.LY(c),s=h.width()/t,i=h.height()/t,[u,l]=this.Bk();if(.5!==u||.5!==l){let t=this.OY(),s=this.pf,i=this.wM()/t,e=(u-.5)*s.RY()/i,h=(l-.5)*s.PY()/i,r=this.yk(),n=(0!==r&&(vr.set(e,h),vr.rotate(r),e=vr.ou(),h=vr.uu()),w.kr(t,0,c));o+=w.Pt(e,0,n),a+=w.Pt(h,0,n)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}BD(){return this.cT.da()}WD(t){t=w.Sr(t,0,1),this.cT.da()!==t&&(this.cT.aa(t),this.I8(),this.pf.UR())}I8(){this.jV.C(this.cT),this.jV.Ga()}m8(){return this.jV}gY(){return this.cT.Sa(1,1,1,1)}fF(){return this.QV}cF(t){this.QV!==t&&(this.QV=t,this.TY(),this.pf.UR())}mF(){return this.kV}yF(){return this.FV}kY(t,s){this.kV===t&&this.FV===s||(this.kV=t,this.FV=s,this.TY(),this.pf.UR())}pF(t){this.kY(t,this.yF())}gF(t){this.kY(this.mF(),t)}AT(t){this.fT!==t&&(this.fT=t,this.pf.UR())}DT(){return this.fT}gk(t){t=w.Tr(t),this.YV!==t&&(this.YV=t,this.TY(),this.pf.UR())}yk(){return w.Tr(this.CV.yk()+this.YV)}dF(){return this.YV}FY(){return 0<this.$J.length}jR(){return this.$J}jY(){return this.zY()&&this.UV?(w.Yn(Ir,this.jR()),Ir.sort((t,s)=>this.BY(t,s)),Ir):this.jR()}UY(t){w.Zh(t,this.jY());for(const s of this._8)s.sF()&&0<s.BD()&&s.UY(t)}BY(t,s){const i=this.yR().WY(),e=i[0],h=i[1],r=i[2],n=t.RR(),o=s.RR(),a=n.GT()-e,u=n._T()-h,l=n.DT()-r,c=o.GT()-e,f=o._T()-h,d=o.DT()-r;return c*c+f*f+d*d-(a*a+u*u+l*l)}IF(){return this.RV}TF(){return this.PV}SF(t){this.PV!==(t=!!t)&&(this.PV=t,this.pf.UR())}xF(){return this.zV}vF(t){this.zV!==(t=!!t)&&(this.zV=t,this.pf.UR())}QY(){return!this.iP().JY()||!this.BV}zY(){return!this.QY()}VY(){return this.zY()&&this.yR().YY()}HY(){if(!this.VY())return!1;for(const t of this._8)if(!t.HY())return!1;return!0}pT(t){this.lT!==t&&(this.lT=t,this.pf.UR())}GF(){return this.lT}qY(){return!this._V}Vk(){return this._V}ZY(t){this._V=t}qk(){return this._8}XY(){return 0<this._8.length}KY(t,s=!0){s?this._8.push(t):this._8.unshift(t)}$Y(t,s,i){let e=this._8.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this._8.splice(e,0,t)}tH(t){const s=this._8.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this._8.splice(s,1)}sH(){for(const t of this._8)if(t.iH())return!0;return!1}*Xk(){for(const t of this._8)yield*t.Xk();yield this}*Yk(){let t=this.Vk();for(;t;)yield t,t=t.Vk()}*SY(){yield this,yield*this.Yk()}eH(t){for(const s of this.Yk())if(s===t)return!0;return!1}hH(t){return this===t||this.kV===t.kV&&this.FV===t.FV&&this.VV===t.VV&&this.QV===t.QV&&this.YV===t.YV&&this.wk()===t.wk()&&this.Tk()===t.Tk()}rH(){return{parallaxX:this.mF(),parallaxY:this.yF(),scale:this.lF(),scaleRate:this.fF(),angle:this.dF(),hasOwnScroll:this.bY(),scrollX:this.wk(),scrollY:this.Tk()}}nH(t){this.kY(t.parallaxX,t.parallaxY),this.uF(t.scale),this.cF(t.scaleRate),this.gk(t.angle),this.CF(t.hasOwnScroll),this.Mk(t.scrollX),this.Sk(t.scrollY),this.CY()}oH(t){if(0!==t.size){const s=w.Kn(this.$J,t);0<s&&(this.H8(),this.BR())}}BR(t){this.u8=!1,this.b8=!1,t&&!t.QF().F4().m4()||(this.l8=!1)}aH(){if(!this.u8){if(this.$J.sort(t),this.C8())for(let t=0,s=this.$J.length;t<s;++t){const i=this.$J[t].RR();i.X8(t),this.S8.yV(i.uH())}else for(let t=0,s=this.$J.length;t<s;++t)this.$J[t].RR().X8(t);this.u8=!0}}lH(){if(!this.l8){let t=this.CV.cH(this.e6()),s=t.map(t=>[...t.Xk()]).flat(),i=0;for(const e of s){for(const h of e.jR())h.QF().F4().m4()&&h.RR().fH(i++);e.dH()}}}dH(){this.l8=!0}pH(){return{isVisible:this.sF(),opacity:this.BD(),isInteractive:this.iF()}}mH(t,s,i){const e=t.RR(),h=s.RR();if(e.PR()!==this||h.PR()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let r=e.kR(),n=h.kR();return r!==n+(i?1:-1)&&(w.Hn(this.$J,r),r<n&&n--,i&&n++,n===this.$J.length?this.$J.push(t):this.$J.splice(n,0,t),this.BR(t),!0)}gH(t,s){let i=[],e=0,h=0,r=t.length,n=s.length;for(;e<r&&h<n;){const o=t[e],a=s[h];o.RR().ZJ()<a.RR().ZJ()?(i.push(o),++e):(i.push(a),++h)}for(;e<r;++e)i.push(t[e]);for(;h<n;++h)i.push(s[h]);return i}yH(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const h=s[t],r=s[t+1];i.push(this.gH(h,r))}return e%2==1&&i.push(s[e-1]),i}MH(t){for(;1<t.length;)t=this.yH(t);return t[0]}wH(){return this.aH(),w.Wn(mr),this.S8.gV(this.EF(),mr),mr.length?1===mr.length?mr[0]:this.MH(mr):[]}iH(){return this.sF()&&0<this.BD()&&this.SH()}SH(){if(this.FY()||!this.TF())return!0;for(const t of this._8)if(t.SH())return!0;return!1}TH(){return this.xF()||!this.gY()||0!==this.GF()||this.f8.bH()}vH(){if(this.TH())return!0;for(const t of this._8)if(t.vH())return!0;return!1}GA(){return this.JV}LY(t){if(this.CV.Qk())return 1;{const s=this.xH();return s/(s-t)}}GH(t){const s=this.pf.BF();if(this.CV.Qk())return s;{const i=this.xH(),e=this.wM();return e/Math.abs(i-t)*s}}TY(){this.s8=!0,this.e8=!0,this.$V=!0}IH(t){return this.s8&&(this.CH(t,this.ML,0,0,null),this.s8=!1),this.ML}OY(t){return this.wM(t)/this._H()}xH(){return this.VY()?this.yR().WY()[2]:this.OY()}EH(){if(this.VY()){const t=this.yR().WY();return[t[0],t[1],t[2]]}return this.DH()}DH(t=0,s=0,h=0){let r=this.pf,i=this.yR(),e=r.AH(),n=r.NH(),o=(this.wk()-e)*this.kV+e,a=(this.Tk()-n)*this.FV+n,u=(r.e3()&&(o=Math.round(o),a=Math.round(a)),o+t),l=a+s,c=i.Qk()?this.wM(h):this.OY(h),[f,d]=this.Bk();if(.5!==f||.5!==d){let t=this.wM(h)/c,s=(f-.5)*r.RY()/t,i=(d-.5)*r.PY()/t,e=this.yk();0!==e&&(vr.set(s,i),vr.rotate(e),s=vr.ou(),i=vr.uu()),u+=s,l+=i}return[u,l,c]}CH(t,s,i,e,h){const r=this.pf,n=this.yR();if(this.VY()){xh.C(Sr,n.WY()),xh.C(Tr,n.LH()),xh.C(br,n.OH());const o=r.AH(),a=r.NH(),u=Tr[0]-Sr[0],l=Tr[1]-Sr[1],c=Tr[2]-Sr[2];Sr[0]=(Sr[0]-o)*this.kV+o,Sr[1]=(Sr[1]-a)*this.FV+a,Sr[2]*=Math.max(this.kV,this.FV),Tr[0]=Sr[0]+u,Tr[1]=Sr[1]+l,Tr[2]=Sr[2]+c}else{const[f,d,p]=this.DH(i,e,h),m=(xh.set(Sr,f,d,p),xh.set(Tr,f,d,p-100),this.yk());0===m?xh.set(br,0,1,0):xh.set(br,Math.sin(m),Math.cos(m),0)}t.RM(s,Sr,Tr,br,h||r.PY())}RH(){this.t8=!0,this.e8=!0,this.$V=!0}PH(t){return this.t8&&(this.kH(t),this.t8=!1),this._b}kH(t){const s=this.pf.QP(),[i,e]=this.Bk();if(this.CV.Qk())t.OM(this._b,s.FH(),s.jH());else if(.5===i&&.5===e)vh.C(this._b,s.zH());else{const h=s.FH(),r=s.jH();t.NM(this._b,h/r,i,e)}}tQ(t,s=!0,i=0,e=0,h=0){s&&t.DD(this.PH(t));let r;r=0===i&&0===e&&0===h?this.IH(t):(this.CH(t,yr,i,e,h),yr),t.PD(r)}BH(t){this.tQ(t),t.bw(this.DT())}UH(t){let s=null;if(t.wS()&&this.pf.WH()){const i=this.pf.QP().QH(this);i&&(s=i.mE(),t.zA(s))}return s}JH(t){if(t.LM()&&this.pf.WH()){const s=2*(this.LO()+1);t.StartMeasuringRenderPassTime(s,1+s)}}m2(t,s,i){let e=this.pf.QP(),h=this.TH(),r=null,n=this.UH(t);if(this.JH(t),h){const o={_2:this.pf.s3(),gb:!0,VH:!!t.LM()&&this.pf.YH()};"low"===e.HH()&&(o.width=e.FH(),o.height=e.jH()),r=this.pf.qH(o),this.JV=r,t.AA(r),this.TF()&&t.MA(0,0,0,0)}else this.JV=s,t.AA(s);if(this.TF()||t.hc(this.RV),this.CV.ZH(t,this.JV,this._8,h&&this.TF()),this.JH(t),this.tQ(t),t.bw(this.DT()),t.TA(this.zY()),this._H()>Number.EPSILON){this.aH();const a=this.C8()&&0===this.DT()&&!this.c8;this.VY()?this.XH(t):a?this.KH(t):this.$H(t,this.jY())}t.bw(0),t.Gw(0),h&&(t.TA(!1),this.t7(t,r,s,i)),n&&t.UA(n),this.JV=null}$H(i,e){let h=this.EF(),r=this.JV,n=this.yR().Qk(),o=this.yR().s7(),a=null;for(let t=0,s=e.length;t<s;++t){const u=e[t];if(u!==a){const l=(a=u).RR();l.sF()&&l.i7(h,o,n)&&this.e7(u,l,i,r)}}}XH(e){const h=this.JV,r=this.h7(),n=xr,o=Gr,a=this.jY();for(let s=0,i=a.length;s<i;){const u=a[s],l=u.RR();if(l.sF()&&l.r7(r)){(!u.n7()||0<l.o7())&&o.push(u);const c=u.RR().p5();n.push(u);let t=s+1;for(;t<i;++t){const f=a[t],d=f.RR();if(d.sF()&&d.r7(r)){if(d.p5()!==c)break;(f.n7()?(0<d.o7()&&o.push(f),n):o).push(f)}}if(1!==n.length||n[0].a7()){this.u7(e,n);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.RR();m.l7(!0),this.e7(p,m,e,h),m.l7(!1)}}else{this.e7(u,l,e,h);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==u){const y=g.RR(),M=y.PR();M.e7(g,y,e,h)}}}s=t,w.Wn(n),w.Wn(o)}else++s}}u7(i,e){const h=this.JV;i.PA();for(let t=0,s=e.length;t<s;++t){const r=e[t],n=r.RR();n.c7(!0),this.f7(r,n,i)}i.kA();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.RR();this.e7(o,a,i,h),a.c7(!1)}i.jA()}KH(t){let s=this.S8,i=this.x8,e=this.v8,h=this.EF(),r;i.set(s.dV(h.Iu()),s.pV(h.Cu()),s.dV(h._u()),s.pV(h.Eu())),this.b8&&i.equals(e)?r=this.T8:(r=this.wH(),this.b8=!0,e.C(i)),this.$H(t,r),r!==this.T8&&w.Yn(this.T8,r)}e7(t,s,i,e){s.bH()?this.d7(t,s,i,e):this.f7(t,s,i)}f7(t,s,i){const e=s.p7();i.hw()!==e&&e.dT(),t.m2(i)}d7(t,s,i,e){this.m7(t,s,i,e,null)&&this.tQ(i)}m7(t,s,i,e,h){const r=s.n5().NO();return r.DL(i,e,{AL:t,NL:s.GF(),devicePixelRatio:this.pf.g7(),time:t.y7(),LL:this.pf.M7()*this._H(),OL:this.yk(),sO:s.g5(),iO:r.wO()?null:this.w7(s),jL:h&&h.jL,zL:h&&h.zL,BL:h&&h.BL,UL:h&&h.UL}),i.bw(this.DT()),r.FD()}t7(t,s,i,e){const h=this.f8.yY(),r=this.pf;0===h.length?(t.AA(i),t.BM(),e&&0===this.lT&&this.gY()?t.NA(s):(t.pT(this.lT),t.mT(this.jV),t.LA(s)),t.OA(s),r.g8(s)):this.NO().DL(t,i,{AL:this,NL:this.GF(),devicePixelRatio:r.g7(),LL:r.M7()*this._H(),OL:this.yk(),sO:this.EF(),iO:null,TN:!0})}lF(){return this.VV}uF(t){this.VV!==t&&(this.VV=t,this.CV.S7(),this.TY(),this.pf.UR())}BF(){return this._H()*this.pf.BF()}c6(){return this._H()*this.pf.c6()}_H(){return(this.VV*this.CV.mk()-1)*this.QV+1}CY(){if(this.$V){this.$V=!1;let t=this.pf.AH(),s=this.pf.NH(),i=(this.wk()-t)*this.kV+t,e=(this.Tk()-s)*this.FV+s,h=this._H(),r=this.pf.RY()/h,n=this.pf.PY()/h,o=i-r/2,a=e-n/2;this.pf.e3()&&(o=Math.round(o),a=Math.round(a));const u=this.XV,l=(u.set(o,a,o+r,a+n),this.yk()),c=(0!==l&&(dr.C(u),dr.offset(-u.Ou(),-u.Ru()),pr.xl(dr,l),pr.Il(dr),dr.offset(u.Ou(),u.Ru()),u.C(dr)),this.fT);this.NY(c,this._E),this.VY()?this.T7(c,this.KV):this.KV.C(this._E)}}T7(t,s){let i=this.pf.QP(),e=i.HP(),h=i.ZP(),[r,n]=this.AF(0,0,t),[o,a]=this.AF(e,0,t),[u,l]=this.AF(e,h,t),[c,f]=this.AF(0,h,t),d=Math.min(r,o,u,c),p=Math.min(n,a,l,f),m=Math.max(r,o,u,c),g=Math.max(n,a,l,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}AF(t,s,i=0){return this.b7(t,s,i,this.c6())}kF(t,s,i=0){return this.b7(t,s,i,this.BF()*this.s4())}b7(t,s,i,e){const h=this.pf,r=h.HS(),n=this._H(),o=h.RY()/n,a=h.PY()/n,u=wr,l=(Uh.set(u,0,0,o,a),t/=e,s=u[3]-s/e,this.PH(r)),c=this.IH(r),f=Mr,d=w.my.My(t,s,i,c,l,u,f);return d?[f[0],f[1]]:[NaN,NaN]}v7(t,s){const i=this.VV,e=this.QV,h=this.kV,r=this.FV,n=this.YV,o=(this.VV=1,this.QV=1,this.kV=1,this.FV=1,this.YV=0,this.TY(),this.AF(t,s));return this.VV=i,this.QV=e,this.kV=h,this.FV=r,this.YV=n,this.TY(),o}RF(t,s,i=0){return this.x7(t,s,i,this.c6())}jF(t,s,i=0){return this.x7(t,s,i,this.BF()*this.s4())}x7(t,s,i,e){const h=this.pf,r=h.HS(),n=this._H(),o=h.RY()/n,a=h.PY()/n,u=wr,l=(Uh.set(u,0,0,o,a),this.PH(r)),c=this.IH(r),f=Mr,d=w.my.gy(t,s,i,c,l,u,f);return d?[f[0]*e,(u[3]-f[1])*e]:[NaN,NaN]}G7(t,s){return t*=this.BF()*this.s4(),0!==s&&(t*=this.LY(s)),t}w7(t){const s=t.g5(),i=t.p5(),e=t.o7(),u=i+e,l=s.Iu(),c=s.Cu(),f=s._u(),d=s.Eu();if(this.VY()){if(this.I7(l,c,i)||this.I7(f,c,i)||this.I7(f,d,i)||this.I7(l,d,i))return null;if(0<e&&(this.I7(l,c,u)||this.I7(f,c,u)||this.I7(f,d,u)||this.I7(l,d,u)))return null}else if(u>=this.OY())return null;let[p,m]=this.jF(l,c,i),[g,y]=this.jF(f,d,i);if(0!==this.yk()||0<e||this.VY()){const[M,w]=this.jF(f,c,i),[S,T]=this.jF(l,d,i);if(0<e){let[t,s]=this.jF(l,c,u),[i,e]=this.jF(f,c,u),[h,r]=this.jF(f,d,u),[n,o]=this.jF(l,d,u),a=Math.min(p,g,M,S,t,i,h,n);g=Math.max(p,g,M,S,t,i,h,n),p=a,a=Math.min(m,y,w,T,s,e,r,o),y=Math.max(m,y,w,T,s,e,r,o),m=a}else{let t=Math.min(p,g,M,S);g=Math.max(p,g,M,S),p=t,t=Math.min(m,y,w,T),y=Math.max(m,y,w,T),m=t}}return dr.set(p,m,g,y),dr}h7(){return this.e8&&(this.C7(),this.e8=!1),this.i8}C7(){const t=this.pf.HS(),s=this.PH(t),i=this.IH(t);this.i8.Iy(i,s)}I7(t,s,i){return this.h7()._y(t,s,i)}_7(){const t={d:this.dY(),s:this.lF(),a:this.dF(),v:this.Kk(),i:this.iF(),html:this.rF(),bc:this.RV.toJSON(),t:this.TF(),sx:this.HV,sy:this.qV,hosp:this.ZV,px:this.mF(),py:this.yF(),c:this.cT.toJSON(),sr:this.fF(),fx:this.f8.FT(),cg:this.o8};return t}E7(t){this.NV=!!t.d,this.VV=t.s,this.YV=t.a,this.LV=!!t.v,this.OV=!t.hasOwnProperty("i")||t.i,this.EV=!!t.html,this.RV.Va(t.bc),this.PV=!!t.t,t.hasOwnProperty("sx")&&(this.HV=t.sx),t.hasOwnProperty("sy")&&(this.qV=t.sy),t.hasOwnProperty("hosp")&&(this.ZV=!!t.hosp),this.kV=t.px,this.FV=t.py,this.cT.Va(t.c),this.I8(),this.QV=t.sr,w.Yn(this.o8,t.cg),w.Yn(this.n8,this.h8);let i=new Set(this.o8),e=0;for(let t=0,s=this.n8.length;t<s;++t)i.has(this.n8[t][2])||(this.n8[e]=this.n8[t],++e);w.Un(this.n8,e),this.f8.jT(t.fx),this.M8=!0}D7(){this.Z8(!1),this.BR(),this.TY(),this.RH()}xk(){return this.G8}ik(t,s=!1){if(this.$J.includes(t))s&&this.$J.sort((t,s)=>{const i=t.RR().A7(),e=s.RR().A7();return i-e});else if(t.N7()){const i=[...t.Q5()];i.push(t),i.sort((t,s)=>{const i=t.RR().A7(),e=s.RR().A7();return i-e});for(const e of i)if(e.ij())for(const h of e.ej())if(!i.includes(h)){const r=[...h.Q5()];r.push(h),r.sort((t,s)=>{const i=t.RR().A7(),e=s.RR().A7();return i-e}),r&&r.length&&i.splice(i.length,0,...r)}for(const n of i)n.F4().f4()&&this.W8(n,!0)}else if(t.F4().f4()&&this.W8(t,!0),t.ij())for(const o of t.ej()){const a=[...o.Q5()];if(a.push(o),a.sort((t,s)=>{const i=t.RR().A7(),e=s.RR().A7();return i-e}),a&&a.length)for(const u of a)u.F4().f4()&&this.W8(u,!0)}}}}{let u=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},T=function(t,s){C!==t&&(t.BH(s),C=t)},b=(u,T,self.ks),e=self.C3Debugger,h=(b.lr(b.Rect),b.lr(b.Rect),b.lr(b.Rect)),v=b.lr(b.Ho),t=self.Ss,l=t._s,a=[],x=[],G=[],I=[],C=null;b.L7=class extends b.nr{constructor(t,s,i){super(),this.O7=t,this.pf=t.iP(),this.mr=i[0],this.R7=i[1],this.P7=i[2],this.tg=i[1],this.sg=i[2],this.k7=!!i[3],this.F7=!!i[4],this.j7=i[5],this.z7=i[6],this.B7=i[7],this.U7=null,this.AV=i[8],this.ty=s,this.HV=0,this.qV=0,this.VV=1,this.YV=0,this.W7=new Set,this.Q7=new Set,this.J7=new Set,this.V7=[],this.Y7=[],this.H7=new Map,this.q7=new Map,this.Z7=[],this.X7=!1,this.K7=l.create(),this.t9=l.create(),this.s9=l.create(),this.i9=[],this.e9=[],this.h9=new Map,this.r9=new Map,this.n9=-1;const h=this.pf.QP();this.f8=b.lr(b.d8,this,i[11]),this.EO=b.lr(b.my.EN,h.p8(),{MN:(t,s)=>{const i=s.TO(),e=i.GA();t.QD(),t.LA(e),t.OA(e),h.g8(e)},SN:t=>this.lk().y8(t)}),this.M8=!0,this.o9=!1,this.JV=null,this.a9={},this.u9=new Map,this.l9=!0,this.c9=new self.uk(this),this.f9=b.lr(b.Event.Hf);for(const e of i[9])this.i9.push(b.IV.E8(this,null,e));this.d9();for(const r of this.Ck())r.D8();for(const n of i[10]){const o=this.pf.A8(n[1]);if(!o)throw new Error("missing nonworld object class");o.L8()||o.O8(n),this.Z7.push(n),this.N8(o)}}cr(){for(const t of this.e9)t.cr();b.Wn(this.e9),this.J7.clear(),this.U7=null,this.O7=null,this.pf=null}iP(){return this.pf}hf(){return this.mr}fY(){return this.AV}LO(){return this.ty}lk(){return this.f8}NO(){return this.mY(),this.EO}mY(){const t="low"===this.pf.QP().HH();if(this.M8||this.o9!==t||this.EO.wL()){const s=this.lk().yY();this.EO.SL(s.map(t=>t.Tx()),{bN:s.map(t=>t.LO()),xN:t,_N:!0}),this.M8=!1,this.o9=t}}Xz(){this.lk().Xz(),this.M8=!0}p9(){let i=this.e9[0]._H();for(let t=1,s=this.e9.length;t<s;++t){const e=this.e9[t];0===e.mF()&&0===e.yF()||(i=Math.min(i,e._H()))}return i}m9(){return.5*this.pf.RY()/this.p9()}g9(){return.5*this.pf.PY()/this.p9()}vY(){return this.y9()?-1/0:this.m9()}xY(){return this.y9()?1/0:this.ym()-this.m9()}GY(){return this.y9()?-1/0:this.g9()}IY(){return this.y9()?1/0:this._m()-this.g9()}Mk(t){const s=this.vY(),i=this.xY();this.HV!==(t=(t=i<t?i:t)<s?s:t)&&(this.HV=t,this.M9(),this.pf.UR())}wk(){return this.HV}Sk(t){const s=this.GY(),i=this.IY();this.qV!==(t=(t=i<t?i:t)<s?s:t)&&(this.qV=t,this.M9(),this.pf.UR())}Tk(){return this.qV}y9(){return this.k7}S7(){this.Mk(this.wk()),this.Sk(this.Tk());for(const t of this.e9)t.bY()&&(t.Mk(t.wk()),t.Sk(t.Tk()))}jk(t,s){this.j7===t&&this.z7===s||(this.j7=t,this.z7=s,this.w9()&&(this.S9(),this.M9(),this.pf.UR()))}DY(){return this.Qk()?.5:this.j7}AY(){return this.Qk()?.5:this.z7}s7(){const t=this.DY(),s=this.AY();return t<0||1<t||s<0||1<s}Uk(){this.F7&&(this.F7=!1,this.S9(),this.M9(),this.pf.UR())}Wk(){this.F7||(this.F7=!0,this.S9(),this.M9(),this.pf.UR())}Qk(){return this.F7}w9(){return!this.Qk()}T9(t){this.X7!==(t=!!t)&&(this.X7=t,this.M9(),this.pf.UR())}YY(){return this.X7}b9(t,s,i,e,h,r,n,o,a){u(this.K7,t,s,i)&&u(this.t9,e,h,r)&&u(this.s9,n,o,a)||(l.set(this.K7,t,s,i),l.set(this.t9,e,h,r),l.set(this.s9,n,o,a),this.v9())}v9(){this.M9(),this.pf.UR()}WY(){return this.K7}LH(){return this.t9}OH(){return this.s9}mk(){return this.VV}pk(t){this.VV!==t&&(this.VV=t,this.M9(),this.S7(),this.pf.UR())}gk(t){t=b.Tr(t),this.YV!==t&&(this.YV=t,this.M9(),this.pf.UR())}yk(){return this.YV}ym(){return this.tg}Gm(t){!isFinite(t)||t<1||(this.tg=t)}_m(){return this.sg}Mm(t){!isFinite(t)||t<1||(this.sg=t)}x9(){return this.U7}cY(){return this.i9}*Ck(){for(const t of this.i9)yield*t.Xk()}Ik(){return this.e9}G9(){return this.e9.length}PR(t){return"number"==typeof t?this.FR(t):this.rY(t.toString())}FR(t){return t=b.Sr(Math.floor(t),0,this.e9.length-1),this.e9[t]}rY(t){return this.h9.get(t.toLowerCase())||null}I9(t){return!!this.rY(t)}C9(t){return this.r9.get(t)||null}S9(){for(const t of this.e9)t.RH()}M9(){for(const t of this.e9)t.TY()}Ak(t,s,i){if(this.I9(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.Vk(),h=b.lr(b.IV,this,e,{name:t,sid:Math.floor(1e15*Math.random()),MV:!0});this._9(h,s,i),this.iP().UR(),this.uY()}Lk(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.E9(t),this._9(t,s,i),this.iP().UR(),this.uY())}Rk(t){if(this.E9(t)){const s=this.pf.d3();s.ek(!0),t.cr(),s.ek(!1),this.iP().UR(),this.uY()}}kk(){const t=new Set;for(const s of this.Ck())s.dY()&&!s.pY()&&t.add(s);if(0!==t.size){const i=this.pf.d3();i.ek(!0);for(const e of t)this.E9(e),e.cr();i.ek(!1),this.iP().UR(),this.uY()}}_9(s,i,e){if(2<=e)if(i){if(i===s||i.eH(s))throw new Error(`cannot move layer '${s.hf()}' to sub-layer of itself`);i.KY(s,2===e),s.ZY(i)}else 2===e?this.i9.push(s):this.i9.unshift(s),s.ZY(null);else{const t=i.Vk();if(t){if(i.eH(s))throw new Error(`cannot move layer '${s.hf()}' to sub-layer of itself`);t.$Y(s,i,0===e),s.ZY(t)}else{let t=this.i9.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.i9.splice(t,0,s),s.ZY(null)}}}E9(t){const s=t.Vk();if(s)return s.tH(t),!0;if(1<this.i9.length){const i=this.i9.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.i9.splice(i,1),!0}return!1}d9(){this.e9=[...this.Ck()],this.h9.clear(),this.r9.clear();for(let t=0,s=this.e9.length;t<s;++t){const i=this.e9[t];i.nY(t),this.h9.set(i.hf().toLowerCase(),i),this.r9.set(i.fY(),i)}}D9(){let t=0;for(const s of this.i9){for(const i of s.Xk())i.aY(t);s.rF()&&t++}}A9(){return this.i9.at(-1).e6()+1}async uY(){this.d9(),this.D9(),this.n9=this.A9()}N9(){return this.n9}L9(){this.n9=-1}cH(t){const s=[];for(const i of this.i9){const e=i.e6();if(e===t)s.push(i);else if(t<e)break}return s}rH(){return{scrollX:this.wk(),scrollY:this.Tk(),scale:this.mk(),angle:this.yk(),vpX:this.DY(),vpY:this.AY()}}nH(t){this.Mk(t.scrollX),this.Sk(t.scrollY),this.pk(t.scale),this.gk(t.angle),this.jk(t.vpX,t.vpY)}O9(){let t=this.i9.filter(t=>t.iH())[0];for(;t;){if(!t.TF())return v.ua(t.IF()),v.aa(1),v;if(t.TH())return v.$o(0,0,0,0),v;t=t.qk().filter(t=>t.iH())[0]}return v.$o(0,0,0,0),v}j8(){return this.l9}R9(){return[...this.W7]}N8(t){if(t.ij())for(const s of t.k9().P9())this.W7.add(s);else this.W7.add(t)}F9(){return[...this.Q7]}j9(t,s){if(t===this||!s)return Promise.resolve();t&&(b.zo(this.Q7,t.Q7),t.Q7.clear());const i=[];for(const e of this.W7)this.Q7.has(e)||(i.push(e.z9(s)),this.Q7.add(e));return Promise.all(i)}async B9(t){if(t.eY())throw new Error("cannot load textures for family");const s=this.pf.HS();if(s&&!s.z_()&&!this.Q7.has(t)){this.Q7.add(t);const i=t.z9(s);this.U9(i),await i,t.W9(),this.pf.UR()}}U9(t){this.J7.add(t),t.then(()=>this.J7.delete(t)).catch(()=>this.J7.delete(t))}Q9(){return Promise.all([...this.J7])}J9(t){if(t.eY()||0<t.X4())throw new Error("cannot unload textures");const s=this.pf.HS();s&&this.Q7.has(t)&&(this.Q7.delete(t),t.V9(s))}Y9(t,s){if(t!==this&&s)for(const i of this.Q7)i.U8()||t.W7.has(i)||(i.V9(),this.Q7.delete(i))}H9(){this.Q7.clear()}async q9(t){const s=this.pf,i=this.O7,e=s.d3(),h=(this.B7&&(this.U7=e.Z9(this.B7),this.U7.X9()),i.K9(this),this.tg=this.R7,this.sg=this.P7,this.HV=s.KO()/2,this.qV=s.t3()/2,this.S7(),this.S9(),this.M9(),this.D9(),await this.pf.QP().tq(this.A9(),!0),this.sq(t),this.pf.iq(!0),this.eq(),this.l9||this.hq(),this.rq(this.V7),this.rq(this.Y7),this.nq(),i.oq(),s.ak(),this.pf.iq(!1),this.pf.aq());if(await Promise.all(h),b.Wn(h),!s.uq()){for(const r of this.V7)r.lq();for(const n of this.Y7)n.cq(this.H7,this.q7);for(const[o,a]of Object.entries(this.a9)){const u=this.pf.Q6(parseInt(o,10));u&&!u.eY()&&u.z8()&&b.Wn(a)}for(const l of this.V7)l.fq();for(const c of this.Y7)c.fq();for(const f of this.V7)f.q5()||f.pq();for(const d of this.Y7)d.q5()||d.pq()}b.Wn(this.V7),b.Wn(this.Y7),this.H7.clear(),this.q7.clear(),await Promise.all([...this.W7].map(t=>t.mq(this.pf.HS()))),t&&(s.Hf().dispatchEvent(new b.Event("beforefirstlayoutstart")),await s.gq(new b.Event("beforeprojectstart"))),await this.yq(new b.Event("beforeanylayoutstart")),s.Hf().dispatchEvent(new b.Event("beforelayoutstart")),await this.gq(new b.Event("beforelayoutstart")),s.uq()||await s.Oj(b.Tq.Sq.wq.Mq,null,null),s.Hf().dispatchEvent(new b.Event("afterlayoutstart")),await this.gq(new b.Event("afterlayoutstart")),await this.yq(new b.Event("afteranylayoutstart")),t&&(s.Hf().dispatchEvent(new b.Event("afterfirstlayoutstart")),await s.gq(new b.Event("afterprojectstart"))),e.bq(i),await this.Q9(),this.l9=!1}sq(t){for(const s of this.pf.iY())if(!s.eY()&&s.f4())for(const i of s.H4()){const e=i.RR(),h=e.PR(),r=b.Sr(h.LO(),0,this.e9.length-1),n=this.e9[r];e.zR(n,!0),n.Q8(i)}if(!t)for(const o of this.e9)o.Z8(!1)}eq(){for(const t of this.e9)t.F8(this.V7),t.K8()}hq(){let s=!1;for(const[t,i]of Object.entries(this.a9)){const e=this.pf.Q6(parseInt(t,10));if(e&&!e.eY()&&e.z8())for(const h of i){let t=null;if(!e.f4()||(t=h.hasOwnProperty("instJson")?this.C9(h.instJson.w.l):this.C9(h.w.l))){const r=this.pf.B8(e,t,!1,0,0,!0);h.hasOwnProperty("instJson")?r.jT(h.instJson):r.jT(h),s=!0,this.Y7.push(r),h.hasOwnProperty("instJson")&&(this.H7.set(r,h),this.q7.set(h.index,r))}}}for(const n of this.e9)n.Z8(!0),n.BR();s&&(this.pf.ak(),this.pf.vq())}rq(s){for(const i of s)if(i.ij()){const e=i.RR(),t=i.nj();for(const h of i.QF().k9().xq())if(h!==i.QF()){const r=h.H4();if(r.length>t)i.Gq(r[t]);else{let t;t=e?this.pf.B8(h,e.PR(),!0,e.GT(),e._T(),!0):this.pf.B8(h,null,!0,0,0,!0),this.pf.ak(),h.Iq(),i.Gq(t),s.push(t)}}}}nq(){for(const t of this.Z7){const s=this.pf.A8(t[1]);s.ij()||this.pf.B8(t,null,!0)}}Cq(){let i=[],e=this.Z7,h=0;for(let t=0,s=e.length;t<s;++t){const r=e[t],n=this.pf.A8(r[1]);n.U8()?n.ij()&&n.k9()._q()||i.push(this.pf.B8(r,null,!0)):(e[h]=r,++h)}b.Un(e,h),this.pf.ak(),this.rq(i)}sY(t,s,i,e,h,r,n){if(i)return i.sY(t,s,h,r,e,n);{const o=[];for(const a of this.e9)o.push(a.sY(t,s,h,r,e,n));return o.flat()}}async Eq(){const t=this.O7;this.pf.uq()||(await this.yq(new b.Event("beforeanylayoutend")),await this.gq(new b.Event("beforelayoutend")),await this.pf.Oj(b.Tq.Sq.wq.Dq,null,null),await this.gq(new b.Event("afterlayoutend")),await this.yq(new b.Event("afteranylayoutend"))),t.Aq(!0),this.pf.d3().Nq(),this.l9||this.Lq();for(const s of this.e9)s.tY();for(const i of this.pf.iY())if(!(i.U8()||i.f4()||i.F4().l4()||i.eY())){for(const e of i.H4())this.pf.XF(e);this.pf.ak()}t.Aq(!1),t.dR()===this&&t.K9(null)}Oq(t,s){const i=t.QF().fY().toString(),e=(this.a9.hasOwnProperty(i)||(this.a9[i]=[]),this.a9[i]),h={index:s,instJson:t.FT(),sceneGraphJson:{children:[]}};e.push(h),this.u9.set(t,h)}Rq(t){const s=this.u9.get(t);for(const i of t.Pq()){const e=this.u9.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:b.Fq.kq(i.RR())})}}Lq(){this.u9.clear();let t=0;for(const s of this.e9){s.aH();for(const i of s.jR()){const e=i.QF();!e.U8()&&e.z8()&&(this.Oq(i,t),t++)}}for(const h of this.e9)for(const r of h.jR()){const n=r.QF();!n.U8()&&n.z8()&&this.Rq(r)}this.u9.clear()}jq(){this.a9={},this.l9=!0}GA(){return this.JV}TH(){const t=this.pf,s=t.HS().wS();return"low"===t.QP().HH()||s&&t.YH()||this.f8.bH()||s&&t.JY()}zq(t){const s=this.pf.QP();if(this.TH()){t.AA(null),t.MA(0,0,0,0);const i={_2:this.pf.s3(),gb:t.LM()||this.pf.YH()||this.f8.bH(),VH:!!t.LM()&&this.pf.YH()};"low"===s.HH()&&(i.width=s.FH(),i.height=s.jH()),this.JV=this.pf.qH(i)}else this.JV=null}Bq(t){this.pf.Uq(t)&&(t.TA(!1),t.AA(null),t.BM(),t.NA(this.JV))}Wq(t){this.TH()&&(t.TA(!1),this.Qq(t,this.JV))}Jq(t){t.AA(this.JV),t.hc(this.O9()),this.pf.JY()&&t.SA();const s=this.cH(0);this.ZH(t,this.JV,s,!0),t.LM()&&t.StartMeasuringRenderPassTime(0,1),this.Wq(t),this.JV=null}Vq(t,s){let i=null;this.pf.Uq(t)&&(i=this.JV),t.AA(i),t.MA(0,0,0,0),this.pf.JY()&&t.SA();const e=this.cH(s);this.ZH(t,i,e,!0),this.Bq(t),t.fS(),this.pf.QP().Yq(s)}ZH(t,e,s,h){const r=s.filter(t=>t.iH());for(let s=0,i=r.length;s<i;){const n=r[s];if(n.HY()&&!n.vH()){a.push(n);for(let t=s+1;t<i;++t){const o=r[t];if(!o.HY()||o.vH())break;a.push(r[t])}if(2<=a.length||1===a.length&&a[0].sH()){this.Hq(t,e,a),s+=a.length,b.Wn(a);continue}b.Wn(a)}n.m2(t,e,h&&0===s),++s}}Qq(t,s){const i=this.f8.yY(),e=this.pf;0===i.length?(t.AA(null),t.BM(),t.NA(s),t.OA(s),e.g8(s)):(h.set(0,0,e.RY(),e.PY()),this.NO().DL(t,null,{AL:this,NL:3,devicePixelRatio:this.pf.g7(),LL:this.pf.M7()*this.mk(),OL:this.yk(),sO:h,iO:null,TN:!0}))}Hq(e,h,t){t[0].TF()||(v.ua(t[0].IF()),v.aa(1),e.hc(v)),this.pf.QP(),e.TA(!0);const r=x,n=G,o=I;for(const a of t)a.aH(),a.UY(r);const s=t[0],i=s.UH(e);s.JH(e);for(let s=0,i=r.length;s<i;){const u=r[s],l=u.RR(),c=l.PR();if(l.sF()&&l.r7(c.h7())){(!u.n7()||0<l.o7())&&o.push(u);const f=u.RR().p5();n.push(u);let t=s+1;for(;t<i;++t){const d=r[t],p=d.RR();if(p.sF()&&p.r7(p.PR().h7())){if(p.p5()!==f)break;(d.n7()?(0<p.o7()&&o.push(d),n):o).push(d)}}if(1!==n.length||n[0].a7()){this.qq(e,h,n);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.RR(),y=g.PR();g.l7(!0),T(y,e),y.e7(m,g,e,h),g.l7(!1)}}else{T(c,e),c.e7(u,l,e,h);for(let t=0,s=o.length;t<s;++t){const M=o[t];if(M!==u){const w=M.RR(),S=w.PR();T(S,e),S.e7(M,w,e,h)}}}s=t,b.Wn(n),b.Wn(o)}else++s}i&&e.UA(i),b.Wn(r),C=null}qq(i,e,h){i.PA();for(let t=0,s=h.length;t<s;++t){const r=h[t],n=r.RR(),o=n.PR();n.c7(!0),T(o,i),o.f7(r,n,i)}i.kA();for(let t=0,s=h.length;t<s;++t){const a=h[t],u=a.RR(),l=u.PR();T(l,i),l.e7(a,u,i,e),u.c7(!1)}i.jA()}_7(){const t={sx:this.wk(),sy:this.Tk(),s:this.mk(),a:this.yk(),w:this.ym(),h:this._m(),ortho:this.Qk(),vpX:this.DY(),vpY:this.AY(),fv:this.l9,persist:this.a9,fx:this.f8.FT(),layers:{},dynamicLayers:[]};for(const s of this.e9)if(s.dY()){const i=s.Vk();t.dynamicLayers.push({sid:s.fY(),name:s.hf(),parentSid:i?i.fY():null,siblingIndex:s.lY(),data:s._7()})}else t.layers[s.fY().toString()]=s._7();return t}E7(t){this.HV=t.sx,this.qV=t.sy,this.VV=t.s,this.YV=t.a,this.tg=t.w,this.sg=t.h,this.F7=!!t.ortho,t.hasOwnProperty("vpX")&&(this.j7=t.vpX),t.hasOwnProperty("vpY")&&(this.z7=t.vpY),this.l9=!!t.fv,this.a9=t.persist,this.f8.jT(t.fx),this.M8=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),h=this.C9(e);h&&h.E7(i)}if(t.hasOwnProperty("dynamicLayers")){this.kk(),this.pf.ak();const r=new Map,n=t.dynamicLayers;for(let t=n.length-1;0<=t;--t){const o=n[t],a=o.sid,u=o.name,l=o.parentSid,c=o.siblingIndex,f=o.data;if(this.d9(),!this.I9(u)&&!this.C9(a)){let t,s;if(null===l)t=null,s=this.i9;else{if(!(t=this.C9(l)))continue;s=t.qk()}const d=b.lr(b.IV,this,t,{name:u,sid:a,MV:!0});s.push(d);let i=r.get(s);i||(i=[],r.set(s,i)),i.push({o5:d,siblingIndex:c}),d.E7(f)}}for(const[p,m]of r){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.o5,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.uY(),this.S9(),this.M9()}pR(){return this.c9}a3(){return this.f9}Zq(t){t.layout=this.pR();const s=this.pf,i=s.Bj()&&!s.d3().rk();i&&e.StartMeasuringScriptTime(),this.f9.dispatchEvent(t),i&&e.AddScriptTime()}gq(t){return t.layout=this.pR(),this.f9.i0(t)}yq(t){return t.layout=this.pR(),this.pf.gq(t)}Xq(){this.Kq(this.i9)}Kq(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.hf()),this.Kq(e.qk(),s+1)}}}{const _r=self.ks;_r.$q=class extends _r.nr{#J6;#tZ=[];#sZ=new Map;#iZ=new Map;#eZ=null;#hZ=[];#rZ=null;#nZ=0;#oZ=null;constructor(t){super(),this.#J6=t}cr(){this.#J6=null,this.#eZ=null,this.#rZ=null,this.#oZ=null,_r.Wn(this.#tZ),this.#sZ.clear(),this.#iZ.clear(),_r.Wn(this.#hZ)}dv(t){const s=_r.lr(_r.L7,this,this.#tZ.length,t);this.#tZ.push(s),this.#sZ.set(s.hf().toLowerCase(),s),this.#iZ.set(s.fY(),s)}iP(){return this.#J6}aZ(t){this.#rZ=t}uZ(){if(this.#rZ)return this.#rZ;if(this.#tZ.length)return this.#tZ[0];throw new Error("no first layout")}lZ(t){return this.#sZ.get(t.toLowerCase())||null}cZ(t){return this.#iZ.get(t)||null}fZ(t){return t=_r.Sr(Math.floor(t),0,this.#tZ.length-1),this.#tZ[t]}yR(t){return"number"==typeof t?this.fZ(t):this.lZ(t.toString())}wR(){return this.#tZ}K9(t){this.#eZ=t}dR(){return this.#eZ}dZ(t){if(this.#hZ.includes(t))throw new Error("layout already running");this.#hZ.push(t)}pZ(t){const s=this.#hZ.indexOf(t);if(-1===s)throw new Error("layout not running");this.#hZ.splice(s,1)}*mZ(){this.#eZ&&(yield this.#eZ),this.#hZ.length&&(yield*this.#hZ)}gZ(t){return this.#eZ===t||this.#hZ.includes(t)}Aq(t){if(t)this.#nZ++;else{if(this.#nZ<=0)throw new Error("already unset");this.#nZ--}}nk(){return 0<this.#nZ}bR(t){this.#oZ=t}oq(){this.#oZ=null}TR(){return!!this.#oZ}yZ(){return this.#oZ}MZ(){const t=this.dR();t&&t.S9()}wZ(){const t=this.dR();t&&t.M9()}}}{const Er=self.ks,Dr=new RegExp("<(.+?)>","g");Er.SZ=class extends Er.nr{constructor(t){super(),this.pf=t,this.TZ=Er.lr(Er.bZ),this.vZ=null,this.xZ=[],this.GZ=new Map,this.IZ=new Map,this.CZ=new Map,this._Z=[],this.EZ=[],this.DZ=[],this.AZ=!1,this.NZ=!1,this.LZ=!1,this.OZ=()=>this.RZ(),this.PZ=()=>this.kZ(),this.FZ=()=>this.jZ(),this.zZ=()=>this.BZ(),this.UZ=t=>this.WZ(t.Wz),this.QZ=t=>this.JZ(),this.VZ=t=>this.YZ(),this.HZ=t=>this.qZ(),this.ZZ=[],this.XZ=0}cr(){this.KZ(),this.OZ=null,this.PZ=null,this.FZ=null,this.zZ=null,this.UZ=null,this.VZ=null;for(const t of this.xZ)t.jB(),t.cr();Er.Wn(this.xZ),this.xZ=null,this.TZ.cr(),this.TZ=null,Er.Wn(this._Z),this._Z=null,Er.Wn(this.EZ),this.EZ=null,Er.Wn(this.DZ),this.DZ=null,this.GZ.clear(),this.GZ=null,this.IZ.clear(),this.IZ=null,this.CZ.clear(),this.CZ=null,Er.Wn(this.ZZ),this.ZZ=null,this.pf=null}$Z(){const t=this.pf.Hf();t.addEventListener("pretick",this.OZ),t.addEventListener("tick2",this.PZ),t.addEventListener("beforelayoutchange",this.FZ),t.addEventListener("layoutchange",this.zZ),t.addEventListener("instancedestroy",this.UZ),t.addEventListener("beforeload",this.QZ),t.addEventListener("afterload",this.VZ),t.addEventListener("afterlayoutstart",this.HZ)}KZ(){const t=this.pf.Hf();t.removeEventListener("pretick",this.OZ),t.removeEventListener("tick2",this.PZ),t.removeEventListener("beforelayoutchange",this.FZ),t.removeEventListener("layoutchange",this.zZ),t.removeEventListener("instancedestroy",this.UZ),t.removeEventListener("beforeload",this.QZ),t.removeEventListener("afterload",this.VZ),t.removeEventListener("afterlayoutstart",this.HZ)}dv(t){this.TZ.Mc(t);const s=Er.sX.tX(t,this);this.Mc(s),this.iX(s),this.CZ.set(s.hf(),0)}eX(t){const s=this.hX(),i=t.aj(),e=s.ei(i),h=Er.sX.eX(i+":"+this.CZ.get(i),e,this);return this.rX(i),this.Mc(h),h}rX(t){this.CZ.set(t,this.CZ.get(t)+1)}nX(){for(const t of this.xZ)if(!t.aX()){const s=t.aj();this.rX(s)}}uX(){for(const t of this.CZ.keys())this.CZ.set(t,0)}Mc(t){this.xZ.push(t),this.GZ.set(t.hf().toLowerCase(),t)}C0(t){t.lX(),t.aX()||(Er.qn(this.xZ,t),Er.qn(this._Z,t),Er.qn(this.EZ,t),Er.qn(this.DZ,t),this.GZ.delete(t.hf().toLowerCase()),this.cX(t),t.PB())||t.cr()}Nj(t){this.pf.Nj(t,this.vZ,null)}iP(){return this.pf}hX(){return this.TZ}fX(t){this.vZ=t}dX(){return this.vZ}*pX(){for(const t of this.xZ)yield t}*mX(){for(const t of this.EZ)yield t}gX(t,s){this.IZ.has(t)||this.IZ.set(t,new Set),this.IZ.get(t).add(s)}iX(t){for(const s of t.yX())this.gX(s,t)}cX(t){for(const[s,i]of this.IZ.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.IZ.delete(s)}MX(t){if(this.IZ.has(t))return this.IZ.get(t)}wX(t,s){if(s)for(const i of this.xZ){const e=s.every(t=>i.SX(t.Wz,t.trackId));if(e&&i.hf().includes(t.hf()))return i}}TX(t){return this.GZ.get(t.toLowerCase())||null}bX(t){for(const s of this._Z)if(s.hf()===t)return s;for(const i of this.EZ)if(i.hf()===t)return i;return null}*vX(i){if(Dr.test(i)){Dr.lastIndex=0;let t,s=new Set;do{if(t=Dr.exec(i)){const e=t[1].split(",");for(const h of e)s.add(h)}}while(t);for(const r of s.values()){const n=this.TX(r);n&&(yield n)}s.clear()}else{const t=this.TX(i);t&&(yield t)}}*xX(t){for(const s of this.xZ)s.BB(t)&&(yield s)}GX(t){this._Z.includes(t)||this._Z.push(t),this.IX()}CX(t){Er.qn(this.EZ,t),this._X()}EX(t){this.EZ.includes(t)?(t.DX(!0),t.AX(!1),t.NX(!1)):(t.DX(!1),t.AX(!0),t.NX(!1),this._Z.includes(t)||this._Z.push(t)),this.IX()}LX(t){t.DX(!1),t.AX(!1),t.OX(),Er.qn(this._Z,t),this._X()}RX(t){t.DX(!1),t.AX(!1),this.EZ.includes(t)&&(t.NX(!0),this.DZ.push(t),Er.qn(this.EZ,t)),this._Z.includes(t)&&t.NX(!0)}PX(t){t.DX(!1),t.AX(!1),t.NX(!1),t.qB(1),Er.qn(this.EZ,t)}kX(t){this.RX(t),t.OX()}RZ(){if(!this.iP().uq()&&this.AZ&&!this.NZ){for(this.LZ=!0;this._Z.length;){const t=this._Z.pop();(t.FX()?(t.jX(),this.DZ):(t.zX(),this.EZ)).push(t),0!==t.BX()&&(this.XZ=1)}const s=this.pf.UX(),i=this.pf.WX(),e=this.pf.W3();for(let t=this.EZ.length-1;0<=t;t--){const h=this.EZ[t];h&&h.QX(s,e,i)}this.LZ=!1,0!==this.XZ&&this.iP().UR()}}kZ(){if(!this.iP().uq()&&this.AZ&&!this.NZ){let i;for(let t=0,s=this.DZ.length;t<s;t++){const e=this.DZ[t];i=i||new Set,e.lX(),this.JX(e),i.add(e)}if(i){Er.Kn(this.DZ,i);for(let t=this.XZ=0,s=this.EZ.length;t<s;t++)if(0!==this.EZ[t].BX()){this.XZ=1;break}}this._X()}}JX(t){t.PB()||t.VX()&&t.YX()&&t.HX()&&t.qX()}IX(){this.AZ||(this.AZ=!0)}_X(){this.DZ.length||this.EZ.length||this._Z.length||this.LZ||(this.AZ=!1)}jZ(){for(this.NZ=!0;this._Z.length;)this.LX(this._Z.pop());const t=new Set;for(const s of this.EZ){const i=s.jZ();i&&(s.lX(),t.add(s))}Er.Kn(this.EZ,t),t.clear();for(const e of this.DZ){const h=e.jZ();h&&(e.lX(),t.add(e))}Er.Kn(this.DZ,t),this._X();for(const r of this.xZ)r.ZX()}BZ(){this.NZ=!1}WZ(t){const s=t.QF(),i=this.MX(s);if(i)if(this.pf.uq())this.ZZ.push(t);else for(const e of i)e.aX()||(e.PB()?this.C0(e):e.VX()||(this.JX(e),this.C0(e)))}JZ(){for(const t of this._Z.map(t=>t))this.JX(t),this.C0(t);for(const s of this.EZ.map(t=>t))this.JX(s),this.C0(s)}YZ(){for(const t of this.ZZ)this.WZ(t);Er.Wn(this.ZZ);for(const s of this.xZ)s.YZ()}qZ(){const t=this.pf.gR(),s=t.dR();if(s)for(const i of this.xZ){const e=i.XX();e&&s.hf()===e&&this.EX(i)}}_7(){return{timelinesJson:this.KX(),scheduledTimelinesJson:this.$X(),playingTimelinesJson:this.tK(),markedForRemovalTimelinesJson:this.sK(),hasRuntimeListeners:this.AZ,changingLayout:this.NZ,isTickingTimelines:this.LZ}}E7(t){t&&(this.uX(),this.iK(t.timelinesJson),this.eK(t.scheduledTimelinesJson),this.hK(t.playingTimelinesJson),this.rK(t.markedForRemovalTimelinesJson),this.AZ=!t.hasRuntimeListeners,this.NZ=!!t.changingLayout,this.LZ=!!t.isTickingTimelines,this.nX(),this.IX(),this._X())}KX(){return this.xZ.map(t=>t._7())}iK(t){for(const s of t){let t=this.TX(s.name);if(t)t.E7(s);else{const i=this.nK(s);if(!i)continue;const e=this.TX(i);(t=this.eX(e)).E7(s)}t.oK()||this.C0(t)}}nK(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}$X(){return this.aK(this._Z)}eK(t){this.uK(t,this._Z)}tK(){return this.aK(this.EZ)}hK(t){this.uK(t,this.EZ)}sK(){return this.aK(this.DZ)}rK(t){this.uK(t,this.DZ)}lK(t,s){if(s)for(const i of s)if(i===t.hf())return!0;return!1}aK(t){return t.map(t=>t.hf())}uK(t,s){const i=new Set;for(const e of s)this.lK(e,t)||i.add(e);if(Er.Kn(s,i),t)for(const h of t){const r=this.TX(h);if(r){const n=s.find((s=>t=>t.hf()===s)(h));n||s.push(r)}}}}}{const Ar=self.ks,Nr=[0,0],Lr=[0,0],Or=[0,0],Rr=[0,0,0,0,0],Pr=new Array(4),kr=[{x:0,y:0,t:0,Dt:0},{x:0,y:0,t:0,Dt:0},{x:0,y:0,t:0,Dt:0}],Fr={x:0,y:0,t:0,Dt:0};Ar.cK=class{constructor(t,s){this.fK=!1,this.dK=t,this.pK=[];let i=null;if(i=s?this.dK.mK(s):Ar.first(this.dK.gK())){const e=i.fU("offsetX"),h=i.fU("offsetY");if(e&&h){this.yK=e,this.MK=h;const r=e.wK(),n=h.wK();for(let t=1,s=Math.min(r.length,n.length);t<s;++t){const o=r[t],a=(o.SK(),o.TK()),u=n[t],l=(u.SK(),u.TK());a&&"cubic-bezier"===a.bK()&&l&&"cubic-bezier"===l.bK()?this.pK.push(Ar.lr(Ar.vK,a,l,o,u,this.pK.length)):(a&&"line"===a.bK()&&l&&l.bK(),this.pK.push(Ar.lr(Ar.xK,o,u,this.pK.length)))}this.fK=!0}}}cr(){for(const t of this.pK)t.cr();Ar.Wn(this.pK),this.pK=null,this.dK=null,this.yK=null,this.MK=null}GK(){return this.fK}IK(){return this.pK}CK(t){const s="relative"===this.yK._K()?t.GT():0,i="relative"===this.MK._K()?t._T():0;for(const e of this.pK)e.CK(s,i)}gy(s,i,t){let e=NaN,h=this.pK.length;for(let t=0;t<h;t++){const r=this.pK[t];if("cubic-bezier"===r.xx()){const n=r.gy(s,i);(isNaN(e)||n[3]<e)&&(e=n[3],Or[0]=n[2],Or[1]=r.LO())}}return Or}EK(s,i,t){const e=t.tRange;Ar.pe(e[0])||(e[0]=0),Ar.pe(e[1])||(e[1]=1);let h=NaN,r=this.pK.length;for(let t=0;t<r;t++){const n=this.pK[t];if("cubic-bezier"===n.xx()){const o=n.DK(s,i,e);(isNaN(h)||o[3]<h)&&(h=o[3],Or[0]=o[2],Or[1]=n.LO())}}return Or}AK(t,s){return this.pK[s].AK(t)}NK(t,s){return this.pK[s].NK(t)}},Ar.vK=class{constructor(t,s,i,e,h){this.ty=h;const r=t.LK("cubic-bezier"),n=i.LK("cubic-bezier"),o=s.LK("cubic-bezier"),a=e.LK("cubic-bezier");this.RK=t.PK(),this.kK=s.PK(),this.FK=t.PK()+r.jK(),this.zK=s.PK()+o.jK(),this.BK=i.PK()+n.UK(),this.WK=e.PK()+a.UK(),this.QK=i.PK(),this.JK=e.PK(),this.VK=0,this.YK=0,this.HK=0,this.qK=0,this.ZK=0,this.XK=0,this.KK=0,this.$K=0,this.t$=0,this.s$=0,this.i$=0,this.e$=0,this.h$=0,this.r$=0,this.n$=0,this.o$=0,this.a$=0,this.u$=0,this.l$=0,this.c$=0,this.f$=NaN,this.fK=!1,this.d$=100,this.p$=new Array(this.d$+1),this.p$[0]=0,this.m$=0,this.g$=[],this.y$=[];for(let t=0;t<100;t++)this.y$.push({x:0,y:0,t:0,Dt:0});this.M$()}cr(){Ar.Wn(this.p$),this.p$=null,Ar.Wn(this.g$),this.g$=null,Ar.Wn(this.y$),this.y$=null}xx(){return"cubic-bezier"}LO(){return this.ty}w$(){return Math.floor(this.m$/25)}S$(){return 1/this.w$()}CK(t,s){this.T$=t,this.b$=s,this.p$=new Array(this.d$+1),this.p$[0]=0,this.M$(),this.VK=this.RK+this.T$,this.YK=this.kK+this.b$,this.HK=this.FK+this.T$,this.qK=this.zK+this.b$,this.ZK=this.BK+this.T$,this.XK=this.WK+this.b$,this.KK=this.QK+this.T$,this.$K=this.JK+this.b$,this.t$=3*(this.HK-this.VK),this.s$=3*(this.qK-this.YK),this.i$=3*(this.ZK-this.HK),this.e$=3*(this.XK-this.qK),this.h$=3*(this.KK-this.ZK),this.r$=3*(this.$K-this.XK),this.n$=3*(this.HK-this.VK),this.o$=3*(this.VK+this.ZK-2*this.HK),this.a$=this.KK-this.VK+3*(this.HK-this.ZK),this.u$=3*(this.qK-this.YK),this.l$=3*(this.YK+this.XK-2*this.qK),this.c$=this.$K-this.YK+3*(this.qK-this.XK)}Map(t){if(!this.fK)return NaN;const s=this.v$(t);return Lr[0]=this.x$(s),Lr[1]=this.G$(s),Lr}gy(t,s){const i=this.I$(100),e=this.C$(t,s,i),h=this._$(t,s,i,e);return Rr[0]=h.x,Rr[1]=h.y,Rr[2]=h.t,Rr[3]=h.Dt,Rr}DK(t,s,i){const e=this.I$(100),h=this.E$(t,s,e,i),r=this._$(t,s,e,h);return Rr[0]=r.x,Rr[1]=r.y,Rr[2]=r.t,Rr[3]=r.Dt,Rr}AK(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.t$+e*this.i$+h*this.h$,n=i*this.s$+e*this.e$+h*this.r$,o=Ar.Gr(r,n);return Nr[0]=r/o,Nr[1]=n/o,Nr}NK(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.t$+e*this.i$+h*this.h$,n=i*this.s$+e*this.e$+h*this.r$;return Math.atan2(n,r)}v$(h){if(this.fK){let t=h*this.p$[this.d$],s=0,i=this.d$,e=0;for(;s<i;)e=s+((i-s)/2|0),this.p$[e]<t?s=e+1:i=e;this.p$[e]>t&&e--;const r=this.p$[e];return r===t?e/this.d$:(e+(t-r)/(this.p$[e+1]-r))/this.d$}}x$(t){return this.fK?self.Tc.kc("cubicbezier")(t,this.RK+this.T$,this.FK+this.T$,this.BK+this.T$,this.QK+this.T$):NaN}G$(t){return this.fK?self.Tc.kc("cubicbezier")(t,this.kK+this.b$,this.zK+this.b$,this.WK+this.b$,this.JK+this.b$):NaN}I$(s){if(!(this.g$.length>=(s=s||100))){this.g$=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,h=i**3,r=this.n$*i,n=this.o$*e,o=this.a$*h,a=this.u$*i,u=this.l$*e,l=this.c$*h,c=this.VK+r+n+o,f=this.YK+a+u+l;this.y$[t].x=c,this.y$[t].y=f,this.y$[t].t=i,this.y$[t].Dt=0,this.g$[t]=this.y$[t]}}return this.g$}C$(s,i,e,t=0,h=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.f$))for(let t=0;t<100;t++){const n=e[t],o=n.x-s,a=n.y-i;n.Dt=o*o+a*a,n.Dt<h&&(h=n.Dt,r=t)}else{for(let t=this.f$;t<this.f$+5&&!(t>=e.length);t++){const u=e[t],l=u.x-s,c=u.y-i;u.Dt=l*l+c*c,u.Dt<h&&(h=u.Dt,r=t)}for(let t=this.f$;t>this.f$-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.Dt=d*d+p*p,f.Dt<h&&(h=f.Dt,r=t)}}return this.f$=r}E$(s,i,e,h,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.f$))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,u=o.y-i;o.Dt=a*a+u*u,o.t>=h[0]&&o.t<=h[1]&&o.Dt<r&&(r=o.Dt,n=t)}else{for(let t=this.f$;t<this.f$+5&&!(t>=e.length);t++){const l=e[t],c=l.x-s,f=l.y-i;l.Dt=c*c+f*f,l.t>=h[0]&&l.t<=h[1]&&l.Dt<r&&(r=l.Dt,n=t)}for(let t=this.f$;t>this.f$-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.Dt=p*p+m*m,d.t>=h[0]&&d.t<=h[1]&&d.Dt<r&&(r=d.Dt,n=t)}}return this.f$=n}_$(n,o,a,u){let l=a[u],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===u?0:u-1,i=u===t-1?t-1:u+1,e=a[s].t,h=a[i].t,r=(h-e)/4;if(r<.001)break;Pr[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*r,d=f**2,p=f**3,m=this.n$*f,g=this.o$*d,y=this.a$*p,M=this.u$*f,w=this.l$*d,S=this.c$*p,T=this.VK+m+g+y,b=this.YK+M+w+S,v=T-n,x=b-o,G=v*v+x*x;if(G<c){c=G,u=t,Fr.x=T,Fr.y=b,Fr.t=f,Fr.Dt=G,l=Fr;break t}const I=kr[t-1];I.x=T,I.y=b,I.t=f,I.Dt=G,Pr[t]=I}Pr[3]=a[i],a=Pr}while(t++<20);return l}M$(){this.fK=!0;let s=this.x$(0),i=this.G$(0),e=0;for(let t=1;t<=this.d$;t++){const h=this.x$(.01*t),r=this.G$(.01*t),n=s-h,o=i-r;e+=Ar.Gr(n,o),this.p$[t]=e,s=h,i=r}this.m$=e}},Ar.xK=class{constructor(t,s,i){this.ty=i,this.D$=t.PK(),this.A$=s.PK(),this.T$=0,this.b$=0}cr(){}xx(){return"line"}LO(){return this.ty}CK(t,s){this.T$=t,this.b$=s}GT(){return this.D$+this.T$}_T(){return this.A$+this.b$}}}{const S=self.ks;S.sX=class extends S.nr{constructor(t,s,i){super(),this.pf=i.iP(),this.N$=i,this.L$=s,this.mr=t,this.O$=[],this.R$=0,this.P$=null,this.k$=0,this.F$(),this.j$=null,this.z$=null,this.B$=0,this.U$=0,this.W$=1,this.Q$=0,this.J$=1,this.V$=!1,this.Y$=!1,this.H$=!1,this.q$=!0,this.Z$=!1,this.X$=!1,this.K$=-1,this.$$=!1,this.ttt=!1,this.stt=!1,this.itt=!1,this.ett=NaN,this.htt=[""],this.ntt="",this.ott=!1,this.XZ=0,this.att=0,this.utt=null}static tX(t,s){const i=s.hX(),e=i.ltt(),h=i.ei(t[e]),r=S.lr(S.sX,t[e],h,s);return r.ctt(!0),r}static eX(t,s,i){return S.lr(S.sX,t,s,i)}cr(){if(!this.PB()){const t=this.pf.Hf();this.N$.LX(this),this.N$.kX(this);for(const s of this.O$)s.cr();S.Wn(this.O$),this.O$=null,this.pf=null,this.N$=null,this.L$=null,this.Z$=!0,this.j$=null,this.z$=null,this.ftt(t)}}ftt(t){const s=S.lr(S.Event,"timelinestatereleased");s.dtt=this,t.dispatchEvent(s)}xx(){return 0}F$(){for(const t of this.L$.mtt().ptt())this.R$=this.O$.push(S.gtt.dv(this,t))}ytt(){return this.N$}iP(){return this.pf}gK(){return this.O$}Mtt(e,h,r,n){if(this.att){let i;for(let s=0;s<this.O$.length;s++){let t=this.O$[s];if(e===t.nU()){const o=t.fU(r);o&&h.constructor===o.wtt().constructor&&o._K()===n._K()&&(i=i||[]).push(o)}}return i}}oK(){return!!this.O$.length}mK(t){for(const s of this.O$)if(S.gh(s.lU(),t))return s;return null}Stt(t){for(const s of this.O$)if(!s.Ttt()&&S.gh(s.hf(),t))return s;return null}iW(t){this.mr=t}hf(){return this.mr}btt(){return this.L$}aj(){return this.L$.hf()}QB(){return this.L$.QB()}WB(t){this.L$.WB(t)}vtt(){return this.L$.vtt()}xtt(t){this.L$.xtt(t)}Gtt(){return this.L$.Gtt()}Itt(t){this.L$.Itt(t)}_K(){return this.L$._K()}Ctt(t){this.L$._K(t)}rU(t){for(const s of this.gK())s.rU(t)}VB(){return this.L$.VB()}JB(t){return this.L$.JB(t)}HB(){return this.L$.HB()}YB(t){return this.L$.YB(t)}eB(){return this.L$.eB()}_tt(t){return this.L$._tt(t)}qB(t){return this.W$=t}ZB(){return this.W$}XX(){return this.L$.XX()}Ett(){return this.L$.Ett()}Dtt(){return this.L$.Dtt()}Att(){return this.Q$}Ntt(){return!this.IsPlaying()||0<this.W$}KB(){return this.j$||(this.j$=new Promise(t=>{this.z$=t})),this.j$}OX(){this.j$&&(this.z$(),this.j$=null,this.z$=null)}Ltt(t){this.htt=S.sX.Ott(t),this.ott=!0}XB(){return this.htt}Rtt(){return this.ott&&(this.ntt=this.htt.join(" ")),this.ott=!1,this.ntt}BB(t){if(!this.htt)return!1;if(!this.htt.length)return!1;const s=S.sX.Ott(t);return!!s&&!!s.length&&s.every(S.sX.Ptt,this)}ktt(){S.Tq.Timeline&&this.constructor===S.sX&&(S.Tq.Timeline.wq.PushTriggerTimeline(this),this.N$.Nj(S.Tq.Timeline.wq.OnTimelineStarted),this.N$.Nj(S.Tq.Timeline.wq.OnTimelineStartedByName),this.N$.Nj(S.Tq.Timeline.wq.OnTimelineStartedByTags),this.N$.Nj(S.Tq.Timeline.wq.OnAnyTimelineStarted),S.Tq.Timeline.wq.PopTriggerTimeline())}Ftt(){this.K$=this.pf.jtt()}qX(){this.stt||(this.stt=!0,S.Tq.Timeline&&this.constructor===S.sX&&(S.Tq.Timeline.wq.PushTriggerTimeline(this),this.N$.Nj(S.Tq.Timeline.wq.OnTimelineFinished),this.N$.Nj(S.Tq.Timeline.wq.OnTimelineFinishedByName),this.N$.Nj(S.Tq.Timeline.wq.OnTimelineFinishedByTags),this.N$.Nj(S.Tq.Timeline.wq.OnAnyTimelineFinished),S.Tq.Timeline.wq.PopTriggerTimeline()))}DX(t){this.V$=t}ztt(){return this.K$===this.pf.jtt()}IsPlaying(t=!1){return!!this.ztt()||!(!this.Btt()||t)||this.V$}Utt(){return this.IsPlaying(!0)}tU(){return this.Wtt()}Wtt(){return!(this.PB()||this.Btt()||this.Utt()||this.YX())}AX(t){this.Y$=t}Btt(){return this.Y$}Qtt(t){this.q$=t;const s=this.gN();(s<=0||s>=this.QB())&&(this.q$=!0)}YX(){return this.q$}PB(){return this.Z$}NX(t){this.X$=t}FX(){return this.X$}Jtt(t){this.$$=t}Vtt(){return this.$$}ctt(t){this.ttt=!!t}aX(){return this.ttt}HX(){return this.H$}gN(){return this.B$}UB(t){const s=this.gN();this.Ytt(t),this.Qtt(!1),this.YX()||this.Jtt(!0),!this.Utt()&&!this.Btt()&&this.H$||(this.Utt()||this.Btt()||this.H$?this.Utt()?this.jB():this.Btt()&&(this.N$.LX(this),this.Htt()):this.Htt()),this.qtt(),this.Ztt(this.gN(),!1,!0,!0,s),this.Xtt(),this.XZ&&this.iP().UR(),this.Ktt()}Ytt(t){(t=S.pe(t)?t:this.QB())<0?this.B$=0:t>=this.QB()?this.B$=this.QB():this.B$=t}$tt(t){(t=S.pe(t)?t:this.QB())<0?this.B$=0:t>=this.QB()?this.B$=this.QB():this.B$=t;for(const s of this.O$)s.tst()}Ktt(){S.Tq.Timeline&&this.constructor===S.sX&&(S.Tq.Timeline.wq.PushTriggerTimeline(this),this.N$.Nj(S.Tq.Timeline.wq.OnTimeSet),this.N$.Nj(S.Tq.Timeline.wq.OnTimeSetByName),this.N$.Nj(S.Tq.Timeline.wq.OnTimeSetByTags),S.Tq.Timeline.wq.PopTriggerTimeline())}sst(){if(!this.VB())if(this.HB()&&1===this.Q$){if(this.Ntt()){if(this.gN()>=this.QB())return!1}else if(this.gN()<=0)return!1}else if(!this.VB()&&!this.HB())if(this.Ntt()){if(this.gN()>=this.QB())return!1}else if(this.gN()<=0)return!1;return!0}zB(){this.PB()||this.sst()&&this.Play(!0)}Play(t=!1){return!this.PB()&&!this.Btt()&&(this.Utt()&&this.ztt()?this.ist():!this.Utt()&&!!(this.YX()||t||this.Vtt())&&this.est())}ist(){return this.Jtt(!1),this.N$.CX(this),this.N$.EX(this),this.KB(),!0}est(){return this.Jtt(!1),this.N$.EX(this),this.KB(),!0}jB(t=!1){this.PB()||(this.Qtt(t),this.N$.RX(this),this.YX()&&this.OX())}m0(t=!0,s=!1){if(!this.PB()){if(!this.Utt()&&this.Btt())return this.N$.LX(this);if(!this.YX()){this.jB(!0),this.Ntt()?this.Ytt(0):this.Ytt(this.QB());const i=this.gN();this.qtt(),s?this.hst(i):this.Ztt(i,!1,!1,!0),t&&this.Ktt(),this.Xtt(),this.XZ&&t&&this.iP().UR()}}}rst(){this.m0(!1,!0)}hst(t){this.Ztt(t,!1,!1,!0,NaN,!1,!0)}jZ(){if(!this.PB()){if(!this.iP().uq()&&this.nst())return!1;this.N$.PX(this),this.iP().uq()||this.rst()}return!0}Htt(){this.zX(!0)}jX(){this.zX(!1,!0),this.DX(!1),this.AX(!1)}zX(t=!1,s=!1){if(!this.FX()||s){if(t){this.stt=!1,this.H$=!0,this.itt=!0,this.qtt();for(const i of this.O$)i.zX()}else if(this.DX(!0),this.AX(!1),this.ktt(),this.YX()){this.K$=-1,0!==this.Q$&&(this.W$=Math.abs(this.W$)),this.Q$=0,this.J$=1,this.q$=!1,this.stt=!1,this.H$=!0,this.itt=!0,this.Ntt()?this.Ytt(0):this.Ytt(this.QB()),this.qtt();for(const e of this.O$)e.zX()}else{this.itt=!0,this.stt=!1,this.qtt();for(const h of this.O$)h.ost()}this.Xtt()}}BX(){return this.XZ}qtt(){this.att=0;for(const t of this.O$)t.uE()&&(this.att=1)}Xtt(){this.XZ=0;for(const t of this.O$)t.ast(),0===this.XZ&&1===t.BX()&&(this.XZ=1),this.P$||1!==t.ust()||(this.P$||(this.P$=[]),this.k$=this.P$.push(t))}QX(t,s,i){if(this.Dtt()){if(0===t&&0===this.ett)return;this.ett=t,t=i}else{if(0===i&&0===this.ett)return;t=this.ett=i,s=1}const e=this.B$+this.U$,h=t*s*this.W$,r=e+h,n=this.L$.lst;r<0?(this.B$=0,this.U$=-r):n<=r?(this.B$=n,this.U$=this.B$-r):(this.B$=r,this.U$=0);let o=!1,a=!1,u=this.VB(),l=this.HB();u||l?u&&!l?0<this.W$?this.B$>=n&&(this.$tt(0),a=!0):this.B$<=0&&(this.$tt(n),a=!0):!u&&l?0<this.W$?this.B$>=n&&(this.Ytt(n),this.qB(-1*this.ZB()),a=!0,1===this.Q$?this.J$<this.eB()?(this.J$++,this.Q$=0):o=!0:0===this.Q$&&(this.Q$=1)):this.B$<=0&&(this.Ytt(0),this.qB(-1*this.ZB()),a=!0,1===this.Q$?this.J$<this.eB()?(this.J$++,this.Q$=0):o=!0:0===this.Q$&&(this.Q$=1)):u&&l&&(0<this.W$?this.B$>=n&&(this.Ytt(n),this.qB(-1*this.ZB()),a=!0,this.Q$++,S.wrap(this.Q$,0,2)):this.B$<=0&&(this.Ytt(0),this.qB(-1*this.ZB()),a=!0,this.Q$++,S.wrap(this.Q$,0,2))):0<this.W$?this.B$>=n&&(this.J$<this.eB()?(this.J$++,this.$tt(0),a=!0):(this.Ytt(n),o=!0)):this.B$<=0&&(this.J$<this.eB()?(this.J$++,this.$tt(n),a=!0):(this.Ytt(0),o=!0));let c,f=this.R$;if(o){for(c=0;c<f;c++)this.O$[c].cst();this.jB(!0),this.Ftt()}else{const d=this.k$;for(c=0;c<d;c++)this.P$[c].fst();if(1===this.att)for(c=0;c<f;c++){const p=this.O$[c],m=p.dst(),g=this.B$-m,y=e-m;g<0&&0<y?(this.B$=m<0?0:n<=m?n:m,p.Yc(m,!0,!1,a,this.itt,!1)):p.Yc(this.B$,!0,!1,a,this.itt,!1)}else for(c=0;c<f;c++)this.O$[c].Yc(this.B$,!0,!1,a,this.itt,!1);for(c=0;c<d;c++)this.P$[c].pst();this.itt&&(this.itt=!1)}}Ztt(s,i=!1,e=!1,h=!1,r=NaN,t=!1,n=!1){for(const o of this.O$)o.fst();for(const a of this.O$){let t=s;if("number"==typeof r&&!isNaN(r)){const u=this.gN(),l=u-a.dst(),c=r-a.dst();l<0&&0<c&&(t=a.dst(),this.Ytt(t))}a.Yc(t,i,e,h,this.itt,n)}for(const f of this.O$)f.pst();this.itt&&t&&(this.itt=!1)}mst(){const t=this.L$.mtt().gst(),s=S.gtt.dv(this,t);return this.R$=this.O$.push(s),s}lX(){if(!this.PB())for(const t of this.O$)t.yst()}ZX(){for(const t of this.O$)t.ZX()}Mst(){for(const t of this.O$)t.wst()}Sst(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.O$[i];return e?(e.Tst(s),void this.N$.gX(s.QF(),this)):void 0}for(const h of this.O$)if(h.Ttt())if(t){if(h.lU()===t){h.Tst(s),this.N$.gX(s.QF(),this);break}}else if(!h.bst()){h.Tst(s),this.N$.gX(s.QF(),this);break}}}SX(t,s){for(const i of this.O$)if(i.Ttt())if(s){if(s===i.lU()&&t===i.nU())return!0}else if(t===i.nU())return!0;return!1}VX(){return this.O$.some(t=>!t.Ttt()||t.vst())}nst(){return this.O$.some(t=>{if(t.Ttt()){if(!t.vst())return!1;const s=t.QF();return!!s&&s.U8()}return!1})}fU(t){for(const s of this.gK())for(const i of s.xst())if(i.Gst()===t)return i}Ist(t){for(const s of this.O$)if(t===s.nU())return s;return null}Cst(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.gK())for(const h of e._st()){const r=s.every(t=>h.Est(t));if(r)return h}}yX(){const t=[];for(const s of this.gK())t.push(s.QF());return t.filter(t=>t)}YZ(){for(const t of this.gK())t.YZ()}_7(){return{tracksJson:this.Dst(),name:this.mr,playheadTime:this.gN(),playbackRate:this.W$,pingPongState:this.Q$,currentRepeatCount:this.J$,isPlaying:this.V$,isScheduled:this.Y$,initialStateSet:this.H$,finishedTriggers:this.stt,complete:this.q$,released:this.Z$,markedForRemoval:this.X$,completedTick:this.K$,implicitPause:this.$$,isTemplate:this.ttt,tags:this.htt.join(" "),stringTags:this.ntt,tagsChanged:this.ott,firstTick:this.itt}}E7(t){t&&(this.Ast(t.tracksJson),this.mr=t.name,this.B$=t.playheadTime,this.W$=t.playbackRate,this.Q$=t.pingPongState,this.J$=t.currentRepeatCount,this.V$=!!t.isPlaying,this.Y$=!!t.isScheduled,this.H$=!!t.initialStateSet,this.stt=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.q$=!!t.complete,this.Z$=!!t.released,this.X$=!!t.markedForRemoval,this.K$=t.completedTick,this.$$=!!t.implicitPause,this.ttt=!!t.isTemplate,this.htt=t.tags.split(" "),this.ntt=t.stringTags,this.ott=!!t.tagsChanged,this.itt=!!t.firstTick)}Dst(){return this.O$.map(t=>t._7())}Ast(t){this.Mst(),t.forEach((t,s)=>{const i=this.O$[s];i.E7(t)}),this.O$.filter(t=>t.vst())}static Ptt(t){const s=this.XB();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static Ott(t){if(S.je(t))return t.slice(0);if(S.xe(t))return t.split(" ");throw new Error("invalid tags")}Nst(){return this.utt||(this.utt=S.lr(self.iU,this)),this.utt}}}{const jr=self.ks;jr.gtt=class extends jr.nr{constructor(t,s){super(),this.dK=t,this.Lst=s,this.Ost=s.mtt(),this.Rst=NaN,this.Pst=NaN,this.kst=null,this.Fst=null,this.jst=!1,this.eE=0<s.dst(),this.zst=!1,this.Bst=!1,this.Ust=NaN,this.Wst=null,this.Qst=this.Lst.Vst().Jst(),this.Yst=[],this.Hst(),this.qst=0,this.XZ=0,this.Zst=0}static dv(t,s){return jr.lr(jr.gtt,t,s)}cr(){this.Qst=null;for(const t of this.Yst)t.cr();jr.Wn(this.Yst),this.Yst=null,this.dK=null,this.kst=null,this.Fst=null,this.Lst=null,this.Wst=null}Hst(){for(const t of this.Lst.Kst().Xst())this.Yst.push(jr.$st.dv(this,t))}yst(){for(const t of this.Yst)t.yst()}ZX(){for(const t of this.Yst)t.ZX();this.kst=null,this.Fst=null}tit(){return this.dK}iP(){return this.dK.iP()}_st(){return this.Qst||(this.Qst=this.Lst.Vst().Jst()),this.Qst}xst(){return this.Yst}fU(s){for(let t=0;t<this.Yst.length;t++){const i=this.Yst[t];if(i.Gst()===s)return i}}sit(){this.kst||this.nU()}iit(){return!!this.kst&&!this.kst.l6()}vst(){if(!this.Ttt())return!1;const t=this.eit(),s=this.iP().DR(t);return!!s&&!s.l6()}QF(){if(this.Ttt()){const t=this.hit();if(-1!==t)return this.iP().A8(t)}}rit(){return this.dK.gK().indexOf(this)}wst(){this.kst=null,this.Rst=NaN,this.Fst=null,this.Pst=NaN,this.jst=!0}bst(){return!!this.kst}nU(){if(!this.jst){if(!this.kst||!this.iit()){const t=this.eit();this.kst=this.iP().DR(t)}return this.kst}}Tst(t){if(this.jst=!1,this.kst!==t){this.ZX(),this.kst=t,this.Pst=t.QF().LO(),this.Rst=t.hj(),this.Fst=t.RR();for(const s of this.nit()){const i=s.oit,e=s.ait,h=i.uit();switch(h){case"instance-variable":{e.lit();const r=t.QF(),n=r.cit(s.name),o=r.fit(n),a=r.dit(n);o===s.name&&a===s.type&&e.pit(n);break}case"behavior":{const u=s.zz,l=this.QF(),c=t.QF(),f=e.Uz(c);if(u&&f){const d=u.hf();l.mit(d),c.mit(d),e.lit(),e.git(f.fY())}break}}}}}*nit(){for(const t of this.Yst){const s=t.wtt(),i=this.QF(),e={oit:t,ait:s};switch(t.uit()){case"world-instance":e.property=t.Gst();break;case"instance-variable":{const h=s.lit();e.name=i.fit(h),e.type=i.dit(h);break}case"effect":{const r=i.lk(),n=s.yit(r);e.Mit=n;break}case"behavior":{const o=s.Uz(i);e.zz=o;break}case"plugin":e.P4=i.F4()}yield e}}RR(){if(!this.Fst||!this.iit()){const t=this.nU();t&&(this.Fst=t.RR())}return this.Fst}wit(){return this.Lst}eit(){return isNaN(this.Rst)?this.Lst.eit():this.Rst}Sit(t){this.Lst.Sit(t)}Gtt(){return this.Lst.Gtt()}Itt(t){this.Lst.Itt(t)}_K(){return this.Lst._K()}lU(){return this.Lst.lU()}dst(){return this.Lst.dst()}Tit(){return this.Lst.Tit()}bit(t){this.Lst.bit(t)}Ctt(t){this.Lst.Ctt(t)}rU(t){for(const s of this._st())s.rU(t);for(const i of this.xst())i.rU(t)}vit(){return this.Lst.vit()}xit(t){this.Lst.xit(t)}hit(){return isNaN(this.Pst)?this.Lst.hit():this.Pst}Git(t){this.Lst.Git(t)}Iit(t){this.Lst.Iit(t)}Cit(){const t=this.nU();if(t){const s=t.Nz();if(s._it())return t.Nz().Cit()}return this.Lst.Cit()}Eit(t){this.Lst.Eit(t)}Dit(){const t=this.nU();if(t){const s=t.Nz();if(s._it())return t.Nz().Dit()}return this.Lst.Dit()}xx(){return this.Lst.xx()}hf(){return this.Lst.hf()}Ttt(){return 0===this.xx()}Ait(){return 1===this.xx()}Nit(){return 2===this.xx()}Lit(){return this.qst}BX(){return this.XZ}ust(){return this.Zst}uE(){return this.eE}tst(){for(const t of this.Yst)t.tst()}zX(){if(this.sit(),this.iit()||!this.Ttt()){const t=this.tit(),s=t.Ntt(),i=s?0:this.Tit();for(const h of this.Yst)h.zX(i),0===this.qst&&1===h.Lit()&&(this.qst=1),0===this.XZ&&1===h.BX()&&(this.XZ=1);this.Zst=0;const e=this.Yst.some(t=>t.ust());e&&(this.Zst=1),this.Wst=this.Oit(i),this.zst=!1,this.Bst=!1,this.Yc(i),this.Rit(this.Oit(i))}}ost(){if(this.sit(),this.iit()||!this.Ttt()){this.dK.Ntt();const t=this.dK.gN()-this.dst();this.Wst=this.Oit(t);for(const s of this.Yst)s.ost(t)}}cst(){if(!this.tit().YX()&&(this.sit(),this.iit()||!this.Ttt())&&!this.eE){const t=this.dK.gN(),s=this.dst()+this.Tit();s<=t?this.Yc(this.Tit(),!0,!1,!0,!1,!1,!0):t<=0&&this.Yc(0,!0,!1,!0,!1,!1,!0)}}ast(){for(let t=0,s=this.Yst.length;t<s;t++){const i=this.Yst[t];i.ast(),0===this.qst&&1===i.Lit()&&(this.qst=1),0===this.XZ&&1===i.BX()&&(this.XZ=1)}}fst(){const s=this.Yst.length;for(let t=0;t<s;t++)this.Yst[t].fst()}Yc(i,t=!1,e=!1,h=!1,s=!1,r=!1,n=!1){this.kst||this.nU();const o=this.kst&&!this.kst.l6(),a=0===this.Lst.vf;if((o||!a)&&!(r&&a&&this.QF().U8()||(i-=this.dst())<0)){this.Pit(i,t),this.kit(i,t,s);for(let t=0,s=this.Yst.length;t<s;t++)this.Yst[t].Yc(i,e,h,n);this.Fit(i,t),0!==this.qst&&(this.Fst||(this.Fst=this.kst.RR()),this.Fst)&&this.Fst.a5()}}pst(){const s=this.Yst.length;for(let t=0;t<s;t++)this.Yst[t].pst()}Pit(t,s){if(s&&this.eE&&!this.zst){const i=this.tit();if(i.Ntt()){if(t<0)return}else if(t>this.Tit())return;for(const e of this.Yst)e.zX();this.zst=!0}}Fit(t,s){if(s&&this.eE&&!this.Bst){const i=this.tit();if(i.Ntt()){if(t>=this.Tit()){for(const e of this.Yst)e.Yc(this.Tit(),!1,!0);this.Bst=!0}}else if(t<=0){for(const h of this.Yst)h.Yc(0,!1,!0);this.Bst=!0}}}kit(t,s,i){if(!i&&s&&jr.Tq.Timeline){const e=this.tit(),h=this.Wst.SK(),r=this.Wst.gN(),n=h?h.gN():e.QB();if(t<=r||n<=t)if(this.Wst=this.Ost.jit(t,this.Lst),e.Ntt())h&&this.Rit(this.Wst);else{const o=this.Wst.SK();o&&this.Rit(o)}}}Oit(t){const s=this.Ost.zit(t,this.Lst);return s||this.Ost.jit(t,this.Lst)}Rit(t){if(jr.Tq.Timeline){const s=this.tit(),i=s.ytt();jr.Tq.Timeline.wq.PushTriggerTimeline(s),jr.Tq.Timeline.wq.PushTriggerKeyframe(t),i.Nj(jr.Tq.Timeline.wq.OnAnyKeyframeReached),i.Nj(jr.Tq.Timeline.wq.Rit),jr.Tq.Timeline.wq.PopTriggerTimeline(s),jr.Tq.Timeline.wq.PopTriggerKeyframe(t)}}Bit(){const t=this.Lst.Vst(),s=t.Uit();return s}Wit(){const t=this.Lst.Kst(),s=t.Qit(),i=jr.$st.dv(this,s);return this.Yst.push(i),i}Jit(t){const s=this.Lst.Vst();s.Vit(t)}Yit(t){for(const s of this.Yst)s.Yit(t)}Hit(){for(const t of this.Yst)t.Hit()}qit(){if(this.sit(),this.iit()||!this.Ttt())for(const t of this.Yst)t.qit()}Zit(){if(this.sit(),this.iit()||!this.Ttt()){let t=!1;for(const s of this.Yst){const i=s.Zit();!t&&i&&(t=!0)}if(t){const e=this.Bit();e.UB(this.tit().gN()),e.rU("noease"),e.xit(!0),e.Ltt("")}}}YZ(){isNaN(this.Ust)||this.Xit(this.Ust),this.Ust=NaN}_7(){const t=this.nU(),s=t?t.hj():this.eit();return{propertyTracksJson:this.Kit(),lastKeyframeDataItemJson:this.$it(),initialStateOfNestedSet:this.zst,endStateOfNestedSet:this.Bst,instanceUid:s,cleared:this.jst}}E7(t){if(t){this.tet(t.propertyTracksJson),this.iet(t.lastKeyframeDataItemJson),this.Ust=t.instanceUid,this.zst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.zst=t.initialStateOfNestedSet),this.Bst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Bst=t.endStateOfNestedSet),this.jst=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.Yst)0===this.qst&&1===s.Lit()&&(this.qst=1),0===this.XZ&&1===s.BX()&&(this.XZ=1);this.Zst=0,this.Yst.some(t=>t.ust())&&(this.Zst=1)}}$it(){const t=this.Lst.Vst();return t.eet(this.Wst)}Kit(){return this.Yst.map(t=>t._7())}tet(t){t.forEach((t,s)=>{const i=this.Yst[s];i.E7(t)})}Xit(t){if(jr.pe(t)){const s=this.iP().DR(t);if(s){const i=this.tit();i.Sst(this.Lst.lU(),s,this.rit())}}}iet(t){const s=this.Lst.Vst();this.Wst=s.het(t)}}}{const zr=self.ks;zr.$st=class extends zr.nr{constructor(t,s){super(),this.ret=t,this.net=s,this.oet=s.Kst(),this.qst=0,this.XZ=0,this.Zst=0,this.aet=this.wtt(),this.uet=this.net.cet().let(),this.fet=null,this.det=null}static dv(t,s){return zr.lr(zr.$st,t,s)}cr(){this.ret=null,this.aet&&(this.aet.cr(),this.aet=null),this.uet=null,this.net=null,this.oet=null}Lit(){return this.qst}BX(){return this.XZ}ust(){return this.Zst}pet(){return!!this.det}met(t){this.det=t}yet(){return this.det}Met(){return this.ret}wet(){return this.net}Kst(){return this.oet}tit(){return this.ret.tit()}iP(){return this.ret.iP()}nU(){return this.ret.nU()}wtt(){if(!this.aet){let t=this.net.uit(),s;switch(t){case"behavior":s=new zr.$st.Tet(this);break;case"effect":s=new zr.$st.bet(this),this.XZ=1;break;case"instance-variable":s=new zr.$st.vet(this);break;case"plugin":s=new zr.$st.xet(this),this.XZ=1;break;case"world-instance":s=new zr.$st.Get(this),this.XZ=1,this.qst=1;break;case"value":s=new zr.$st.Iet(this);break;case"audio":s=new zr.$st.Cet(this)}this.aet=s}return this.aet}uit(){return this.net.uit()}_et(t){this.net._et(t)}Eet(){return this.net.Det()}Aet(t){this.net.Net(t)}cU(){return this.wtt().Let()}Gst(){return this.net.Oet()}Ret(t){this.net.Pet(t)}ket(){return this.net.xx()}Fet(t){this.net.jet(t)}zet(){return this.Kst().Bet(this.net).xx()}Uet(){return this.net.Uet()}Wet(t){this.net.Wet(t)}Qet(){return this.net.Qet()}Jet(t){this.net.Jet(t)}vit(){return this.net.vit()}xit(t){this.net.xit(t)}Gtt(){return this.net.Gtt()}Itt(t){this.net.Itt(t)}_K(){return this.net._K()}Ctt(t){this.net.Ctt(t)}rU(t){for(const s of this.Vet())s.rU(t)}Yet(){return this.net.Yet()}Vet(){return this.uet||(this.uet=this.net.cet().let()),this.uet}wK(){return this.net.cet().wK()}Het(t){return this.oet.Het(t,this.net)}qet(t){return this.oet.qet(t,this.net)}Zet(t){let s=this.oet.Het(t,this.net),i;return i=s?this.oet.Xet(t,this.net):(s=this.oet.qet(t,this.net),this.oet.Ket(t,this.net)),{start:s,end:i}}*$et(){for(const t of this.Vet())yield t.PK()}*tht(){for(const t of this.Vet())yield t.gN()}yst(){this.wtt().yst()}ZX(){this.wtt().ZX()}sht(){return this.wtt().sht()}tst(){this.wtt().tst()}zX(t){this.wtt().zX(),this.fet=this.iht(t),this.ast()}ost(t){this.wtt().ost(),this.fet=this.iht(t)}ast(){const t=this.Met();if(this.Zst=0,t.Ttt()){const s=this.tit(),i=t.nU(),e=this.wtt(),h=this.Gst(),r=e.eht();if(r){const n=s.Mtt(i,e,h,this);n&&n.length&&(this.Zst=1)}else this.Zst=0}}iht(t){const s=this.tit(),i=this.oet.Het(t,this.net);return i||(s.Ntt()?this.oet.qet(t,this.net):this.oet.Ket(t,this.net))}fst(){this.aet.fst()}Yc(t,s=!1,i=!1,e=!1){let h,r,n=!1;if(s)h=this.oet.qet(t,this.net);else{if(this.fet){const o=this.tit(),a=this.fet.SK(),u=this.fet.gN(),l=a?a.gN():o.QB();(t<=u||l<=t)&&(this.fet=this.oet.qet(t,this.net),n=!0)}else this.fet=this.oet.qet(t,this.net),n=!0;h=this.fet}h&&(r=h.SK()),this.aet.Yc(t,h,r,s,i,e,n)}hht(t){if(this.fet){const e=this.tit(),h=this.fet.SK(),r=this.fet.gN(),n=h?h.gN():e.QB();(t<=r||n<=t)&&(this.fet=this.oet.qet(t,this.net))}else this.fet=this.oet.qet(t,this.net);const s=this.fet,i=s.SK();return this.aet.hht(t,s,i)}rht(t,s,i){return this.aet.hht(t,s,i)}pst(){this.aet.pst()}static nht(t,s){const i=s.wet(),e=s.oet;return e.qet(t,i)}static oht(t,s){const i=s.wet(),e=s.oet;return e.Ket(t,i)}aht(){const t=this.net.cet(),s=t.uht();return this.fet=null,s}Yit(t){this.fet=null;const s=this.net.cet();s.lht(t)}Hit(){this.wtt().Hit()}qit(){const t=this.wtt().qit();if(t){const s=this.oet.Bet(this.net),i=this.wtt().sht();s.cht(i)}}Zit(){const t=this.wtt().Zit();return t&&this.fht(),this.wtt().dht(),t}fht(){const t=this.tit().gN(),s=this.wtt(),i=zr.$st.nht(t,this),e=this.aht();e.jet(i.xx()),e.UB(t),e.rU(i.pht()),e.xit(!0),e.mht(s.ght()),e.cht(s.sht())}_7(){return{sourceAdapterJson:this.wtt()._7()}}E7(t){t&&this.wtt().E7(t.sourceAdapterJson)}}}{const Br=self.ks,Ur=Br.$st;Ur.Get=class{constructor(t){this.yht=t,this.Mht=null,this.wht()}cr(){this.Mht&&(this.Mht.cr(),this.Mht=null),this.yht=null}eht(){return this.Mht.eht()}fU(){return this.yht}yst(){this.Mht&&this.Mht.yst()}ZX(){this.Mht&&this.Mht.ZX()}wht(){return this.Mht||(this.Mht=this.Sht()),this.Mht}lit(){}LO(){return this.lit()}Tht(){}tst(){this.wht().tst()}zX(){this.wht().zX()}ost(){this.wht().ost()}fst(){this.Mht.bht()}Yc(t,s,i,e,h,r,n){let o=this.yht.zet(),a;switch(o){case"numeric":a=Ur.vht.Yc(t,s,i,this.yht);break;case"angle":a=Ur.xht.Yc(t,s,i,this.yht);break;case"boolean":a=Ur.Ght.Yc(t,s,i,this.yht);break;case"color":a=Ur.Iht.Yc(t,s,i,this.yht);break;case"text":a=Ur.Cht.Yc(t,s,i,this.yht)}this.Mht._ht(t,a,s,i,e,h,r,n)}hht(t,s,i){switch(this.yht.zet()){case"numeric":return Ur.vht.Yc(t,s,i,this.yht);case"angle":return Ur.xht.Yc(t,s,i,this.yht);case"boolean":return Ur.Ght.Yc(t,s,i,this.yht);case"color":return Ur.Iht.Yc(t,s,i,this.yht);case"text":return Ur.Cht.Yc(t,s,i,this.yht)}}pst(){this.Mht.Eht()}Hit(){this.wht().Dht()}dht(){this.wht().dht()}sht(){return this.wht().sht()}qit(){return this.wht().qit()}Zit(){return this.wht().Zit()}ght(){const t=this.yht,s=t.Met(),i=s.tit().gN(),e=Ur.nht(i,t),h=e.SK(),r=t.zet();switch(r){case"numeric":return Ur.vht.Yc(i,e,h,t);case"angle":return Ur.xht.Yc(i,e,h,t);case"boolean":return Ur.Ght.Yc(i,e,h,t);case"color":return Ur.Iht.Yc(i,e,h,t);case"text":return Ur.Cht.Yc(i,e,h,t)}}Sht(){const t=this.yht,s=t.Yet()?t.zet():"";switch(s){case"combo":case"boolean":case"text":case"string":return new Ur.Nht.Aht(this);case"numeric":case"number":case"angle":return new("combo"===this.yht.ket()?Ur.Nht.Aht:Ur.Nht.Lht)(this);case"color":case"offsetColor":return new Ur.Nht.Oht(this);default:return new Ur.Nht.Lht(this)}}_7(){return{propertyAdapterJson:this.wht()._7()}}E7(t){t&&this.wht().E7(t.propertyAdapterJson)}}}{const Wr=self.ks;class Qr extends Wr.$st.Get{constructor(t){super(t),this.Rht=NaN}lit(){return this.yht.wet().Det()[0]}LO(){return this.Rht||super.LO()}Tht(){return this.yht.Met().nU()}pit(t){const s=this.yht.wet().Det()[0];s!==t&&(this.Rht=t)}Yc(t,s,i,e,h,r,n){this.wht().Pht(s.Let())&&super.Yc(t,s,i,e,h,r,n)}hht(t,s,i){if(this.wht().Pht(s.Let()))return super.hht(t,s,i)}_7(){return Object.assign(super._7(),{index:this.Rht})}E7(t){t&&(super.E7(t),this.Rht=t.index)}}Wr.$st.vet=Qr}{const Jr=self.ks;class Vr extends Jr.$st.Get{constructor(t){super(t),this.AV=NaN}lit(){const t=this.yht.wet();return t.Det()[1]}Tht(){const t=this.yht.wet(),s=this.yht.Met(),i=this.AV||t.Det()[0],e=s.nU(),h=e.kht(i),r=e.Fht()[h];return r.Nz()}Uz(t){const s=this.yht.wet(),i=s.Det()[2];return t.jht(i)}git(t){const s=this.yht.wet();s.Det()[0]!==t&&(this.AV=t)}Yc(t,s,i,e,h,r,n){const o=this.yht.Met(),a=o.nU();this.Uz(a.QF())&&super.Yc(t,s,i,e,h,r,n)}hht(t,s,i){const e=this.yht.Met(),h=e.nU();if(this.Uz(h.QF()))return super.hht(t,s,i)}_7(){return Object.assign(super._7(),{sid:this.AV})}E7(t){t&&(super.E7(t),this.AV=t.sid)}}Jr.$st.Tet=Vr}{const Yr=self.ks;class Hr extends Yr.$st.Get{constructor(t){super(t)}lit(){return this.yht.wet().Det()[1]}Tht(){const t=this.yht,s=t.Met(),i=s.RR(),e=i.n5(),h=e.lk(),r=this.yit(h),n=r.LO();return e.qz(n)?e.zht(n):null}yit(t){const s=this.yht,i=s.wet().Det()[0];return t.Bht(i)}Yc(t,s,i,e,h,r,n){this.Uht()&&super.Yc(t,s,i,e,h,r,n)}hht(t,s,i){if(this.Uht())return super.hht(t,s,i)}Uht(){const t=this.yht,s=t.Met(),i=s.RR(),e=i.n5(),h=e.lk(),r=this.yit(h);if(r){const n=r.LO();return e.qz(n)}}}Yr.$st.bet=Hr}{const qr=self.ks;class Zr extends qr.$st.Get{constructor(t){super(t)}lit(){return this.yht.wet().Det()[0]}Tht(){return this.yht.Met().nU().Nz()}Yc(t,s,i,e,h,r,n){const o=this.yht.Met(),a=o.QF().F4(),u=o.nU().QF().F4();a===u&&super.Yc(t,s,i,e,h,r,n)}hht(t,s,i){const e=this.yht.Met(),h=e.QF().F4(),r=e.nU().QF().F4();if(h===r)return super.hht(t,s,i)}Wht(){const t=this.yht.Met(),s=t.QF().F4();if(qr.Tq.Qht&&s instanceof qr.Tq.Qht&&("initial-frame"===this.yht.Gst()||"initial-animation"===this.yht.Gst()))switch(this.yht._K()){case"relative":case"absolute":return null}}}qr.$st.xet=Zr}{const Xr=self.ks;class Kr extends Xr.$st.Get{constructor(t){super(t),this.Jht=0,this.Vht=!1}eht(){return!1}zX(){let t=this.yht.Kst(),s=this.yht.wet();s=t.Bet(s),this.Jht=s.PK()}ost(){}Let(){return this.Vht||this.yht.Yc(0),this.Jht}Yc(t,s,i,e,h,r,n){this.Jht=Xr.$st.vht.Yc(t,s,i,this.yht),this.Vht=!0}Hit(){}dht(){}sht(){return this.Jht}qit(){return!1}Zit(){return!1}_7(){return{value:this.Jht,init:this.Vht}}E7(t){t&&(this.Jht=t.value,this.Vht=!t.hasOwnProperty("init")||t.init)}}Xr.$st.Iet=Kr}{const $r=self.ks;class tn extends $r.$st.Get{constructor(t){super(t),this.Yht=!1,this.Hht=null,this.qht=null,this.Zht=null,this.dK=this.yht.tit(),this.ret=this.yht.Met(),this.Xht=this.yht.Eet(),this.Kht=this.Xht[0],this.$ht=this.Xht[1],this.Xht[3]?this.trt=this.Xht[3]:this.trt=Math.random().toString(36).slice(2),this.srt=NaN,this.irt=NaN,this.ert=NaN,this.hrt=null,this.rrt()}cr(){super.cr(),this.Hht=null,this.qht=null,this.Zht=null,this.dK=null,this.ret=null,this.Xht=null,this.Kht=null,this.hrt=null}rrt(){if(self.ks.Tq.Audio){const t=this.yht.iP(),s=t.nrt(self.ks.Tq.Audio);s&&(this.Hht=s.O4().Nz()),this.qht=self.ks.Tq.Audio.ort,this.Zht=self.ks.Tq.Audio.art}}urt(){if(!this.hrt){const t=this.yht.Met(),s=t.fU("audioSource");s&&(this.hrt=s.wtt())}}lrt(){const t=this.yht.Met(),s=t.fU("volume");return(s?s.wtt():this).irt}yst(){super.yst(),this.Yht=!1,this.Hht&&(this.Zht&&(this.srt=this.Zht.crt.call(this.Hht,this.trt),this.irt=this.Zht.frt.call(this.Hht,this.trt)),this.qht)&&this.qht.jB.call(this.Hht,this.trt)}drt(){return this.trt}prt(){return this.ert}mrt(t){this.ert=t}zX(){super.zX(),this.srt=NaN,this.Yht=!1}ost(){super.ost();const t=this.yht.tit(),s=t.gN();switch(this.srt=s-this.$ht,this.yht.Gst()){case"audioSource":break;case"volume":this.irt=this.yht.hht(s)}this.Yht=!1}Yc(t,s,i,e,h,r,n){if(this.Hht)switch(this.yht.Gst()){case"audioSource":{if(!this.dK.Ntt())return;if(e)return void(this.qht&&this.qht.jB.call(this.Hht,this.trt));if(t<this.$ht)return void(this.Yht=!1);const o=this.Zht.grt.call(this.Hht,this.trt),a=this.dK.ZB();if(a!==o&&this.qht.qB.call(this.Hht,this.trt,a),this.Yht)return;if(!this.yht.tit().IsPlaying())return;if(this.Yht=!0,isNaN(this.srt)){const u=self.performance.now(),l=t-this.$ht,c=this.Hht.yrt();if("suspended"===c)return void(this.Yht=!1);const f=self.performance.now(),d=(f-u)/1e3,p=l+d;if(this.qht){let t=this.prt();isNaN(t)?(this.mrt(0),t=0):this.mrt(t),this.qht.Mrt.call(this.Hht,this.Kht,t,this.trt,p)}}else{const m=this.srt,g=(this.srt=NaN,this.lrt()),y=(this.irt=NaN,this.Hht.yrt());if("suspended"===y)return void(this.Yht=!1);this.qht&&(this.mrt(g),this.qht.Mrt.call(this.Hht,this.Kht,g,this.trt,m))}break}case"volume":this.urt(),super.Yc(t,s,i,e,h,r,n)}}hht(t,s,i){if(this.Hht)switch(this.yht.Gst()){case"audioSource":return;case"volume":return this.urt(),super.hht(t,s,i)}}wrt(t,s){return this.hrt?this.hrt.prt():0}Srt(t,s,i,e){this.hrt&&this.hrt.mrt(this.wrt()+s),this.qht&&this.hrt&&this.qht.mrt.call(this.Hht,this.hrt.drt(),this.hrt.prt())}Trt(t,s,i){this.hrt&&this.hrt.mrt(s),this.qht&&this.hrt&&this.qht.mrt.call(this.Hht,this.hrt.drt(),this.hrt.prt())}brt(){return!0}_7(){return{audioPlaybackStarted:this.Yht,audioTag:this.trt,pauseTime:this.srt,pauseVolume:this.irt,volume:this.ert}}E7(t){t&&(this.Yht=t.audioPlaybackStarted,this.trt=t.audioTag,this.srt=t.pauseTime,this.irt=t.pauseVolume,this.ert=t.volume,this.rrt())}}$r.$st.Cet=tn}{const sn=self.ks;sn.$st.Nht=class{constructor(t){this.aet=t,this.yht=t.fU(),this.Fst=this.yht.Met().RR(),this.vrt=this.yht.Gst(),this.xrt=!1,this.Grt=null,this.Irt=null}cr(){this.aet=null,this.yht=null,this.Fst=null,this.Grt=null,this.Irt=null}eht(){return!1}yst(){}ZX(){this.Fst=null,this.Grt=null,this.Irt=null}wtt(){return this.aet}fU(){return this.yht}RR(){return this.Fst||(this.Fst=this.yht.Met().RR()),this.Fst}Crt(t){this.xrt=!!t}_rt(){return this.xrt}tst(){}zX(){}ost(){}Dht(){this.Grt=this.sht()}dht(){this.Grt=null}sht(){}qit(){}Zit(){}Pht(t){const s=typeof this.Ert(),i=typeof t;return s==i}bht(){}_ht(t,s,i,e,h,r,n,o){}Eht(){}Drt(){const t=this.Art(()=>{const t=this.yht.wet(),s=this.yht.Kst();return s.Bet(t)},()=>{const t=this.yht.wet(),s=this.yht.Kst();return s.Nrt(t)});return t.Lrt()}Ort(){const t=this.yht.tit(),e=t.gN()-this.yht.Met().dst(),s=this.Art(()=>{const t=this.yht.wet(),s=this.yht.Kst();return s.qet(e,t)},()=>{const t=this.yht.wet(),s=this.yht.Kst(),i=s.Ket(e,t);return i||s.Nrt(t)});return s.Lrt()}Art(t,s){const i=this.yht.tit();return(i.Ntt()?t:s)()}Rrt(t,s){const i=this.yht._K();return("relative"===i?t:s)()}Prt(t,s){return(this._rt()?(this.Crt(!1),t):s)()}krt(t){}Frt(){return this.aet.LO()}jrt(){return this.Irt||(this.Irt=this.aet.Tht()),this.Irt}zrt(t,s,i,e,h,r){const n=this.yht.uit();switch(n){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return h();case"audio":return r()}}_7(){return{firstAbsoluteUpdate:this.xrt,saveState:this.Grt}}E7(t){t&&(this.xrt=t.firstAbsoluteUpdate,this.Grt=t.saveState)}Brt(t,s=!1){const i=[];for(const e of t){const h=e.Met().dst();for(const r of e.Vet())(s&&0===r.gN()||!s)&&i.push({time:h+r.gN(),value:r.Lrt()})}return i.sort((t,s)=>t.time-s.time)}Urt(t,s,i){return this.Wrt(s,i)}Wrt(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const en=self.ks,hn=new Map,rn=[0,0,0];class nn extends en.$st.Nht{constructor(t){super(t)}tst(){}zX(){}ost(){}sht(){const t=this.yht.uit(),s=this.jrt(),i=this.Frt();switch(t){case"behavior":return this.Qrt(s.Jrt(i));case"effect":return this.Qrt(s[i]);case"plugin":return this.Qrt(s.Jrt(i));case"world-instance":return this.Qrt(this.Ert())}}qit(){const t=this.Drt();return!this.Vrt(t,this.Ert())}Zit(){return!en.ye(this.Grt)&&!this.Vrt(this.Grt,this.Ert())}Vrt(t,s){return t=this.Yrt(t),s=this.Yrt(s),t.Ma(s)}Drt(){const t=super.Drt();return this.Yrt(t)}Ort(){const t=super.Ort();return this.Yrt(t)}krt(t){}Qrt(t){return(en.$e(t,en.Ho)?t.toArray():t).slice(0,3)}Yrt(t){return en.$e(t,en.Ho)?t:new en.Ho(t[0],t[1],t[2],1)}Pht(t){return!0}eht(){return!0}bht(){const t=this.yht.tit(),s=this.yht.nU(),i=this.yht.wtt(),e=t.Mtt(s,i,this.vrt,this.yht);if(e&&1<e.length){hn.has(s)||hn.set(s,new Map);const h=hn.get(s),r=this.yht.uit(),n=(h.has(r)||h.set(r,new Map),h.get(r));n.has(this.vrt)||n.set(this.vrt,{Hrt:!1,color:new en.Ho(0,0,0,1)})}}qrt(t,s,i){const e=hn.get(t).get(s).get(i);return e.Hrt=!0,e.color}_ht(t,s,i,e,h,r,n,o){const a=this.yht.tit(),u=this.yht.Met(),l=this.yht.nU(),c=this.yht.wtt(),f=this.yht.uit(),d=this.vrt,p=a.Mtt(l,c,d,this.yht);if(p&&1<p.length){const m=this.Brt(p,!0),g=this.Urt(a,a.gN(),m);if(g){const y=u.dst(),M=g.time-y;if(0==M)this.qrt(l,f,this.vrt).ia(s[0],s[1],s[2]);else if(!(M<0)){const w=s[0],S=s[1],T=s[2],b=this.yht.Yc(M,!1,!0),v=en.Ho.Za(w,b[0]),x=en.Ho.Za(S,b[1]),G=en.Ho.Za(T,b[2]);this.qrt(l,f,this.vrt).ia(v,x,G)}}}else this.Zrt(s[0],s[1],s[2])}Eht(){const t=this.yht.nU();if(hn.has(t)){const s=hn.get(t),i=this.yht.uit();if(s.has(i)){const e=s.get(i);if(e.has(this.vrt)){const h=e.get(this.vrt),r=h.Hrt,n=h.color;r&&this.Zrt(n.la(),n.ca(),n.fa()),0===e.size&&s.delete(i),0===s.size&&hn.delete(t)}}}}Ert(){const t=this.yht.uit(),s=this.jrt(),i=this.Frt();switch(t){case"behavior":return this.Yrt(s.Jrt(i));case"effect":return s[i].clone();case"plugin":return this.Yrt(s.Jrt(i));case"world-instance":return this.RR().b5().clone()}}Zrt(t,s,i){const e=this.yht.uit(),h=this.jrt(),r=this.Frt();switch(e){case"behavior":rn[0]=t,rn[1]=s,rn[2]=i,h.Xrt(r,rn);break;case"effect":h[r].ta(t,s,i);break;case"plugin":rn[0]=t,rn[1]=s,rn[2]=i,h.Xrt(r,rn);break;case"world-instance":this.RR().Krt(t,s,i)}}_7(){}E7(t){}}en.$st.Nht.Oht=nn}{const on=self.ks,an=on.$st;class un extends on.$st.Nht{constructor(t){super(t)}tst(){}zX(){}ost(){}sht(){return this.Ert()}qit(){const t=this.Drt();return t!==this.sht()}Zit(){return!on.ye(this.Grt)&&this.Grt!==this.sht()}eht(){return!1}_ht(t,s,i,e,h,r,n,o){const a=this.yht,u=a.Met(),l=a.uit(),c=a.tit(),f=u.nU(),d=a.wtt(),p=this.vrt,m=c.Mtt(f,d,p,a);if(m&&1<m.length){const y=this.Brt(m),M=t+u.dst(),w=this.Urt(c,M,y);w&&(s=w.value)}const g=a.zet();switch(g){case"numeric":if(an.vht.$rt(this.Frt(),this.jrt(),s,l))break;return;case"angle":if(an.xht.$rt(this.Frt(),this.jrt(),s,l))break;return;case"boolean":if(an.Ght.$rt(this.Frt(),this.jrt(),s,l))break;return;case"color":if(an.Iht.$rt(this.Frt(),this.jrt(),s,l))break;return;case"text":if(!an.Cht.$rt(this.Frt(),this.jrt(),s,l))return}this.Zrt(s)}Ert(){const t=this.yht.uit(),s=this.jrt(),i=this.Frt();switch(t){case"behavior":return s.Jrt(i);case"effect":return s[i];case"instance-variable":return s.tnt(i);case"plugin":return s.Jrt(i)}}Zrt(t){const s=this.yht.uit(),i=this.jrt(),e=this.Frt();switch(s){case"behavior":i.Xrt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.snt(e,t);break;case"plugin":i.Xrt(e,t)}}}on.$st.Nht.Aht=un}{const ln=self.ks,cn=(ln.$st.Nht,new Map),fn=(t,s,i,e,h,r=!1,n=null,o=null)=>{cn.set(t,{int:s,ent:i,hnt:e,round:h,rnt:r,init:n,reset:o})};fn("offsetX",(t,s,i,e)=>{"relative"===e.yht._K()?t.nnt(s,i.tit().Ett()):t.nnt(s)},(t,s)=>t.IT(s),t=>t.GT(),!0),fn("offsetY",(t,s,i,e)=>{"relative"===e.yht._K()?t.ont(s,i.tit().Ett()):t.ont(s)},(t,s)=>t.ET(s),t=>t._T(),!0),fn("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.yht._K(),u=1===i.ant.xx();if((h||u)&&s.q5()&&s.hz()){if(isNaN(i.unt)){let e=[],t=s.P5();for(;t;)e.push(t),t=t.P5();e.reverse();let a=(t,s)=>s.tit().Ist(t.nU()),h=(t,s)=>{const i=a(t,s);if(i)return i.Cit();const e=t.nU().Nz();return e._it()?e.Cit():t.cnt().lnt()},r=(t,s,i,e=0)=>{const h=a(t,s);if(!h)return e;const r=h.fU(i);if(!r)return e;const n=r.wet().cet();if(!n)return e;const o=n.Nrt();return o?o.Let():e},n;if(u){let t=e[e.length-1];n=t.ym()}else{let s=e[0],t=s.cnt().lnt(),i=s.cnt().fnt();n=t*i,n=(n+=r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const l=(s=e[t]).cnt().fnt();n=(n=(n*=l)+r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX")}}i.unt=0===n?Number.EPSILON:n}e||s.Zm(t/i.unt,!0)}else s.Zm(t)}},(t,s)=>t.Gm(s),t=>t.ym(),!0),fn("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.yht._K(),a=1===i.ant.xx();if((h||a)&&s.q5()&&s.nz()){if(isNaN(i.unt)){let e=[],t=s.P5();for(;t;)e.push(t),t=t.P5();e.reverse();let h=(t,s)=>{e=t;const i=s.tit().Ist(e.nU());var e;if(i)return i.Dit();const h=t.nU().Nz();return h._it()?h.Dit():t.cnt().dnt()},r=(t,s,i,e=0)=>{const h=s.tit().Ist(t.nU());if(!h)return e;const r=h.fU(i);if(!r)return e;const n=r.wet().cet();if(!n)return e;const o=n.Nrt();return o?o.Let():e},n;if(a){let t=e[e.length-1];n=t._m()}else{let s=e[0],t=s.cnt().dnt(),i=s.cnt().pnt();n=t*i,n=(n+=r(s,o,"offsetHeight"))+h(s,o)*r(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const u=(s=e[t]).cnt().pnt();n=(n=(n*=u)+r(s,o))+h(s,o)*r(s,o,"offsetScaleY")}}i.unt=0===n?Number.EPSILON:n}e||s.mnt(t/i.unt,!0)}else s.mnt(t)}},(t,s)=>t.Mm(s),t=>t._m(),!0),fn("offsetAngle",(t,s,i,e,h)=>{t.gnt(s)},(t,s)=>t.gk(s),t=>t.yk(),!1,!0),fn("offsetOpacity",(t,s,i,e,h)=>{const r=e.ynt||1,n=(s/=r,t.BD()),o=n+s;if(0===e.Mnt)1<o?e.Mnt+=o-1:o<0&&(e.Mnt+=o),t.wnt(s);else{const a=t.BD()+s;0<s&&0<e.Mnt?1<a&&(e.Mnt+=a-1):0<s&&e.Mnt<0?(e.Mnt+=s,0<e.Mnt&&(t.wnt(e.Mnt),e.Mnt=0)):s<0&&0<e.Mnt?(e.Mnt+=s,e.Mnt<0&&(t.wnt(e.Mnt),e.Mnt=0)):s<0&&e.Mnt<0&&a<0&&(e.Mnt+=a)}},(t,s)=>{t.WD(s)},t=>t.BD(),!1,!0,(r,h,n)=>{switch(r.Mnt=0,r.yht._K()){case"relative":{r.yht.Kst();let t=r.yht.wet(),s=t.cet(),i=s.let(),e=r.RR().BD(),h=e;for(const o of i){const a=o.gN(),u=r.yht.hht(a);h=e+u,h=ln.Sr(h,0,1)}r.Snt=e-h,r.Snt=Math.round(100*(r.Snt+Number.EPSILON))/100,h=e;for(let t=i.length-1;0<=t;t--){const l=i[t].gN(),c=r.yht.hht(l);h-=c,h=ln.Sr(h,0,1)}r.Tnt=h,r.Tnt=Math.round(100*(r.Tnt+Number.EPSILON))/100;break}}const t="relative"===r.yht._K(),s=1===r.ant.xx();if((t||s)&&h.q5()&&h.fz()){let s=[],t=h.P5();for(;t;)s.push(t),t=t.P5();s.reverse();let i=(t,s,i)=>{const e=s.tit().Ist(t.nU());if(!e)return 0;const h=e.fU(i);if(!h)return 0;const r=h.wet().cet();if(!r)return 0;const n=r.Nrt();return n?n.Let():0},e=s[0].cnt().bnt();e+=i(s[0],n,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],n,"offsetOpacity");r.ynt=0===e?1:e}},i=>{switch(i.yht._K()){case"relative":{i.Mnt=0;let t=i.RR(),s=t.BD();s=Math.round(100*(s+Number.EPSILON))/100,i.yht.tit().Ntt()?(t.WD(s+i.Snt),i.fG=0):(t.WD(s-i.Tnt),i.fG=i.wtt().ght());break}}}),fn("offsetOriginX",(t,s)=>t.vnt(s),(t,s)=>t.xnt(s),t=>t.wB(),!1),fn("offsetOriginY",(t,s)=>t.Gnt(s),(t,s)=>t.Int(s),t=>t.TB(),!1),fn("offsetZElevation",(t,s)=>t.Cnt(s),(t,s)=>t.AT(s),t=>t.DT(),!0),fn("offsetScaleX",(t,s,i,e)=>{if(0!==s){const h=t.ym()<0?-1:1;if("relative"===e.yht._K()&&t.q5()&&t.hz()){const r=i.Cit()*h*s;isNaN(e.unt)&&cn.get("offsetWidth").int(t,1,i,e,!0),t.Zm(r/e.unt,!0)}else t.Zm(i.Cit()*h*s)}},(t,s,i)=>{t.Gm(i.Cit()*s)},(e,h)=>{const r=e.ym()<0?-1:1;if(e.hz()){let t=e.P5(),s=h.tit().Ist(t.nU()),i=NaN;if(s)i=t.ym()/s.Cit();else{const n=t.nU().Nz();i=n._it()?t.ym()/n.Cit():1}return e.ym()*r/(h.Cit()*i)}return e.ym()*r/h.Cit()},!1),fn("offsetScaleY",(t,s,i,e)=>{if(0!==s){const h=t._m()<0?-1:1;if("relative"===e.yht._K()&&t.q5()&&t.nz()){const r=i.Dit()*h*s;isNaN(e.unt)&&cn.get("offsetHeight").int(t,1,i,e,!0),t.mnt(r/e.unt,!0)}else t.mnt(i.Dit()*h*s)}},(t,s,i)=>{t.Mm(i.Dit()*s)},(e,h)=>{const r=e._m()<0?-1:1;if(e.nz()){let t=e.P5(),s=h.tit().Ist(t.nU()),i=NaN;if(s)i=t._m()/s.Dit();else{const n=t.nU().Nz();i=n._it()?t._m()/n.Dit():1}return e._m()*r/(h.Dit()*i)}return e._m()*r/h.Dit()},!1);class dn extends ln.$st.Nht{constructor(t){super(t),this.fG=0,this.Mnt=0,this.Snt=0,this.Tnt=0,this.ynt=NaN,this.unt=NaN,this._nt=void 0,this.Ent=void 0,this.Dnt=null,this.Ant=null,this.Nnt=null,this.Lnt=null,this.Ont=null,this.Rnt=null,this.Pnt=null,this.knt=null,this.Fnt=!1,this.jnt=!1,ln.$e(this.yht.tit(),ln.znt)?this.ant=new ln.$st.Nht.Bnt(this):this.ant=new ln.$st.Nht.Unt(this);const s=this.yht.Gst();switch(this.yht.uit()){case"world-instance":{const i=cn.get(s);this.Dnt=i.hnt,this.Ant=i.int,this.Nnt=i.ent,this.Fnt=i.round,this.jnt=i.rnt,this.Ont=i.init,this.Lnt=i.reset;break}case"audio":this.Rnt=t.wrt,this.Pnt=t.Srt,this.knt=t.Trt,this.Fnt=!!t.brt(),this.jnt=!1}}cr(){this.ant=null,this.Dnt=null,this.Ant=null,this.Nnt=null,this.Lnt=null,this.Ont=null,this.Rnt=null,this.Pnt=null,this.knt=null,super.cr()}eht(){return this.ant.eht()}Wnt(){return this.fG}Qnt(t){this.fG=t}tst(){this.Lnt&&this.Lnt(this)}zX(){const t=this.ant.zX();if("number"==typeof t&&(this.fG=t),this.Ont){const s=this.RR(),i=this.yht.Met();this.Ont(this,s,i)}}ost(){const t=this.ant.ost();"number"==typeof t&&(this.fG=t)}sht(){return this.Ert()}qit(){const t=this.Drt();return t!==this.sht()}Zit(){return!ln.ye(this.Grt)&&this.Grt!==this.sht()}bht(){this.ant.bht()}_ht(t,s,i,e,h,r,n,o){return this.ant._ht(t,s,i,e,h,r,n,o)}Eht(){this.ant.Eht()}Ert(){const t=this.jrt(),s=this.Frt(),i=this.RR(),e=this.yht.Met(),h=this.yht.uit();switch(h){case"behavior":return t.Jrt(s);case"effect":return t[s];case"instance-variable":return t.tnt(s);case"plugin":return t.Jrt(s);case"world-instance":return this.Dnt(i,e);case"audio":return this.Rnt.call(this.wtt(),i,e)}}Zrt(t,s,i){const e=this.jrt(),h=this.Frt(),r=this.RR(),n=this.yht.Met(),o=this.yht.uit();switch(o){case"behavior":e.Jnt(h,t);break;case"effect":e[h]+=t;break;case"instance-variable":e.Vnt(h,t);break;case"plugin":e.Jnt(h,t,this.wtt().Wht());break;case"world-instance":this.Ant(r,t,n,this);break;case"audio":this.Pnt.call(this.wtt(),r,t,n,this)}}Ynt(t,s,i){let e=this.yht.Gtt();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const u=this.yht.tit(),l=u.gN(),c=this.yht.Het(l);if(!c)return}const h=this.jrt(),r=this.Frt(),n=this.RR(),o=this.yht.Met(),a=this.yht.uit();switch(a){case"behavior":h.Xrt(r,t);break;case"effect":h[r]=t;break;case"instance-variable":h.snt(r,t);break;case"plugin":h.Xrt(r,t,this.wtt().Wht());break;case"world-instance":this.Nnt(n,t,o);break;case"audio":this.knt.call(this.wtt(),n,t,o)}}}Hnt(t,s,i,e,h,r,n,o){this.ant.Hnt(t,s,i,e,h,r,n,o)}qnt(t,s,i,e,h){let r=(t="angle"===this.yht.ket()?ln.vr(t):t).toString(),n=r.split(".")[1]||"",o=n.length,a=this.Ert(),u;switch(u=0===o?this.Fnt?Math.round(a):this.jnt?"angle"===this.yht.ket()?ln.br(Math.round(ln.vr(a))):Number(ln.toFixed(a,2)):a:this.Fnt?Number(ln.toFixed(a,o)):(this.jnt,a),this.Zrt(u-a,s,i),this.yht.Gst()){case"offsetWidth":case"offsetScaleX":{const l=this.RR(),c=l.ym(),f=Number(ln.toFixed(c,2));l.Zm(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.RR(),p=d._m(),m=Number(ln.toFixed(p,2));d.mnt(m-p);break}}}_7(){return Object.assign(super._7(),{v:this.fG,a:this.Mnt,fod:this.Snt,bod:this.Tnt,of:this.ynt,sf:this.unt,armorf:this._nt,armandf:this.Ent})}E7(t){t&&(super.E7(t),this.fG=t.v,this.Mnt=t.a,this.Snt=ln.pe(t.fod)?t.fod:0,this.Tnt=ln.pe(t.bod)?t.bod:0,this.ynt=ln.pe(t.of)?t.of:NaN,this.unt=ln.pe(t.sf)?t.sf:NaN,this._nt=ln.pe(t.armorf)?t.armorf:void 0,this.Ent=ln.pe(t.armandf)?t.armandf:void 0)}}ln.$st.Nht.Lht=dn}{const pn=self.ks;class mn{constructor(t){this.Znt=!1,this.Jht=0,this.Xnt=!1,this.Knt=!1,this.Yst=t;for(let t=0,s=this.Yst.length;t<s;t++)this.Yst[t].met(this)}xst(){return this.Yst}$nt(){this.Znt=!0}tot(){return this.Znt}mht(t){this.Jht=t}Let(){return this.Jht}sot(t){this.Xnt=t}iot(){return this.Xnt}cst(t){this.Knt=t}eot(){return this.Knt}m0(){this.Znt=!1,this.Jht=0,this.Xnt=!1,this.Knt=!1}}class gn{constructor(t){this.hot=t}cr(){this.hot=null}xx(){return 0}zX(){const t=this.hot;return this.hot.fU(),t.Rrt(()=>t.Art(()=>0,()=>t.wtt().ght()),()=>{})}ost(){}eht(){this.hot;const t=this.hot.fU();switch(t._K()){case"relative":return!1;case"absolute":return!0}}bht(){this.hot;const t=this.hot.fU(),s=t.Gst();switch(t._K()){case"relative":break;case"absolute":if(t.pet()){const i=t.yet();i.m0()}else{const e=t.tit(),h=t.nU(),r=t.wtt(),n=e.Mtt(h,r,s,t);n&&1<n.length&&new mn(n)}}}_ht(t,s,i,e,h,r,n,o){const a=this.hot,u=this.hot.fU();switch(u._K()){case"relative":{const l=a.Wnt();a.Zrt(s-l,i,e),r&&this.Hnt(t,i,e,h,l,s),a.Qnt(s);break}case"absolute":{const c=u.tit(),f=u.Met();if(u.nU(),u.wtt(),u.pet()){const d=u.yet(),p=d.xst(),m=a.Brt(p,!0),g=a.Urt(c,c.gN(),m);if(g){const y=f.dst(),M=g.time-y;if(0==M)d.cst(n),d.sot(o),d.$nt(),d.mht(d.Let()+s);else{if(M<0)return;const w=u.hht(M);d.cst(n),d.sot(o),d.$nt(),d.mht(d.Let()+(s-w))}}}else a.Ynt(s,o,n);break}}}Eht(){const t=this.hot,s=this.hot.fU();switch(s._K()){case"relative":break;case"absolute":if(s.pet()){const i=s.yet();i.tot()&&t.Ynt(i.Let(),i.iot(),i.eot())}}}Hnt(t,s,i,e,h,r){const n=this.hot;e||(s&&t===s.gN()?n.qnt(s.PK(),s,i):i&&t===i.gN()?n.qnt(i.PK(),s,i):r-h==0&&n.qnt(s.PK(),s,i))}}pn.$st.Nht.Unt=gn}{const yn=self.ks;class Mn{constructor(t){this.hot=t}cr(){this.hot=null}xx(){return 1}zX(){const t=this.hot;return t.Crt(!0),this.krt(t.Drt())}ost(){const t=this.hot;if(t.Drt()!==t.Ort())return t.Crt(!0),this.krt(t.Ort())}eht(){return!1}bht(){}_ht(t,s,i,e,h,r,n,o){const a=this.hot,u=a.Wnt();switch(a.fU()._K()){case"relative":a.Zrt(s-u,i,e),r&&this.Hnt(t,i,e,h,u,s,!1,n);break;case"absolute":a._rt()?(a.Crt(!1),a.Zrt(u,i,e)):0===t&&0===a.fU().tit().QB()?a.Ynt(s,!0,!1):(a.Zrt(s-u,i,e),r&&this.Hnt(t,i,e,h,u,s,this.rot(),n))}a.Qnt(s)}Eht(){}krt(t){const s=this.hot;return t-s.sht()}rot(){let t=this.hot,s=t.RR().nU(),i=t.fU().iP(),e=i.ytt(),h=0;for(const r of e.mX())0===r.xx()?r.SX(s)&&h++:1===r.xx()&&r.nU()===s&&h++;return h<=1}Hnt(t,s,i,e,h,r,n,o){const a=this.hot;e?s&&t===s.gN()?a.qnt(s.PK(),s,i,n,o):i&&t===i.gN()?a.qnt(i.PK(),s,i,n,o):i||a.qnt(s.PK(),s,i,n,o):s&&t===s.gN()?a.qnt(s.PK(),s,i,n,o):i&&t===i.gN()?a.qnt(i.PK(),s,i,n,o):r-h==0&&a.qnt(s.PK(),s,i,n,o)}}yn.$st.Nht.Bnt=Mn}{const wn=self.ks,Sn=self.Tc;wn.$st.vht=class{constructor(){}static $rt(t,s,i,e){let h;switch(e){case"behavior":h=s.Jrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.tnt(t);break;case"plugin":h=s.Jrt(t)}return h!==i}static Yc(r,n,o,a){if(!o){let t=a.wet(),s=a.Kst();return(t=s.Nrt(t)).PK()}let u=a.Gtt();if("default"===u&&(u="continuous"),"discrete"===(u="combo"===a.ket()?"discrete":u))return n.PK();if("continuous"===u||"step"===u){const l=a.tit().vtt();if("step"===u&&0!==l){const g=1/l;r=Math.floor(r*g)/g}const c=n.PK(),f=o.PK(),d=n.LK("cubic-bezier"),p=o.LK("cubic-bezier"),m=d&&d.not()&&p&&p.oot();if(!m&&c===f)return c;let t=n.gN(),s=o.gN(),i=("step"===u&&0!==l&&(r=wn.Sr(r,t,s)),wn.normalize(r,t,s)),e=n.pht(),h;if(m){const y=s-t;h=Sn.kc(e)(y*i,0,1,y),h=Sn.kc("cubicbezier")(h,c,c+d.jK(),f+p.UK(),f)}else h=Sn.kc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.ket()?Math.floor(h):h}}}}{const Tn=self.ks;Tn.$st.xht=class{constructor(){}static $rt(t,s,i,e){let h;switch(e){case"behavior":h=s.Jrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.tnt(t);break;case"plugin":h=s.Jrt(t)}return h!==i}static Yc(t,s,i,e){if(!i){let t=e.wet(),s=e.Kst();return(t=s.Nrt(t)).PK()}let h=e.Gtt();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===e.ket()?"discrete":h))return s.PK();if("continuous"===h||"step"===h){const r=e.tit().vtt();if("step"===h&&0!==r){const c=1/r;t=Math.floor(t*c)/c}const n=s.gN(),o=i.gN(),a=s.PK(),u=i.PK(),l=("step"===h&&0!==r&&(t=Tn.Sr(t,n,o)),s.LK("angle"));if(!l){if(a===u)return a;const f=Tn.normalize(t,n,o),d=self.Tc.kc(s.pht());return Tn.Lr(a,u,d(f,0,1,1))}{const p=l.aot();if(a===u&&0===p)return a;const m=Tn.normalize(t,n,o),g=self.Tc.kc(s.pht()),y=g(m,0,1,1);switch(l.uot()){case"closest":return Tn.Lr(a,u,y,p);case"clockwise":return Tn.Or(a,u,y,p);case"anti-clockwise":return Tn.Rr(a,u,y,p)}}}}}}{const bn=self.ks;bn.$st.Ght=class{constructor(){}static $rt(t,s,i,e){let h;switch(e){case"behavior":h=s.Jrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.tnt(t);break;case"plugin":h=s.Jrt(t)}return!!h!=!!i}static Yc(t,s,i,e){if(i)return s.PK()?1:0;{let t=e.wet(),s=e.Kst();return(t=s.Nrt(t)).PK()?1:0}}}}{const vn=self.ks,xn=[0,0,0],Gn=[0,0,0],In=[0,0,0];vn.$st.Iht=class{constructor(){}static $rt(t,s,i,e){let h;switch(e){case"behavior":h=s.Jrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.tnt(t);break;case"plugin":h=s.Jrt(t)}return Array.isArray(i)?(xn[0]=i[0],xn[1]=i[1],xn[2]=i[2]):(In.Oa(i),xn[0]=Math.floor(255*In.la()),xn[1]=Math.floor(255*In.ca()),xn[2]=Math.floor(255*In.fa())),Array.isArray(h)?(Gn[0]=h[0],Gn[1]=h[1],Gn[2]=h[2]):(In.Oa(h),Gn[0]=Math.floor(255*In.la()),Gn[1]=Math.floor(255*In.ca()),Gn[2]=Math.floor(255*In.fa())),xn[0]!==Gn[0]||xn[1]!==Gn[1]||xn[2]!==Gn[2]}static Yc(t,s,i,e){if(!i){let t=e.wet(),s=e.Kst(),i=(t=s.Nrt(t)).PK();return xn[0]=i[0],xn[1]=i[1],xn[2]=i[2],xn}let h=e.Gtt();if("discrete"===(h="default"===h?"continuous":h)){const r=s.PK();return xn[0]=r[0],xn[1]=r[1],xn[2]=r[2],xn}if("continuous"===h||"step"===h){const n=e.tit().vtt();if("step"===h&&0!==n){const b=1/n;t=Math.floor(t*b)/b}const o=s.gN(),a=i.gN(),u=s.PK(),l=i.PK(),c=("step"===h&&0!==n&&(t=vn.Sr(t,o,a)),vn.normalize(t,o,a)),f=s.pht(),d=u[0],p=u[1],m=u[2],g=l[0],y=l[1],M=l[2],w=self.Tc.kc(f),S=a-o,T=S*c;return xn[0]=d===g?d:w(T,d,g-d,S),xn[1]=p===y?p:w(T,p,y-p,S),xn[2]=m===M?m:w(T,m,M-m,S),xn}}}}{const Cn=self.ks;Cn.$st.Cht=class{constructor(){}static $rt(t,s,i,e){let h;switch(e){case"behavior":h=s.Jrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.tnt(t);break;case"plugin":h=s.Jrt(t)}return h!==i}static Yc(t,s,i,e){if(i)return s.PK();{let t=e.wet(),s=e.Kst();return(t=s.Nrt(t)).PK()}}}}{const _n=self.ks;_n.bZ=class{constructor(){this.lot=new Map}cr(){for(const t of this.lot.values())t.cr();this.lot.clear(),this.lot=null}Mc(t){const s=new _n.cot(t),i=s.hf();this.lot.set(i,s)}ei(t){return this.lot.get(t)}ltt(){return 0}static fot(t,s,i,e){if(s)for(const h of s)_n.bZ.dot("create",h,t,i,e)}static pot(t,s,i,e){if(s)for(const h of s)_n.bZ.dot("create-including-disabled",h,t,i,e)}static mot(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].E7(t)}):t.forEach(t=>{_n.bZ.dot("load",t,i,s,e)})}static dot(t,s,i,e,h){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,h);break;case"create":case"create-including-disabled":r=new e(s,h)}else if("object"==typeof e){const n=e.prop,o=s[n],a=e.map.get(o);switch(t){case"load":r=new a(null,h);break;case"create":case"create-including-disabled":r=new a(s,h)}}switch(t){case"load":r.E7(s),i.push(r);break;case"create":if("function"==typeof r.vit&&!r.vit())return r.cr();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const En=self.ks;En.cot=class{constructor(t){this.mr="",this.lst=NaN,this.got=0,this.yot="default",this.Mot="default",this.wot=!1,this.Sot=!1,this.Tot=1,this.Ost=null,this.bot="",this.vot=!1,this.xot=!0,t&&(this.mr=t[0],this.lst=t[1],this.got=t[2],this.yot=t[3],this.Mot=t[4],this.wot=!!t[6],this.Sot=!!t[7],this.Tot=t[8],this.bot=t[9],this.vot=!!t[10],this.xot=!!t[11],this.Ost=new En.Got(t[5],this))}cr(){this.Ost.cr(),this.Ost=null}mtt(){return this.Ost||(this.Ost=new En.Got(null,this)),this.Ost}hf(){return this.mr}iW(t){this.mr=t}QB(){return this.lst}WB(t){this.lst=t}vtt(){return this.got}xtt(t){this.got=t}Gtt(){return this.yot}Itt(t){this.yot=t}_K(){return this.Mot}Ctt(t){this.Mot=t}VB(){return this.wot}JB(t){this.wot=t}HB(){return this.Sot}YB(t){this.Sot=t}eB(){return this.Tot}_tt(t){this.Tot=t}XX(){return this.bot}Ett(){return this.vot}Dtt(){return this.xot}_7(){return{trackDataJson:this.Ost._7(),name:this.mr,totalTime:this.lst,step:this.got,interpolationMode:this.yot,resultMode:this.Mot,loop:this.wot,pingPong:this.Sot,repeatCount:this.Tot,startOnLayout:this.bot,transformWithSceneGraph:!!this.vot,useSystemTimescale:this.xot}}E7(t){t&&(this.mtt().E7(t.trackDataJson),this.mr=t.name,this.lst=t.totalTime,this.got=t.step,this.yot=t.interpolationMode,this.Mot=t.resultMode,this.wot=t.loop,this.Sot=t.pingPong,this.Tot=t.repeatCount,this.bot=t.startOnLayout,this.vot=!!t.transformWithSceneGraph,this.xot=!!t.useSystemTimescale)}}}{const Dn=self.ks;class An{constructor(t,s){this.Ost=s,this.Iot=null,this.Cot=null,this.Rst=NaN,this.Pst=NaN,this.yot="default",this.Mot="default",this.zl=!1,this._ot=null,this.oet=null,this.yf="",this.Eot=null,this.Dot=0,this.Aot=this.Ost.btt().QB(),this.vf=0,this.mr="",t&&(t[0]&&(this.Iot=t[0],this.Rst=t[0][2],this.Pst=t[0][1]),this.yot=t[1],this.Mot=t[2],this.zl=!!t[3],t[6]&&(this.yf=t[6]),t[7]&&(this.Eot=t[7],this.Dot=t[7][0],this.Aot=t[7][1]),t[8]&&(this.Cot=t[8]),t[8]&&(this.Cot=t[8]),t[9]&&(this.vf=t[9]),t[10]&&(this.mr=t[10]),this._ot=new Dn.Not(t[4],this),this.oet=new Dn.Lot(t[5],this))}cr(){this.Iot=null,this.Ost=null,this._ot&&(this._ot.cr(),this._ot=null),this.oet&&(this.oet.cr(),this.oet=null),this.Eot=null}mtt(){return this.Ost}Vst(){return this._ot||(this._ot=new Dn.Not(null,this)),this._ot}Kst(){return this.oet||(this.oet=new Dn.Lot(null,this)),this.oet}Oot(){return this.Iot}hit(){return this.Pst}Git(t){this.Pst=t}eit(){return this.Rst}Sit(t){this.Rst=t}Gtt(){return this.yot}Itt(t){this.yot=t}_K(){return this.Mot}Ctt(t){this.Mot=t}vit(){return this.zl}xit(t){this.zl=!!t}lU(){return this.yf}dst(){return this.Dot}Tit(){return this.Aot}bit(t){this.Aot=t}Cit(){return this.Cot[0]}Iit(t){this.Cot||(this.Cot=[]),this.Cot[0]=t}Dit(){return this.Cot||(this.Cot=[]),this.Cot[1]}Eit(t){this.Cot||(this.Cot=[]),this.Cot[1]=t}xx(){return this.vf}hf(){return this.mr}_7(){return{keyframeDataJson:this._ot._7(),propertyTrackDataJson:this.oet._7(),instanceData:this.Iot,additionalInstanceData:this.Cot,instanceUid:this.Rst,objectClassIndex:this.Pst,interpolationMode:this.yot,resultMode:this.Mot,enabled:this.zl,id:this.yf,nestedData:this.Eot,type:this.vf,name:this.mr}}E7(t){t&&(this.Iot=t.instanceData,this.Rst=t.instanceUid,this.Pst=t.objectClassIndex,this.yot=t.interpolationMode,this.Mot=t.resultMode,this.zl=t.enabled,this.yf=t.id,this.vf=t.type||0,this.mr=t.name||"",this.Aot=this.Ost.btt().QB(),t.nestedData&&(this.Eot=t.nestedData,this.Dot=this.Eot[0],this.Aot=this.Eot[1]),t.additionalInstanceData&&(this.Cot=t.additionalInstanceData),this.Vst().E7(t.keyframeDataJson),this.Kst().E7(t.propertyTrackDataJson))}}Dn.Got=class{constructor(t,s){this.L$=s,this.Rot=[],Dn.bZ.fot(this.Rot,t,An,this)}cr(){this.L$=null;for(const t of this.Rot)t.cr();Dn.Wn(this.Rot),this.Rot=null}btt(){return this.L$}gst(){const t=new An(null,this);return this.Rot.push(t),t}Pot(t){return t.Vst().Jst()[0]}kot(t){const s=t.Vst().Jst();return s.at(-1)}zit(s,t){const i=t.Vst().Jst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.gN()===s)return h}}Fot(s,t){const i=t.Vst().Jst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.gN()>s)return h}}jot(s,t){const i=t.Vst().Jst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.gN()>=s)return h}}jit(s,t){const i=t.Vst().Jst();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.gN()<=s)return e}}*ptt(){for(const t of this.Rot)yield t}_7(){return{trackDataItemsJson:this.Rot.map(t=>t._7())}}E7(t){t&&Dn.bZ.mot(this.Rot,t.trackDataItemsJson,An,this)}}}{const Nn=self.ks;class Ln{constructor(t,s){this.oet=s,this.zot="",this.Bot=null,this.vrt=null,this.vf=null,this.Uot=NaN,this.Wot=NaN,this.yot="default",this.Mot="default",this.zl=!1,this.Qot=null,this.Jot=!0,t&&(this.zot=t[0][0],this.Bot=t[0].slice(1),this.vrt=t[1],this.vf=t[2],this.Uot=t[3],this.Wot=t[4],this.yot=t[5],this.Mot=t[6],this.zl=!!t[7],this.Qot=new Nn.Vot(t[8],this),this.Jot=t[9])}cr(){this.Qot.cr(),this.Qot=null,this.oet=null,this.Bot=null}Kst(){return this.oet}cet(){return this.Qot||(this.Qot=new Nn.Vot(null,this)),this.Qot}uit(){return this.zot}_et(t){this.zot=t}Det(){return this.Bot}Net(t){this.Bot=t}Oet(){return this.vrt}Pet(t){this.vrt=t}xx(){return this.vf}jet(t){this.vf=t}Uet(){return this.Uot}Wet(t){this.Uot=t}Qet(){return this.Wot}Jet(t){this.Wot=t}Gtt(){return this.yot}Itt(t){this.yot=t}_K(){return this.Mot}Ctt(t){this.Mot=t}vit(){return this.zl}xit(t){this.zl=!!t}Yet(){return!!this.Jot}_7(){return{propertyKeyframeDataJson:this.Qot._7(),sourceAdapterId:this.zot,sourceAdapterArguments:this.Bot,property:this.vrt,type:this.vf,min:this.Uot,max:this.Wot,interpolationMode:this.yot,resultMode:this.Mot,enabled:this.zl,canHavePropertyKeyframes:this.Jot}}E7(t){t&&(this.zot=t.sourceAdapterId,this.Bot=t.sourceAdapterArguments,this.vrt=t.property,this.vf=t.type,this.Uot=t.min,this.Wot=t.max,this.yot=t.interpolationMode,this.Mot=t.resultMode,this.zl=t.enabled,this.Jot=t.canHavePropertyKeyframes,this.cet().E7(t.propertyKeyframeDataJson))}}Nn.Lot=class{constructor(t,s){this.Lst=s,this.Yot=[],Nn.bZ.fot(this.Yot,t,Ln,this)}cr(){this.Lst=null;for(const t of this.Yot)t.cr();Nn.Wn(this.Yot),this.Yot=null}wit(){return this.Lst}Qit(){const t=new Ln(null,this);return this.Yot.push(t),t}Bet(t){const s=t.cet();return s.let()[0]}Nrt(t){const s=t.cet(),i=s.let();return i.at(-1)}Het(s,t){const i=t.cet(),e=i.let(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.gN()===s)return r}}Xet(s,t){const i=t.cet(),e=i.let(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.gN()>s)return r}}Ket(s,t){const i=t.cet(),e=i.let(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.gN()>=s)return r}}qet(s,t){const i=t.cet(),e=i.let();for(let t=e.length-1;0<=t;t--){const h=e[t];if(h.gN()<=s)return h}}*Xst(){for(const t of this.Yot)yield t}_7(){return{propertyTrackDataItemsJson:this.Yot.map(t=>t._7())}}E7(t){t&&Nn.bZ.mot(this.Yot,t.propertyTrackDataItemsJson,Ln,this)}}}{const On=self.ks;class Rn{constructor(t,s){if(this._ot=s,this.fL=-1,this.Hot="noease",this.qot=!1,this.htt=null,this.Zot=null,t){this.fL=t[0],this.Hot=t[1],this.qot=!!t[2];const i=t[3];this.htt=i?i.split(" "):[],this.Zot=new Set(this.htt.map(t=>t.toLowerCase())),this.Xot=null}}cr(){this._ot=null,On.Wn(this.htt),this.htt=null,this.Zot.clear(),this.Zot=null,this.Xot=null}Vst(){return this._ot}SK(){return this.Xot}Kot(t){this.Xot=t}gN(){return this.fL}UB(t){this.fL=t,this._ot.$ot()}pht(){return this.Hot}rU(t){this.Hot=t}vit(){return this.qot}xit(t){this.qot=!!t}XB(){return this.htt}Ltt(t){this.htt=t?t.split(" "):[],this.Zot=new Set(this.htt.map(t=>t.toLowerCase()))}tat(){return this.Zot}Est(t){return this.Zot.has(t.toLowerCase())}_7(){return{time:this.fL,ease:this.Hot,enable:this.qot,tags:this.htt}}E7(t){t&&(this.fL=t.time,this.Hot=t.ease,this.qot=t.enable,this.htt=t.tags,this.Zot=new Set(this.htt.map(t=>t.toLowerCase())))}}On.Not=class{constructor(t,s){this.Lst=s,this.Qst=[],On.bZ.fot(this.Qst,t,Rn,this),this.$ot()}cr(){this.Lst=null;for(const t of this.Qst)t.cr();On.Wn(this.Qst),this.Qst=null}$ot(){this.Qst.sort((t,s)=>t.gN()-s.gN());for(let t=0;t<this.Qst.length;t++){const s=this.Qst[t];s.Kot(this.Qst[t+1])}}wit(){return this.Lst}sat(){return this.Qst.length}Jst(){return this.Qst}Uit(){const t=new Rn(null,this);return this.Qst.push(t),this.$ot(),t}Vit(t){for(const s of this.Qst)if(t(s)){const i=this.Qst.indexOf(s);-1!==i&&(s.cr(),this.Qst.splice(i,1))}this.iat(),this.$ot()}iat(){this.Qst.sort((t,s)=>t.gN()-s.gN())}eet(t){return this.Qst.indexOf(t)}het(t){return this.Qst[t]}*eat(){for(const t of this.Qst)yield t}*hat(){for(let t=this.Qst.length-1;0<=t;t--)yield this.Qst[t]}_7(){return{keyframeDataItemsJson:this.Qst.map(t=>t._7())}}E7(t){t&&(On.bZ.mot(this.Qst,t.keyframeDataItemsJson,Rn,this),this.$ot())}}}{const Pn=self.ks;class kn{constructor(t,s){this.Qot=s,this.Jht=null,this.rat=null,this.vf="",this.fL=NaN,this.Hot="noease",this.qot=!1,this.nat=null,this.oat=void 0,this.aat="line",t&&(this.Jht=t[0][0],this.rat=t[0][1],this.vf=t[0][2],this.fL=t[1],this.Hot=t[2],this.qot=!!t[3],this.aat=t[5],this.nat=null,t[4]&&(this.nat=new Pn.uat(t[4],this)),this.Xot=null,this.lat=null)}cr(){this.Qot=null,this.nat&&(this.nat.cr(),this.nat=null),this.Xot=null,this.lat=null}cat(){return this.nat}Kot(t){this.Xot=t}SK(){return this.Xot}fat(t){this.lat=t}TK(){return this.lat}Let(){return this.Jht}mht(t){"color"===this.vf&&Pn.pe(t)?(this.Jht[0]=Pn.Xr(t),this.Jht[1]=Pn.Kr(t),this.Jht[2]=Pn.$r(t)):this.Jht=t}Lrt(){return this.rat}cht(t){"color"===this.vf&&Pn.pe(t)?(this.rat[0]=Pn.Xr(t),this.rat[1]=Pn.Kr(t),this.rat[2]=Pn.$r(t)):this.rat=t}PK(){const t=this.Qot.wet()._K();return"relative"===t?this.Let():"absolute"===t?this.Lrt():void 0}xx(){return this.vf}jet(t){this.vf=t}gN(){return this.fL}UB(t){this.fL=t,this.Qot.dat()}pht(){return this.Hot}rU(t){this.Hot=t}vit(){return this.qot}xit(t){this.qot=!!t}bK(){return this.aat}LK(s){if(this.nat){if(!this.oat&&null!==this.oat){const i=this.nat.pat();if(i){const e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.lU()===s)return this.oat=h,this.oat}}this.oat=null}return this.oat}}_7(){const t=this.nat;return{addonDataJson:t&&t._7(),value:this.Jht,aValue:this.rat,type:this.vf,time:this.fL,ease:this.Hot,enable:this.qot}}E7(t){t&&(t.addonDataJson&&this.nat._SetFromJson(t.addonDataJson),this.Jht=t.value,this.rat=t.aValue,this.vf=t.type,this.fL=t.time,this.Hot=t.ease,this.qot=t.enable)}}Pn.Vot=class{constructor(t,s){this.net=s,this.uet=[],this.mat=[],Pn.bZ.fot(this.uet,t,kn,this),Pn.bZ.pot(this.mat,t,kn,this),this.dat()}cr(){this.net=null;for(const t of this.uet)t.cr();Pn.Wn(this.uet),this.uet=null;for(const s of this.mat)s.cr();Pn.Wn(this.mat),this.mat=null}dat(){let s=this.uet;s.sort((t,s)=>t.gN()-s.gN());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.Kot(s[t+1]),0<=t-1&&i.fat(s[t-1])}(s=this.mat).sort((t,s)=>t.gN()-s.gN());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.Kot(s[t+1]),0<=t-1&&e.fat(s[t-1])}}uht(){const t=new kn(null,this);return this.uet.push(t),this.dat(),t}lht(t){for(const s of this.uet)if(t(s)){const i=this.uet.indexOf(s);-1!==i&&(s.cr(),this.uet.splice(i,1))}this.gat(),this.dat()}gat(){this.uet.sort((t,s)=>t.gN()-s.gN())}wet(){return this.net}yat(){return this.uet.length}Nrt(){return this.uet[this.uet.length-1]}let(){return this.uet}wK(){return this.mat}*Mat(){for(const t of this.uet)yield t}*wat(){for(let t=this.uet.length-1;0<=t;t--)yield this.uet[t]}_7(){const t=this.uet,s=this.mat;return{propertyKeyframeDataItemsJson:t.map(t=>t._7()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t._7())}}E7(t){t&&(Pn.bZ.mot(this.uet,t.propertyKeyframeDataItemsJson,kn,this),Pn.bZ.mot(this.mat,t.propertyKeyframeDataItemsIncludingDisabledJson,kn,this),this.dat())}}}{const Fn=self.ks;class jn{constructor(t,s){this.nat=s,this.yf=t[0],this.Sat=t[1]}cr(){this.nat=null,this.Sat=null}cat(){return this.nat}lU(){return this.yf}_7(){return{id:this.yf,data:this.Sat}}E7(t){t&&(this.yf=t.id,this.Sat=t.data)}}class zn extends jn{constructor(t,s){super(t,s),this.Tat=this.Sat[0],this.bat=!!this.Sat[1],this.vat=this.Sat[2],this.xat=!!this.Sat[3]}cr(){super.cr()}jK(){return this.Tat}not(){return this.bat}UK(){return this.vat}oot(){return this.xat}_7(){return Object.assign(super._7(),{startAnchor:this.Tat,startEnable:!!this.bat,endAnchor:this.vat,endEnable:!!this.xat})}E7(t){t&&(super.E7(t),this.Tat=t.startAnchor,this.bat=!!t.startEnable,this.vat=t.endAnchor,this.xat=!!t.endEnable)}}class Bn extends jn{constructor(t,s){super(t,s),this.Gat=this.Sat[0],this.Iat=this.Sat[1]}cr(){super.cr()}uot(){return this.Gat}aot(){return this.Iat}_7(){return Object.assign(super._7(),{direction:this.Gat,revolutions:this.Iat})}E7(t){t&&(super.E7(t),this.Gat=t.direction,this.Iat=t.revolutions)}}Fn.uat=class{constructor(t,s){this.Cat=s,this._at=[],Fn.bZ.fot(this._at,t,{prop:0,map:new Map([["cubic-bezier",zn],["angle",Bn]])},this)}cr(){this.Cat=null;for(const t of this._at)t.cr();Fn.Wn(this._at),this._at=null}Eat(){return this.Cat}pat(){return this._at}*Dat(){for(const t of this._at)yield t}_7(){return{addonDataItemsJson:this._at.map(t=>t._7())}}E7(t){t&&Fn.bZ.mot(this._at,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",zn],["angle",Bn]])},this)}}}{let m=self.ks,i=0;m.znt=class extends m.sX{constructor(t,s){super("tween-"+i++,t,s),this.yf="",this.Aat=!1,this.Nat="start-value",this.kst=null,this.Lat=null,this.Oat=null,this.ret=null,this.Rat=null}ftt(t){const s=m.lr(m.Event,"tweenstatereleased");s.Pat=this,t.dispatchEvent(s)}xx(){return 1}F$(){for(const t of this.L$.mtt().ptt())this.O$.push(m.kat.dv(this,t));this.ret=this.O$[0]}mst(){const t=this.L$.mtt().gst(),s=m.kat.dv(this,t);return this.O$.push(s),this.Fat(),s}Fat(){this.ret=this.O$[0]}fU(t){return this.ret.xst()[0]}Fet(t){this.jat=t}nU(){const t=this.gK();if(t&&t.length){const s=t[0];if(this.ret=s){const i=s.nU();return s.iit()?i:void 0}}}zat(t){this.Oat||(this.Oat=[]),this.Oat.push(t)}Bat(t){this.Lat||(this.Lat=[]),this.Lat.push(t)}Uat(t){if(this.Oat){const s=this.Oat.indexOf(t);-1!==s&&this.Oat.splice(s,1)}}Wat(t){if(this.Lat){const s=this.Lat.indexOf(t);-1!==s&&this.Lat.splice(s,1)}}Qat(t,s){for(const i of this.O$)for(const e of i.Yst)if(e.Gst()===s){const h=e.Kst(),r=e.wet(),n=h.Bet(r);n.mht(t),n.cht(t)}}Jat(t){for(const s of this.O$)for(const i of s.Yst)if(i.Gst()===t)return i}Vat(t){for(const s of t){const i=this.Jat(s);this.Qat(i.sht(),s)}if(this.Ntt()){const e=this.QB()-this.gN();this.WB(e);for(const h of this.O$)h.bit(e);this.Ytt(0)}else{const r=this.gN();this.WB(r);for(const n of this.O$)n.bit(r);this.Ytt(r)}this.Htt()}Yat(t,s){const i=this.Jat(s),e=i.Kst(),h=i.wet(),r=e.Nrt(h);r.UB(this.QB()),r.mht(t),r.cht(t)}Hat(t){this.yf=t}lU(){return this.yf}qat(t){this.Nat=t}Zat(){return this.Nat}uU(t){this.Aat=t}aU(){return this.Aat}ktt(){if(this.Oat)for(const t of this.Oat)t(this);if(!this.YX())for(const s of this.O$)s.Zit()}Ftt(){this.K$=this.pf.jtt()}qX(){if(!this.stt&&(this.stt=!0,this.Lat))for(const t of this.Lat)t(this)}UB(t){this.Xat(),super.UB(t)}$tt(t){(t=m.pe(t)?t:this.QB())<0?this.B$=0:t>=this.QB()?this.B$=this.QB():this.B$=t,this.ret.tst()}zX(t){if(!this.HX()&&"current-state"===this.Zat())for(const s of this.O$)s.qit();super.zX(t)}jB(t=!1){if(super.jB(t),!this.YX())for(const s of this.O$)s.Hit()}m0(t=!0,s=!1){this.Xat(),super.m0(t,s)}Xat(){for(const t of this.O$){const s=t=>{const s=t.gN(),i=this.QB();return 0!==s&&s!==i};t.Jit(s),t.Yit(s)}}jZ(){if(!this.PB()){const t=this.nU();if(t&&t.QF().U8())return!1;this.N$.PX(this),this.rst()}return!0}QX(h,t,s){if(this.kst||(this.kst=this.nU()),!this.kst||this.kst.l6())this.jB(!0),this.Ftt();else{const i=this.kst.W3();if(0!==(h=-1!==i?s*i:h)||0!==this.ett){this.ett=h;const r=this.B$+this.U$,n=h*this.W$,o=r+n,a=this.L$.lst;o<0?(this.B$=0,this.U$=-o):a<=o?(this.B$=a,this.U$=this.B$-o):(this.B$=o,this.U$=0);let t=!1,s=!1,i=this.VB(),e=this.HB();i||e?i&&!e?0<this.W$?this.B$>=a&&(this.$tt(0),this.Kat(m.$at.Tween.wq.OnAnyTweenLoop),this.Kat(m.$at.Tween.wq.OnTweensLoop),s=!0):this.B$<=0&&(this.$tt(a),this.Kat(m.$at.Tween.wq.OnAnyTweenLoop),this.Kat(m.$at.Tween.wq.OnTweensLoop),s=!0):!i&&e?0<this.W$?this.B$>=a&&(this.Ytt(a),this.qB(-1*this.ZB()),s=!0,1===this.Q$?this.J$<this.eB()?(this.J$++,this.Kat(m.$at.Tween.wq.OnAnyTweenLoop),this.Kat(m.$at.Tween.wq.OnTweensLoop),this.Kat(m.$at.Tween.wq.OnAnyTweenPingPong),this.Kat(m.$at.Tween.wq.OnTweensPingPong),this.Q$=0):(this.Kat(m.$at.Tween.wq.OnAnyTweenPingPong),this.Kat(m.$at.Tween.wq.OnTweensPingPong),t=!0):0===this.Q$&&(this.Kat(m.$at.Tween.wq.OnAnyTweenPingPong),this.Kat(m.$at.Tween.wq.OnTweensPingPong),this.Q$=1)):this.B$<=0&&(this.Ytt(0),this.qB(-1*this.ZB()),s=!0,1===this.Q$?this.J$<this.eB()?(this.J$++,this.Kat(m.$at.Tween.wq.OnAnyTweenLoop),this.Kat(m.$at.Tween.wq.OnTweensLoop),this.Kat(m.$at.Tween.wq.OnAnyTweenPingPong),this.Kat(m.$at.Tween.wq.OnTweensPingPong),this.Q$=0):(t=!0,this.Kat(m.$at.Tween.wq.OnAnyTweenPingPong),this.Kat(m.$at.Tween.wq.OnTweensPingPong)):0===this.Q$&&(this.Kat(m.$at.Tween.wq.OnAnyTweenPingPong),this.Kat(m.$at.Tween.wq.OnTweensPingPong),this.Q$=1)):i&&e&&(0<this.W$?this.B$>=a&&(this.Ytt(a),this.qB(-1*this.ZB()),s=!0,0===this.Q$&&(this.Kat(m.$at.Tween.wq.OnAnyTweenPingPong),this.Kat(m.$at.Tween.wq.OnTweensPingPong)),1===this.Q$&&(this.Kat(m.$at.Tween.wq.OnAnyTweenLoop),this.Kat(m.$at.Tween.wq.OnTweensLoop),this.Kat(m.$at.Tween.wq.OnAnyTweenPingPong),this.Kat(m.$at.Tween.wq.OnTweensPingPong)),this.Q$++,this.Q$=m.wrap(this.Q$,0,2)):this.B$<=0&&(this.Ytt(0),this.qB(-1*this.ZB()),s=!0,0===this.Q$&&(this.Kat(m.$at.Tween.wq.OnAnyTweenPingPong),this.Kat(m.$at.Tween.wq.OnTweensPingPong)),1===this.Q$&&(this.Kat(m.$at.Tween.wq.OnAnyTweenLoop),this.Kat(m.$at.Tween.wq.OnTweensLoop),this.Kat(m.$at.Tween.wq.OnAnyTweenPingPong),this.Kat(m.$at.Tween.wq.OnTweensPingPong)),this.Q$++,this.Q$=m.wrap(this.Q$,0,2))):0<this.W$?this.B$>=a&&(this.J$<this.eB()?(this.J$++,this.$tt(0),this.Kat(m.$at.Tween.wq.OnAnyTweenLoop),this.Kat(m.$at.Tween.wq.OnTweensLoop),s=!0):(this.Ytt(a),t=!0)):this.B$<=0&&(this.J$<this.eB()?(this.J$++,this.$tt(a),this.Kat(m.$at.Tween.wq.OnAnyTweenLoop),this.Kat(m.$at.Tween.wq.OnTweensLoop),s=!0):(this.Ytt(0),t=!0)),t?(this.ret.cst(),this.jB(!0),this.Ftt()):(this.ret.Yc(this.B$,!0,!1,s,this.itt,!1),this.itt&&(this.itt=!1))}}}Kat(t){const s=this.nU(),i=s.tut(m.$at.Tween);i.PushTriggerTween(this),this.pf.Nj(t,s,i.Uz()),i.PopTriggerTween()}_7(){const t=super._7(),s=this.btt();return Object.assign(t,{tweenDataItemJson:s._7(),id:this.yf,destroyInstanceOnComplete:this.Aat,initialValueMode:this.Nat})}E7(t){if(t){const s=this.btt();s.E7(t.tweenDataItemJson),super.E7(t),this.yf=t.id,this.Aat=t.destroyInstanceOnComplete,this.Nat=t.initialValueMode,this.Fat()}}static IsPlaying(t){return t.IsPlaying()}static tU(t){return t.tU()}static sut(t){return!!t.HB()&&0===t.Att()}static iut(t){return!!t.HB()&&1===t.Att()}static eut(t){const s=t.runtime.ytt(),i=new m.cot;if(t.json){i.E7(t.json.tweenDataItemJson);const e=new m.znt(i,s);return e.E7(t.json),e}{const h=new m.znt(i,s),r=(m.je(t.hut)||(t.hut=[t.hut]),h.Hat(t.id),h.Ltt(t.tags),h.qat(t.initialValueMode),h.uU(t.releaseOnComplete),h.JB(t.loop),h.YB(t.pingPong),h.WB(t.time),h.xtt(0),h.Itt("default"),h.Ctt(t.hut[0].resultMode),h._tt(t.repeatCount),h.mst()),n=(r.Sit(t.Wz.hj()),r.Itt("default"),r.Ctt(t.hut[0].resultMode),r.xit(!0),r.Git(t.Wz.QF().LO()),t.Wz.Nz()),o=n._it()?n.Cit():t.Wz.RR().ym(),a=n._it()?n.Dit():t.Wz.RR()._m(),u=(r.Iit(o),r.Eit(a),r.Bit()),l=(u.UB(0),u.rU("noease"),u.xit(!0),u.Ltt(""),r.Bit());l.UB(t.time),l.rU("noease"),l.xit(!0),l.Ltt("");for(const c of t.hut){const f=r.Wit(),d=(f._et(c.sourceId),f.Aet(c.sourceArgs),f.Ret(c.property),f.Fet(c.type),f.Wet(NaN),f.Jet(NaN),f.Itt("default"),f.Ctt(c.resultMode),f.xit(!0),f.aht()),p=(d.jet(c.valueType),d.UB(0),d.rU(c.ease),d.xit(!0),d.mht(c.startValue),d.cht(c.startValue),f.aht());p.jet(c.valueType),p.UB(t.time),p.rU(c.ease),p.xit(!0),p.mht(c.endValue),p.cht(c.endValue),f.wtt()}return h}}static Sit(t,s){if(!isNaN(s))for(const i of t.gK())i.Sit(s)}rut(t,s){return this.Rat||(this.Rat=m.lr(self.eU,this,t,s)),this.Rat}}}{const Un=self.ks;Un.kat=class extends Un.gtt{constructor(t,s){super(t,s),this.nut=null,this.out=null}static dv(t,s){return Un.lr(Un.kat,t,s)}aut(){1===this.Yst.length?this.nut=this.Yst[0]:(this.nut=this.Yst[0],this.out=this.Yst[1])}Hst(){for(const t of this.Lst.Kst().Xst())this.Yst.push(Un.uut.dv(this,t));this.aut()}Wit(){const t=this.Lst.Kst(),s=t.Qit(),i=Un.uut.dv(this,s);return this.Yst.push(i),this.aut(),i}zX(){if(this.sit(),this.iit()||!this.Ttt()){const t=this.tit(),s=t.Ntt(),i=s?0:this.Tit();for(const h of this.Yst)h.zX(i),0===this.qst&&1===h.Lit()&&(this.qst=1),0===this.XZ&&1===h.BX()&&(this.XZ=1);this.Zst=0;const e=this.Yst.some(t=>t.ust());e&&(this.Zst=1),this.Wst=this.Oit(i),this.zst=!1,this.Bst=!1,this.Yc(i)}}fst(){}Yc(t,s=0,i=!1,e=!1,h,r=!1,n=!1){if(this.kst||this.nU(),this.kst){const o=!this.kst.l6();return o&&(!r||!this.QF().U8())&&((this.out?(this.nut.Yc(t,i,e,n),this.out):this.nut).Yc(t,i,e,n),void(0!==this.nut.Lit()&&(this.Fst||(this.Fst=this.kst.RR()),this.Fst)&&this.Fst.a5()))}}pst(){}E7(t){super.E7(t),this.aut()}}}{const Wn=self.ks;Wn.uut=class extends Wn.$st{constructor(t,s){super(t,s),this.lut=!1}static dv(t,s){return Wn.lr(Wn.uut,t,s)}Yc(t,s=!1,i=!1,e=!1){let h,r;if(this.lut)h=this.uet[0],r=this.uet[1];else{if(s)h=this.oet.qet(t,this.net);else{if(this.fet){const n=this.tit(),o=this.fet.SK(),a=this.fet.gN(),u=o?o.gN():n.QB();(t<=a||u<=t)&&(this.fet=this.oet.qet(t,this.net))}else this.fet=this.oet.qet(t,this.net);h=this.fet}r=h.SK()}this.aet.Yc(t,h,r,s,i,e)}aht(){const t=this.net.cet(),s=t.uht();return this.fet=null,this.lut=this.Vet().length<=2,s}Yit(t){this.fet=null;const s=this.net.cet();s.lht(t),this.lut=this.Vet().length<=2}_7(){return{sourceAdapterJson:this.wtt()._7(),basic:this.lut}}E7(t){t&&(this.wtt().E7(t.sourceAdapterJson),this.lut=t.basic)}}}{const Qn=self.ks,Jn=self.Tc;Qn.Hc=class extends Qn.nr{constructor(t,s=!0){super(),this.mr=t[0],this.cut=t[2],this.fut=[];for(const i of t[1]){const e=Qn.dut.dv(this,i);this.fut.push(e)}for(let t=0;t<this.fut.length;t++){const h=this.fut[t],r=this.fut[t+1],n=this.fut[t-1];h.Kot(r),h.fat(n)}this.mut=new Map,this.gut=new Map,this.yut(),s&&Jn.Zc(this.mr,(t,s,i,e)=>this.Yc(t,s,i,e),null,{transition:this})}static dv(t){return Qn.lr(Qn.Hc,t)}cr(){for(const t of this.fut)t.cr();Qn.Wn(this.fut),this.fut=null,this.mut.clear(),this.mut=null,this.gut.clear(),this.gut=null}qc(t){this.cut=!!t}Mut(t){const s=this.gut.get(t);if(s)return s;for(const i of this.fut)if(i.wut()===t)return this.gut.set(t,i),i}Sut(s){for(let t=this.fut.length-1;0<=t;t--){const i=this.fut[t],e=i.wut();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const h=t.TK();if(!h)break;if(h.wut()!==t.wut())break;t=h}return t}}}}Yc(t,s,i,e){let h=t/e;if(this.cut){const M=this.Mut(0),w=this.Mut(1),S=s+(s+i)*M.Tut(),T=(s+i)*w.Tut(),b=T-S;return 0===e?S+b:Jn.Kc(t,S,b,e)}0===e&&(h=1);let r=this.Sut(h),n=r.SK();if(!n){const v=r.TK(),x=r;r=v,n=x}const o=n.wut()-r.wut(),a=Qn.Mr(h,r.wut(),n.wut(),0,o);if(r.but()||0==o){const G=s+(s+i)*r.Tut(),I=(s+i)*n.Tut(),C=I-G;return 0==o?1===a?G+C:G:Jn.Kc(a,G,C,o)}let u=r.wut(),l=r.Tut(),c=r.wut()+r.vut(),f=r.Tut()+r.xut(),d=n.wut()+n.Gut(),p=n.Tut()+n.Iut(),m=n.wut(),g=n.Tut(),y=Jn.kc("spline")(a,u,l,c,f,d,p,m,g,this.mut.get(r));return(1-(y+=r.Tut()))*s+y*(s+i)}yut(){this.mut.clear();for(let t=0;t<this.fut.length-1;t++){const s=this.fut[t];if(s.not()){const i=s,e=this.fut[t+1];if(e.oot()){const h=i.wut(),r=i.wut()+i.vut(),n=e.wut()+e.Gut(),o=e.wut();this.mut.set(i,Jn.$c(h,r,n,o))}}}}}}{const Vn=self.ks;Vn.dut=class extends Vn.nr{constructor(t,s){super(),this.Cut=t,this._ut=s[0],this.Eut=s[1],this.Dut=s[2],this.Aut=s[3],this.Nut=s[4],this.Lut=s[5],this.bat=s[6],this.xat=s[7],this.Out=s[8],this.Xot=null,this.lat=null}cr(){this.Cut=null}static dv(t,s){return Vn.lr(Vn.dut,t,s)}Kot(t){this.Xot=t}SK(){return this.Xot}fat(t){this.lat=t}TK(){return this.lat}wut(){return this._ut}Tut(){return this.Eut}vut(){return this.Dut}xut(){return this.Aut}Gut(){return this.Nut}Iut(){return this.Lut}not(){return this.bat}oot(){return this.xat}but(){return"linear"===this.Out}Rut(){return"cubic"===this.Out}}}{const Yn=self.ks;Yn.Put=class extends Yn.nr{constructor(t){super(),this.pf=t,this.kut=[]}cr(){for(const t of this.kut)t.cr();Yn.Wn(this.kut),this.kut=null}dv(t){this.kut.push(Yn.Hc.dv(t))}}}{const Hn=self.ks;Hn.Fut=class extends Hn.nr{constructor(t){super(),this.pf=t,this.jut=null,this.zut=null,this.UZ=t=>this.WZ(t.Wz)}cr(){if(this.KZ(),this.jut){for(const t of this.jut.values())t.clear();this.jut.clear()}this.jut=null,this.pf=null}dv(t){if(this.jut||(this.jut=new Map),t){const s=t[0][16],i=s[0],e=t[1],h=(this.jut.has(e)||this.jut.set(e,new Map),this.jut.get(e));h.set(i,t)}}$Z(){const t=this.pf.Hf();t&&t.addEventListener("instancedestroy",this.UZ)}KZ(){const t=this.pf.Hf();t&&t.removeEventListener("instancedestroy",this.UZ)}But(){return!!this.jut&&0!==this.jut.size}Uut(t,s){let i;if(i=t instanceof Hn.Wut?t.LO():t,this.jut.has(i)){const e=this.jut.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}Qut(t,s){this.zut||(this.zut=new WeakMap),this.zut.has(t)||this.zut.set(t,s)}Jut(t){if(!this.zut)return"";const s=this.zut.get(t);return s||""}WZ(t){this.zut&&this.zut.has(t)&&this.zut.delete(t)}}}{const qn=self.ks;qn.Vut=class{constructor(t){this.pf=t,this.Yut=new qn.Hut}cr(){this.Yut.cr(),this.Yut=null,this.pf=null}iP(){return this.pf}dv(t){this.Yut.Mc(t)}qut(t){return this.Yut.ei(t)}Zut(){return this.Yut.Zut()}}}{const g=self.ks;g.Xut=class{constructor(t,s,i,e,h,r,n){this.pf=h.iP(),this.Kut=h,this.$ut=t,this.tlt=i,this.slt=e,this.iy=s,this.vZ=r,this.ilt=n??r.nU().hj(),this.elt(),this.hlt=this.nlt?.rlt()??-1,this.olt=[],this.ult=null,this.llt=NaN,this.clt=null,this.flt=null,this.dlt=null,this.plt="",this.mlt=null,this.glt="",this.ylt="",this.Mlt=0,this.wlt=!1,this.Z$=!1}cr(){this.Z$||(g.Wn(this.olt),this.olt=null,this.pf=null,this.Kut=null,this.slt=null,this.vZ=null,this.ult=null,this.llt=NaN,this.clt&&this.clt.clear(),this.clt=null,this.flt=null,this.dlt=null,this.plt="",this.mlt=null,this.glt="",this.ylt="",this.Z$=!0)}dr(){return this.Z$}Slt(){return this.Kut}iP(){return this.pf}hf(){return this.$ut}Tlt(){return this.slt}RB(){return this.iy}dX(){return this.vZ||(this.vZ=this.pf.DR(this.ilt).Nz()),this.vZ}blt(){return this.vlt(this.hlt)}xlt(){const t=this.blt();return t?t.RB():""}Glt(){const t=this.blt();return t?t.XB():[]}Ilt(t){const s=this.Glt();if(!s)return!1;if(!s.length)return!1;const i=g.Xut.Ott(t);return!(!i||!i.length)&&i.every(g.Xut.Ptt,s)}Clt(t,s){const i=this.Glt();if(!i)return!1;if(!i.length)return!1;const e=g.Xut.Ott(t);return!(!e||!e.length)&&e.every(t=>g.Xut._lt.call(i,t,s))}static Ptt(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static Ott(t){return t.trim().split(" ")}static _lt(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>g.compare(t.trim(),i,s.trim()))}Elt(t){const s=this.blt();if(s){if(g.pe(t)){const i=s.Dlt(),e=i?i[t]:void 0;if(g.pe(e))return this.vlt(e)}if("string"==typeof t)for(const h of s.Dlt()){const r=this.vlt(h);if(r.BB(t))return this.vlt(r.rlt())}}}Alt(t){const s=this.Elt(t);return s?s.RB():""}Nlt(t){const s=this.Elt(t);return s?s.XB():""}Llt(t){const s=this.blt();if(!s)return-1;const i=s.Dlt();if(!i)return-1;const e=this.Elt(t);return e?i.indexOf(e.rlt()):-1}Olt(){const t=this.blt();if(!t)return 0;const s=t.Dlt();return s?s.length:0}vlt(t){return this.slt.vlt(t)}m0(){const t=this.Rlt();t.Plt(!0)}Plt(t){if(this.klt()){for(const[s,i]of this.klt().entries())i.Plt(!1);this.klt().clear()}if(this.clt=null,this.ult=null,this.Flt=null,this.flt=null,this.plt="",this.mlt=null,this.glt="",this.ylt="",this.olt=[],t){this.Kut.jlt(this);const e=this.nlt.rlt();e!==this.hlt&&this.zlt(e)}else this.hlt=this.nlt.rlt()}Blt(){const t=this.slt.vlt(this.hlt);return t?t.Wlt().Ult():0}Qlt(t){const s=this.Jlt(t);return s?s.hf():""}Vlt(t){let s;return g.pe(t)&&(s=this.Jlt(t)),"string"==typeof t&&(s=this.Ylt(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Let():""}Hlt(t){let s;if(g.pe(t)&&(s=this.Jlt(t)),s="string"==typeof t?this.Ylt(t):s){const i=s.qlt();g.pe(i)&&(this.olt.push(this.hlt),this.zlt(i))}}Zlt(t){const s=this.slt.Xlt(t);if(s){const i=this.slt.vlt(s.rlt());i&&(this.olt.push(this.hlt),this.zlt(i.rlt()))}}Klt(){const t=this.olt.pop();g.pe(t)?this.zlt(t):this.$lt()&&(this.Kut.jlt(this.$lt(),!0,!1,!1),this.$lt().zlt(this.tct()),this.Rlt().sct(this.$lt()))}ict(t){const s=this.blt();if(s){s.rlt();const i=this.Elt(t);i&&(this.olt.push(this.hlt),this.zlt(i.rlt()))}}ect(s){if(g.pe(s)){const t=this.slt.vlt(this.hlt),i=t.Wlt().hct();return!!i[s]}if("string"==typeof s){const e=this.slt.vlt(this.hlt),h=e.Wlt().hct();for(let t=0;t<h.length;t++)if(h[t].hf()===s)return!0}return!1}rct(){this.wlt=!0}nct(){return 0<this.Mlt}oct(){this.Mlt++}uct(){this.Mlt--,0===this.Mlt&&this.wlt&&this.Kut.lct(this)}zlt(t){const i=this.hlt,s=this.dX().nU();if(this.oct(),this.Kut.cct(this),this.pf.Nj(g.Tq.Flowchart.wq.OnBeforeAnyNodeChange,s),this.pf.Nj(g.Tq.Flowchart.wq.OnBeforeTaggedNodeChange,s),this.pf.Nj(g.Tq.Flowchart.wq.OnBeforeAnyNodeChangeInFlowchart,s),this.pf.Nj(g.Tq.Flowchart.wq.OnBeforeTaggedNodeChangeInFlowchart,s),this.hlt=t,this.pf.Nj(g.Tq.Flowchart.wq.OnAnyNodeChange,s),this.pf.Nj(g.Tq.Flowchart.wq.OnTaggedNodeChange,s),this.pf.Nj(g.Tq.Flowchart.wq.OnAnyNodeChangeInFlowchart,s),this.pf.Nj(g.Tq.Flowchart.wq.OnTaggedNodeChangeInFlowchart,s),this.Kut.fct(),this.uct(),!this.dr()){const e=this.vlt(this.hlt);if("reference"===e.xx()){const h=e.dct();if(this.pct(e)){this.olt.pop();const r=this.mct(e),n=(this.Kut.jlt(r,!0,!0,!1),r.gct(this,i),this.Rlt());n.sct(r)}else{const o=e.yct();if(h){this.olt.pop();let s=e.Mct();if(s){let t=this.Kut.wct(s);for(;t;)s=g.ip(s),t=this.Kut.wct(s)}else{s=h+"-ref";let t=this.Kut.wct(s);for(;t;)s=g.ip(s),t=this.Kut.wct(s)}const a=this.Kut.Sct(h,o,s,this.vZ,!0),u=(a.gct(this,i),this.Tct(e,a),this.Rlt());a.bct(u),u.sct(a)}}}}}Jlt(t){const s=this.slt.vlt(this.hlt);if(!s)return null;const i=s.Wlt().hct();if(!i)return null;const e=i[t];return e||null}Ylt(t){const s=this.slt.vlt(this.hlt);if(!s)return null;const i=s.Wlt().vct(t);return i||null}elt(s){if("number"==typeof s){let t=this.vlt(s);t=t||this.slt.xct(),this.nlt=t}else{let t=this.slt.Xlt(this.tlt);t=t||this.slt.xct(),this.nlt=t}}_7(){return this.wlt?null:{flowchartName:this.$ut,flowchartTag:this.iy,startNodeTag:this.tlt,currentNodeId:this.hlt,previousNodeIds:this.olt,pluginUID:this.vZ.nU().hj(),reference:{previousFlowchartTag:this.$lt()?this.$lt().RB():"",previousStartNodeId:g.pe(this.tct())?this.tct():NaN,referencesJson:this.Gct(),currentReferenceFlowchartTag:this.Ict()?this.Ict().RB():"",rootFlowchartTag:this.Rlt()?this.Rlt().RB():""}}}Gct(){if(!this.Cct())return null;const t=[];for(const[s,i]of this.klt().entries())t.push({flowchartElementId:s.rlt(),flowchartStateTag:i.RB()});return t.length?t:null}E7(t){if(t){if(this.$ut=t.flowchartName,this.iy=t.flowchartTag,this.tlt=t.startNodeTag,this.hlt=t.currentNodeId,this.olt=t.previousNodeIds,this.ilt=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.plt=s.previousFlowchartTag,this.llt=s.previousStartNodeId,this.mlt=s.referencesJson,this.glt=s.currentReferenceFlowchartTag,this.ylt=s.rootFlowchartTag}this.elt()}}$lt(){return"string"==typeof this.plt&&this.plt&&(this.ult=this.Kut.wct(this.plt),this.plt=""),this.ult}tct(){return this.llt}gct(t,s){this.ult=t,this.llt=s}Ict(){return"string"==typeof this.glt&&this.glt&&(this.flt=this.Kut.wct(this.glt),this.glt=""),this.flt}sct(t){this.flt=t,this.flt===this&&(this.flt=null)}Rlt(){return"string"==typeof this.ylt&&this.ylt&&(this.dlt=this.Kut.wct(this.ylt),this.ylt=""),this.dlt||this}bct(t){this.dlt=t}Cct(){return this._ct(),!!this.clt}pct(t){return this._ct(),this.clt&&this.clt.has(t)}_ct(){if(this.mlt){this.clt&&this.clt.clear(),this.clt||(this.clt=new Map);for(const t of this.mlt){const s=this.Kut.wct(t.flowchartStateTag),i=s.vlt(t.flowchartElementId);this.clt.set(i,s)}this.mlt=null}}klt(){return this._ct(),this.clt}mct(t){return this._ct(),this.clt.get(t)}Tct(t,s){this.clt||(this.clt=new Map),this.clt.set(t,s)}}}{const Zn=self.ks;Zn.Ect=class{constructor(t){this.pf=t,this.Dct=new Map,this.Act=null,this.Nct=[],this.Lct=()=>this.YZ(),this.Oct=null}cr(){Zn.Wn(this.Nct),this.Nct=null,this.Dct.clear(),this.Dct=null,this.Act=null,this.pf=null,this.Oct=null}iP(){return this.pf}Sct(t,s,i,e,h,r){const n=this.pf.Slt().qut(t);if(n){if(!this.Dct.has(i)){const o=new Zn.Xut(t,i,s,n,this,e,r);return this.Dct.set(i,o),h&&this.jlt(o,!0),o}{const a=this.Dct.get(i);a&&this.lct(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}lct(t){if(t.rct(),!t.nct()){const s=t.RB();this.Dct.delete(s),t.cr(),this.Act===t&&(this.Act=null)}}Rct(t){t.m0()}wct(t){return this.Dct.get(t)}cct(t){this.Nct.push(t)}fct(){this.Nct.pop()}jlt(t,s=!1,i=!1,e=!0){if(e){const h=t.Ict();t=h||t}t!==this.Act&&(this.Pct(),this.kct(t,s,i))}Fct(t){return"string"==typeof t?this.wct(t):this.Nct.length?this.Nct[this.Nct.length-1]:this.Act}Pct(){if(this.Act&&!this.Act.dr()){const t=this.Act.dX().nU();this.Act.oct(),this.cct(this.Act),this.pf.Nj(Zn.Tq.Flowchart.wq.OnBeforeFlowchartChange,t),this.fct(),this.Act.uct()}}kct(t,s=!1,i=!1){if(this.Act=t,this.Act&&!this.Act.dr()){const e=this.Act.dX().nU();this.Act.oct(),this.cct(this.Act),this.pf.Nj(Zn.Tq.Flowchart.wq.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.Act.elt(i),s&&(this.pf.Nj(Zn.Tq.Flowchart.wq.OnAnyNodeChange,e),this.pf.Nj(Zn.Tq.Flowchart.wq.OnTaggedNodeChange,e)),this.fct(),this.Act.uct()}}_7(){return{flowchartJsonObjects:[...this.Dct.values()].map(t=>t._7()),currentFlowchartTag:this.Act?this.Act.RB():null}}E7(t){if(t){this.Oct=t;const s=new Map;for(const i of this.Oct.flowchartJsonObjects){const e=i.flowchartTag;if(this.Dct.has(e)){const h=this.Dct.get(e);h.E7(i),s.set(e,h)}else{const r=this.Sct(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);r.E7(i),s.set(i.flowchartTag,r)}}for(const[n,o]of this.Dct.entries())s.has(n)||o.cr();this.Dct.clear(),this.Dct=s,this.pf.uq()?this.pf.Hf().addEventListener("afterload",this.Lct):this.YZ()}}YZ(){this.pf.Hf().removeEventListener("afterload",this.Lct);const t=this.Dct.get(this.Oct.currentFlowchartTag);t&&this.jlt(t,!0),this.Oct=null}}}{const Xn=self.ks;Xn.Hut=class{constructor(){this.jct=new Map}cr(){for(const t of this.jct.values())t.cr();this.jct.clear(),this.jct=null}Mc(t){const s=new Xn.zct(t),i=s.hf();this.jct.set(i,s)}ei(t){return this.jct.get(t)}Zut(){return!!this.jct.size}static Bct(t,s,i,e){if(s)for(const h of s){const r=new i(h,e);t.push(r)}}}}{const Kn=self.ks;Kn.zct=class{constructor(t){this.mr=t[0],this.Uct=new Kn.Wct(t[1],this)}cr(){this.Uct.cr(),this.Uct=null}Qct(){return this.Uct}vlt(t){return this.Uct.vlt(t)}Xlt(t){return this.Uct.Xlt(t)}xct(){return this.Uct.xct()}hf(){return this.mr}}}{const $n=self.ks;class to{constructor(t,s){this.Uct=s,this.vf=t[7],this.Jct=t[0],this.iy=t[1],this.iy?this.htt=this.iy.trim().split(" ").map(t=>t.trim()):this.htt=[],this.Vct=t[2],this.Yct=null,this.Hct=null,"dictionary"===this.vf&&(this.Yct=t[3],this.Hct=t[4]),this.qct=t[6],this.Zct=null,this.Xct=null,this.Kct=null,"reference"===this.vf&&(this.Zct=t[8],this.Xct=t[9],this.Kct=t[10]),this.$ct=new $n.tft(t[5],this)}cr(){this.Uct=null}Qct(){return this.Uct}Wlt(){return this.$ct}rlt(){return this.Jct}RB(){return this.iy}XB(){return this.htt}BB(t){if(!this.htt)return!1;if(!this.htt.length)return!1;const s=$n.Xut.Ott(t);return!(!s||!s.length)&&s.every($n.Xut.Ptt,this.htt)}ift(){return this.qct}eft(t){this.qct=!!t}hft(){if("dictionary"===this.vf)return!0;if("reference"===this.vf)return!1;throw new Error("unexpected flowchart node type: "+this.vf)}Dlt(){return this.Vct}rft(){return this.Yct}nft(){return this.Hct}xx(){return this.vf}dct(){return this.Zct}yct(){return this.Xct}Mct(){return this.Kct}}$n.Wct=class{constructor(t,s){this.slt=s,this.oft=[],this.aft=new Map,this.uft=new Map,this.lft=null,$n.Hut.Bct(this.oft,t,to,this);for(const i of this.oft){const e=i.rlt(),h=i.RB(),r=i.XB(),n=i.ift();if(this.aft.set(e,i),h)for(const a of r)this.uft.has(a)||this.uft.set(a,new Set),this.uft.get(a).add(i);n&&(this.lft=i);const o=i.Wlt();for(const u of o.cft()){const l=u.rlt();this.aft.set(l,u)}}this.lft||this.fft()}cr(){this.slt=null;for(const t of this.oft)t.cr();$n.Wn(this.oft),this.oft=null}Tlt(){return this.slt}vlt(t){return this.aft.get(t)}Xlt(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.uft.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}xct(){return this.lft}*dft(){for(const t of this.oft)yield t}fft(){let t=0;for(const s of this.dft())s.ift()&&t++;if(0===t){for(const i of this.dft())if(i.hft()&&!i.ift())return void i.eft(!0)}else{if(1===t)return;if(1<t){let t=!0;for(const e of this.dft())e.hft()&&(e.ift()&&t?t=!1:e.ift()&&!t&&e.eft(!1))}}for(const h of this.dft())if(h.hft()&&h.ift())return void(this.lft=h)}}}{const so=self.ks;class io{constructor(t,s){this.$ct=s,this.Jct=t[0],this.mr=t[1],this.Jht=t[2],this.pft=t[3]}cr(){this.$ct=null}Wlt(){return this.$ct}rlt(){return this.Jct}hf(){return this.mr}Let(){return this.Jht}qlt(){return this.pft}}so.tft=class{constructor(t,s){this.mft=s,this.gft=[],this.yft=new Map,so.Hut.Bct(this.gft,t,io,this);for(const i of this.gft)this.yft.set(i.hf(),i)}cr(){this.mft=null;for(const t of this.gft)t.cr();so.Wn(this.gft),this.gft=null}Mft(){return this.mft}Ult(){return this.gft.length}hct(){return this.gft}vct(t){return this.yft.get(t)}*cft(){for(const t of this.gft)yield t}}}{const eo=self.ks;eo.wft=class extends eo.nr{constructor(t){super(),this.Sft=t,this.Tft=[],this.Tft.push(eo.lr(eo.bft,this)),this.ty=0,this.vft=this.Tft[0]}cr(){for(const t of this.Tft)t.cr();eo.Wn(this.Tft),this.vft=null,this.Sft=null}QF(){return this.Sft}q4(){return this.vft}xft(){return this.Tft[this.ty-1]}hc(){this.q4().hc()}Gft(){const t=this.Tft,s=++this.ty;if(s===t.length){const i=eo.lr(eo.bft,this);t.push(i),this.vft=i}else{const e=t[s];e.m0(),this.vft=e}}Ift(){const t=this.Tft,s=++this.ty,i=(s===t.length&&t.push(eo.lr(eo.bft,this)),t[s]);i.O0(t[s-1]),this.vft=i}cW(){this.vft=this.Tft[--this.ty]}Cft(i){const e=this.Tft;for(let t=0,s=e.length;t<s;++t)e[t].Cft(i)}}}{const ho=self.ks;ho.bft=class extends ho.nr{constructor(t){super(),this.Tft=t,this.Sft=this.Tft.QF(),this._ft=this.Sft.iP().C3(),this.Eft=!0,this.$J=[],this.Dft=[]}cr(){this.Aft(),this.Tft=null,this.Sft=null,this._ft=null}Aft(){ho.Wn(this.$J),ho.Wn(this.Dft)}QF(){return this.Sft}Nft(){return this.Eft}Lft(){return this.Eft?!!this.Sft.X4():!!this.$J.length}H4(){return this.Eft?this.Sft.H4():this.$J}Oft(){return!!this.Dft.length}Rft(){return this.Dft}Pft(){const t=this.H4();return t.length?t:this.Dft}m0(){this.Eft=!0,ho.Wn(this.Dft)}hc(){this.Eft=!0}O0(t){t.Nft()?this.m0():(this.Eft=!1,ho.Yn(this.$J,t.$J),ho.Wn(this.Dft))}kft(t){this.$J.push(t)}Fft(t){this.Dft.push(t)}jft(t){this.Eft=!!t}zft(){return this.$J}Bft(){return this.Dft}Uft(t){this.Eft=!1,ho.Wn(this.$J),this.$J.push(t)}Wft(t){this.Eft=!1,ho.Yn(this.$J,t)}Qft(t){this.Eft=!1,ho.Wn(this.$J);for(const s of t)this.$J.push(s)}Jft(t,s){for(const i of s)t.has(i)||this.Dft.push(i)}Vft(t){for(const s of t)this.$J.push(s);ho.Kn(this.Dft,t)}Yft(){ho.Wn(this.Dft)}Hft(t){if(t)if(this._ft.K6().S3().qft()){this.Nft()&&(ho.Wn(this.$J),ho.Yn(this.Dft,t.QF().H4()),this.Eft=!1);const s=this.Dft.indexOf(t);-1!==s&&(this.$J.push(this.Dft[s]),this.Dft.splice(s,1))}else this.Uft(t)}Cft(t){ho.Kn(this.$J,t),ho.Kn(this.Dft,t)}}}{const ro=self.ks;ro.Zft=class extends ro.nr{constructor(t){super(),this.Xft=t,this.pf=this.Xft.iP(),this.Tft=[],this.Tft.push(ro.lr(ro.Kft,this,null)),this.ty=0,this.$ft=[]}cr(){for(const t of this.Tft)t.cr();ro.Wn(this.Tft),ro.Wn(this.$ft),this.Xft=null,this.pf=null}d3(){return this.Xft}iP(){return this.pf}K6(){return this.Tft[this.ty]}t0t(){return this.Tft}s0t(){return this.ty}tW(t){const s=this.Tft,i=++this.ty;if(i===s.length){const e=ro.lr(ro.Kft,this,t);return s.push(e),e}{const h=s[i];return h.m0(t),h}}cW(){--this.ty}i0t(t){this.$ft.push(t)}e0t(){this.$ft.pop()}I3(){const t=this.$ft;return 0===t.length?null:t.at(-1)}}}{const no=self.ks;no.Kft=class extends no.nr{constructor(t,s){super(),this.Tft=t,this.pf=this.Tft.iP(),this.h0t=s,this.r0t=0,this.n0t=0,this.o0t=!1,this.a0t=!1,this.u0t=null,this.l0t=0,this.c0t=0,this.f0t=null}cr(){this.m0(null),this.Tft=null,this.pf=null}m0(t){this.h0t=t,this.r0t=0,this.n0t=0,this.o0t=!1,this.a0t=!1,this.f0t=null}d0t(t,s){this.h0t=t,this.r0t=0,this.n0t=s}p0t(){this.r0t=0,this.n0t=0}S3(){return this.h0t}m0t(t){this.h0t=t}g0t(){return this.r0t}y0t(t){this.r0t=t}M0t(){return this.n0t}w0t(t){this.n0t=t}S0t(t){this.o0t=!!t}T0t(){return this.o0t}b0t(t){this.a0t=!!t}v0t(){return this.a0t}x0t(t){this.u0t=t}G0t(){return this.u0t}I0t(t,s){this.l0t=t,this.c0t=s}_3(){return this.l0t}E3(t){this.c0t=t}C0t(){return this.c0t}_0t(){const t=this.h0t;return!!t.E0t()||this.r0t<t.D0t()-1&&!!t.X6().length}A0t(t){this.f0t=t}N0t(){return this.f0t}}}{const oo=self.ks;oo.L0t=class extends oo.nr{constructor(t){super(),this.Xft=t,this.pf=this.Xft.iP(),this.Tft=[],this.ty=-1,this.vft=null,this.O0t=[]}cr(){oo.Wn(this.Tft),this.Xft=null,this.pf=null}R0t(t){this.O0t=t;const s=this.O0t.slice(0);this.Tft.push(s),this.ty=0,this.vft=s}d3(){return this.Xft}iP(){return this.pf}P0t(){return this.vft}tW(){const t=++this.ty,s=this.Tft;t===s.length?s.push(this.O0t.slice(0)):oo.Yn(s[t],this.O0t),this.vft=s[t]}cW(){this.vft=this.Tft[--this.ty]}}}{const ao=self.ks;ao.k0t=class extends ao.nr{constructor(t){super(),this.Xft=t,this.pf=this.Xft.iP(),this.Tft=[],this.ty=-1}cr(){ao.Wn(this.Tft),this.Xft=null,this.pf=null}d3(){return this.Xft}iP(){return this.pf}F0t(){return 0<=this.ty}P0t(){return this.Tft[this.ty]}tW(){if(++this.ty,this.ty===this.Tft.length){const t=ao.lr(ao.j0t,this);return this.Tft.push(t),t}{const s=this.Tft[this.ty];return s.m0(),s}}cW(){--this.ty}z0t(s){const i=this.Tft;for(let t=this.ty;0<=t;--t){const e=i[t];if(e.hf()===s)return e}return null}B0t(){return this.Tft.slice(0,this.ty+1)}}}{const uo=self.ks;uo.j0t=class extends uo.nr{constructor(t){super(),this.U0t=t,this.mr="",this.ty=0,this.W0t=!1,this.Q0t=NaN}m0(){this.mr="",this.ty=0,this.W0t=!1,this.Q0t=NaN}iW(t){this.mr=t}hf(){return this.mr}aW(t){this.ty=t}LO(){return this.ty}jB(){this.W0t=!0}lW(){return this.W0t}J0t(t){this.Q0t=t}V0t(){return this.Q0t}}}{const lo=self.ks;lo.Y0t=class extends lo.nr{constructor(){super(),this.Tft=[],this.ty=-1}cr(){lo.Wn(this.Tft)}P0t(){return this.Tft[this.ty]}tW(){if(++this.ty,this.ty!==this.Tft.length)return this.Tft[this.ty];{const t=[];return this.Tft.push(t),t}}cW(){--this.ty}}}{let t=function(t,s){return t.LO()-s.LO()},r=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,r;const co=self.ks;co.H0t=class extends co.nr{constructor(t){super(),this.pf=t,this.q0t=[],this.Z0t=new Map,this.X0t=[],this.K0t=new Map,this.$0t=new Map,this.tdt=new Map,this.sdt=new Map,this.idt=new Map,this.edt=new Map,this.hdt=0,this.rdt=[],this.ndt=[],this.odt=[],this.adt=new Map,this.udt=new Map,this._ft=co.lr(co.Zft,this),this.ldt=co.lr(co.L0t,this),this.U0t=co.lr(co.k0t,this),this.cdt=[],this.fdt=[],this.ddt=[],this.pdt=0,this.mdt=0,this.gdt=0,this.ydt=[],this.Mdt=[],this.wdt=[],this.Sdt=new Map,this.Tdt=new Map,self.c3_callFunction=(t,s)=>this.bdt(t,s)}cr(){this.Nq(),this._ft.cr(),this._ft=null,this.ldt.cr(),this.ldt=null,co.Wn(this.fdt),co.Wn(this.ddt),this.pf=null,co.Wn(this.q0t),this.Z0t.clear()}dv(t){const s=co.lr(co.vdt,this,t);this.q0t.push(s),this.Z0t.set(s.hf().toLowerCase(),s)}xdt(t){this.cdt.push(t)}Gdt(){for(const t of this.udt.values())t.Idt();for(const s of this.adt.values())s.Gdt();for(const i of this.udt.values())i.Gdt();for(const e of this.q0t)e.Gdt();for(const h of this.q0t)h.X9();for(const r of this.cdt)r.Gdt(!1);co.Wn(this.cdt),this.ldt.R0t(this.odt)}iP(){return this.pf}Z9(t){return this.Z0t.get(t.toLowerCase())||null}Cdt(t){this.X0t.push(t),this.K0t.set(t._dt(),t)}Edt(t){this.$0t.set(t.fY(),t)}Ddt(t){this.tdt.set(t.fY(),t)}Adt(t){this.sdt.set(t.fY(),t)}Ndt(t){switch(t.Ldt()){case 0:this.adt.set(t.Odt().toLowerCase(),t);break;case 1:this.udt.set(t.Odt().toLowerCase(),t)}}Rdt(t){this.edt.set(t.fY(),t),(t.U8()?this.rdt:this.ndt).push(t)}Pdt(i){2<=i.length&&i.sort(t);let e=this.idt.get(i.length);e||(e=[],this.idt.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const h=e[t];if(r(i,h))return h}return e.push(i),i}kdt(t){return this.odt.push(t.Fdt()),this.hdt++}C3(){return this._ft}jdt(){return this.C3().K6()}S3(){return this.jdt().S3()}zdt(){const t=this.jdt(),s=t.S3();return s.Bdt(t.g0t())}Udt(){const t=this.jdt(),s=t.S3();return s.Wdt(t.M0t())}Qdt(){return this.ldt}sW(){return this.U0t}Jdt(t){const s=[];for(t=t.Vdt();t;)co.Zh(s,t.Ydt()),t=t.Vdt();return s}Hdt(t){const s={};for(const i of this.Jdt(t))s[i.qdt()]=i.Zdt();return Object.create(Object.prototype,s)}Xdt(t){return this.edt.get(t)||null}Kdt(t){return this.$0t.get(t)||null}$dt(t){return this.tdt.get(t)||null}t1t(t){return this.sdt.get(t)||null}m3(t){return this.adt.get(t.toLowerCase())||null}s1t(t,s){let i=this.udt.get((t.hf()+"."+s).toLowerCase());if(i)return i;if(!t.eY())for(const e of t.i1t())if(i=this.udt.get((e.hf()+"."+s).toLowerCase()))return i;return null}e1t(){return this.rdt}h1t(){return this.ndt}r1t(t){for(const s of this.rdt)s.n1t();if(t)for(const i of this.ndt)i.fb()&&i.n1t()}o1t(t){return this.K0t.get(t.toLowerCase())||null}a1t(t){const s=this.$0t.get(t);return s&&s.u1t()?s:null}l1t(){return this.X0t}c1t(){for(const t of this.X0t)t.f1t()}d1t(){for(const t of this.q0t)t.p1t()}m1t(t){this.d1t(),this.pdt++;for(const s of t.mZ()){const i=s.x9();i&&(this.pf.g1t(s),i.UI(),this.pf.y1t())}this.pdt--}async M1t(t){this.d1t(),this.pdt++;for(const s of this.w1t(t))await this.pf.S1t(s);this.pdt--}*w1t(t){for(const s of t.mZ()){const i=s.x9();i&&(this.pf.g1t(s),yield*i.T1t(),this.pf.y1t())}}b1t(t,s,i,e){let h=!1;if(!t.dR())return this.v1t(s,i,e);this.mdt++;for(const r of t.mZ()){const n=r.x9();if(n){this.pf.g1t(r);for(const a of n.x1t()){const u=a.b1t(s,i,e);h=h||u}const o=n.b1t(s,i,e);h=h||o,this.pf.y1t()}}return this.mdt--,h}*G1t(t,s,i,e){let h=!1;if(!t.dR())return this.v1t(s,i,e);this.mdt++;for(const r of t.mZ()){const n=r.x9();if(n){this.pf.g1t(r);for(const a of n.x1t()){const u=yield*a.G1t(s,i,e);h=h||u}const o=yield*n.G1t(s,i,e);h=h||o,this.pf.y1t()}}return this.mdt--,h}v1t(t,s,i){return this.fdt.push([t,s,i]),!1}I1t(t,s,i){let e=null,h=new Promise(t=>e=t);return this.ddt.push([t,s,i,e]),h}*C1t(){if(this.pf._1t())throw new Error("should not be in breakpoint");const t=this.pf.gR();for(;this.ddt.length;){const[s,i,e,h]=this.ddt.shift(),r=yield*this.G1t(t,s,i,e);h(r)}}async E1t(){for(const t of this.C1t())await this.pf.S1t(t)}D1t(t,i,e,h){let r=!1,s=t.dR(),n=s.x9();if(n){this.mdt++,this.pf.g1t(s);const o=n.x1t();for(let t=0,s=o.length;t<s;++t){const u=o[t].D1t(i,e,h);r=r||u}const a=n.D1t(i,e,h);return r=r||a,this.pf.y1t(),this.mdt--,r}}*A1t(t,i,e,h){let r=!1,s=t.dR(),n=s.x9();if(n){this.mdt++,this.pf.g1t(s);const o=n.x1t();for(let t=0,s=o.length;t<s;++t){const u=yield*o[t].A1t(i,e,h);r=r||u}const a=yield*n.A1t(i,e,h);return r=r||a,this.pf.y1t(),this.mdt--,r}}N1t(){return this.mdt}L1t(){return 0<this.N1t()}O1t(){return++this.mdt}R1t(){--this.mdt}P1t(){return 0<this.pdt}rk(){return this.P1t()||this.L1t()}bq(t){for(const[s,i,e]of this.fdt)this.b1t(t,s,i,e);co.Wn(this.fdt)}ek(t){t?this.gdt++:this.gdt--}KF(){return 0<this.gdt}k1t(i){for(let t=0,s=i.length;t<s;++t)i[t].F1t().hc()}j1t(i){for(let t=0,s=i.length;t<s;++t)i[t].F1t().Gft()}rW(i){for(let t=0,s=i.length;t<s;++t)i[t].F1t().Ift()}oW(i){for(let t=0,s=i.length;t<s;++t)i[t].F1t().cW()}T3(s){const i=new Set,e=this._ft.t0t(),h=this._ft.s0t();for(let t=0;t<=h;++t){const r=e[t].N0t();if(r)for(const n of r)s&&s.has(n)||i.add(n)}return i}z1t(t){const s=new Set([...t]),i=this.T3(s);if(0<i.size){for(const e of i)e.F1t().Gft();return[...i]}return null}B1t(){const t=co.lr(co.U1t,this);return this.ydt.push(t),t}W1t(){return this.ydt}Q1t(){if(this.ydt.length){let i=this.jdt(),e=!1;this.pdt++;for(let t=0,s=this.ydt.length;t<s;++t){const h=this.ydt[t];h.J1t()&&h.V1t(i),h.Y1t()&&(e=!0)}e&&(this.H1t(),i.m0(null)),this.pdt--}}async q1t(){if(this.ydt.length){let i=this.jdt(),e=!1;this.pdt++;for(let t=0,s=this.ydt.length;t<s;++t){const h=this.ydt[t];h.J1t()&&await h.Z1t(i),h.Y1t()&&(e=!0)}e&&(this.H1t(),i.m0(null)),this.pdt--}}H1t(){const t=co.Xn(this.ydt,t=>t.Y1t());for(const s of t)s.cr()}Nq(){for(const t of this.ydt)t.cr();co.Wn(this.ydt)}X1t(t){for(const s of this.ydt)s.Cft(t);for(const i of t){const e=this.Tdt.get(i);if(this.Tdt.delete(i),e)for(const{resolve:h}of e.K1t.values())h(!0)}}$1t(t){this.Mdt.push({promise:t,tpt:this.N1t()})}spt(){co.Wn(this.Mdt)}ipt(){const s=this.N1t();this.Mdt=this.Mdt.filter(t=>t.tpt<=s)}ept(){const t=Promise.all(this.Mdt.map(t=>t.promise));return this.Mdt=[],t}D3(t){const s=t.toLowerCase();this.wdt.push(s),this.pf.Nj(co.Tq.Sq.wq.hpt,null),this.wdt.pop();for(const e of this.pf.d3().W1t())e.rpt()&&e.npt()===s&&e.opt();const i=this.Sdt.get(s);i&&(i.resolve(),this.Sdt.delete(s))}N3(t){const i=t.toLowerCase(),s=this.Sdt.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.Sdt.set(i,{promise:t,resolve:s}),t}}apt(){if(0===this.wdt.length)throw new Error("not in a signal");return this.wdt.at(-1)}upt(t){let s=this.Tdt.get(t);return s||(s={lpt:[],K1t:new Map},this.Tdt.set(t,s)),s}Mj(t,s){const i=this.upt(t),e=s.toLowerCase();i.lpt.push(e),this.pf.Nj(t.F4().fpt().wq.cpt,t),i.lpt.pop();for(const r of this.pf.d3().W1t())r.dpt()&&r.npt()===e&&r.ppt(t);const h=i.K1t.get(e);h&&(h.resolve(!1),i.K1t.delete(e)),0===i.lpt.length&&0===i.K1t.size&&this.Tdt.delete(t)}wj(t,s){const i=this.upt(t),e=s.toLowerCase(),h=i.K1t.get(e);if(h)return h.promise;{let s=null,t=new Promise(t=>s=t);return i.K1t.set(e,{promise:t,resolve:s}),t}}mpt(t){const s=this.upt(t);if(s&&0!==s.lpt.length)return s.lpt.at(-1);throw new Error("not in a signal")}_7(){return{groups:this.gpt(),cnds:this.ypt(),acts:this.Mpt(),vars:this.wpt(),waits:this.Spt()}}E7(t){this.Tpt(t.groups),this.bpt(t.cnds),this.vpt(t.acts),this.xpt(t.vars),this.Gpt(t.waits)}gpt(){const t={};for(const s of this.l1t())t[s.fY().toString()]=s.Ipt();return t}Tpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.a1t(e);h&&h.Cpt(i)}}ypt(){const t={};for(const[s,i]of this.tdt){const e=i._7();e&&(t[s.toString()]=e)}return t}bpt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.tdt)r.E7(s.get(h)||null)}Mpt(){const t={};for(const[s,i]of this.sdt){const e=i._7();e&&(t[s.toString()]=e)}return t}vpt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.sdt)r.E7(s.get(h)||null)}wpt(){const t={};for(const[s,i]of this.edt)i._pt()||!i.U8()&&!i.fb()||(t[s.toString()]=i.Let());return t}xpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.Xdt(e);h&&h.mht(i)}}Spt(){return this.ydt.filter(t=>!t.Ept()).map(t=>t._7())}Gpt(t){this.Nq();for(const s of t){const i=co.U1t.Dpt(this,s);i&&this.ydt.push(i)}}Apt(){return[...this.pf.gR().mZ()].map(t=>t.x9()).filter(t=>t).map(t=>t.Npt())}Lpt(t){for(;t;){const s=t.Vdt();if(s instanceof co.Opt)return s;t=s}return null}bdt(t,s){Array.isArray(s)||(s=[]);const i=this.m3(t.toLowerCase());if(!i)return null;if(!i.tc())return i.g3();const e=i.Rpt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].Fdt()),s.length<e.length;);const h=i.M3();return h.b3(h.w3(),!1,i.x3(),i.g3(),...s)}}}{const fo=self.ks;fo.vdt=class extends fo.nr{constructor(t,s){super(),this.Xft=t,this.pf=t.iP(),this.mr=s[0],this.Ppt=[],this.kpt=new Map,this.Fpt=new Map,this.jpt=new Map,this.zpt=!1,this.Bpt=[],this.Upt=[],this.Wpt=new Set;for(const i of s[1])this.Qpt(i,null,this.Ppt);this.Jpt=this.pf.Bj()?{type:"sheet",name:this.mr,Vpt:0,children:[]}:null}cr(){this.Xft=null,this.pf=null}Qpt(t,s,i){switch(t[0]){case 0:case 3:this.Ypt(t,s,i);break;case 1:this.Hpt(t,s,i);break;case 2:this.qpt(t,s,i);break;case 4:this.Zpt(t,s);break;case 5:this.Xpt(t,s,i);break;case 6:this.Kpt(t,s);break;default:throw new Error("invalid event type")}}Ypt(t,s,i){const e=fo.$pt.dv(this,s,t);if(e.qft()){i.push(e);const h=e.tmt();for(let t=0,s=h.length;t<s;++t)h[t].smt()&&this.imt(e,t)}else e.smt()?this.imt(e,0):i.push(e)}Zpt(t,s){const i=fo.Opt.emt(this,s,t);this.Xft.Ndt(i)}Kpt(t,s){const i=fo.Opt.hmt(this,s,t);this.Xft.Ndt(i)}Hpt(t,s,i){const e=fo.rmt.dv(this,s,t);i.push(e)}qpt(t,s,i){const e=fo.nmt.dv(this,s,t);i.push(e)}Xpt(t,s,i){const e=fo.omt.dv(this,s,t);i.push(e)}imt(h,r){h.qft()||this.Xft.xdt(h);const n=h.Bdt(r),o=n.amt(),a=n.QF();if(n.umt()){let t=this.Fpt.get(a),s=(t||(t=new Map,this.Fpt.set(a,t)),n.lmt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([h,r])}else{let t=this.kpt.get(a),s=(t||(t={cmt:new Map,fmt:new Map},this.kpt.set(a,t)),n.Uz()),i,e=(s?(i=t.fmt.get(s))||(i=new Map,t.fmt.set(s,i)):i=t.cmt,i.get(o));e||(e=[],i.set(o,e)),e.push([h,r])}}Gdt(){const i=this.Ppt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof fo.$pt&&i[t+1].dmt();i[t].Gdt(e)}}pmt(t){this.Bpt.push(t)}X9(){fo.Wn(this.Upt),this.mmt(this),this.Wpt.clear()}mmt(t){const s=t.Upt,i=t.Wpt;for(const e of this.Bpt){const h=e.gmt();e.ymt()&&t!==h&&!i.has(h)&&(i.add(h),h.mmt(t),s.push(h))}}x1t(){return this.Upt}d3(){return this.Xft}iP(){return this.pf}hf(){return this.mr}Mmt(t,s){this.jpt.set(s,t)}wmt(t){return this.jpt.get(t)||null}p1t(){this.zpt=!1}UI(){if(!this.zpt){const t=this.pf,s=t.Smt(),i=s?performance.now():0,e=(this.zpt=!0,this.d3()),h=e.jdt();for(const r of this.Ppt)r.UI(h),e.k1t(r.X6()),e.spt(),t.ak();h.m0(null),s&&(this.Jpt.Vpt+=performance.now()-i)}}*T1t(){if(!this.zpt){this.zpt=!0;const t=this.pf,s=this.d3(),i=s.jdt();for(const e of this.Ppt)yield*e.T1t(i),s.k1t(e.X6()),s.spt(),t.ak();i.m0(null)}}b1t(e,h,r){if(!h)return this.Tmt(e,h,null,null);{let t=h.QF(),s=!1,i=this.Tmt(e,h,t,r);s=s||i;for(const n of t.i1t())i=this.Tmt(e,h,n,r),s=s||i}}Tmt(t,s,i,e){const h=this.kpt.get(i);if(!h)return!1;const r=e?h.fmt.get(e):h.cmt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,u]of n){const l=this.bmt(s,a,u);o=o||l}return o}*G1t(e,h,r){if(!h)return yield*this.vmt(e,h,null,null);{let t=h.QF(),s=!1,i=yield*this.vmt(e,h,t,r);s=s||i;for(const n of t.i1t())i=yield*this.vmt(e,h,n,r),s=s||i}}*vmt(t,s,i,e){const h=this.kpt.get(i);if(!h)return!1;const r=e?h.fmt.get(e):h.cmt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,u]of n){let t;t=a.xmt()?this.bmt(s,a,u):yield*this.Gmt(s,a,u),o=o||t}return o}D1t(t,s,i){const e=s.QF(),h=this.Fpt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let t=0,s=n.length;t<s;++t){const a=n[t],u=this.bmt(null,a[0],a[1]);o=o||u}return o}*A1t(t,s,i){const e=s.QF(),h=this.Fpt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let h=0,t=n.length;h<t;++h){let t=n[h],s=t[0],i=t[1],e;e=s.xmt()?this.bmt(null,s,i):yield*this.Gmt(null,s,i),o=o||e}return o}bmt(t,s,i){let e=this.pf,h=this.Xft,r=h.S3(),n=h.C3(),o=h.N1t(),a=!1;r&&h.j1t(r.w3()),h.j1t(s.w3());const u=1<o,l=(u&&h.Qdt().tW(),n.tW(s));if(t){const f=s.tmt()[i].QF(),d=f.q4();d.Uft(t),t.ij()&&t.Imt()}let c=!0;if(s.P5()){const p=s.Cmt();for(let t=0,s=p.length;t<s;++t)if(!p[t]._mt(l)){c=!1;break}}return c&&(s.qft()?s.Emt(l,i):s.UI(l),a=l.T0t()),n.cW(),u&&h.Qdt().cW(),h.oW(s.w3()),r&&h.oW(r.w3()),r||1!==o||(h.spt(),h.KF())||e.ak(),a}*Gmt(t,s,i){let e=this.pf,h=this.Xft,r=h.S3(),n=h.C3(),o=h.N1t(),a=!1;r&&h.j1t(r.w3()),h.j1t(s.w3());const u=1<o,l=(u&&h.Qdt().tW(),n.tW(s));if(t){const f=s.tmt()[i].QF(),d=f.q4();d.Uft(t),t.ij()&&t.Imt()}let c=!0;if(s.P5()){const p=s.Cmt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].Dmt(l))){c=!1;break}}return c&&(s.qft()?yield*s.Amt(l,i):yield*s.T1t(l),a=l.T0t()),n.cW(),u&&h.Qdt().cW(),h.oW(s.w3()),r&&h.oW(r.w3()),r||1!==o||(h.spt(),h.KF())||e.ak(),a}Npt(){return this.Jpt}}}{let l=function(t,s){return!0};l;const po=self.ks,mo=[];function*j(t,s){return!0}po.$pt=class extends po.nr{constructor(t,s,i){super(),this.U7=t,this.pf=t.iP(),this.Nmt=s,this.Lmt=null,this._ft=this.pf.d3().C3(),this.Omt=[],this.Rmt=[],this.Pmt=!1,this.kmt=!1,this.Fmt=!1,this.jmt=!1,this.zmt=!!i[2],this.Bmt=!1,this.Umt=null,this.Wmt=[],this.qht=[],this.Qmt=[],this.Jmt=l,this.Vmt=j,this.Ymt=!1,this.Hmt=!1,this.qmt="",this.Zmt=!1,this.Xmt=null,this.Jpt=null,this.AV=i[4],this.Kmt=i[5],this.U7.Mmt(this,this.Kmt),this.$mt=this.pf.Bj()?{tgt:i[3][0],sgt:i[3][1],igt:!1,egt:!1,hgt:!1,rgt:!1}:null,this.d3().Edt(this),3===i[0]&&this.ngt(i[1]);let e=0;for(const h of i[6]){const r=po.ogt.dv(this,h,e++);this.Wmt.push(r),this.agt(r.QF())}e=0;for(const n of i[7]){const o=po.ugt.dv(this,n,e++);this.qht.push(o)}if(9===i.length){const a=i[8];for(const u of a)this.U7.Qpt(u,this,this.Qmt)}this.Wmt.length&&(this.Bmt=null===this.Wmt[0].QF()&&this.Wmt[0].amt()===po.Tq.Sq.wq.lgt),0===this.Wmt.length&&(this.Wmt=mo),0===this.qht.length&&(this.qht=mo),0===this.Qmt.length&&(this.Qmt=mo)}static dv(t,s,i){return po.lr(po.$pt,t,s,i)}ngt(t){this.Ymt=!0,this.Hmt=!!t[0],this.Zmt=this.Hmt,this.qmt=t[1].toLowerCase(),this.Xmt=[],this.d3().Cdt(this),this.pf.Bj()&&(this.Jpt={type:"group",name:t[1],Vpt:0,children:[]})}cgt(t){this.Xmt.push(t)}fgt(t,s){for(const i of t.k9().xq())s.includes(i)||s.push(i)}dgt(t,s){if(t)if(s.includes(t)||s.push(t),t.eY())for(const i of t.pgt())i.ij()&&this.fgt(i,s);else t.ij()&&this.fgt(t,s)}agt(t){this.dgt(t,this.Omt)}mgt(t){this.dgt(t,this.Rmt)}ggt(){this.Omt=this.pf.iY()}Gdt(t){this.jmt=!!t,this.ygt(),this.Mgt();for(const s of this.Wmt)s.Gdt();if(0<this.qht.length){let t=!1;for(const e of this.qht)e.Gdt(),e.wgt()&&(t=!0);t?(this.Jmt=this.Sgt,this.Vmt=this.Tgt):(this.Jmt=this.bgt,this.Vmt=this.vgt)}const i=this.Qmt;for(let t=0,s=i.length;t<s;++t){const h=t<s-1&&i[t+1]instanceof po.$pt&&i[t+1].dmt();i[t].Gdt(h)}this.$mt&&this.xgt(),this.Jpt&&this.Ggt().Npt().children.push(this.Jpt)}Npt(){return this.Jpt}Ggt(){let t=this.P5();for(;t;){if(t.u1t())return t;t=t.P5()}return this.U7}xgt(){const t=this.$mt;t.igt=this.Wmt.every(t=>t.xmt()),t.egt=this.qht.every(t=>t.xmt()),t.hgt=this.Qmt.every(t=>t.xmt()),t.rgt=t.igt&&t.egt&&t.hgt}Igt(){let t=this;for(;t.xgt(),t=t.P5(););}ygt(){if(this.u1t()){let t=this.P5();for(this.Fmt=!0;t;){if(!t.u1t()){this.Fmt=!1;break}t=t.P5()}}}Cgt(){const t=this.pf.iY();if(this.Omt===t)this.Rmt=t;else{this.Rmt=po.ho(this.Omt);let t=this.P5();for(;t;){for(const i of t.Omt)this.mgt(i);t=t.P5()}const s=this.d3();this.Omt=s.Pdt(this.Omt),this.Rmt=s.Pdt(this.Rmt)}}Mgt(){if(this._gt()){this.Umt=[];let t=this.P5();for(;t;)this.Umt.push(t),t=t.P5();this.Umt.reverse()}}Egt(){this.kmt=!0,this.Nmt&&this.Nmt.Egt()}E0t(){return this.kmt}X6(){return this.Omt}w3(){return this.Pmt||(this.Pmt=!0,this.Cgt()),this.Rmt}Dgt(t){return this.Omt.includes(t)}Cmt(){return this.Umt}x9(){return this.U7}d3(){return this.U7.d3()}iP(){return this.pf}P5(){return this.Nmt}Agt(t){this.Lmt=t}Vdt(){return this.Lmt||this.Nmt}Ngt(){return this.Kmt}Lgt(){return this.$mt&&this.$mt.sgt}Ogt(){return this.Lgt()&&this.$mt.tgt}Rgt(t){this.$mt.tgt=!!t,this.Igt()}u1t(){return this.Ymt}Pgt(){return this.Fmt}dmt(){return this.Bmt}kgt(){return this.jmt}_dt(){return this.qmt}Ipt(){return this.Zmt}f1t(){this.Cpt(this.Hmt)}Cpt(t){if(t=!!t,!this.Ymt)throw new Error("not a group");if(this.Zmt!==t){this.Zmt=t;for(const s of this.Xmt)s.Fgt();if(this.Xmt.length){const i=this.pf.LR(),e=i.x9();e&&e.X9()}}}fY(){return this.AV}qft(){return this.zmt}smt(){return this.Wmt.length&&this.Wmt[0].smt()}jgt(){return this.Lmt&&this.Lmt instanceof po.Opt}_gt(){return this.jgt()||this.Wmt.some(t=>t.smt())}tmt(){return this.Wmt}D0t(){return this.Wmt.length}Bdt(t){if((t=Math.floor(t))<0||t>=this.Wmt.length)throw new RangeError("invalid condition index");return this.Wmt[t]}zgt(t){return this.Bdt(t)}Bgt(t){let s=t.LO();if(0!==s){--s;const i=t.Ugt()?t.Wgt():t.QF();for(;0<=s;--s){const e=this.Wmt[s];if(i===e.QF()||e.Ugt()&&e.Wgt()===i)return!1}}return!0}Qgt(){return this.qht}Jgt(){return this.qht.length}Wdt(t){if((t=Math.floor(t))<0||t>=this.qht.length)throw new RangeError("invalid action index");return this.qht[t]}Vgt(s){s=Math.floor(s);const t=this.qht.find(t=>t.Ygt()===s);if(t)return t;throw new RangeError("invalid action debug index")}Hgt(t){return 0<=(t=Math.floor(t))&&t<this.qht.length}qgt(){return this.Qmt}Ydt(){return this.Qmt.filter(t=>t instanceof po.rmt)}_mt(i){i.m0t(this);let e=this.Wmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.y0t(t),r.iB())throw new Error("trigger cannot be used as sub-event to a loop");if(r.UI())h=!0;else if(!this.zmt)return!1}return!this.zmt||h}Emt(t,s){t.m0t(this),t.y0t(s),this.Wmt[s].UI()&&(this.Jmt(t,0)&&this.Zgt(t),t.S0t(!0))}*Dmt(i){i.m0t(this);let e=this.Wmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.y0t(t),r.iB())throw new Error("trigger cannot be used as sub-event to a loop");if(r.xmt()?r.UI():yield*r.T1t())h=!0;else if(!this.zmt)return!1}return!this.zmt||h}*Amt(t,s){t.m0t(this),t.y0t(s);let i=this.Wmt[s];if(i.xmt()?i.UI():yield*i.T1t())(this.Xgt()?this.Jmt(t,0):yield*this.Vmt(t,0))&&(this.Kgt()?this.Zgt():yield*this.$gt()),t.S0t(!0)}UI(t){t.m0t(this),this.Bmt||t.b0t(!1),this.zmt?this.tyt(t):this.syt(t)}*T1t(t){(this.Ogt()||this.pf.iyt())&&(yield this),t.m0t(this),this.Bmt||t.b0t(!1),this.zmt?yield*this.eyt(t):yield*this.hyt(t)}tyt(i){let e=this.Wmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(!r.smt()){i.y0t(t);const n=r.UI();h=h||n}}i.S0t(h),h&&(this.Jmt(i,0)&&this.Zgt(i),this.jmt)&&i.b0t(!0)}*eyt(i){let e=this.Wmt,h=0===e.length;for(let s=0,t=e.length;s<t;++s){const r=e[s];if(!r.smt()){i.y0t(s);let t;t=r.xmt()?r.UI():yield*r.T1t(),h=h||t}}if(i.S0t(h),h)(this.Xgt()?this.Jmt(i,0):yield*this.Vmt(i,0))&&(this.Kgt()?this.Zgt():yield*this.$gt()),this.jmt&&i.b0t(!0)}syt(i){const e=this.Wmt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=(i.y0t(t),h.UI());if(!r)return void i.S0t(!1)}i.S0t(!0),this.Jmt(i,0)&&this.Zgt(i),i.T0t()&&this.jmt&&i.b0t(!0)}*hyt(i){const e=this.Wmt;for(let t=0,s=e.length;t<s;++t){const h=e[t];i.y0t(t);if(!(h.xmt()?h.UI():yield*h.T1t()))return void i.S0t(!1)}i.S0t(!0);(this.Xgt()?this.Jmt(i,0):yield*this.Vmt(i,0))&&(this.Kgt()?this.Zgt():yield*this.$gt()),i.T0t()&&this.jmt&&i.b0t(!0)}bgt(i,e){const h=this.qht;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.w0t(t),r.UI()}return!0}*vgt(i,e){const h=this.qht;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.w0t(t),r.xmt()?r.UI():yield*r.T1t()}return!0}Sgt(i,e){const h=this.d3(),r=this.qht;for(let t=e,s=r.length;t<s;++t){const n=r[t],o=(i.w0t(t),n.UI());if(n.ryt()&&!0===o)return!1;n.nyt()&&o instanceof Promise&&h.$1t(o)}return!0}*Tgt(i,e){const h=this.d3(),r=this.qht;for(let s=e,t=r.length;s<t;++s){const n=r[s];i.w0t(s);let t;if(t=n.xmt()?n.UI():yield*n.T1t(),n.ryt()&&!0===t)return!1;n.nyt()&&t instanceof Promise&&h.$1t(t)}return!0}oyt(t){this.Jmt(t,t.M0t())&&this.Zgt()}*ayt(t){(yield*this.Vmt(t,t.M0t()))&&(yield*this.$gt())}Zgt(){if(this.Qmt.length){const t=this.u1t()&&this.pf.Smt(),s=t?performance.now():0,i=this._ft,e=i.tW(this);this.kmt?this.uyt(e):this.lyt(e),i.cW(),t&&(this.Jpt.Vpt+=performance.now()-s)}}uyt(e){const h=this.Ymt,r=this.Fmt,n=this.d3(),o=this.Qmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],u=a.X6(),l=!r||!h&&t<i;l&&n.rW(u),a.UI(e),l?n.oW(u):n.k1t(u)}}lyt(i){const e=this.Qmt;for(let t=0,s=e.length;t<s;++t)e[t].UI(i)}*$gt(){if(this.Qmt.length){const t=this._ft,s=t.tW(this);this.kmt?yield*this.cyt(s):yield*this.fyt(s),t.cW()}}*cyt(e){const h=this.Ymt,r=this.Fmt,n=this.d3(),o=this.Qmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],u=a.X6(),l=!r||!h&&t<i;l&&n.rW(u),yield*a.T1t(e),l?n.oW(u):n.k1t(u)}}*fyt(i){const e=this.Qmt;for(let t=0,s=e.length;t<s;++t)yield*e[t].T1t(i)}nW(i,e){e.p0t();const h=this.Wmt;if(!this.qft())for(let t=i.g0t()+1,s=h.length;t<s;++t){const r=h[t],n=(e.y0t(t),r.UI());if(!n)return!1}return this.Jmt(e,0)&&this.Zgt(e),!0}*dyt(i,e){e.p0t();const h=this.Wmt;if(!this.qft())for(let t=i.g0t()+1,s=h.length;t<s;++t){const r=h[t];e.y0t(t);if(!(r.xmt()?r.UI():yield*r.T1t()))return!1}return(this.Xgt()?this.Jmt(e,0):yield*this.Vmt(e,0))&&(this.Kgt()?this.Zgt():yield*this.$gt()),!0}xmt(){return!this.Ogt()&&!this.pf.iyt()&&this.$mt.rgt}Xgt(){return!this.pf.iyt()&&this.$mt.egt}Kgt(){return!this.pf.iyt()&&this.$mt.hgt}pyt(i){if(this.P5()){const e=this.Cmt();for(let t=0,s=e.length;t<s;++t)if(!e[t]._mt(i))return!1}return!0}*myt(i){if(this.P5()){const e=this.Cmt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].Dmt(i)))return!1}return!0}gyt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.ei(0));t.Qdt().tW(),this.Lmt.yyt(e)}else this.Lmt.Myt(s);else i&&t.Qdt().tW()}wyt(t,s,i,e){let h,r,n=0<t.length,o=null,a=this.pf,u=this._ft,l=a.d3(),c=this.Lmt,f=c.nyt(),d=l.O1t(),p=1<d;if(this.gyt(l,s,p),n&&(i?l.rW(t):l.j1t(t)),null!==e){if(e.Syt){const g=i?e.Syt.q4():e.Syt.F1t().xft(),y=e.Tyt.q4();y.Wft(g.H4()),y.Yft(),i||e.Tyt.byt()}else if(e.vyt){const M=e.vyt.q4();M.Wft(e.xyt),M.Yft()}e.Gyt&&(o=l.z1t(t))}const m=u.tW(this);return i&&m.A0t(t),this.pyt(m)&&(m.m0t(this),f&&([r,h]=c.Iyt()),this.syt(m),f)&&c.Cyt(r),u.cW(),p&&l.Qdt().cW(),null!==o&&l.oW(o),n&&l.oW(t),l.R1t(),f||l.ipt(),h}*_yt(t,s,i,e){let h,r,n=((this.Ogt()||this.pf.iyt())&&(yield this),0<t.length),o=null,a=this.pf,u=this._ft,l=a.d3(),c=this.Lmt,f=c.nyt(),d=l.O1t(),p=1<d;if(this.gyt(l,s,p),n&&(i?l.rW(t):l.j1t(t)),null!==e){if(e.Syt){const g=i?e.Syt.q4():e.Syt.F1t().xft(),y=e.Tyt.q4();y.Wft(g.H4()),y.Yft(),i||e.Tyt.byt()}else if(e.vyt){const M=e.vyt.q4();M.Wft(e.xyt),M.Yft()}e.Gyt&&(o=l.z1t(t))}const m=u.tW(this);return i&&m.A0t(t),(yield*this.myt(m))&&(m.m0t(this),f&&([r,h]=c.Iyt()),yield*this.hyt(m),f)&&c.Cyt(r),u.cW(),p&&l.Qdt().cW(),null!==o&&l.oW(o),n&&l.oW(t),l.R1t(),f||l.ipt(),h}Eyt(t,s){const i=this.w3(),e=0<i.length,h=this.pf,r=this._ft,n=h.d3(),o=n.O1t(),a=1<o,u=(a&&n.Qdt().tW(),this.Lmt.yyt(t),e&&(s?n.rW(i):n.j1t(i)),r.tW(this));this.pyt(u)&&(u.m0t(this),this.syt(u)),r.cW(),a&&n.Qdt().cW(),e&&n.oW(i),n.R1t(),n.ipt()}*Dyt(t,s){(this.Ogt()||this.pf.iyt())&&(yield this);const i=this.w3(),e=0<i.length,h=this.pf,r=this._ft,n=h.d3(),o=n.O1t(),a=1<o,u=(a&&n.Qdt().tW(),this.Lmt.yyt(t),e&&(s?n.rW(i):n.j1t(i)),r.tW(this));(yield*this.myt(u))&&(u.m0t(this),yield*this.hyt(u)),r.cW(),a&&n.Qdt().cW(),e&&n.oW(i),n.R1t(),n.ipt()}b3(t,s,i,e,...h){let r,n,o=0<t.length,a=this.pf,u=this._ft,l=a.d3(),c=this.Lmt,f=c.nyt(),d=l.O1t(),p=1<d,m=(p&&l.Qdt().tW(),0<h.length&&this.Lmt.yyt(h),o&&(s?l.rW(t):l.j1t(t)),u.tW(this));return m.I0t(i,e),u.i0t(m),a.eW(!1),this.pyt(m)&&(m.m0t(this),f&&([n,r]=c.Iyt()),this.syt(m),f)&&c.Cyt(n),a.eW(!0),u.cW(),u.e0t(),p&&l.Qdt().cW(),o&&l.oW(t),l.R1t(),f||l.ipt(),r||m.C0t()}}}{let e=self.ks,t=[],s=!1;e.omt=class extends e.nr{constructor(t,s,i){super();const e=t.iP(),h=t.d3(),r=(this.U7=t,this.Xft=h,this.pf=t.iP(),this.Nmt=s,e.Ayt(i[1]));this.Nyt=r,this.Kmt=i[2],this.U7.Mmt(this,this.Kmt),this.$mt=e.Bj()?{tgt:i[3][0],sgt:i[3][1]}:null}static dv(t,s,i){return e.lr(e.omt,t,s,i)}Gdt(){const t=this.Nyt,s=this.pf.d3().Hdt(this);this.Nyt=t.bind(null,this.pf.a4(),s)}P5(){return this.Nmt}Vdt(){return this.Nmt}x9(){return this.U7}Ngt(){return this.Kmt}Lgt(){return this.$mt&&this.$mt.sgt}Ogt(){return this.Lgt()&&this.$mt.tgt}Rgt(t){this.$mt.tgt=!!t}dmt(){return!1}X6(){return t}w3(){return this.Nmt?this.Nmt.w3():t}UI(t){t.m0t(this),this.Xft.$1t(this.Lyt())}async Lyt(){try{await this.Nyt()}catch(t){console.error(`Unhandled exception running script %c${this.x9().hf()}, event ${this.Ngt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*T1t(t){t.m0t(this),(this.Ogt()||this.pf.iyt())&&(yield this),this.UI(t)}xmt(){return!this.Ogt()&&!this.pf.iyt()}static Oyt(){return s}static Ryt(){s=!0}}}{const go=self.ks;go.Opt=class extends go.nr{constructor(t,s,i){super(),this.U7=t,this.pf=t.iP(),this.Nmt=s,this.Pyt=0,this.kyt="",this.Fyt=0,this.jyt=[],this.zyt=!0,this.Byt="",this.Sft=null,this.Uyt=!1,this.Wyt=[],this.Qyt=!1,this.Jyt=!1,this.Vyt=0,this.Yyt=-1,this.Hyt=new Map,this.qyt=go.$pt.dv(t,s,i),this.qyt.Agt(this)}Zyt(t){this.Pyt=0,this.kyt=t[0],this.Fyt=t[1],this.jyt=t[2].map(t=>go.rmt.dv(this.U7,this,t)),this.zyt=t[3],this.Jyt=t[4],this.Qyt=t[5]}Xyt(t){this.Pyt=1,this.Byt=t[1],this.Sft=this.pf.A8(t[2]),this.qyt.agt(this.Sft),this.kyt=this.Sft.hf()+"."+this.Byt,this.Fyt=t[3],this.jyt=t[4].map(t=>go.rmt.dv(this.U7,this,t)),this.zyt=t[5],this.Jyt=t[6],this.Qyt=t[7],this.Sft.Kyt(this)}static emt(t,s,i){const e=go.lr(go.Opt,t,s,i),h=i[1];return e.Zyt(h),e}static hmt(t,s,i){const e=go.lr(go.Opt,t,s,i),h=i[1];return e.Xyt(h),e}Idt(){if(this.Sft&&this.Sft.eY())for(const t of this.Sft.pgt())if(t.$yt(this.Byt)){this.Uyt=!0;break}}Gdt(){for(const t of this.jyt)t.Gdt();this.qyt.Gdt(!1)}Ldt(){return this.Pyt}Ydt(){return this.jyt}Rpt(){return this.jyt}y3(){return this.jyt.length}tMt(t){this.Wyt.push(t)}sMt(){return this.Wyt}Myt(i){const e=this.jyt;for(let t=0,s=e.length;t<s;++t)e[t].mht(i[t].ei(0))}yyt(i){const e=this.jyt;for(let t=0,s=e.length;t<s;++t)e[t].mht(i[t])}iMt(){return this.jyt.map(t=>t.Let())}P5(){return this.Nmt}Vdt(){return this.Nmt}Odt(){return this.kyt}eMt(){return this.Byt}hMt(){return this.Uyt}x3(){return this.Fyt}QF(){return this.Sft}tc(){return this.zyt}g3(){switch(this.Fyt){case 0:return null;case 2:return"";default:return 0}}M3(){return this.qyt}v3(){return this.Qyt}nyt(){return this.Jyt}Iyt(){const t=this.Vyt++;this.Yyt=t;let s,i=new Promise(t=>s=t);return this.Hyt.set(t,{resolve:s,rMt:0}),[t,i]}Cyt(t){const s=this.Hyt.get(t);0===s.rMt&&(s.resolve(),this.Hyt.delete(t)),this.Yyt=-1}nMt(){const t=this.Hyt.get(this.Yyt);return t.rMt++,this.Yyt}oMt(t){this.Yyt=t;const s=this.Hyt.get(t);s.rMt--}aMt(t,s){const i=new Map,e=[];for(const h of this.Sft.q4().H4()){const r=h.QF();if(r.$yt(this.Byt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&this.qyt.wyt(t,s,this.Qyt,{vyt:this.Sft,xyt:e}),0<i.size)for(const[o,a]of i){const u=o.uMt(this.Byt).M3(),l=[...new Set([...t,...u.X6()])];u.wyt(l,s,this.Qyt,{vyt:o,xyt:a})}}*lMt(t,s){const i=new Map,e=[];for(const h of this.Sft.q4().H4()){const r=h.QF();if(r.$yt(this.Byt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&(yield*this.qyt._yt(t,s,this.Qyt,{vyt:this.Sft,xyt:e})),0<i.size)for(const[o,a]of i){const u=o.uMt(this.Byt).M3(),l=[...new Set([...t,...u.X6()])];yield*u._yt(l,s,this.Qyt,{vyt:o,xyt:a})}}}}{const yo=self.ks,Mo=[];yo.rmt=class extends yo.nr{constructor(t,s,i){super();const e=t.d3();this.U7=t,this.Xft=e,this.pf=t.iP(),this.Nmt=s,this.ldt=e.Qdt(),this.mr=i[1],this.vf=i[2],this.cMt=i[3],this.P2=!!i[4],this.fMt=!!i[5],this.dMt=s instanceof yo.Opt,this.AV=i[6],this.pMt=this.pf.qdt(i[8]),this.mMt=t=>this.mht(t),this.gMt=()=>this.Let(),this.yMt=!this.Nmt||this.P2||this.fMt,this.Jht=this.cMt,this.MMt=-1,this.wMt()&&(this.Jht=this.Jht?1:0),!this.SMt()||this.fb()||this._pt()||(this.MMt=e.kdt(this)),e.Rdt(this)}static dv(t,s,i){return yo.lr(yo.rmt,t,s,i)}Gdt(){if(this.SMt()&&!this.fb()&&!this._pt()&&!this.TMt()){const t=this.Xft.Lpt(this);t&&t.tMt(this)}}hf(){return this.mr}qdt(){return this.pMt}P5(){return this.Nmt}Vdt(){return this.P5()}U8(){return!this.P5()}SMt(){return!this.U8()}TMt(){return this.dMt}fb(){return this.P2}_pt(){return this.fMt}de(){return 0===this.vf}xe(){return 1===this.vf}wMt(){return 2===this.vf}dmt(){return!1}fY(){return this.AV}Fdt(){return this.cMt}X6(){return Mo}UI(t){!this.SMt()||this.fb()||this._pt()||this.mht(this.Fdt())}xmt(){return!0}*T1t(t){this.UI(t)}mht(t){this.de()?"number"!=typeof t&&(t=parseFloat(t)):this.xe()?"string"!=typeof t&&(t=t.toString()):this.wMt()&&(t=t?1:0),this.yMt?this.Jht=t:this.ldt.P0t()[this.MMt]=t}Let(){return this.yMt?this.Jht:this.ldt.P0t()[this.MMt]}bMt(){let t=this.Let();return this.wMt()?!!t:t}n1t(){this.Jht=this.cMt}Zdt(){return{configurable:!1,enumerable:!0,get:this.gMt,set:this.mMt}}}}{const wo=self.ks,So=[];wo.nmt=class extends wo.nr{constructor(t,s,i){super();const e=t.d3();this.U7=t,this.Xft=e,this.pf=t.iP(),this.Nmt=s,this.vMt=null,this.xMt=i[1],this.p0=!0}static dv(t,s,i){return wo.lr(wo.nmt,t,s,i)}Gdt(){this.vMt=this.Xft.Z9(this.xMt),this.U7.pmt(this);let t=this.P5();for(;t;)t instanceof wo.$pt&&t.u1t()&&t.cgt(this),t=t.P5();this.Fgt(),this.pf.Bj()&&this.U7.Npt().children.push(this.vMt.Npt())}P5(){return this.Nmt}X6(){return So}gmt(){return this.vMt}UI(t){const s=!!this.P5(),i=this.pf.iY();s&&this.Xft.j1t(i),this.vMt.UI(),s&&this.Xft.oW(i)}*T1t(t){const s=!!this.P5(),i=this.pf.iY();s&&this.Xft.j1t(i),yield*this.vMt.T1t(),s&&this.Xft.oW(i)}xmt(){return!1}ymt(){return this.p0}Fgt(){let t=this.P5();for(;t;){if(t instanceof wo.$pt&&t.u1t()&&!t.Ipt())return void(this.p0=!1);t=t.P5()}this.p0=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const To=self.ks;To.GMt=class extends To.nr{constructor(t){super(),this.VT=t,this.pf=t.iP()}Gdt(){}static IMt(t,s){const i=s[0],e=[Io,xo,Go,Co,bo,vo];return To.lr(e[i],t,s)}};class bo extends To.GMt{constructor(t,s){super(t),this.CMt=this.pf.wJ(),this.Nyt=this.pf.Ayt(s[1]),this.Nyt!==To.Tq.Sq.art.random&&this.Nyt!==To.Tq.Sq.art._Mt||this.VT.EMt()}DMt(){return this.CMt.AMt(this.Nyt,this.CMt)}}class vo extends To.GMt{constructor(t,s){super(t),this.NMt=null,this.kyt=s[1],this.VT.EMt()}Gdt(){const t=this.pf.d3(),s=(this.NMt=t.m3(this.kyt),this.kyt=null,this.VT.M3()),i=this.NMt.M3();this.LMt=[...new Set([...s.w3(),...i.w3()])],this.LMt=t.Pdt(this.LMt)}DMt(){const t=this.NMt;if(t.tc()){const s=t.M3();return To.$pt.prototype.b3.bind(s,this.LMt,t.v3(),t.x3(),t.g3())}{const i=t.g3();return()=>i}}}class xo extends To.GMt{constructor(t,s){super(t),this.Sft=this.pf.A8(s[1]),this.Nyt=this.pf.Ayt(s[2]),this.OMt=!!s[3],this._ft=this.pf.d3().C3(),this.VT.RMt(this.Sft)}DMt(){return this.Sft.F4().AMt(this.Nyt,this.Sft.O4().Nz())}PMt(...t){const s=this.Sft,i=s.q4().Pft(),e=i.length;if(0===e)return this.OMt?"":0;const h=a(this.VT.kMt(),e);return this._ft.K6().x0t(s),this.Nyt.apply(i[h].Nz(),t)}FMt(t,...s){const i=this.Sft,e=i.H4(),h=e.length;if(0===h||"number"!=typeof t)return this.OMt?"":0;const r=a(t,h);return this._ft.K6().x0t(i),this.Nyt.apply(e[r].Nz(),s)}}class Go extends To.GMt{constructor(t,s){super(t),this.Sft=this.pf.A8(s[1]),this.jMt=s[3],this.OMt=!!s[2],this.VT.RMt(this.Sft)}zMt(){const t=this.Sft.q4().Pft(),s=t.length;if(0===s)return this.OMt?"":0;const i=a(this.VT.kMt(),s);return t[i].BMt(this.jMt)}UMt(){const t=this.Sft,s=t.q4().Pft(),i=s.length;if(0===i)return this.OMt?"":0;const e=a(this.VT.kMt(),i),h=s[e],r=h.QF().WMt(t.QMt());return h.BMt(this.jMt+r)}JMt(t){const s=this.Sft,i=s.H4(),e=i.length;if(0===e||"number"!=typeof t)return this.OMt?"":0;let h=a(t,e),r=i[h],n=0;return s.eY()&&(n=r.QF().WMt(s.QMt())),r.BMt(this.jMt+n)}}class Io extends To.GMt{constructor(t,s){super(t),this.Sft=this.pf.A8(s[1]),this.VMt=this.Sft.jht(s[2]),this.YMt=this.Sft.mit(s[2]),this.Nyt=this.pf.Ayt(s[3]),this.OMt=!!s[4],this._ft=this.pf.d3().C3(),this.VT.RMt(this.Sft)}HMt(...t){const s=this.Sft,i=s.q4().Pft(),e=i.length;if(0===e)return this.OMt?"":0;let h=a(this.VT.kMt(),e),r=(this._ft.K6().x0t(s),i[h]),n=0;return s.eY()&&(n=r.QF().qMt(s.QMt())),this.Nyt.apply(r.Fht()[this.YMt+n].Nz(),t)}ZMt(t,...s){const i=this.Sft,e=i.H4(),h=e.length;if(0===h||"number"!=typeof t)return this.OMt?"":0;let r=a(t,h),n=(this._ft.K6().x0t(i),e[r]),o=0;return i.eY()&&(o=n.QF().qMt(i.QMt())),this.Nyt.apply(n.Fht()[this.YMt+o].Nz(),s)}}class Co extends To.GMt{constructor(t,s){super(t),this.XMt=null,this.KMt=s[1]}Gdt(){this.XMt=this.pf.d3().Xdt(this.KMt)}$Mt(){return this.XMt}}}{let r=function(t){const s=self.twt[t];if(s)return s;throw new Error("invalid expression number")};r;const _o=self.ks;_o.swt=class extends _o.nr{constructor(t,s,i){super(),this.VT=t,this.ty=i,this.vf=s,this.ei=null,this.iwt=!1,this.fMt=!1}static dv(t,s,i){const e=s[0],h=[Eo,Do,ko,No,Oo,Ao,Ro,Eo,No,No,Fo,jo,ko,Bo,Do,Po,Lo,zo,Uo,Wo,Qo,Jo];return _o.lr(h[e],t,e,i,s)}Gdt(){}EMt(){this.iwt=!0}RMt(t){this.iwt||!t||t.F4().l4()||(this.iwt=!0)}ewt(){return this.iwt}LO(){return this.ty}iP(){return this.VT.iP()}M3(){return this.VT.M3()}_pt(){return this.fMt}hwt(){return 4===this.vf}};class Eo extends _o.swt{constructor(t,s,i,e){super(t,s,i),this.rwt=0;const h=e[1];this.nwt=h[0],this.owt=[],this.awt=null;for(let t=1,s=h.length;t<s;++t)this.owt.push(_o.GMt.IMt(this,h[t]));this.owt.length?this.ei=this.uwt:(this.ei=r(this.nwt),this.fMt=!0)}lwt(t){if(t<0||t>=this.owt.length)throw new RangeError("invalid numbered node");return this.owt[t]}Gdt(){for(const s of this.owt)s.Gdt();const t=r(this.nwt);this.owt.length?this.awt=t(this):this.awt=t}kMt(){return this.rwt}uwt(t){return this.rwt=t,this.awt()}}class Do extends Eo{constructor(t,s,i,e){super(t,s,i,e),this.ei=this.cwt,14===s&&(this.M3().ggt(),this.VT instanceof _o.ugt)&&this.M3().Egt()}cwt(t){this.rwt=t;const s=this.awt();return"string"==typeof s?s:""}fwt(){return r(this.nwt)()}}class Ao extends Eo{constructor(t,s,i,e){super(t,s,i,e),2<=t.dwt()?this.ei=this.xk:this.ei=this.PR,this.fMt=!1}PR(t){this.rwt=t;const s=this.awt(),i=this.iP().LR();return i.PR(s)}xk(t){const s=this.PR(t);return s?s.xk():null}}class No extends _o.swt{constructor(t,s,i,e){super(t,s,i),this.pwt=e[1],this.ei=this.mwt,this.fMt=!0}mwt(){return this.pwt}}class Lo extends _o.swt{constructor(t,s,i,e){super(t,s,i),this.gwt=e[1],this.ei=this.ywt,this.fMt=!0}ywt(){return this.gwt}}class Oo extends _o.swt{constructor(t,s,i,e){super(t,s,i),this.Sft=this.iP().A8(e[1]),2<=t.dwt()?this.ei=this.A4:this.ei=this.QF;const h=this.M3();h.agt(this.Sft),this.VT instanceof _o.ugt?h.Egt():h.P5()&&h.P5().Egt(),this.fMt=!0}QF(){return this.Sft}A4(){return this.Sft?this.Sft.A4():null}}class Ro extends _o.swt{constructor(t,s,i,e){super(t,s,i),this.CV=this.iP().gR().lZ(e[1]),2<=t.dwt()?this.ei=this.pR:this.ei=this.yR,this.fMt=!0}yR(){return this.CV}pR(){return this.CV?this.CV.pR():null}}class Po extends _o.swt{constructor(t,s,i,e){super(t,s,i),this.dK=this.iP().ytt().TX(e[1]),2<=t.dwt()?this.ei=this.Nst:this.ei=this.tit,this.fMt=!0}tit(){return this.dK}Nst(){return this.dK?this.dK.Nst():null}}class ko extends _o.swt{constructor(t,s,i,e){super(t,s,i),this.Mwt=e[1],this.ei=this.wwt,this.fMt=!0}wwt(){return this.Mwt}}class Fo extends _o.swt{constructor(t,s,i,e){super(t,s,i),this.Swt=e[1];const h=this.VT.QF();this.VT instanceof _o.ogt&&this.VT.fb()||!h||!h.eY()?(this.ei=this.Twt,this.fMt=!0):(this.ei=this.bwt,this.EMt())}Twt(){return this.Swt}bwt(t){t=t||0;let s=this.VT.QF(),i=s.q4(),e=i.H4(),h=null;if(e.length)h=e[t%e.length].QF();else if(i.Oft()){const r=i.Rft();h=r[t%r.length].QF()}else{if(!(0<s.X4()))return 0;{const n=s.H4();h=n[t%n.length].QF()}}return this.Swt+h.WMt(s.QMt())}}class jo extends _o.swt{constructor(t,s,i,e){super(t,s,i),this.KMt=e[1],this.XMt=null,2<=t.dwt()?this.ei=this.vwt:this.ei=this.xwt,this.fMt=!0}Gdt(){this.XMt=this.iP().d3().Xdt(this.KMt)}xwt(){return this.XMt}vwt(){return null}}class zo extends _o.swt{constructor(t,s,i,e){super(t,s,i),this.Gwt=e[1],this.NMt=null,2<=t.dwt()?this.ei=this.Iwt:this.ei=this.Cwt,this.fMt=!0}Gdt(){this.NMt=this.iP().d3().m3(this.Gwt),this.Gwt=null}Cwt(){return this.NMt}Iwt(){return null}}class Bo extends _o.swt{constructor(t,s,i,e){super(t,s,i),this._wt=[],this.Ewt=[],this.fMt=!0;for(let t=1,s=e.length;t<s;++t){const h=_o.swt.dv(this.VT,e[t],0);this._wt.push(h),this.Ewt.push(0),h._pt()||(this.fMt=!1)}this.ei=this.Dwt}Gdt(){for(const t of this._wt)t.Gdt()}Dwt(){const i=this._wt,e=this.Ewt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ei(0);return e}}class Uo extends _o.swt{constructor(t,s,i,e){super(t,s,i),this.Awt=e[1],this.ei=this.pht,this.fMt=!0}pht(){return this.Awt}}class Wo extends _o.swt{constructor(t,s,i,e){super(t,s,i),this.Nwt=e[1],this.ei=this.Lwt,this.fMt=!0}Lwt(){return this.Nwt}}class Qo extends Eo{constructor(t,s,i,e){super(t,s,i,e),this.ei=this.aj,this.fMt=!1}aj(){return this.awt()}}class Jo extends _o.swt{constructor(t,s,i,e){super(t,s,i),this.slt=this.iP().Slt().qut(e[1]),this.ei=this.Owt,this.fMt=!0}Owt(){return this.slt.hf()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ei(0)};e;const Vo=self.ks,Yo=[],Ho=function(){};Vo.ogt=class extends Vo.nr{constructor(t,i,s){if(super(),this.qyt=t,this.pf=t.iP(),this.ty=s,this.Nyt=this.pf.Ayt(i[1]),this.Rwt=0<i[3],this.Pwt=2===i[3],this.kwt=!!i[4],this.Fwt=!!i[5],this.P2=!!i[6],this.AV=i[7],this.jwt=this.qyt.qft(),this.Sft=null,this.VMt=null,this.YMt=-1,this.CMt=null,this.UI=Ho,this.T1t=Ho,this.Xs=[],this.zwt=[],this.Bwt=!1,this.Uwt=null,this.Wwt=null,this.$mt=this.pf.Bj()?{tgt:i[8][0],Qwt:i[8][1]}:null,-1===i[0]?this.CMt=this.pf.wJ():(this.Sft=this.pf.A8(i[0]),i[2]&&(this.VMt=this.Sft.jht(i[2]),this.YMt=this.Sft.mit(i[2])),this.qyt.P5()&&this.qyt.P5().Egt()),10===i.length){let s=i[9];for(let t of s)this.Xs.push(Vo.swt.dv(this,t,this.Xs.length)),this.zwt.push(0)}0===this.Xs.length&&(this.Xs=Yo,this.zwt=Yo),this.qyt.d3().Ddt(this)}static dv(t,s,i){return Vo.lr(Vo.ogt,t,s,i)}Gdt(){for(const t of this.Xs)t.Gdt(),t.ewt()&&(this.Bwt=!0);this.Pwt?(this.UI=this.Jwt,this.T1t=this.Vwt):this.CMt?(this.Ywt(),this.T1t=this.Hwt):this.Sft.F4().l4()?(this.qwt(),this.T1t=this.Zwt):this.P2?(this.UI=this.Xwt,this.T1t=this.Kwt):(this.UI=this.$wt,this.T1t=this.tSt)}Ywt(){const t=this.CMt,s=this.CMt;this.sSt(t,s,this.iSt)}qwt(){const t=this.Sft.F4(),s=this.Sft.O4().Nz();this.sSt(t,s,this.eSt)}sSt(t,s,i){const e=this.Nyt,h=this.Fwt,r=this.Xs;if(0===r.length){const n=t.AMt(e,s);h?this.UI=function(){return Vo.xor(n(),h)}:this.UI=n}else if(1===r.length){const o=r[0];if(!h&&o._pt())this.UI=t.hSt(e,s,o.ei(0));else{const a=t.AMt(e,s);this.UI=function(){return Vo.xor(a(o.ei(0)),h)}}}else if(2===r.length){const u=r[0],l=r[1];if(!h&&u._pt()&&l._pt())this.UI=t.rSt(e,s,u.ei(0),l.ei(0));else{const c=t.AMt(e,s);this.UI=function(){return Vo.xor(c(u.ei(0),l.ei(0)),h)}}}else if(3===r.length){const f=r[0],d=r[1],p=r[2];if(!h&&f._pt()&&d._pt()&&p._pt())this.UI=t.nSt(e,s,f.ei(0),d.ei(0),p.ei(0));else{const m=t.AMt(e,s);this.UI=function(){return Vo.xor(m(f.ei(0),d.ei(0),p.ei(0)),h)}}}else this.UI=i}fY(){return this.AV}amt(){return this.Nyt}QF(){return this.Sft}Uz(){return this.VMt}oSt(){return this.VMt?this.VMt.jz():this.Sft?this.Sft.F4():null}dwt(){const t=this.oSt();return t?t.aSt():1}M3(){return this.qyt}iP(){return this.pf}LO(){return this.ty}Ygt(){return this.LO()}smt(){return this.Rwt}umt(){return this.Pwt}uSt(){return this.Fwt}iB(){return this.kwt}fb(){return this.P2}lSt(){return this.$mt.tgt}cSt(){return!!this.CMt}Ugt(){return this.cSt()||this.Sft.F4().l4()}Wgt(){for(const t of this.Xs)if(t.hwt())return t.QF();return null}fSt(t){this.$mt.tgt=!!t,this.qyt.Igt()}dSt(){return this.$mt.Qwt}xmt(){return!this.lSt()&&!this.pf.iyt()&&!this.dSt()}pSt(){return this.Uwt||(this.Uwt=new Map),this.Uwt}mSt(){return this.Wwt||(this.Wwt=new Map),this.Wwt}iSt(){const t=this.zwt;return e(this.Xs,t),Vo.xor(this.Nyt.apply(this.CMt,t),this.Fwt)}*Hwt(){if((this.lSt()||this.pf.iyt())&&(yield this),this.dSt()){const s=this.zwt;e(this.Xs,s);let t=this.Nyt.apply(this.CMt,s);return Vo.Vo(t)&&(t=yield*t),Vo.xor(t,this.Fwt)}return this.UI()}eSt(){const t=this.zwt,s=(e(this.Xs,t),this.Sft.O4().Nz());return Vo.xor(this.Nyt.apply(s,t),this.Fwt)}*Zwt(){if((this.lSt()||this.pf.iyt())&&(yield this),this.dSt()){let t=this.zwt,s=(e(this.Xs,t),this.Sft.O4().Nz()),i=this.Nyt.apply(s,t);return Vo.Vo(i)&&(i=yield*i),Vo.xor(i,this.Fwt)}return this.UI()}Jwt(){return!0}*Vwt(){return(this.lSt()||this.pf.iyt())&&(yield this),!0}gSt(){return this.VMt?2<=this.VMt.jz().aSt()?this.VMt.Bz():this.VMt:2<=this.Sft.F4().aSt()?this.Sft.A4():this.Sft}Xwt(){const t=this.zwt,s=(e(this.Xs,t),this.Nyt.apply(this.gSt(),t));return this.Sft.byt(),s}*Kwt(){if((this.lSt()||this.pf.iyt())&&(yield this),this.dSt()){const s=this.zwt;e(this.Xs,s);let t=this.Nyt.apply(this.gSt(),s);return Vo.Vo(t)&&(t=yield*t),this.Sft.byt(),t}return this.UI()}$wt(){const i=this.Xs,e=this.zwt,t=this.Sft.q4();for(let t=0,s=i.length;t<s;++t){const h=i[t];h.ewt()||(e[t]=h.ei(0))}return t.Nft()?this.ySt(t):this.MSt(t)}*tSt(){return(this.lSt()||this.pf.iyt())&&(yield this),this.$wt()}wSt(i){const e=this.Xs,h=this.zwt;for(let t=0,s=e.length;t<s;++t){const r=e[t];r.ewt()&&(h[t]=r.ei(i))}}ySt(i){const t=this.Sft,e=t.eY(),h=t.QMt(),r=this.YMt,n=0<=r,o=t.H4(),a=this.Bwt,u=this.zwt,l=this.Nyt,c=this.Fwt,f=this.jwt&&!this.Rwt;i.Aft();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.wSt(s);let t;if(n){const p=e?d.QF().qMt(h):0;t=l.apply(d.Fht()[r+p].Nz(),u)}else t=l.apply(d.Nz(),u);Vo.xor(t,c)?i.kft(d):f&&i.Fft(d)}return t.SSt(!0),i.jft(!1),t.byt(),i.Lft()}MSt(t){let s=this.Sft,i=s.eY(),e=s.QMt(),h=s.ij(),r=this.YMt,n=0<=r,o=this.Bwt,a=this.zwt,u=this.Nyt,l=this.Fwt,c=this.jwt&&!this.Rwt,f=t.zft(),d=t.Bft(),p=c&&!this.qyt.Bgt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const w=m[s];o&&this.wSt(s);let t;if(n){const S=i?w.QF().qMt(e):0;t=u.apply(w.Fht()[r+S].Nz(),a)}else t=u.apply(w.Nz(),a);Vo.xor(t,l)?(y=!0,p?(f.push(w),h&&w.TSt()):(m[g]=w,h&&w.bSt(g),++g)):p?(m[g]=w,h&&w.vSt(g),++g):c&&(d.push(w),h)&&w.xSt()}Vo.Un(m,g),h&&s.GSt(p,g);const M=y;return p&&!y&&(y=this.ISt(f)),s.SSt(M||c),c?y:t.Lft()}ISt(i){const t=this.Sft,e=t.eY(),h=t.QMt(),r=this.Bwt,n=this.YMt,o=0<=n,a=this.zwt,u=this.Nyt,l=this.Fwt;for(let s=0,t=i.length;s<t;++s){const c=i[s];r&&this.wSt(s);let t;if(o){const f=e?c.QF().qMt(h):0;t=u.apply(c.Fht()[n+f].Nz(),a)}else t=u.apply(c.Nz(),a);if(Vo.xor(t,l))return!0}return!1}CSt(t,s){return this.Xs[t].ei(s)}lmt(){const t=this.Xs;if(t.length)return t[0].fwt();throw new Error("no parameters")}_7(){if(!this.Uwt||!this.Uwt.size)return null;const s={};for(const[i,e]of this.Uwt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].hj(),t[1].hj(),t[2]])),s[i]=t}return{ex:s}}E7(t){if(this.Uwt&&(this.Uwt.clear(),this.Uwt=null),t){const s=this.pf,i=t.ex;if(i){const e=this.pSt();e.clear();for(const[h,r]of Object.entries(i)){let t=r;"collmemory"===h&&(t=Vo.lr(Vo.ic,r.map(t=>[s.DR(t[0]),s.DR(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(h,t)}}}}}}{let h=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ei(0)};h;const qo=self.ks,Zo=[],Xo=function(){},Ko=function*(){};qo.ugt=class extends qo.nr{constructor(t,s,i){super();const e=(this.qyt=t).iP(),h=(this.pf=e,this.ty=i,this.AV=4<=s.length?s[3]:-1,this._St=5<=s.length?255&s[4]:0,this.ESt=5<=s.length?s[4]>>8:0,this.Nyt=null,this.Sft=null,this.VMt=null,this.YMt=-1,this.CMt=null,this.DSt="",this.ASt=null,this.NSt=null,this.UI=Xo,this.T1t=Xo,this.Xs=[],this.zwt=[],this.Bwt=!1,this.Uwt=null,this.Wwt=null,-3===s[0]),r=h?s[2]:s[5];if(this.$mt=e.Bj()||h?{tgt:r[0],Qwt:r[1],index:r[2]}:null,-1===s[0])this.CMt=e.wJ(),this.Nyt=e.Ayt(s[1]);else if(-2===s[0])this.DSt=s[1];else if(h){const n=e.Ayt(s[1]);this.Nyt=n,this.UI=this.LSt,this.T1t=this.OSt,this.ESt|=8}else this.Sft=e.A8(s[0]),4&this.ESt?(this.DSt=s[1],this.ASt=e.A8(s[2])):(s[2]&&(this.VMt=this.Sft.jht(s[2]),this.YMt=this.Sft.mit(s[2])),this.Nyt=e.Ayt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.Xs.push(qo.swt.dv(this,a,this.Xs.length)),this.zwt.push(0)}0===this.Xs.length&&(this.Xs=Zo,this.zwt=Zo),this.RSt()&&(this.qyt.ggt(),this.qyt.Egt()),this.qyt.d3().Adt(this)}static dv(t,s,i){return qo.lr(qo.ugt,t,s,i)}Gdt(){for(const t of this.Xs)t.Gdt(),t.ewt()&&(this.Bwt=!0);if(this.CMt)this.Ywt(),this.T1t=this.Hwt;else if(this.DSt)4&this.ESt?this.PSt():this.kSt(),this.DSt="",this.ASt=null;else if(this.UI===this.LSt){const s=this.Nyt,i=this.pf.d3().Hdt(this.qyt);this.Nyt=s.bind(null,this.pf.a4(),i)}else this.VMt?this.nyt()?(this.UI=this.FSt,this.T1t=this.jSt):(this.UI=this.zSt,this.T1t=this.BSt):this.Sft.F4().l4()?(this.qwt(),this.T1t=this.Zwt):this.fb()?(this.UI=this.USt,this.T1t=this.WSt):this.nyt()?(this.UI=this.QSt,this.T1t=this.JSt):this.VSt()?(this.UI=this.YSt,this.T1t=this.HSt):this.Xs.length?this.Xs.every(t=>t.ewt())?(this.UI=this.qSt,this.T1t=this.ZSt):this.Bwt?(this.UI=this.XSt,this.T1t=this.KSt):this.Xs.every(t=>t._pt())?(h(this.Xs,this.zwt),this.UI=this.$St,this.T1t=this.tTt):(this.UI=this.sTt,this.T1t=this.iTt):(this.UI=this.$St,this.T1t=this.tTt)}Ywt(){const t=this.CMt,s=this.CMt;this.sSt(t,s,this.iSt)}qwt(){const t=this.Sft.F4(),s=this.Sft.O4().Nz();this.sSt(t,s,this.eSt)}kSt(){const t=this.qyt.d3(),i=t.m3(this.DSt);if(i.tc()){const e=0!=(2&this.ESt);this.NSt=i.M3();let s=[...new Set([...this.qyt.w3(),...this.NSt.w3()])];s=t.Pdt(s);const h=!i.v3()&&this.eTt()?{Gyt:!0}:null;if(this.UI=qo.$pt.prototype.wyt.bind(this.NSt,s,this.Xs,e,h),this.pf.Bj()){const r=this;this.T1t=function*(){(r.lSt()||r.pf.iyt())&&(yield r);const t=yield*r.NSt._yt(s,r.Xs,e,h);return t}}else this.T1t=Ko}else this.UI=Xo,this.T1t=Ko}PSt(){const r=this.qyt.d3(),n=r.s1t(this.ASt,this.DSt);if(n.tc()){const o=0!=(2&this.ESt);this.NSt=n.M3();let s=[...new Set([...this.qyt.w3(),...this.NSt.w3(),this.Sft,n.QF()])],t=(s=r.Pdt(s),!this.Sft.eY()&&!n.QF().eY()),i=!this.Sft.eY()&&n.QF().eY(),e=this.Sft.eY(),h=null;if(!n.v3()&&this.eTt()&&((h=h||{}).Gyt=!0),!i&&o||((h=h||{}).Syt=this.Sft,h.Tyt=n.QF()),t||i||e&&!n.hMt()?this.UI=qo.$pt.prototype.wyt.bind(this.NSt,s,this.Xs,o,h):e&&(this.UI=qo.Opt.prototype.aMt.bind(n,s,this.Xs)),this.pf.Bj()){const a=this;t||i||e&&!n.hMt()?this.T1t=function*(){(a.lSt()||a.pf.iyt())&&(yield a);const t=yield*a.NSt._yt(s,a.Xs,o,h);return t}:e&&(this.T1t=function*(){(a.lSt()||a.pf.iyt())&&(yield a);const t=yield*n.lMt(s,a.Xs);return t})}else this.T1t=Ko}else this.UI=Xo,this.T1t=Ko}sSt(t,s,i){const e=this.Nyt,h=this.Xs;if(0===h.length)this.UI=t.AMt(e,s);else if(1===h.length){const r=h[0];if(r._pt())this.UI=t.hSt(e,s,r.ei(0));else{const n=t.AMt(e,s);this.UI=function(){return n(r.ei(0))}}}else if(2===h.length){const o=h[0],a=h[1];if(o._pt()&&a._pt())this.UI=t.rSt(e,s,o.ei(0),a.ei(0));else{const u=t.AMt(e,s);this.UI=function(){return u(o.ei(0),a.ei(0))}}}else if(3===h.length){const l=h[0],c=h[1],f=h[2];if(l._pt()&&c._pt()&&f._pt())this.UI=t.nSt(e,s,l.ei(0),c.ei(0),f.ei(0));else{const d=t.AMt(e,s);this.UI=function(){return d(l.ei(0),c.ei(0),f.ei(0))}}}else this.UI=i}fY(){return this.AV}nyt(){return 0!=(8&this.ESt)}ryt(){return 0!=(16&this.ESt)}VSt(){return 1===this._St}fb(){return 2===this._St}RSt(){return 0!=(1&this.ESt)}wgt(){return this.nyt()||this.ryt()}QF(){return this.Sft}oSt(){return this.VMt?this.VMt.jz():this.Sft?this.Sft.F4():null}dwt(){const t=this.oSt();return t?t.aSt():1}M3(){return this.qyt}eTt(){let t=this.qyt;do{if(t instanceof qo.Opt&&t.v3())return!0}while(t=t.Vdt());return!1}iP(){return this.pf}LO(){return this.ty}Ygt(){return this.$mt.index}lSt(){return this.$mt.tgt}fSt(t){this.$mt.tgt=!!t,this.qyt.Igt()}dSt(){return this.$mt.Qwt}xmt(){return!this.lSt()&&!this.pf.iyt()&&!this.dSt()}pSt(){return this.Uwt||(this.Uwt=new Map),this.Uwt}mSt(){return this.Wwt||(this.Wwt=new Map),this.Wwt}iSt(){const t=this.zwt;return h(this.Xs,t),this.Nyt.apply(this.CMt,t)}*Hwt(){if((this.lSt()||this.pf.iyt())&&(yield this),this.dSt()){const t=this.zwt,s=(h(this.Xs,t),yield*this.Nyt.apply(this.CMt,t));return s}return this.UI()}eSt(){const t=this.zwt;return h(this.Xs,t),this.Nyt.apply(this.Sft.O4().Nz(),t)}*Zwt(){if((this.lSt()||this.pf.iyt())&&(yield this),this.dSt()){const t=this.zwt,s=(h(this.Xs,t),yield*this.Nyt.apply(this.Sft.O4().Nz(),t));return s}return this.UI()}$St(){const i=this.zwt,e=this.Sft.q4().H4();for(let t=0,s=e.length;t<s;++t)this.Nyt.apply(e[t].Nz(),i)}*tTt(){if((this.lSt()||this.pf.iyt())&&(yield this),this.dSt()){const i=this.zwt,e=this.Sft.q4().H4();for(let t=0,s=e.length;t<s;++t)yield*this.Nyt.apply(e[t].Nz(),i)}else this.$St()}sTt(){const i=this.zwt,e=(h(this.Xs,i),this.Sft.q4().H4());for(let t=0,s=e.length;t<s;++t)this.Nyt.apply(e[t].Nz(),i)}*iTt(){if((this.lSt()||this.pf.iyt())&&(yield this),this.dSt()){const i=this.zwt,e=(h(this.Xs,i),this.Sft.q4().H4());for(let t=0,s=e.length;t<s;++t)yield*this.Nyt.apply(e[t].Nz(),i)}else this.sTt()}qSt(){const e=this.Xs,h=this.zwt,s=this.Nyt,r=this.Sft.q4().H4();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);s.apply(n.Nz(),h)}}*ZSt(){if((this.lSt()||this.pf.iyt())&&(yield this),this.dSt()){const e=this.Xs,h=this.zwt,s=this.Nyt,r=this.Sft.q4().H4();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);yield*s.apply(n.Nz(),h)}}else this.qSt()}XSt(){const e=this.Xs,h=this.zwt,s=this.Nyt,r=this.Sft.q4().H4();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.ewt()||(h[t]=i.ei(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.ewt()&&(h[t]=o.ei(i))}s.apply(n.Nz(),h)}}*KSt(){if((this.lSt()||this.pf.iyt())&&(yield this),this.dSt()){const e=this.Xs,h=this.zwt,s=this.Nyt,r=this.Sft.q4().H4();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.ewt()||(h[t]=i.ei(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.ewt()&&(h[t]=o.ei(i))}yield*s.apply(n.Nz(),h)}}else this.XSt()}YSt(){const e=this.Xs,h=this.zwt,s=this.Nyt,t=this.Sft,i=t.hTt(),r=t.q4().H4();i.rTt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);s.apply(n.Nz(),h)}i.nTt(s)}*HSt(){if((this.lSt()||this.pf.iyt())&&(yield this),this.dSt()){const e=this.Xs,h=this.zwt,s=this.Nyt,t=this.Sft,i=t.hTt(),r=t.q4().H4();i.rTt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);yield*s.apply(n.Nz(),h)}i.nTt(s)}else this.YSt()}oTt(){return this.VMt?2<=this.VMt.jz().aSt()?this.VMt.Bz():this.VMt:2<=this.Sft.F4().aSt()?this.Sft.A4():this.Sft}USt(){const t=this.zwt;return h(this.Xs,t),this.Nyt.apply(this.oTt(),t)}*WSt(){if((this.lSt()||this.pf.iyt())&&(yield this),this.dSt()){const s=this.zwt;h(this.Xs,s);let t=this.Nyt.apply(this.oTt(),s);return qo.Vo(t)?yield*t:t}return this.USt()}zSt(){const t=this.Sft,s=t.eY(),e=t.QMt(),h=this.Xs,r=this.Bwt,n=this.zwt,o=this.Nyt,a=this.YMt,u=t.q4().H4();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.ewt()||(n[t]=i.ei(0))}for(let i=0,t=u.length;i<t;++i){const l=u[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.ewt()&&(n[t]=f.ei(i))}const c=s?l.QF().qMt(e):0;o.apply(l.Fht()[a+c].Nz(),n)}}*BSt(){if((this.lSt()||this.pf.iyt())&&(yield this),this.dSt()){const t=this.Sft,s=t.eY(),e=t.QMt(),h=this.Xs,r=this.Bwt,n=this.zwt,o=this.Nyt,a=this.YMt,u=t.q4().H4();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.ewt()||(n[t]=i.ei(0))}for(let i=0,t=u.length;i<t;++i){const l=u[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.ewt()&&(n[t]=f.ei(i))}const c=s?l.QF().qMt(e):0;yield*o.apply(l.Fht()[a+c].Nz(),n)}}else this.zSt()}QSt(){const e=this.Xs,h=this.zwt,s=this.Nyt,r=this.Sft.q4().H4(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);n.push(s.apply(o.Nz(),h))}return Promise.all(n)}*JSt(){if((this.lSt()||this.pf.iyt())&&(yield this),this.dSt()){const e=this.Xs,h=this.zwt,s=this.Nyt,r=this.Sft.q4().H4(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);n.push(yield*s.apply(o.Nz(),h))}return Promise.all(n)}return this.QSt()}FSt(){const t=this.Sft,s=t.eY(),e=t.QMt(),h=this.Xs,r=this.zwt,n=this.Nyt,o=this.YMt,a=t.q4().H4(),u=[];for(let i=0,t=a.length;i<t;++i){const l=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].ei(i);const c=s?l.QF().qMt(e):0;u.push(n.apply(l.Fht()[o+c].Nz(),r))}return Promise.all(u)}*jSt(){if((this.lSt()||this.pf.iyt())&&(yield this),this.dSt()){const t=this.Sft,s=t.eY(),e=t.QMt(),h=this.Xs,r=this.zwt,n=this.Nyt,o=this.YMt,a=t.q4().H4(),u=[];for(let i=0,t=a.length;i<t;++i){const l=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].ei(i);const c=s?l.QF().qMt(e):0;u.push(yield*n.apply(l.Fht()[o+c].Nz(),r))}return Promise.all(u)}return this.FSt()}async LSt(){try{await this.Nyt()}catch(t){console.error(`Unhandled exception running script %c${this.qyt.x9().hf()}, event ${this.qyt.Ngt()}, action ${this.Ygt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),qo.omt.Oyt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),qo.omt.Ryt())}}*OSt(){return(this.lSt()||this.pf.iyt())&&(yield this),this.LSt()}_7(){return this.Uwt&&this.Uwt.size?{ex:qo.Wo(this.Uwt)}:null}E7(t){if(this.Uwt&&(this.Uwt.clear(),this.Uwt=null),t){const s=t.ex;s&&(this.Uwt=qo.Qo(s))}}}}{let d=function(t){return t instanceof o?M.Dk(t):t.nU()},l=function(t){return d(t).RR()},h=function(t){return M.Dk(t)},m=function(t){return t instanceof a?M.Dk(t):t},s=function(t){return t instanceof c?M.Dk(t):t},_=function(t,s,i,e){const h=s.hj(),r=i.hj();h<r?t.Set(s,i,e):t.Set(i,s,e)},E=function(t,s,i){const e=s.hj(),h=i.hj();e<h?t.nc(s,i):t.nc(i,s)},D=function(t,s){t.oc(s)},A=function(t,s,i){const e=s.hj(),h=i.hj();return e<h?t.ei(s,i):t.ei(i,s)},e=function(t,s,i,e){if(!s)return!1;const h=0!==i||0!==e,r=t.RR(),n=M.zO(),o=M.zdt(),a=o.M3().qft(),u=o.QF(),l=o.uSt(),c=s.q4(),f=u!==s;I=s,G=f&&!l;let d,p=0,m=0,g=C=!1;c.Nft()?(w.C(r.g5()),w.offset(i,e),n.aTt(r.PR(),s,w,S),d=S):!a||M.uTt()&&!c.Bft().length&&c.zft().length?d=c.zft():(d=c.Bft(),C=!0),h&&(p=r.GT(),m=r._T(),r.f5(i,e),r.a5());for(const y of d)if(n.vP(t,y)){if(g=!0,l)break;f&&O.add(y)}return h&&(r.u5(p,m),r.a5()),N.Wn(S),g},i=function(t){const s=M.S3().qft(),i=I.q4(),e=i.zft(),h=i.Bft();i.Nft()?(i.Qft(O),s&&(N.Wn(h),i.Jft(O,I.H4()))):s?C?i.Vft(O):(i.Jft(O,e),i.Qft(O)):i.Qft(O),I.byt()},T=function(t,s){G&&(s&&i(),O.clear(),I=null,G=!1)},r=function(t,s){const i=M.DR(s);if(i){const e=t.q4();if(e.Nft()||e.zft().includes(i))if(t.eY()){if(i.QF().lTt(t))return e.Hft(i),t.byt(),!0}else if(i.QF()===t)return e.Hft(i),t.byt(),!0}return!1},n=function(t,h){const r=t.q4();if(r.Nft()){r.jft(!1),r.Aft();const i=t.H4();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.hj()===h?r.Fft(e):r.kft(e)}return t.byt(),!!r.zft().length}{let i=r.zft(),e=0;for(let t=0,s=i.length;t<s;++t){const n=i[t];(i[e]=n).hj()===h?r.Fft(n):++e}return N.Un(i,e),t.byt(),!!i.length}},N=(d,l,h,m,s,_,E,D,A,e,i,T,r,n,self.ks),u=new N.Ho,b={},v={},x={},M=null,o=(N.cTt=function(t){M=t},self.UF),a=self.R4,c=self.Ek,w=(v.fTt=function(t,s){return N.compare(this.RR().GT(),t,s)},x.fTt=function(t,s){return N.compare(this.x,t,s)},v.dTt=function(t,s){return N.compare(this.RR()._T(),t,s)},x.dTt=function(t,s){return N.compare(this.y,t,s)},v.pTt=function(){return this.RR().S5()},x.pTt=function(){return this.w5()},b.mTt=function(){const t=l(this),s=t.yR(),i=t.g5();return i._u()<0||i.Eu()<0||i.Iu()>s.ym()||i.Cu()>s._m()},b.gTt=function(i,e,h){const t=m(this),s=t.q4(),r=s.H4();if(!r.length)return!1;let n=r[0],o=n.RR(),a=n,u=N._r(o.GT(),o._T(),e,h);for(let t=1,s=r.length;t<s;++t){n=r[t],o=n.RR();const l=N._r(o.GT(),o._T(),e,h);(0===i&&l<u||1===i&&l>u)&&(u=l,a=n)}return s.Hft(a),!0},v.IT=function(t){const s=this.RR();s.GT()!==t&&(s.IT(t),s.a5())},x.IT=function(t){this.x=+t},v.ET=function(t){const s=this.RR();s._T()!==t&&(s.ET(t),s.a5())},x.ET=function(t){this.y=+t},v.yTt=function(t,s){const i=this.RR();i.MTt(t,s)||(i.u5(t,s),i.a5())},x.yTt=function(t,s){this.setPosition(t,s)},b.wTt=function(t,s){if(t=m(t)){const i=d(this),e=t.V4(i);if(e){const[h,r]=e.STt(s),n=i.RR();n.GT()===h&&n._T()===r||(n.u5(h,r),n.a5())}}},b.TTt=function(t){if(0!==t){const s=l(this);s.f5(s.bTt()*t,s.vTt()*t),s.a5()}},v.xTt=function(t,s){if(0!==s){const i=this.RR();t=N.br(t),i.f5(Math.cos(t)*s,Math.sin(t)*s),i.a5()}},x.xTt=function(t,s){0!==s&&(t=N.br(t),this.c5(Math.cos(t)*s,Math.sin(t)*s))},v.GT=function(){return this.RR().GT()},x.GT=function(){return this.x},v._T=function(){return this.RR()._T()},x._T=function(){return this.y},b.P3=function(){return M.P3(d(this))},v.GTt=function(t,s){return N.compare(this.RR().ym(),t,s)},x.GTt=function(t,s){return N.compare(this.width,t,s)},v.ITt=function(t,s){return N.compare(this.RR()._m(),t,s)},x.ITt=function(t,s){return N.compare(this.height,t,s)},v.Gm=function(t){const s=this.RR();s.ym()!==t&&(s.Gm(t),s.a5())},x.Gm=function(t){this.width=t},v.Mm=function(t){const s=this.RR();s._m()!==t&&(s.Mm(t),s.a5())},x.Mm=function(t){this.height=t},v.c_=function(t,s){const i=l(this);i.ym()===t&&i._m()===s||(i.c_(t,s),i.a5())},x.c_=function(t,s){this.dk(t,s)},v.ym=function(){return this.RR().ym()},x.ym=function(){return this.width},v._m=function(){return this.RR()._m()},x._m=function(){return this.height},b.CTt=function(){return l(this).g5().Iu()},b._Tt=function(){return l(this).g5().Cu()},b.ETt=function(){return l(this).g5()._u()},b.DTt=function(){return l(this).g5().Eu()},b.ATt=function(){const t=l(this).g5();return(t.Iu()+t._u())/2},b.NTt=function(){const t=l(this).g5();return(t.Cu()+t.Eu())/2},b.LTt=function(t,s){return N.Dr(l(this).yk(),N.br(s))<=N.br(t)},b.OTt=function(t){return N.Nr(l(this).yk(),N.br(t))},b.RTt=function(t,s){const i=N.br(t),e=N.br(s),h=l(this).yk(),r=!N.Nr(e,i);return r?!(!N.Nr(h,i)&&N.Nr(h,e)):N.Nr(h,i)&&!N.Nr(h,e)},v.gk=function(t){const s=this.RR(),i=N.Tr(N.br(t));isNaN(i)||s.yk()===i||(s.gk(i),s.a5())},x.gk=function(t){this.m5=t},b.PTt=function(t){if(!isNaN(t)&&0!==t){const s=l(this);s.gk(s.yk()+N.br(t)),s.a5()}},b.kTt=function(t){if(!isNaN(t)&&0!==t){const s=l(this);s.gk(s.yk()-N.br(t)),s.a5()}},b.FTt=function(t,s){const i=l(this),e=i.yk(),h=N.Ar(e,N.br(s),N.br(t));isNaN(h)||e===h||(i.gk(h),i.a5())},b.jTt=function(t,s,i){const e=l(this),h=e.yk(),r=s-e.GT(),n=i-e._T(),o=Math.atan2(n,r),a=N.Ar(h,o,N.br(t));isNaN(a)||h===a||(e.gk(a),e.a5())},b.zTt=function(t,s){const i=l(this),e=i.yk(),h=t-i.GT(),r=s-i._T(),n=Math.atan2(r,h);isNaN(n)||e===n||(i.gk(n),i.a5())},v.yk=function(){return N.vr(this.RR().yk())},x.yk=function(){return this.m5},b.BTt=function(t,s){return N.compare(N.Vr(100*l(this).BD(),6),t,s)},v.sF=function(){return this.RR().sF()},x.sF=function(){return this.isVisible},b.$k=function(t){const s=l(this);t=2===t?!s.sF():0!==t,s.sF()!==t&&(s.$k(t),M.UR())},b.WD=function(t){const s=N.Sr(t/100,0,1),i=l(this);if(i.fz()){if(i.cnt().UTt()===s)return}else if(i.BD()===s)return;i.WD(s),M.UR()},b.WTt=function(t){u.Ca(t);const s=l(this);s.b5().Ma(u)||(s.v5(u),M.UR())},b.JD=function(){const t=l(this).b5();return N.qr(t.la(),t.ca(),t.fa(),t.da())},b.BD=function(){return N.Vr(100*l(this).BD(),6)},b.QTt=function(t){return!!(t=s(t))&&l(this).PR()===t},b.JTt=function(i){const t=m(this),s=t.q4(),e=s.H4();if(!e.length)return!1;let h=e[0],r=h;for(let t=1,s=e.length;t<s;++t){const n=e[t],o=n.RR(),a=r.RR(),u=o.PR().LO(),l=a.PR().LO();0===i?(l<u||u===l&&o.kR()>a.kR())&&(r=n):(u<l||u===l&&o.kR()<a.kR())&&(r=n)}return s.Hft(r),!0},v.VTt=function(t,s,i){const e=this.RR(),h=0===t?e.DT():e.p5();return N.compare(h,s,i)},x.VTt=function(t,s,i){const e=0===t?this.MF:this.d5;return N.compare(e,s,i)},v.YTt=function(){this.RR().G5()},x.YTt=function(){this.x5()},v.HTt=function(){this.RR().C5()},x.HTt=function(){this.I5()},b.qTt=function(t){(t=s(t))&&l(this).E5(t)},b.ZTt=function(t,s){const i=0===t;if(s=m(s)){const e=d(this),h=s.XTt(e);h&&e.RR().A5(h,i)}},v.AT=function(t){const s=this.RR();s.DT()!==t&&(s.AT(t),M.UR())},x.AT=function(t){this.MF=t},b.KTt=function(){return l(this).PR().LO()},b.$Tt=function(){return l(this).PR().hf()},v.t2t=function(){return this.RR().kR()},x.t2t=function(){return this.zIndex},v.s2t=function(){return this.RR().DT()},x.s2t=function(){return this.MF},v.i2t=function(){return this.RR().p5()},x.i2t=function(){return this.d5},b.e2t=function(t){const s=d(this),i=s.QF().lk().Bht(t);if(i){const e=i.LO(),h=s.RR().n5();return h.qz(e)}},b.h2t=function(t,s){const i=d(this),e=i.QF().lk().Bht(s);if(e){const h=e.LO(),r=1===t,n=i.RR().n5();n.qz(h)!==r&&(n.Zz(h,r),n.Xz(),M.UR())}},b.r2t=function(t,s,i){const e=d(this),h=e.QF().lk().Bht(t);if(h){s=Math.floor(s);const r=h.Tx().vx(s);if(r){"color"===r?(u.Ca(i),i=u):"percent"===r&&(i/=100);const n=h.LO(),o=e.RR().n5(),a=o.$z(n,s,i);a&&o.qz(n)&&M.UR()}}},N.lr(N.Rect)),L=[],S=[],G=!1,I=null,C=!1,O=new Set;b.n2t=function(y){const t=m(this),M=(y=m(y),t.iP());if(M.o2t())return function*(M){if(M){let t=this.iP(),s=t.zO(),e=t.d3(),i=e.C3(),h=e.zdt(),r=h.QF(),n=h.pSt(),o=h.mSt(),a=i.K6(),u=t.jtt(),l=u-1,c=a.S3(),f=i.tW(c),d=n.get("collmemory"),p=(d||(d=N.lr(N.ic),n.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Hf().addEventListener("instancedestroy",t=>D(d,t.Wz))),r.q4()),m=M.q4(),g=p.H4(),y=null;for(let t=0;t<g.length;++t){const w=g[t];m.Nft()?(s.aTt(w.RR().PR(),M,w.RR().g5(),L),y=L,s.a2t(w,M,y)):y=m.H4();for(let t=0;t<y.length;++t){const S=y[t];if(s.vP(w,S)||s.u2t(w,S)){let t=A(d,w,S),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const T=!s||i<l;if(_(d,w,S,u),T){const b=c.X6(),v=(e.rW(b),r.q4()),x=M.q4();if(v.jft(!1),x.jft(!1),r===M){const G=v.zft();N.Wn(G),G.push(w),G.push(S),r.byt()}else{const I=v.zft(),C=x.zft();N.Wn(I),N.Wn(C),I.push(w),C.push(S),r.byt(),M.byt()}yield*c.dyt(a,f),e.oW(b)}}else E(d,w,S)}N.Wn(L)}i.cW()}return!1}.call(t,y);if(y){let s=M.zO(),e=M.d3(),t=e.C3(),i=e.zdt(),h=i.QF(),r=i.pSt(),n=i.mSt(),o=t.K6(),a=M.jtt(),u=a-1,l=o.S3(),c=t.tW(l),f=r.get("collmemory"),d=(f||(f=N.lr(N.ic),r.set("collmemory",f)),n.get("collisionCreatedDestroyCallback")||(n.set("collisionCreatedDestroyCallback",!0),M.Hf().addEventListener("instancedestroy",t=>D(f,t.Wz))),h.q4()),p=y.q4(),m=d.H4(),g=null;for(let t=0;t<m.length;++t){const w=m[t];p.Nft()?(s.aTt(w.RR().PR(),y,w.RR().g5(),L),g=L,s.a2t(w,y,g)):g=p.H4();for(let t=0;t<g.length;++t){const S=g[t];if(s.vP(w,S)||s.u2t(w,S)){let t=A(f,w,S),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const T=!s||i<u;if(_(f,w,S,a),T){const b=l.X6(),v=(e.rW(b),h.q4()),x=y.q4();if(v.jft(!1),x.jft(!1),h===y){const G=v.zft();N.Wn(G),G.push(w),G.push(S),h.byt()}else{const I=v.zft(),C=x.zft();N.Wn(I),N.Wn(C),I.push(w),C.push(S),h.byt(),y.byt()}l.nW(o,c),e.oW(b)}}else E(f,w,S)}N.Wn(L)}t.cW()}return!1},b.l2t=function(t){return t=m(t),e(d(this),t,0,0)},b.c2t=function(t,s,i){return t=m(t),e(d(this),t,s,i)},b.f2t=function(){return!0},b.q5=function(){return l(this).q5()},b.N7=function(){return l(this).N7()},b.d2t=function(i,e){const t=m(this),s=(i=m(i),t.iP()),h=this.q4(),r=h.H4();if(0===r.length)return!1;let n=i.q4(),o=n.H4();if(n.Nft()){const l=[...s.p2t(i)];0<l.length&&(o=o.concat(l))}if(0===o.length)return!1;const a=n.Nft()?null:new Set(o),u=new Set;for(let t=0,s=r.length;t<s;++t){const c=r[t];if(1===e)for(const f of c.j5())f.m2t(i)&&(null===a||a.has(f))&&u.add(f);else{let t;if(0===e){if(null===(t=c.P5()))continue}else t=c.F5();t.m2t(i)&&(null===a||a.has(t))&&u.add(t)}}return 0!==u.size&&(n.Qft(u),i.byt(),!0)},b.g2t=function(i,e){const t=m(this),s=(i=m(i),t.iP()),h=t.q4(),r=h.H4();if(0===r.length)return!1;let n=i.q4(),o=n.H4();if(n.Nft()){const l=[...s.p2t(i)];0<l.length&&(o=o.concat(l))}if(0===o.length)return!1;const a=n.Nft()?null:new Set(o),u=new Set;for(let t=0,s=r.length;t<s;++t){const c=r[t];2!==e||c.N7()||!c.m2t(i)||null!==a&&!a.has(c)||u.add(c);for(const f of 0===e?c.children():c.Q5())2===e&&f.N7()||f.m2t(i)&&(null===a||a.has(f))&&u.add(f)}return 0!==u.size&&(n.Qft(u),i.byt(),!0)},b.y2t=function(i,e,h){const t=m(this),s=(i=m(i),t.iP()),r=t.q4(),n=r.H4();if(0===n.length)return!1;let o=i.q4(),a=o.H4();if(o.Nft()){const c=[...s.p2t(i)];0<c.length&&(a=a.concat(c))}if(0===a.length)return!1;const u=o.Nft()?null:new Set(a),l=[];for(let t=0,s=n.length;t<s;++t){const f=n[t];if(0===e){const d=f.W5(h);null!==d&&d.m2t(i)&&(null===u||u.has(d))&&l.push(d)}else if(1===e)for(const p of f.children())if(p.m2t(i)){if(0===h){null!==u&&!u.has(p)||l.push(p);break}--h}}return 0!==l.length&&(o.Wft(l),i.byt(),!0)},b.M2t=function(t,s,i){const e=d(this);switch(t){case 0:default:return N.compare(e.B5(),s,i);case 1:return N.compare(e.w2t(),s,i)}},b.V5=function(t,s,i,e,h,r,n,o,a,u){t=m(t);const l=d(this),c=M.Udt().QF();for(const f of t.S2t(l,c)){if(!f.F4().v4())return;l.V5(f,{X5:s,sz:i,ez:e,rz:h,oz:r,cz:n,uz:o,dz:a,mz:u})}},b.Y5=function(t){t=m(t);const s=d(this),i=M.Udt().QF();for(const e of t.S2t(s,i))s.Y5(e)},b.T2t=function(){const t=d(this);if(t.q5()){const s=t.P5();s.Y5(t)}},b.b2t=function(){const t=d(this).P5();return t?t.hj():-1},b.v2t=function(){return d(this).B5()},b.x2t=function(){return d(this).w2t()},b.G2t=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=l(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.Sz(),i.a5()):i.Mz(t,s)},b.bz=function(t,s,i,e,h,r,n,o){const a=l(this),u=a.bz(t,s,{mode:0===i?"absolute":"relative",x:e,y:h,MF:r,u:n,v:o});u&&a.a5()},b.I2t=function(){const t=l(this);return t.xz()?t.Gz().t2():0},b.C2t=function(){const t=l(this);return t.xz()?t.Gz().s2():0},b._2t=function(t){const s=l(this);t=2===t?!s.sF():0!==t,s.sF()!==t&&s.$k(t)},b.Pz=function(t,s){this instanceof self.UF?this.m6(t,s):this.Pz(t,s)},b.E2t=function(t,s){this instanceof self.UF?this.g6(t,""+s):this.E2t(t,""+s)},b.D2t=function(t){this instanceof self.UF?this.y6(t):this.D2t(t)},b.A2t=function(){this instanceof self.UF?this.f6():this.Lz()},b.N2t=function(){this instanceof self.UF?this.d6():this.Oz()},b.L2t=function(){return this instanceof self.UF?this.p6():this.L2t()},b.O2t=function(t){this instanceof self.UF?this._setEnabled(0!==t):this.R2t(0!==t)},b.P2t=function(){return this instanceof self.UF?this.zyt():this.k2t()},v.F2t=function(t,s,i){return N.compare(this.nU().tnt(t),s,i)},x.F2t=function(t,s,i){return N.compare(h(this).tnt(t),s,i)},v.j2t=function(t){return!!this.nU().tnt(t)},x.j2t=function(t){return!!h(this).tnt(t)},b.z2t=function(i,e){const h=m(this),t=h.q4(),r=t.H4();if(!r.length)return!1;let n=h.eY(),o=null,a=0;for(let t=0,s=r.length;t<s;++t){const u=r[t],l=n?u.QF().WMt(h.QMt()):0,c=u.tnt(l+e);(null===o||0===i&&c<a||1===i&&c>a)&&(a=c,o=u)}return t.Hft(o),!0},b.B2t=function(t){const s=m(this);return(s.iP().zdt().uSt()?n:r)(s,t)},b.BB=function(t){const s=new Set(N.ao(t)),i=d(this).pj();return s.isSubsetOf(i)},b.U2t=function(){return d(this).W2t()},b.Q2t=function(){return d(this).pj().size},b.J2t=function(t){return d(this).V2t(t)},b.Y2t=function(t,s){const i=N.ao(s);if(0!==i.length){const e=d(this),h=new Set(e.pj());if(0===t)for(const r of i)h.add(r);else if(1===t)for(const n of i)h.delete(n);e.gj(h)}},b.H2t=function(){M.XF(d(this))},b.q2t=function(){return!0},b.Z2t=function(){return!0},v.X2t=function(t,s){this.nU().snt(t,s)},x.X2t=function(t,s){h(this).snt(t,s)},v.K2t=function(t,s){const i=this.nU(),e=i.tnt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.snt(t,e+s)},x.K2t=function(t,s){const i=h(this),e=i.tnt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.snt(t,e+s)},v.$2t=function(t,s){const i=this.nU(),e=i.tnt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.snt(t,e-s))},x.$2t=function(t,s){const i=h(this),e=i.tnt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.snt(t,e-s))},v.tbt=function(t,s){this.nU().snt(t,s?1:0)},x.tbt=function(t,s){h(this).snt(t,s?1:0)},v.sbt=function(t){const s=this.nU();s.snt(t,0===s.tnt(t)?1:0)},x.sbt=function(t){const s=h(this);s.snt(t,0===s.tnt(t)?1:0)},b.ibt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);M.ebt(),i.JZ("state"),i.jT(s,"state"),M.hbt("state",{rbt:!0})},b.nbt=function(){return JSON.stringify(d(this).FT("state"))},b.obt=function(){return d(this).QF().hf()},b.abt=function(){let t=M.jdt().G0t(),s=t.X4();for(const i of M.p2t(t))++s;return s},b.ubt=function(){return M.jdt().G0t().q4().H4().length},v.nj=function(){return this.nU().nj()},x.nj=function(){return h(this).nj()},v.hj=function(){return this.nU().hj()},x.hj=function(){return h(this).hj()},b.cpt=function(t){const s=d(this);return t.toLowerCase()===M.d3().mpt(s)},b.Mj=function(t){const s=d(this);M.d3().Mj(s,t)},b.lbt=function(t){const s=m(this);return M.d3().B1t().cbt(s.q4().H4(),t),!0},b.fbt=function(){return d(this).aj()},N.dbt=function(t,s,i){const e=t[1],h=t[3],r=t[4],n=t[5],o=t[6],a=t[7],u=t[8],l=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.wq,M=s.ort,w=s.art,S=Object.assign({},b,2<=i?x:v);h&&(y.fTt=S.fTt,y.dTt=S.dTt,y.pTt=S.pTt,y.mTt=S.mTt,y.gTt=S.gTt,M.IT=S.IT,M.ET=S.ET,M.yTt=S.yTt,M.wTt=S.wTt,M.TTt=S.TTt,M.xTt=S.xTt,w.pbt=S.GT,w.mbt=S._T,w.R3=S.P3),r&&(y.GTt=S.GTt,y.ITt=S.ITt,M.Gm=S.Gm,M.Mm=S.Mm,M.c_=S.c_,w.gbt=S.ym,w.ybt=S._m,w.Mbt=S.CTt,w.wbt=S._Tt,w.Sbt=S.ETt,w.Tbt=S.DTt,w.bbt=S.ATt,w.vbt=S.NTt),n&&(y.xbt=S.LTt,y.Gbt=S.OTt,y.RTt=S.RTt,M.gk=S.gk,M.PTt=S.PTt,M.kTt=S.kTt,M.FTt=S.FTt,M.jTt=S.jTt,M.zTt=S.zTt,w.Ibt=S.yk),o&&(y.sF=S.sF,y.BTt=S.BTt,M.$k=S.$k,M.WD=S.WD,M.WTt=S.WTt,w.Opacity=S.BD,w.Cbt=S.JD),a&&(y.QTt=S.QTt,y.JTt=S.JTt,y.VTt=S.VTt,M.YTt=S.YTt,M.HTt=S.HTt,M.qTt=S.qTt,M.ZTt=S.ZTt,M.AT=S.AT,w.KTt=S.KTt,w.$Tt=S.$Tt,w.t2t=S.t2t,w.s2t=S.s2t,w.i2t=S.i2t),u&&(y.e2t=S.e2t,M.h2t=S.h2t,M.r2t=S.r2t),d&&(y.f2t=S.f2t,y.q5=S.q5,y.N7=S.N7,y.d2t=S.d2t,y.g2t=S.g2t,y.y2t=S.y2t,y.M2t=S.M2t,M.V5=S.V5,M.Y5=S.Y5,M.T2t=S.T2t,w.b2t=S.b2t,w.v2t=S.v2t,w.x2t=S.x2t),p&&(M.G2t=S.G2t,M.bz=S.bz,w.I2t=S.I2t,w.C2t=S.C2t),l&&(y.sF=S.sF,M.$k=S._2t,M._bt=S.Pz,M.Ebt=S.E2t,M.Dbt=S.D2t),c&&(y.Abt=S.L2t,M.Nbt=S.A2t,M.Lbt=S.N2t),f&&(y.tc=S.P2t,M.Obt=S.O2t),m&&(y.n2t=S.n2t,y.l2t=S.l2t,y.c2t=S.c2t,s.Rbt=T),e||(y.F2t=S.F2t,y.j2t=S.j2t,y.z2t=S.z2t,y.B2t=S.B2t,y.BB=S.BB,M.X2t=S.X2t,M.K2t=S.K2t,M.$2t=S.$2t,M.tbt=S.tbt,M.sbt=S.sbt,M.Y2t=S.Y2t,y.q2t=S.q2t,y.Z2t=S.Z2t,M.H2t=S.H2t,M.ibt||(M.ibt=S.ibt),w.nbt||(w.nbt=S.nbt),w.abt=S.abt,w.ubt=S.ubt,w.Pbt=S.nj,w.kbt=S.hj,w.obt=S.obt,w.U2t=S.U2t,w.Q2t=S.Q2t,w.J2t=S.J2t,y.cpt=S.cpt,M.Mj=S.Mj,M.lbt=S.lbt),g&&(w.fbt=S.fbt)}}{const $o=self.ks;$o.U1t=class extends $o.nr{constructor(t){super(),this.Xft=t,this.vf="",this.fL=-1,this.Fbt="",this.jbt=!1,this.zbt=null,this.n0t=0,this.Omt=[],this.f0t=null,this.Bbt=new Map,this.Ubt=null,this.Wbt=null,this.Qbt=-1,this.jyt=null,this.Jbt=null,this.Vbt=!1}cr(){this.vf="",this.fL=-1,this.Fbt="",this.zbt=null,this.Wbt=null,this.jyt=null,this.Jbt=null,this.Qbt=-1,$o.Wn(this.Omt),this.f0t&&(this.f0t.clear(),this.f0t=null);for(const t of this.Bbt.values())t.cr();this.Bbt.clear(),this.Ubt=null}xT(){const t=this.Xft,s=t.iP().iY(),i=t.jdt(),e=(this.zbt=i.S3(),this.n0t=i.M0t()+1,t.Lpt(this.zbt));e&&(this.Wbt=e,this.jyt=e.iMt(),this.Jbt=e.sMt().map(t=>t.Let()),e.nyt())&&(this.Qbt=e.nMt());for(const r of s){const n=r.q4();n.Nft()&&!this.zbt.Dgt(r)||(this.Omt.push(r),this.Bbt.set(r,$o.lr($o.Ybt,n)))}const h=t.T3();this.f0t=0<h.size?h:null}Hbt(t){this.vf="timer",this.xT(),this.fL=this.Xft.iP().z3()+t}qbt(t){this.vf="walltimer",this.xT(),this.fL=this.Xft.iP().U3()+t}Zbt(t){this.vf="signal",this.xT(),this.Fbt=t.toLowerCase()}cbt(t,s){this.vf="instance-signals",this.xT(),this.Fbt=s.toLowerCase(),this.Ubt=new Set(t)}Xbt(t){this.vf="promise",this.xT(),t.then(()=>this.opt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.opt()})}Kbt(){return"timer"===this.vf}$bt(){return"walltimer"===this.vf}rpt(){return"signal"===this.vf}dpt(){return"instance-signals"===this.vf}Ept(){return"promise"===this.vf}npt(){return this.Fbt}tvt(){return this.jbt}opt(){this.jbt=!0}ppt(t){this.Ubt.delete(t),0===this.Ubt.size&&this.opt()}J1t(){return this.Kbt()?this.fL<=this.Xft.iP().z3():this.$bt()?this.fL<=this.Xft.iP().U3():this.tvt()}svt(t){t.d0t(this.zbt,this.n0t);for(const[i,e]of this.Bbt.entries()){const h=i.q4();e.d0t(h)}this.f0t&&t.A0t([...this.f0t]);const s=this.Wbt;s&&(s.yyt(this.jyt),s.sMt().map((t,s)=>t.mht(this.Jbt[s])),s.nyt())&&s.oMt(this.Qbt)}V1t(t){this.svt(t),this.zbt.oyt(t),this.Wbt&&this.Wbt.nyt()&&this.Wbt.Cyt(this.Qbt),this.Xft.k1t(this.Omt),this.Vbt=!0}async Z1t(t){this.svt(t);for(const s of this.zbt.ayt(t))await this.Xft.iP().S1t(s);this.Wbt&&this.Wbt.nyt()&&this.Wbt.Cyt(this.Qbt),this.Xft.k1t(this.Omt),this.Vbt=!0}Y1t(){return this.Vbt}Cft(t){for(const s of this.Bbt.values())s.Cft(t);if("instance-signals"===this.vf){for(const i of t)this.Ubt.delete(i);0===this.Ubt.size&&this.opt()}}_7(){const t={},s={wt:this.vf,t:this.fL,st:this.Fbt,s:this.jbt,ev:this.zbt.fY(),sm:this.Omt.map(t=>t.fY()),dsm:this.f0t?[...this.f0t].map(t=>t.fY()):null,sols:t};this.zbt.Hgt(this.n0t)&&(s.act=this.zbt.Wdt(this.n0t).fY());for(const[i,e]of this.Bbt)t[i.fY().toString()]=e._7();return"instance-signals"===this.vf&&(s.pi=[...this.Ubt].map(t=>t.hj())),s}static Dpt(t,s){const i=t.iP(),e=t.Kdt(s.ev);if(!e)return null;let h=0;if(s.hasOwnProperty("act")){const n=t.t1t(s.act);if(!n)return null;h=n.LO()}const r=$o.lr($o.U1t,t);r.fL=s.t,s.hasOwnProperty("wt")?r.vf=s.wt:r.vf=-1===r.fL?"signal":"timer",r.Fbt=s.st,r.jbt=s.s,r.zbt=e,r.n0t=h;for(const o of s.sm){const a=i.Q6(o);a&&r.Omt.push(a)}if(Array.isArray(s.dsm))for(const u of s.dsm){const l=i.Q6(u);l&&(r.f0t||(r.f0t=new Set),r.f0t.add(l))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.Q6(d);if(p){const m=$o.lr($o.Ybt,null);m.E7(t,f),r.Bbt.set(p,m)}}if("instance-signals"===r.vf){r.Ubt=new Set;for(const g of s.pi){const y=i.DR(g);y&&r.Ubt.add(y)}}return r}}}{const ta=self.ks;ta.Ybt=class extends ta.nr{constructor(t){super(),this.Sft=null,this.ivt=!0,this.$J=[],t&&(this.Sft=t.QF(),this.ivt=t.Nft(),ta.Yn(this.$J,t.zft()))}cr(){this.Sft=null,ta.Wn(this.$J)}d0t(t){t.jft(this.ivt),ta.Yn(t.zft(),this.$J)}Cft(t){ta.Kn(this.$J,t)}_7(){return{sa:this.ivt,insts:this.$J.map(t=>t.hj())}}E7(t,s){const i=t.iP();this.ivt=!!s.sa,ta.Wn(this.$J);for(const e of s.insts){const h=i.DR(e);h&&this.$J.push(h)}}}}{let u=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};u;const sa=self.ks;sa.evt=class extends sa.nr{constructor(t){super(),this.pf=t.runtime,this.mr=t.name??"",this.hvt=!!t.u4,this.rvt=!!t.nvt,this.ovt=!!t.g4,this.avt=!!t.uvt,this.lvt=!!t.M4,this.cvt=!!t.fvt,this.dvt=!!t.x4,this.pvt=!!t.d4,this.mvt=!!t.S4,this.gvt=t.yvt,this.Mvt=null,this.wvt=new Map,this.Svt=new Map,this.Tvt=new Map,this.bvt=new Map,this.vvt=t.xvt,this.Gvt=null}cr(){this.pf=null}iP(){return this.pf}hf(){return this.mr}Ivt(){}fpt(){return(2<=this.aSt()?this.Gvt:this).constructor}aSt(){return this.gvt}Cvt(t=!1){let s=this.vvt;return t&&"function"!=typeof s&&2<=this.aSt()?globalThis.dU:s}l4(){return this.hvt}f4(){return this.rvt}m4(){return this.pvt}T4(){return this.mvt}y4(){return this.ovt}$S(){return this.avt}w4(){return this.lvt}v4(){return this.cvt}G4(){return this.dvt}AMt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.wvt.get(t);return i||(i=t.bind(s),this.wvt.set(t,i)),i}hSt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=u(this.Svt,t),h=e.get(i);return h||(h=t.bind(s,i),e.set(i,h)),h}rSt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let h=u(this.Tvt,t),r=u(h,i),n=r.get(e);return n||(n=t.bind(s,i,e),r.set(e,n)),n}nSt(t,s,i,e,h){if(!s)throw new Error("missing 'this' binding");let r=u(this.bvt,t),n=u(r,i),o=u(n,e),a=o.get(h);return a||(a=t.bind(s,i,e,h),o.set(h,a)),a}_vt(t){if(!this.l4())throw new Error("must be single-global plugin");this.Mvt=t}N4(){if(this.l4())return this.Mvt;throw new Error("must be single-global plugin")}O4(){if(this.l4())return this.Mvt.O4();throw new Error("must be single-global plugin")}Evt(){const t=this.aSt(),s=(sa.o4.Dvt(this,t),this.Cvt(!0));if(s){if(this.Gvt=new s,!(this.Gvt instanceof self.h4))throw new TypeError("plugin class must derive from IPlugin")}else this.Gvt=new self.h4;sa.o4.Avt(t)}E4(){return this.Gvt}}}{const ia=self.ks;ia.Nvt=class extends ia.evt{constructor(t,s){super(t),this.Lvt=s,this.Ovt=0,this.Rvt=new Map,this.Pvt("elem-focused",t=>t.kvt()),this.Pvt("elem-blurred",t=>{t&&t.Fvt()})}cr(){super.cr()}jvt(t){const s=this.Ovt++;return this.Rvt.set(s,t),s}zvt(t){this.Rvt.delete(t)}Pvt(t,i){this.pf.Pj(this.Lvt,t,t=>{const s=this.Rvt.get(t.elementId);i(s,t)})}}}{const ea=self.ks;ea.Bvt=class extends ea.nr{constructor(t){super(),this.Sft=t,this.pf=t.iP(),this.Uvt=t.F4()}cr(){this.Sft=null,this.pf=null,this.Uvt=null}QF(){return this.Sft}iP(){return this.pf}F4(){return this.Uvt}gB(){return this.Sft.gB()}Ivt(){}SSt(t){}rTt(t){}nTt(t){}z9(t){}V9(){}W9(){}mq(t){}Wvt(){}Cvt(){return null}Qvt(t,s,i){const e=ea.lr(ea.Event,t,s);e.Jvt=this,i&&Object.assign(e,i),this.QF().Zq(e)}}}{const ha=self.ks;ha.Vvt=class extends ha.nr{constructor(t,s){super(),this.Gi=t,this.Lvt=s,this.Yvt=null,this.pf=t.iP(),this.Sft=this.Gi.QF(),this.Hvt=this.Sft.hTt(),this.OZ=null,this.PZ=null,this.Wj=!1,this.Jj=!1,this.I0=null,this.PC=!1}cr(){this.PC=!0,this.qvt(),this.Zvt(),this.OZ=null,this.PZ=null,this.I0&&(this.I0.cr(),this.I0=null),this.Gi=null,this.pf=null,this.Sft=null,this.Hvt=null}dr(){return this.PC}nU(){return this.Gi}iP(){return this.pf}QF(){return this.Sft}F4(){return this.Hvt.F4()}hTt(){return this.Hvt}Xvt(){return this.Gi.AR()}Nj(t){return this.pf.Nj(t,this.Gi,null)}Kvt(t){return this.pf.Kvt(t,this.Gi,null)}Oj(t){return this.pf.Oj(t,this.Gi,null)}$vt(t,s){return this.pf.$vt(t,this.Gi,s)}txt(t,s){return this.pf.txt(t,this.Gi,s)}sxt(t){return this.pf.sxt(t)}ixt(t,s){this.pf.Pj(this.Lvt,t,s)}hxt(t){for(const[s,i]of t)this.ixt(s,i)}rxt(t,s){this.pf.Mf(this.Lvt,t,s)}nxt(t,s){return this.pf.QR(this.Lvt,t,s)}oxt(t,s){if(!this.pf.ZO())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.Lvt,handler:t,data:s,responseId:null});this.rxt(t,s)}axt(t){if(!t)throw new Error("cannot set empty component id");this.Yvt=t}uxt(){if(this.Yvt)return this.pf.Zj(this.Yvt);throw new Error("wrapper extension component id not set")}Kj(t,s){if(!this.Yvt)throw new Error("wrapper extension component id not set");this.pf.Kj(this.Yvt,t,s)}lxt(t){for(const[s,i]of t)this.Kj(s,i)}O6(t,s){if(!this.Yvt)throw new Error("wrapper extension component id not set");this.pf.O6(this.Yvt,t,s)}R6(t,s){if(this.Yvt)return this.pf.R6(this.Yvt,t,s);throw new Error("wrapper extension component id not set")}QX(){}cxt(){}fxt(){if(!this.Wj){if(!this.OZ)if(this.pf.Bj()){const s=globalThis.C3Debugger,i=this.F4();this.OZ=()=>{const t=performance.now();this.QX(),s.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.OZ=()=>this.QX();this.pf.Hf().addEventListener("tick",this.OZ),this.Wj=!0}}qvt(){this.Wj&&(this.pf.Hf().removeEventListener("tick",this.OZ),this.Wj=!1)}dxt(){return this.Wj}pxt(){if(!this.Jj){if(!this.PZ)if(this.pf.Bj()){const s=globalThis.C3Debugger,i=this.F4();this.PZ=()=>{const t=performance.now();this.cxt(),s.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.PZ=()=>this.cxt();this.pf.Hf().addEventListener("tick2",this.PZ),this.Jj=!0}}Zvt(){this.Jj&&(this.pf.Hf().removeEventListener("tick2",this.PZ),this.Jj=!1)}mxt(){return this.Jj}gxt(){return[]}FT(){return null}jT(t){}Jrt(t){}Xrt(t,s){}Jnt(t,s,i){if(0!==s){const e=this.Jrt(t);if("number"!=typeof e)throw new Error("expected number");this.Xrt(t,e+s,i)}}yxt(t,s,i,e){}Mxt(t,...s){t.call(this,...s)}wxt(t,...s){return t.call(this,...s)}Cvt(){return null}Qvt(t,s,i){if(this.Gi.Sxt()){const e=this.Xvt(),h=ha.lr(ha.Event,t,s);h.Wz=e,i&&Object.assign(h,i),e.dispatchEvent(h)}}$S(){return!1}}}{const ra=self.ks;ra.Txt=class extends ra.Vvt{constructor(t,s){super(t,s),this.Fst=t.RR(),this.bxt=null,this.vxt=null}cr(){if(this.bxt){const t=this.pf.Hf();t.removeEventListener("renderercontextlost",this.bxt),t.removeEventListener("renderercontextrestored",this.vxt),this.bxt=null,this.vxt=null}this.Fst=null,super.cr()}xxt(){this.Gxt()}Ixt(){}Cxt(){}Gxt(){if(!this.bxt){this.bxt=()=>this.JJ(),this.vxt=()=>this._xt();const t=this.pf.Hf();t.addEventListener("renderercontextlost",this.bxt),t.addEventListener("renderercontextrestored",this.vxt)}}JJ(){this.Ixt()}_xt(){this.Cxt()}RR(){return this.Fst}_it(){return!1}Cit(){if(!this._it())throw new Error("original size not known");const t=this.Ext();if(t)return t.ym()}Dit(){if(!this._it())throw new Error("original size not known");const t=this.Ext();if(t)return t._m()}Ext(){return null}Dxt(){const t=this.Ext();if(t){const s=t.Qb();if(s)return[s.ym(),s._m()]}return[100,100]}Axt(){const t=this.Ext();return t?t.U_():null}Nxt(){const t=this.Ext();return t?t.Lxt():null}Oxt(){const t=this.Ext();return!!t&&t.Rxt()}STt(t){const s=this.Gi.RR();return[s.GT(),s._T(),s.p5()]}Wvt(t,s,i){}Pxt(t,s){}n7(){return!0}}}{const na=self.ks,oa=na.lr(na.Rect);na.kxt=class extends na.Txt{constructor(t,s){super(t,s),this.Fxt=this.F4().jvt(this),this.jxt=!0,this.zxt=!1,this.Bxt=!1,this.Uxt=-.2,this.Wxt=na.lr(na.Rect,0,0,-1,-1);const i=this.pf.QP();this.Qxt=i.ZU(),this.Jxt=i.XU(),this.Vxt=-1,this.Yxt=-1,this.Hxt=!1,this.fxt()}cr(){this.F4().zvt(this.Fxt),this.qxt("destroy"),this.Fxt=-1,super.cr()}Az(){if(this.pf.ZO())throw new Error("not valid in worker mode");return this.Zxt("get-element")}qxt(t,s){(s=s||{}).elementId=this.Fxt,this.rxt(t,s)}Zxt(t,s){return(s=s||{}).elementId=this.Fxt,this.oxt(t,s)}Xxt(t,s){return(s=s||{}).elementId=this.Fxt,this.nxt(t,s)}Kxt(t){t=t||{};const s=this.RR();t.elementId=this.Fxt,t.isVisible=s.sF(),t.htmlIndex=s.PR().e6(),t.htmlZIndex=s.h6(),Object.assign(t,this.$xt()),this.jxt=!!t.isVisible,this.oxt("create",t),this.tGt(!0)}_2t(t){this.jxt!==(t=!!t)&&(this.jxt=t,this.qxt("set-visible",{isVisible:t}))}QX(){this.tGt(!1)}sGt(){const t=this.pf.QP().u6();return"Android"===na.li.ci&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}tGt(l){if(!this.nU().l6()){let t=this.RR(),s=t.PR(),i=t.g5(),[e,h]=s.RF(i.Iu(),i.Cu()),[r,n]=s.RF(i._u(),i.Eu()),o=this.pf.QP(),a=o.HP(),u=o.ZP();if(t.sF()&&s.sF())if(!this.sGt()&&(r<=0||n<=0||a<=e||u<=h))this._2t(!1);else{oa.set(e,h,r,n);const c=o.ZU(),f=o.XU(),d=s.e6(),p=t.h6();if(!l&&oa.equals(this.Wxt)&&this.Qxt===c&&this.Jxt===f&&this.Vxt===d&&this.Yxt===p)this._2t(!0);else{this.Wxt.C(oa),this.Qxt=c,this.Jxt=f,this.Vxt=d,this.Yxt=p,this._2t(!0);let t=null;this.Bxt&&(t=s.c6()+this.Uxt),this.qxt("update-position",{left:Math.round(this.Wxt.Iu()),top:Math.round(this.Wxt.Cu()),width:Math.round(this.Wxt.width()),height:Math.round(this.Wxt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this._2t(!1)}}Lz(){this.Zxt("focus",{focus:!0})}Oz(){this.Zxt("focus",{focus:!1})}kvt(){this.zxt=!0}Fvt(){this.zxt=!1}L2t(){return this.zxt}Pz(t,s){this.qxt("set-css-style",{prop:na.Jo(t),val:s})}E2t(t,s){this.qxt("set-attribute",{name:t,val:s})}D2t(t){this.qxt("remove-attribute",{name:t})}iGt(){this.Hxt||(this.Hxt=!0,Promise.resolve().then(()=>{this.Hxt=!1,this.qxt("update-state",this.$xt())}))}$xt(){}eGt(){return this.Fxt}}}{const aa=self.ks,ua=self.Vz;aa.hGt=class extends aa.nr{constructor(t){super(),this.pf=t.runtime,this.mr=t.name??"",this.rGt=aa.lr(aa.lc),this.nGt=aa.lr(aa.lc),this.gvt=t.yvt,this.vvt=t.xvt,this.oGt=null}cr(){this.nGt.cr(),this.rGt.cr(),this.pf=null}iP(){return this.pf}hf(){return this.mr}Ivt(){}aSt(){return this.gvt}Cvt(t=!1){let s=this.vvt;return t&&"function"!=typeof s&&2<=this.aSt()?globalThis.S6:s}aGt(t){this.rGt.Mc(t)}yX(){return this.rGt.wc()}W8(t){this.nGt.Mc(t)}V8(t){this.nGt.nc(t)}H4(){return this.nGt.wc()}Evt(){const t=this.aSt(),s=(aa.o4.Dvt(this,t),this.Cvt(!0));if(s){if(this.oGt=new s,!(this.oGt instanceof ua))throw new TypeError("behavior class must derive from IBehavior")}else this.oGt=new ua;aa.o4.Avt(t)}Fz(){return this.oGt}}}{const la=self.ks;la.uGt=class extends la.nr{constructor(t){super(),this.pf=t.iP(),this.VMt=t,this.Sft=t.QF(),this.lGt=t.jz(),this.lGt.aGt(this.Sft)}cr(){this.pf=null,this.VMt=null,this.Sft=null,this.lGt=null}Ivt(){}Uz(){return this.VMt}QF(){return this.Sft}iP(){return this.pf}jz(){return this.lGt}}}{const ca=self.ks;ca.cGt=class extends ca.nr{constructor(t,s){super(),this.fGt=t,this.Lvt=s,this.Gi=t.Qz(),this.pf=t.iP(),this.VMt=t.Uz(),this.Hvt=this.VMt.hTt(),this.Wj=!1,this.Jj=!1,this.N6=!1,this.I0=null}cr(){this.qvt(),this.Zvt(),this.dGt(),this.I0&&(this.I0.cr(),this.I0=null),this.fGt=null,this.Gi=null,this.pf=null,this.VMt=null,this.Hvt=null}jz(){return this.VMt.jz()}pGt(){return this.fGt}Qz(){return this.Gi}QF(){return this.Gi.QF()}RR(){return this.Gi.RR()}iP(){return this.pf}Uz(){return this.VMt}hTt(){return this.Hvt}Xvt(){return this.fGt.Xvt()}Nj(t){return this.pf.Nj(t,this.Gi,this.VMt)}Kvt(t){return this.pf.Kvt(t,this.Gi,this.VMt)}Oj(t){return this.pf.Oj(t,this.Gi,this.VMt)}mGt(){}QX(){}cxt(){}gGt(){}fxt(){this.Wj||(this.pf.I6(this),this.Wj=!0)}qvt(){this.Wj&&(this.pf.C6(this),this.Wj=!1)}dxt(){return this.Wj}pxt(){this.Jj||(this.pf._6(this),this.Jj=!0)}Zvt(){this.Jj&&(this.pf.E6(this),this.Jj=!1)}mxt(){return this.Jj}yGt(){this.N6||(this.pf.D6(this),this.N6=!0)}dGt(){this.N6&&(this.pf.A6(this),this.N6=!1)}MGt(){return this.N6}gxt(){return[]}ixt(t,s){this.pf.Pj(this.Lvt,t,s)}wGt(t,s){}FT(){return null}jT(t){}Jrt(t){}Xrt(t,s){}Jnt(t,s){if(0!==s){const i=this.Jrt(t);if("number"!=typeof i)throw new Error("expected number");this.Xrt(t,i+s)}}yxt(t,s,i,e){}Mxt(t,...s){t.call(this,...s)}wxt(t,...s){return t.call(this,...s)}Cvt(){return null}Qvt(t,s,i){if(this.fGt.Sxt()){const e=this.Xvt(),h=ca.lr(ca.Event,t,s);h.SGt=e,h.Wz=e.Wz,i&&Object.assign(h,i),e.dispatchEvent(h)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},r=(s,self.ks),i=(r.Tq={},r.$at={},r.Fs()),e=[],h=[],n=[],o=null,a=null,t=null,u=null,l=new Map,c=new Map;r.o4=class extends r.nr{constructor(t,s){super(),this.pf=t,this.TGt=[],this.CMt=null,this.bGt=[],this.vGt=new Map,this.xGt=null,this.GGt=null,this.IGt=new Set(s)}CGt(t){const s=t[19],i=this.pf.Ayt(t[0]);if(!i)throw new Error("missing plugin");r.dbt(t,i,s);const e=2<=s?r.evt:i,h=r.lr(e,{runtime:this.pf,u4:t[1],nvt:t[2],g4:t[5],M4:t[8],uvt:t[9],fvt:t[13],x4:t[14],d4:t[17],S4:t[18],yvt:s,name:t[20],xvt:2<=s?i:null});h.Ivt(),this.TGt.push(h),l.set(i,h)}_Gt(){this.CMt=r.lr(r.Tq.Sq,{runtime:this.pf,u4:!0}),this.CMt.Ivt()}EGt(t){const i=t[1],e=t[2],h=this.pf.Ayt(t[0]);if(!h)throw new Error("missing behavior");this.vGt.set(h,()=>{const t=2<=i?r.hGt:h,s=r.lr(t,{runtime:this.pf,name:e,yvt:i,xvt:2<=i?h:null});s.Ivt(),this.bGt.push(s),c.set(h,s),!this.xGt&&r.$at.DGt&&s instanceof r.$at.DGt?this.xGt=s:!this.GGt&&r.$at.jumpthru&&s instanceof r.$at.jumpthru&&(this.GGt=s),s.Evt()})}AGt(t){const s=this.vGt.get(t);s&&(s(),this.vGt.delete(t))}static Dvt(t,s=1){if(r.o4.Dvt!==o)throw new Error("invalid method");1===s&&e.push(t),h.push(t)}static Avt(t=1){if(r.o4.Avt!==a)throw new Error("invalid method");1===t&&e.pop(),h.pop()}static HF(){if(r.o4.HF!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static n4(t){if(r.o4.n4!==u)throw new Error("invalid method");if(s(t),0===h.length)throw new Error("no init object set");return h.at(-1)}static NGt(t){n.push(t)}static LGt(){n.pop()}static Dj(){if(0===n.length)throw new Error("no init properties set");return n.at(-1)}OGt(){for(const t of this.TGt)t.Evt()}static _4(t){return l.get(t)||null}static Yz(t){return c.get(t)||null}wJ(){return this.CMt}RGt(){return this.xGt}PGt(){return this.GGt}Zj(t){return this.IGt.has(t)}},o=r.o4.Dvt,a=r.o4.Avt,t=r.o4.HF,u=r.o4.n4}{const fa=self.ks,da=new Set;fa.kGt=class extends fa.nr{constructor(){super(),this.FGt=0,this.OJ="",this.RJ=0,this.jGt=0,this.zGt=0,this.tg=0,this.sg=0,this.BGt=!1,this.UGt=!1,this.WGt=null,this.QGt="",this.DC=fa.lr(fa.Rect),this.JGt=fa.lr(fa.il),this.VGt="",this.YGt=new self.tP(this),da.add(this)}cr(){this.LC(),this.WGt&&0===this.WGt.HJ()&&this.WGt.cr(),this.WGt=null,da.delete(this),this.HGt()}static JJ(){for(const t of da)t.QGt="",t.DC.set(0,0,0,0),t.JGt.vl(t.DC)}qGt(t){this.OJ=t[0],this.RJ=t[1],this.jGt=t[2],this.zGt=t[3],this.tg=t[4],this.sg=t[5],this.BGt=t[6],this.UGt=!0}ZGt(t,s){if(this.WGt)throw new Error("already loaded asset");this.OJ=s;const i={};return fa.vo(s)&&(i.uJ="remote"),this.sP(t,i),this.WGt.fJ()}XGt(t,s){if(this.WGt)throw new Error("already loaded asset");this.OJ="",this.RJ=s.size,this.WGt=fa.lr(fa.lJ,t.kO(),{blob:s,size:this.RJ,uJ:"local"})}KGt(t){if(t===this)throw new Error("cannot replace with self");this.FGt++,this.LC(),this.OJ=t.OJ,this.RJ=t.RJ,this.jGt=t.jGt,this.zGt=t.zGt,this.tg=t.tg,this.sg=t.sg,this.BGt=t.BGt,this.UGt=t.UGt,this.WGt=t.WGt,this.QGt=t.QGt,this.DC=t.DC,this.JGt=t.JGt,this.HGt()}cJ(){return this.OJ}ac(){return this.RJ}$Gt(){return this.jGt}tIt(){return this.zGt}Rxt(){return this.BGt}ym(){return this.tg}_m(){return this.sg}sIt(){return this.WGt.ym()}iIt(){return this.WGt._m()}sP(t,s){if(this.WGt)throw new Error("already got asset");s=Object.assign({},s,{url:this.cJ(),size:this.ac()}),this.WGt=t.aJ(s)}jJ(){return this.WGt&&this.WGt.jJ()}async QW(t,s){if(!this.WGt)throw new Error("no asset");if(this.QGt)throw new Error("already loaded texture");const i=this.FGt,e=(this.QGt="loading",await this.WGt.QW(t,s));if(this.FGt!==i)return null;if(!e)return this.QGt="",null;this.QGt="loaded",this.UGt||(this.tg=e.ym(),this.sg=e._m(),this.UGt=!0);const h=this.BGt?this.sg:this.tg,r=this.BGt?this.tg:this.sg;return this.DC.set(this.jGt,this.zGt,this.jGt+h,this.zGt+r),this.DC._t(e.ym(),e._m()),this.JGt.vl(this.DC),this.BGt&&this.JGt.El(),e}LC(){this.QGt&&(this.WGt&&this.WGt.LC(),this.QGt="",this.DC.set(0,0,0,0),this.JGt.vl(this.DC))}Qb(){return this.WGt&&"loaded"===this.QGt?this.WGt.Qb():null}U_(){return this.DC}Lxt(){return this.JGt}IU(){return this.YGt}eIt(){return this.WGt}async hIt(t){t=t||await this.WGt.qJ();const s=fa.Po(this.tg,this.sg),i=s.getContext("2d");return this.BGt?(i.rotate(Math.PI/-2),i.translate(-this.sg,0),i.drawImage(t,this.jGt,this.zGt,this.sg,this.tg,0,0,this.sg,this.tg)):i.drawImage(t,this.jGt,this.zGt,this.tg,this.sg,0,0,this.tg,this.sg),s}async rIt(t){if(!this.VGt){const s=await this.hIt(t),i=await fa.ko(s);this.VGt=URL.createObjectURL(i)}return this.VGt}HGt(){this.VGt&&(URL.revokeObjectURL(this.VGt),this.VGt="")}}}{const pa=self.ks;pa.nIt=class extends pa.nr{constructor(t){super(),this.mr=t[0],this.oIt=t[1],this.kwt=!!t[2],this.Tot=t[3],this.aIt=t[4],this.uIt=!!t[5],this.AV=t[6],this.lIt=t[7].map(t=>pa.lr(pa.cIt,t)),this.fIt=new self.tB(this)}static dIt(t,s){const i=pa.lr(pa.nIt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.lIt.push(pa.cIt.dIt(t)),i}cr(){for(const t of this.lIt)t.cr();pa.Wn(this.lIt)}pIt(t){for(const s of this.lIt)s.gB().sP(t)}mIt(s,i){return Promise.all(this.lIt.map(t=>t.gB().QW(s,i)))}gIt(){for(const t of this.lIt)t.gB().LC()}hf(){return this.mr}fY(){return this.AV}aB(){return this.lIt.length}lB(){return this.lIt}yIt(t){if((t=Math.floor(t))<0||t>=this.lIt.length)throw new RangeError("invalid frame");return this.lIt[t]}MIt(t,s){(s=Math.floor(s))<0?this.lIt.unshift(t):s>=this.lIt.length?this.lIt.push(t):this.lIt.splice(s,0,t)}wIt(t){if((t=Math.floor(t))<0||t>=this.lIt.length)throw new RangeError("invalid frame");this.lIt[t].cr(),this.lIt.splice(t,1)}SIt(i){for(let t=0,s=this.lIt.length;t<s;++t)if(pa.gh(this.lIt[t].RB(),i))return t;return-1}TIt(t){if("string"!=typeof t)return t;{const s=this.SIt(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}sB(){return this.oIt}iB(){return this.kwt}eB(){return this.Tot}rB(){return this.aIt}oB(){return this.uIt}bIt(){return this.fIt}}}{const ma=self.ks,ga=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();ma.cIt=class extends ma.nr{constructor(t){super(),this.vIt=ma.lr(ma.kGt),this.vIt.qGt(t),this.xIt=t[7],this.GIt=ma.lr(ma.iu,t[8],t[9]),this.IIt=t[10].map(t=>ma.lr(ma.CIt,this,t)),this._It=new Map;for(const i of this.IIt)this._It.set(i.hf().toLowerCase(),i);this.EIt=null;const s=t[11];6<=s.length&&(this.EIt=ma.lr(ma.Pl,s)),this.iy=t[12]||"",this.DIt=new self.mB(this)}static dIt(t){const s=ma.lr(ma.cIt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.vIt.XGt(t,ga),s}cr(){this.EIt&&(this.EIt.cr(),this.EIt=null),this.vIt.cr(),this.vIt=null}gB(){return this.vIt}yB(){return this.xIt}wB(){return this.GIt.ou()}TB(){return this.GIt.uu()}AB(){return this.EIt}EB(t){return this._It.get(t.toLowerCase())||null}_B(t){return(t=Math.floor(t))<0||t>=this.IIt.length?null:this.IIt[t]}xB(){return this.IIt.length}RB(){return this.iy}cB(){return this.DIt}}}{const ya=self.ks;ya.CIt=class extends ya.nr{constructor(t,s){super(),this.AIt=t,this.mr=s[0],this.NIt=ya.lr(ya.iu,s[1],s[2])}cr(){}hf(){return this.mr}GT(){return this.NIt.ou()}_T(){return this.NIt.uu()}LIt(){return this.NIt}}}{const T=self.ks,Ma=self.C3Debugger,wa=self.R4;T.Wut=class extends T.nr{constructor(s,t,i){super();const e=s.Ayt(i[1]),[h,r]=(this.pf=s,this.Uvt=T.o4._4(e),this.Hvt=null,this.OIt=e.Instance,this.ty=t,this.AV=i[11],this.mr=i[0],this.pMt=this.pf.qdt(i[14]),this.RIt=!!i[9],this.PIt=!!i[2],this.kIt=!!i[10],this.FIt=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],jIt:s.qdt(t[3])})),this.zIt=i[4],this.BIt=i[5],this.rvt=this.Uvt.f4(),this.UIt=T.lr(T.Event.Hf),this.f8=null,s.zO().DP());if(this.WIt=T.lr(T.QIt,h,r),this.JIt=!0,this.VIt=null,this.YIt=null,this.HIt=-1,this.qIt=null,this.ZIt=null,this.XIt=null,this.KIt=null,this.$It=null,this.tCt=!1,this.sCt=null,this.iCt=i[8].map(t=>T.eCt.dv(this,t)),this.hCt=[],this.rCt=new Map,this.nCt=new Map,this.oCt=new Set,this.aCt=new Map,this.uCt=T.lr(T.wft,this),this.lCt=null,this.cCt=0,this.fCt=!1,this.sCt=null,this.vIt=null,this.dCt=null,this.pCt=null,this.mCt=null,this.gCt=0,this.Uwt=new Map,this.Wwt=new Map,this.$J=[],this.yCt=new Map,this.MCt=!0,this.Uvt.w4()&&(this.f8=T.lr(T.d8,this,i[12])),i[6]&&(this.vIt=T.lr(T.kGt),this.vIt.qGt(i[6])),i[7]){this.dCt=i[7].map(t=>T.lr(T.nIt,t)),this.pCt=new Map,this.mCt=new Map;for(const a of this.dCt)this.pCt.set(a.hf().toLowerCase(),a),this.mCt.set(a.fY(),a)}this.PIt?(this.VIt=[],this.YIt=new Set,this.HIt=this.pf.wCt()):(this.qIt=[],this.ZIt=new Set,this.XIt=[],this.KIt=[],this.$It=[]);const n=this.Uvt.aSt();if(n<2&&(this.Hvt=T.lr(e.SCt,this,i[15]),!(this.Hvt instanceof T.Bvt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.TCt=null,this.bCt=null,this.f9=T.lr(T.Event.Hf),T.o4.Dvt(this,n);let o;if(o=2<=n?(o=e.SCt)||globalThis.vU:this.Hvt.Cvt()){if(this.TCt=new o(n<2?this:null),n<2&&!(this.TCt instanceof wa))throw new TypeError("script interface class must derive from IObjectClass");if(2<=n&&!(this.TCt instanceof globalThis.vU))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.TCt=new wa;if(T.o4.Avt(n),i[13]){const u=i[13];if(u){const l=u[0],c=u[1],f=u[2];this.Hvt.Wvt(l,c,f)}}this.pf.vCt()&&!this.PIt&&!this.kIt&&this.rvt||this.Ivt(),this.Uvt.l4()&&(this.Uvt._vt(this),this.xCt(i)),this.GCt=null}static dv(t,s,i){return T.lr(T.Wut,t,s,i)}cr(){if(this.UIt.cr(),this.UIt=null,this.vIt&&(this.vIt.cr(),this.vIt=null),this.dCt){for(const t of this.dCt)t.cr();T.Wn(this.dCt),this.pCt.clear(),this.mCt.clear()}this.GCt=null,this.uCt.cr(),this.uCt=null,this.Uwt.clear(),this.Wwt.clear(),this.sCt=null,this.pf=null}ICt(i){for(let t=1,s=i.length;t<s;++t){const e=this.pf.A8(i[t]);this.VIt.push(e),this.YIt.add(e),e.qIt.push(this),e.ZIt.add(this)}}CCt(t){this.tCt=!0,this.sCt=t}ij(){return this.tCt}k9(){return this.sCt}_Ct(){let t=0;if(!this.PIt)for(const s of this.qIt)for(const i of s.ECt()){const e=i.hf().toLowerCase();this.rCt.set(e,i),this.nCt.set(e,t),this.hCt.push(i),++t}for(const h of this.ECt()){const r=h.hf().toLowerCase();this.rCt.set(r,h),this.nCt.set(r,t),this.hCt.push(h),++t}for(const n of this.hCt)this.oCt.add(n.jz().constructor);if(!this.PIt&&this.qIt.length){let t=this.pf.DCt(),s=(T.Jn(this.XIt,t,0),T.Jn(this.KIt,t,0),T.Jn(this.$It,t,0),[]),i=0,e=0,h=0;for(const o of this.qIt){const a=o.QMt(),u=(this.XIt[a]=i,i+=o.ACt(),this.KIt[a]=e,e+=o.NCt(),this.$It[a]=h,h+=o.LCt(),o.lk());if(u&&this.f8)for(const l of u.ck())s.push(l.OCt(this.f8))}this.f8&&this.f8.RCt(s)}}xCt(t){const s=this.pf.PCt(),i=T.lr(T.Instance,{runtime:this.pf,WF:this,uid:s});i.kCt(t[16],[]),this.pf.FCt(s,i),this.$J.push(i)}hTt(){return this.Hvt}jCt(){return this.kIt}Hf(){return this.UIt}Ivt(){this.PIt||(this.Hvt?this.Hvt.Ivt():this.TCt.xU())}zCt(){return 0<this.gCt}async z9(t){this.PIt||(this.gCt++,1===this.gCt&&(this.Hvt?await this.Hvt.z9(t):await this.TCt.CU(this.pf.QP().BCt())))}V9(){if(!this.PIt){if(this.gCt--,this.gCt<0)throw new Error("released textures too many times");0===this.gCt&&(this.Hvt?this.Hvt.V9():this.TCt._U(this.pf.QP().BCt()))}}W9(){if(this.PIt)throw new Error("not applicable to family");this.Hvt?this.Hvt.W9():this.TCt.EU()}async mq(t){this.PIt||(this.Hvt?await this.Hvt.mq(t):await this.TCt.DU(this.pf.QP().BCt()))}iP(){return this.pf}F4(){return this.Uvt}UCt(){return this.OIt}hf(){return this.mr}qdt(){return this.pMt}LO(){return this.ty}fY(){return this.AV}eY(){return this.PIt}U8(){return this.RIt}f4(){return this.rvt}QMt(){return this.HIt}ECt(){return this.iCt}NCt(){return this.zIt}WCt(t){return t&&this.oCt.has(t)}ACt(){return this.FIt.length}QCt(){return this.FIt.map(t=>t.sid)}JCt(s){return this.FIt.findIndex(t=>t.sid===s)}cit(s){return this.FIt.findIndex(t=>t.name===s)}VCt(){return this.FIt.map(t=>t.name)}YCt(){return this.FIt.map(t=>t.jIt)}dit(t){if((t=Math.floor(t))<0||t>=this.FIt.length)throw new RangeError("invalid instance variable index");return this.FIt[t].type}fit(t){if((t=Math.floor(t))<0||t>=this.FIt.length)throw new RangeError("invalid instance variable index");return this.FIt[t].name}LCt(){return this.BIt}HCt(){return this.hCt}jht(t){return this.rCt.get(t.toLowerCase())||null}mit(t){const s=this.nCt.get(t.toLowerCase());return void 0===s?-1:s}lk(){return this.f8}w4(){return this.Uvt.w4()}qCt(){return this.f8&&this.f8.ZCt()}F1t(){return this.uCt}q4(){return this.uCt.q4()}gB(){return this.vIt}O8(t){this.lCt=t}L8(){return this.lCt}P8(t){this.cCt=t}XCt(){return this.cCt}KCt(){return this.dCt}$Ct(){return this.dCt.length}i1t(){return this.qIt}lTt(t){return this.ZIt.has(t)}pgt(){return this.VIt}hY(t){return this.YIt.has(t)}qMt(t){return this.KIt[t]}WMt(t){return this.XIt[t]}Kyt(t){this.aCt.set(t.eMt().toLowerCase(),t)}$yt(t){return!!this.uMt(t)}uMt(t){const s=this.aCt.get(t.toLowerCase());return s&&s.tc()?s:null}t_t(){return this.dCt}s_t(t){if(this.dCt)return this.pCt.get(t.toLowerCase())||null;throw new Error("no animations")}i_t(t){if(this.dCt)return this.mCt.get(t)||null;throw new Error("no animations")}e_t(t){if(this.s_t(t))throw new Error(`animation name '${t}' already exists`);const s=T.nIt.dIt(this.iP(),t);return this.dCt.push(s),this.pCt.set(s.hf().toLowerCase(),s),this.mCt.set(s.fY(),s),s}h_t(t){const s=this.s_t(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.dCt.length)throw new Error("cannot remove last animation");const i=this.dCt.indexOf(s);this.dCt.splice(i,1),this.pCt.delete(s.hf().toLowerCase()),this.mCt.delete(s.fY()),s.cr()}r_t(){if(this.dCt)return this.dCt[0];throw new Error("no animations")}n_t(){return this.r_t().yIt(0)}o_t(){if(this.dCt){const t=this.n_t().gB();return[t.ym(),t._m()]}return this.vIt?[this.vIt.ym(),this.vIt._m()]:[100,100]}O4(){if(this.Uvt.l4())return this.$J[0];throw new Error("not a single-global plugin")}H4(){return this.$J}*instances(){yield*this.$J}*Y4(){yield*this.$J,yield*this.pf.p2t(this)}X4(){return this.$J.length}W8(t){this.$J.push(t)}a_t(){this.MCt=!0}Iq(){if(this.MCt&&!this.PIt){let s=this.$J,i=0;for(let t=s.length;i<t;++i)s[i].u_t(i);const t=this.pf.l_t();for(const e of t)e.QF()===this&&e.u_t(i++);this.MCt=!1}}c_t(t){const s=this.$J;if(t<s.length)return s[t];t-=s.length;const i=this.pf.l_t();for(const e of i)if(e.QF()===this){if(0===t)return e;--t}return null}XTt(t){if(t&&t.ij()&&t.QF()!==this)for(const i of t.ej())if(i.QF()===this)return i;const s=this.q4().H4();return s.length?s[0]:null}V4(t){const s=this.q4().H4();return 0<s.length?s[t.nj()%s.length]:null}*S2t(t,s){let i=this.q4().H4(),e=i.length,h=s.q4(),r=s.q4().H4(),n=r.length,o=t.nj(),a=(!s.eY()&&h.Nft()||(o=r.indexOf(t)),Math.ceil(e/n)),u=e%n,l=0,c;c=0==u||o<u?(l=o*a,a):(l=u*a+(o-u)*(a-1),a-1);for(let t=l,s=l+c;t<s;++t)yield i[t]}SSt(t){this.Hvt?.SSt(t)}byt(){if(this.tCt&&!this.PIt){this.Iq();const t=this.q4(),s=t.zft(),i=t.Nft(),e=this.pf.jdt(),h=e&&e.S3()&&e.S3().qft();for(const r of this.sCt.xq())if(r!==this){r.Iq();const n=r.q4();if(n.jft(i),!i){const o=n.zft();T.Wn(o);for(const a of s)o.push(r.c_t(a.nj()));if(h){const u=t.Bft(),l=n.Bft();T.Wn(l);for(const c of u)l.push(r.c_t(c.nj()))}}}}}GSt(t,s){for(const i of this.k9().xq()){const e=i.q4();t?T.Un(e.Bft(),s):T.Un(e.zft(),s)}}f_t(){return this.WIt}d_t(t){this.JIt=!!t}p_t(){if(this.JIt&&this.rvt){for(const t of this.$J)t.RR().m_t();for(const s of this.pf.l_t())s.QF()===this&&s.RR().m_t();this.JIt=!1}}g_t(s,t,i){if(t){const e=this.yCt.get(t);e&&(e.delete(s),0===e.size)&&this.yCt.delete(t)}if(i){let t=this.yCt.get(i);t||(t=new Set,this.yCt.set(i,t)),t.add(s)}}y_t(){if(this.eY()){const t=new Set;for(const s of this.VIt)for(const i of s.y_t())t.add(i);return t.values()}return this.yCt.keys()}pSt(){return this.Uwt||(this.Uwt=new Map),this.Uwt}mSt(){return this.Wwt||(this.Wwt=new Map),this.Wwt}M_t(){return this.WCt(T.$at.DGt)}w_t(){return this.WCt(T.$at.jumpthru)}S_t(){return this.WCt(T.$at.NoSave)}z8(){return this.WCt(T.$at.Persist)}_7(){const t={instances:this.$J.map(t=>t.FT())};return this.Uwt&&this.Uwt.size&&(t.ex=T.Wo(this.Uwt)),t}E7(t,e){this.Uwt&&(this.Uwt.clear(),this.Uwt=null);const s=t.ex,h=(s&&(this.Uwt=T.Qo(s)),this.$J),r=t.instances;for(let t=0,s=Math.min(h.length,r.length);t<s;++t)h[t].jT(r[t]);for(let t=r.length,s=h.length;t<s;++t)this.pf.XF(h[t]);for(let i=h.length,t=r.length;i<t;++i){let t=r[i],s=null;if(!this.f4()||(s=this.pf.dR().C9(t.w.l))){const n=this.pf.B8(this.lCt||this,s,!1,0,0,!0);n.jT(t),e&&e.add(n)}}this.GCt=r,this.a_t()}T_t(){return this.GCt}b_t(){this.GCt=null}v_t(){for(let t=0,s=this.$J;t<s;++t)this.$J[t].v_t()}A4(){return this.TCt}a3(){return this.f9}x_t(){return this.bCt}K4(t){this.bCt=t}Zq(t){const s=this.pf,i=s.Bj()&&!s.d3().rk();i&&Ma.StartMeasuringScriptTime(),this.f9.dispatchEvent(t),i&&Ma.AddScriptTime()}}}{const Sa=self.ks;Sa.G_t=class extends Sa.nr{constructor(t,s){super(),this.pf=t,this.I_t=s;for(const i of this.I_t)i.CCt(this)}cr(){this.pf=null}iP(){return this.pf}P9(){return this.I_t}xq(){return this.I_t}_q(){return this.I_t.some(t=>t.f4())}}}{let w=self.ks,h=self.C3Debugger,n=w.o4,o=[],a=0,S=new WeakMap,e=new WeakMap;w.Instance=class extends w.nr{constructor(t){if(w.o4!==n)throw new Error("invalid addon manager");super(),this.pf=t.runtime,this.C_t=t.WF,this.Fst=null,this.__t=null,this.E_t=null,this.D_t=0,this.A_t=t.uid,this.N_t=a++,this.ESt=0,this.L_t=null;const s=w.ao(t.tags),i=(0<s.length&&(this.L_t=new Set(s)),this.O_t=o,this.R_t=o,this.C_t.HCt()),e=(0<i.length&&(this.R_t=i.map((t,s)=>w.lr(w.P_t,{runtime:this.pf,zz:t,Wz:this,index:s}))),this.k_t=this.C_t.ij()?[]:null,this.F_t=-1,this.UIt=null,this.F4());if(e.$S()&&(this.ESt|=4),e.f4())if(this.Fst=w.lr(w.j_t,this,t.o5),t.z_t)this.Fst.B_t(t.z_t);else{this.Fst.U_t();const[h,r]=this.C_t.o_t();this.Fst.c_(h,r),this.QF().qCt()&&this.Fst.n5().W_t()}t.Q_t?this.J_t(t.Q_t):this.V_t()}cr(){if(this.E_t&&(this.E_t.qF(),this.E_t=null),0<this.R_t.length){for(const i of this.R_t)i.cr();w.Wn(this.R_t)}this.__t&&(this.__t.cr(),this.__t=null);const t=S.get(this),s=(t&&(t.clear(),S.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.k_t&&w.Wn(this.k_t),this.UIt&&(this.UIt.cr(),this.UIt=null),this.L_t&&this.L_t.clear(),this.L_t=null,this.pf=null,this.C_t=null,0<this.O_t.length&&w.Wn(this.O_t),this.Fst&&(this.Fst.cr(),this.Fst=null)}J_t(t){0<t.length&&(this.O_t=[],w.Yn(this.O_t,t))}V_t(){const s=this.C_t.ACt();if(0!==s){this.O_t=[];const i=[0,0,""];for(let t=0;t<s;++t)this.O_t.push(i[this.C_t.dit(t)])}}kCt(t,i){if(this.__t)throw new Error("already got sdk instance");for(let t=0,s=this.R_t.length;t<s;++t){const e=this.R_t[t];e.kCt(i?i[t]:null)}const s=this.F4().aSt();if(s<2){if(this.__t=w.lr(this.C_t.UCt(),this,t),!(this.__t instanceof w.Vvt))throw new Error("sdk type must derive from SDKInstanceBase");!this.F4().f4()&&this.C_t.x_t()&&this.AR()}else{const h=this.F4().Cvt();this.Y_t(h.Instance,t)}}Nz(){return this.__t??this.E_t}RR(){return this.Fst}iP(){return this.pf}W3(){return this.F_t}uj(){const t=this.F_t;return-1===t?this.iP().W3():t}Q3(t){((t=+t)<0||!isFinite(t))&&(t=0),this.F_t=t,this.QF().qCt()&&this.pf.H_t(this,!0)}cj(){this.F_t=-1,this.QF().qCt()&&this.pf.H_t(this,!1)}y7(){return this.pf.q_t(this)}Hf(){return this.UIt||(this.UIt=w.lr(w.Event.Hf)),this.UIt}m2(t){this.__t?this.__t.m2(t):this.E_t.kU(this.pf.QP().BCt())}Ivt(t){this.__t.Ivt(t)}Z_t(){this.ESt|=2}X_t(){return 0!=(2&this.ESt)}K_t(){this.ESt|=1}l6(){return 0!=(1&this.ESt)}$S(){return 0!=(4&this.ESt)||this.__t.$S()}$_t(){this.ESt|=32}a7(){return 0!=(32&this.ESt)}tEt(){return 0!=(8&this.ESt)}sEt(t){t?this.ESt|=8:this.ESt&=-9}iEt(){return 0!=(16&this.ESt)}eEt(t){t?this.ESt|=16:this.ESt&=-17}hEt(){return 0!=(64&this.ESt)}rEt(t){t?this.ESt|=64:this.ESt&=-65}nEt(t,s){t<<=16,s?this.ESt|=t:this.ESt&=~t}oEt(t){return 0!=(this.ESt&t<<16)}Ext(){return this.__t.Ext()}Dxt(){return this.__t.Dxt()}Axt(){return this.__t.Axt()}Nxt(){return this.__t.Nxt()}Oxt(){return this.__t.Oxt()}STt(t){return this.__t.STt(t)}QF(){return this.C_t}n7(){return this.__t.n7()}m2t(t){return t.eY()?t.hY(this.QF()):this.QF()===t}aEt(h,t,s){const i=(t,s)=>{const i=s||t.QF(),e=h.get(i);e?e.add(t):h.set(i,new Set([t]))};if(i(this,t),this.ij())for(const e of this.ej())i(e);if(s)for(const r of this.Q5())i(r)}uEt(){if(!this.F4().v4())throw new Error("object does not support scene graph")}q5(){return null!==this.P5()}P5(){const t=this.RR();if(!t)return null;const s=t.P5();return s?s.nU():null}F5(){const t=this.RR();if(!t)return null;const s=t.F5();return s?s.nU():null}*j5(){const t=this.RR();if(t)for(const s of t.j5())yield s.nU()}lEt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}N7(){const t=this.RR();return!!t&&t.N7()}cEt(t){const s=this.RR();if(!s)return[];const i=t.hf();return s.Pq().map(t=>t.nU()).filter(t=>t.QF().hf()===i)}Pq(){const t=this.RR();return t?t.Pq().map(t=>t.nU()):[]}*children(){const t=this.RR();if(t)for(const s of t.children())yield s.nU()}*Q5(){const t=this.RR();if(t)for(const s of t.Q5())yield s.nU()}B5(){const t=this.RR();return t?t.B5():0}fEt(){return[...this.j5()].length}w2t(){const t=this.RR();return t?t.w2t():0}W5(t){const s=this.RR();if(!s)return null;const i=s.W5(t);return i?i.nU():null}dEt(){const t=this.RR();if(!t)return NaN;const s=t.P5();return s?s.pEt(t):NaN}mEt(t){for(const s of this.RR().Pq())if(s.nU().hj()===t)return!0;return!1}V5(t,s){this.uEt(),t.uEt(),this.RR().V5(t.RR(),s||{})}Y5(t){const s=this.RR();s&&s.Y5(t.RR())}gz(){const t=this.RR();return!!t&&t.gz()}lq(){const t=this.RR();if(t){const s=t.gEt();if(s)for(const i of s){const e=this.pf.DR(i[2]);if(e){const h=i[3];this.V5(e,{X5:!!(h>>0&1),sz:!!(h>>1&1),ez:!!(h>>2&1),rz:!!(h>>3&1),oz:!!(h>>4&1),mz:!!(h>>5&1),uz:!!(h>>6&1),cz:!!(h>>7&1),dz:!!(h>>8&1)})}}}}cq(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const h=s.get(e.index);if(h){const r=e.flags;this.V5(h,{X5:!!(r>>0&1),sz:!!(r>>1&1),ez:!!(r>>2&1),rz:!!(r>>3&1),oz:!!(r>>4&1),mz:!!(r>>5&1),uz:!!(r>>6&1),cz:!!(r>>7&1),dz:!!(r>>8&1)})}}}aj(){const t=this.pf.yEt();return t?t.Jut(this):""}ij(){return null!==this.k_t}Gq(t){this.k_t.push(t)}tj(){return this.k_t}MEt(t){return!!this.wEt(t)}wEt(t){const s=this.ej();if(null===s||0===s.length)return!1;for(const i of s)if(i.QF()===t)return i;return null}ej(){return this.k_t}Imt(){for(const t of this.ej())t.QF().q4().Uft(t)}TSt(){for(const t of this.ej())t.QF().q4().kft(t)}bSt(t){for(const s of this.ej())s.QF().q4().zft()[t]=s}xSt(){for(const t of this.ej())t.QF().q4().Fft(t)}vSt(t){for(const s of this.ej())s.QF().q4().Bft()[t]=s}F4(){return this.C_t.F4()}u_t(t){this.D_t=t}nj(){return this.C_t.Iq(),this.D_t}hj(){return this.A_t}SEt(){return this.N_t}TEt(t){t?this.gj(new Set(t)):this.L_t=null}gj(t){if(0===t.size)this.L_t=null;else{this.L_t?this.L_t.clear():this.L_t=new Set;for(const s of t)this.L_t.add(s)}}pj(){return this.L_t??new Set}W2t(){return Array.from(this.pj()).join(" ")}V2t(t){t=Math.floor(t);for(const s of this.pj()){if(0===t)return s;--t}return""}Fht(){return this.R_t}bEt(t){if(t)for(const s of this.R_t)if(s.jz()instanceof t)return s;return null}tut(t){if(!t)return null;const s=this.bEt(t);return s?s.Nz():null}kht(i){const e=this.R_t;for(let t=0,s=e.length;t<s;++t)if(e[t].Uz().fY()===i)return t;return-1}vEt(){return this.O_t}VCt(){return this.C_t.VCt()}xEt(){return this.O_t.length}tnt(t){const s=this.O_t;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}BMt(t){return this.O_t[t]}GEt(t){const s=this.O_t[t];return 0===this.C_t.dit(t)?!!s:s}snt(t,s){const i=this.O_t;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.C_t.dit(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}Vnt(t,s){if(0!==s){const i=this.O_t;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}pSt(){let t=S.get(this);return t||(t=new Map,S.set(this,t)),t}mSt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}IEt(t){const s=this.QF();if(s.a3().$f(t))return!0;for(const i of s.i1t())if(i.a3().$f(t))return!0;return!!this.pf.a3().$f(t)}hk(){const t=new Set,s=(t.add(this),this.RR());if(s&&s.N7())for(const i of this.Q5())if(t.add(i),i.ij())for(const e of i.ej())t.add(e);if(this.ij())for(const h of this.ej())t.add(h);for(const r of t.values())r.fq();this.pq()}CEt(){this.C_t.x_t()&&this.AR();for(const t of this.R_t)t.mGt()}_Et(){this.CEt()}fq(){if(this.CEt(),this.IEt("instancecreate")){const t=this.QF(),s=new w.Event("instancecreate");s.Wz=this.AR(),t.Zq(s);for(const i of t.i1t())i.Zq(s);this.pf.Zq(s)}this.pf.Nj(this.F4().fpt().wq.q2t,this,null)}pq(){if(this.F4().v4()){if(this.Zq(new w.Event("hierarchyready")),this.IEt("hierarchyready")){const t=this.QF(),s=new w.Event("hierarchyready");s.Wz=this.AR(),t.Zq(s);for(const i of t.i1t())i.Zq(s);this.pf.Zq(s)}this.pf.Nj(this.F4().fpt().wq.f2t,this,null)}}EEt(){this.pf.Nj(this.F4().fpt().wq.Z2t,this,null)}DEt(t){if(this.E_t){const s=new w.Event("destroy");s.AEt=t,this.Zq(s)}if(this.IEt("instancedestroy")){const i=this.QF(),e=new w.Event("instancedestroy");e.Wz=this.AR(),e.AEt=t,i.Zq(e);for(const h of i.i1t())h.Zq(e);this.pf.Zq(e)}}NEt(){return this.__t?this.__t.gxt():this.E_t.Vj()}FT(t="full",s=null){const i={},e=("full"===t?i.uid=this.hj():i.c3=!0,this.pj());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const r=S.get(this);if(r&&r.size&&(i.ex=w.Wo(r)),-1!==this.W3()&&(i.mts=this.W3()),0<this.C_t.ACt()){const n={},o=this.C_t.QCt();for(let t=0,s=this.O_t.length;t<s;++t)n[o[t].toString()]=this.O_t[t];i.ivs=n}if(this.R_t.length){const a={};for(const u of this.R_t){const l=u.FT(t);l&&(a[u.Uz().fY().toString()]=l)}i.behs=a}}this.Fst&&(i.w=this.Fst._7(t,s));const h=this.__t?this.__t.FT():this.E_t.Yj();return h&&(i.data=h),i}JZ(t="full",s){this.Fst&&this.Fst.JZ(t)}YZ(t,s="full",i=null){this.Fst&&this.Fst.YZ(t,s,i)}LEt(t,s="full",i=null){this.Fst&&this.Fst.LEt(t,s,i)}v_t(){this.F4().f4()&&this.Fst.v_t()}jT(s,t="full",i){if("full"===t)this.A_t=s.uid;else if(!s.c3)return;if(this.TEt(s.tags),"visual-state"!==t){let t=S.get(this);t&&(t.clear(),S.delete(this));const h=s.ex,r=(h&&(t=w.Qo(h),S.set(this,t)),this.F_t=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(r)for(const[n,o]of Object.entries(r)){const a=parseInt(n,10),u=this.C_t.JCt(a);if(!(u<0||u>=this.O_t.length)){let t=o;null===t&&(t=NaN),this.O_t[u]=t}}}if(this.F4().f4()){const l=s.w;if(l){const c=l.l;if(this.Fst.PR().fY()!==c){const f=this.Fst.PR(),d=f.yR().C9(c);d?(this.Fst.zR(d),f.V8(this,!0),d.W8(this,!0),d.BR(this),this.Fst.a5()):"full"===t&&this.pf.XF(this)}this.Fst.E7(l,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),M=this.kht(y);M<0||M>=this.R_t.length||this.R_t[M].jT(g,t)}}const e=s.data;e&&(this.__t?this.__t.jT(e,t):this.E_t.Hj(e))}AR(){return this.E_t||this.Y_t()}Sxt(){return!!this.E_t}Y_t(t,s){const i=this.Fst?t?self.AU:self.Cz:t?self.Sj:self.UF,e=t||this.__t.Cvt(),h=this.C_t.x_t(),r=h||e||i,n=this.F4().aSt();if(w.o4.Dvt(this,n),w.o4.NGt(s),this.E_t=new r,w.o4.LGt(),w.o4.Avt(n),e&&!(this.E_t instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(h){const o=e||i;if(!(this.E_t instanceof o))throw new TypeError(`setInstanceClass(): class '${h.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.E_t}JF(t){if(0!==this.O_t.length){const i={},e=this.C_t.YCt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:w.Instance.prototype.GEt.bind(this,t),set:w.Instance.prototype.snt.bind(this,t)};const s=Object.create(Object.prototype,i);t.OEt={value:s,writable:!1}}}VF(t){const s=this.R_t;if(0!==s.length){const i={};for(const h of s)i[h.Uz().qdt()]={value:h.Xvt(),writable:!1};const e=Object.create(Object.prototype,i);t.fmt={value:e,writable:!1}}}Zq(t){if(this.Sxt()){const s=this.AR(),i=(t.Wz=s,this.pf),e=i.Bj()&&!i.d3().rk();e&&h.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&h.AddScriptTime()}}}}{const Ta=self.ks;Ta.Fq=class extends Ta.nr{constructor(e){super(),this.VT=e,this.Nmt=null,this.REt=[],this.PEt=e.ym(),this.kEt=e._m(),this.FEt=1,this.jEt=1,this.zEt=0,this.BEt=1,this.UEt=e.BD(),this.WEt=null,this.QEt=null,this.JEt=NaN,this.VEt=!1,this.R7=NaN,this.P7=NaN,this.YEt=t=>{if(t.Wz===this.Nmt.nU()){const s=e.iP(),i=(s.Hf().removeEventListener("instancecreate",this.YEt),this.Nmt.nU().Nz());this.VEt=!!i._it(),this.R7=this.VEt?i.Cit():NaN,this.P7=this.VEt?i.Dit():NaN}}}cr(){this.Nmt=null,this.WEt=null,this.QEt=null,this.JEt=NaN,this.VEt=!1,this.R7=NaN,this.P7=NaN,Ta.Wn(this.REt)}HEt(t){if(this.BEt=this.VT.BD(),this.UEt=this.BEt,this.Nmt=t,this.zEt=t?t.yk():0,this.Nmt){const s=this.VT,i=s.iP(),e=this.Nmt.nU().F4().aSt();if(e<2){const h=this.Nmt.nU().Nz();h?(this.VEt=!!h._it(),this.R7=this.VEt?h.Cit():NaN,this.P7=this.VEt?h.Dit():NaN):this.Nmt.nU().l6()||i.Hf().addEventListener("instancecreate",this.YEt)}else this.VEt=!1,this.R7=NaN,this.P7=NaN}else this.VEt=!1,this.R7=NaN,this.P7=NaN}P5(){return this.Nmt}N7(){return 0<this.REt.length}Pq(){return this.REt}qEt(){this.N7()&&1!==this.REt.length&&(this.QEt?this.REt.sort((t,s)=>{const i=this.QEt.get(t.nU()),e=this.QEt.get(s.nU());return Ta.pe(i)&&Ta.pe(e)?i-e:0}):this.REt.sort((t,s)=>{const i=t.cnt().ZEt(),e=s.cnt().ZEt();return Ta.pe(i)&&Ta.pe(e)?i-e:0}))}ZEt(){return this.JEt}fnt(){return this.FEt}XEt(t){this.FEt=t}pnt(){return this.jEt}KEt(t){this.jEt=t}bnt(){return this.UEt}UTt(){return this.BEt}$Et(t){this.BEt=t}lnt(){return 0===this.PEt?Number.EPSILON:this.PEt}dnt(){return 0===this.kEt?Number.EPSILON:this.kEt}tDt(){if(this.VT.hz()){let t=this.Nmt,s=t.ym(),i=t.cnt().lnt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.VEt?1+s/this.R7:s/i}return 1}sDt(){if(this.VT.nz()){let t=this.Nmt,s=t._m(),i=t.cnt().dnt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.VEt?1+s/this.P7:s/i}return 1}iDt(){return 0}eDt(){return{sw:this.PEt,sh:this.kEt,sx:this.FEt,sy:this.jEt,psa:this.zEt,oo:this.BEt,so:this.UEt,pi:this.VT.nU().dEt()}}_7(t,s=null){const i=this.eDt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.hDt(t),c:this.rDt(t)})}nDt(t){let s="";return t.K5()&&(s+="x"),t.iz()&&(s+="y"),t.hz()&&(s+="w"),t.nz()&&(s+="h"),t.az()&&(s+="a"),t.lz()&&(s+="z"),t.gz()&&(s+="d"),t.fz()&&(s+="o"),t.pz()&&(s+="v"),s}hDt(t){return this.Nmt&&this.Nmt.nU()&&!this.Nmt.nU().l6()?this.oDt(this.Nmt,this.VT,t):null}rDt(s){return this.REt.map(t=>this.oDt(t,t,s)).filter(t=>t)}oDt(t,s,i){const e=t.nU();if(e&&e.l6())return null;const h={};return h.uid=e.hj(),h.f=this.nDt(s),h.offsets=s.aDt(),h.data=Ta.Fq.uDt(e),h.oci=e.QF().LO(),"state"===i?(h.inst=e.FT("full",{selfOnly:!0}),h.instIndex=NaN):(h.instIndex=e.QF().H4().indexOf(e),h.inst=null),h}E7(t){this.PEt=t.sw,this.kEt=t.sh,this.FEt=t.sx,this.jEt=t.sy,this.zEt=t.psa,this.BEt=t.oo,this.UEt=t.so,this.JEt=Ta.pe(t.pi)?t.pi:NaN}lDt(t,s){if(!t&&!s&&this.WEt)for(const i of this.WEt)i.l6()||i.q5()||i.iP().XF(i);this.WEt=t,this.QEt=s}YZ(t,s){const i=this.VT,e=i.iP(),h=new Set;if(t.p&&!this.Nmt){const o=t.p.uid,a=e.DR(o);if(s?.rbt,a){const u=a.RR();if(a.lEt(i.nU()))this.Nmt=u;else{a.mEt(i.nU().hj())?e.XF(i.nU()):a.V5(i.nU(),this.cDt(t.p.f)),h.has(i)||(i.fDt(t.p.offsets),this.dDt(a,t.p,s)),h.add(i);const l=a.RR();l.cnt().qEt()}}else if(Ta.pe(t.p.oci)){const c=e.A8(t.p.oci),f=(e.wJ(),e.sk(c,i.PR(),0,0,!0));if(s?.rbt,f){const d=this.pDt(t.p,e),p=(d&&f.jT(d),f.RR()),m=(p.PR().ik(f),f.V5(i.nU(),this.cDt(t.p.f)),f.RR());m.cnt().qEt()}}}const r=[];for(const g of t.c){const y=g.uid,M=e.DR(y);M&&r.push(M)}let n=0;for(const w of t.c){const S=w.uid,T=e.DR(S);if(s?.rbt,T){if(this.WEt){if(this.WEt.includes(T)){const G=T;if(G.QF()!==T.QF()){n++;continue}if(G.l6()){n++;continue}const I=t.c[n];if(!s?.rbt&&this.mDt(G,r,i)){this.gDt(n,I,i,h,s),n++;continue}if(G.q5()&&G.P5()!==i.nU()){const C=this.yDt(I,s);this.MDt(C,I,h,s),n++;continue}this.MDt(G.RR(),I,h,s,!0),n++;continue}if(this.WEt[n]){const _=this.WEt[n];if(_.QF()!==T.QF()){n++;continue}if(_.l6()){n++;continue}const E=t.c[n];if(!s?.rbt&&this.mDt(_,r,i)){this.gDt(n,E,i,h,s),n++;continue}if(_.q5()&&_.P5()!==i.nU()){const D=this.yDt(E,s);this.MDt(D,E,h,s),n++;continue}this.MDt(_.RR(),E,h,s,!0),n++;continue}}const b=T.QF(),v=this.wDt(r,b),x=i.nU().cEt(b).length;if(v===x){const A=i.nU().W5(n);if(A){const N=A.RR();N&&(h.has(N)||(N.fDt(w.offsets),this.dDt(A,w,s)),h.add(N))}n++;continue}if(T.q5()&&T.P5()!==i.nU()){const L=this.yDt(w,s);this.MDt(L,w,h,s),n++;continue}this.MDt(T.RR(),w,h,s)}else if(this.WEt&&this.WEt[n]){const O=this.WEt[n],P=e.A8(this.SDt(w));if(O.QF()!==P){n++;continue}if(O.l6()){n++;continue}const R=t.c[n];if(!s?.rbt&&this.mDt(O,r,i)){this.gDt(n,R,i,h,s),n++;continue}if(O.q5()&&O.P5()!==i.nU()){const k=this.yDt(R,s);this.MDt(k,R,h,s),n++;continue}this.MDt(O.RR(),R,h,s)}else{const F=this.yDt(w,s);this.MDt(F,w,h,s)}n++}}mDt(t,s,i){const e=t.QF(),h=this.wDt(s,e),r=i.nU().cEt(e).length;return h===r}gDt(t,s,i,e,h){const r=i.nU().W5(t,s);if(r){const n=r.RR();n&&(e.has(n)||(n.fDt(s.offsets),this.dDt(r,s,h)),e.add(n))}}cDt(t){const s={};return s.X5=t.includes("x"),s.sz=t.includes("y"),s.ez=t.includes("w"),s.rz=t.includes("h"),s.oz=t.includes("a"),s.uz=t.includes("z"),s.mz=t.includes("d"),s.cz=t.includes("o"),s.dz=t.includes("v"),s}SDt(t){return Ta.pe(t.oci)?t.oci:t[1]}yDt(e,h){if(Ta.pe(e.oci)){let t=this.VT,s=t.iP(),i;if(e.data)i=s.B8(e.data,t.PR(),!1,0,0,!1,!0);else{const r=s.A8(e.oci);i=s.sk(r,t.PR(),0,0,!0)}if(h?.rbt,i){const n=this.pDt(e,s),o=(n&&i.jT(n),i.RR());return o.PR().ik(i,!0),o}}}MDt(t,s,i,e,h=!0){const r=this.VT,n=r.V5(t,this.cDt(s.f));n&&h&&(i.has(t)||(t.fDt(s.offsets),this.dDt(t.nU(),s,e)),i.add(t)),this.qEt()}dDt(t,s,i){let e=this.pDt(s,this.VT.iP());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.jT(e))}wDt(t,s){return t.filter(t=>t.QF().hf()===s.hf()).length}pDt(t,s){if(Ta.pe(t.instIndex)){const i=s.A8(t.oci),e=i.T_t();return e?e[t.instIndex]:null}return Ta.xe(t.inst)?JSON.parse(t.inst):t.inst||void 0}static uDt(t){let s=t.RR().PR().k8(t.hj());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.Pq()]){const h=e.RR();i.push([h.yR().fY(),h.PR().LO(),e.hj(),Ta.Fq.kq(h),e.QF().ij()?1:0,h.kR(),Ta.Fq.uDt(e)])}return Ta.je(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=Ta.Fq.TDt(),s[0][14][1]=i,s[0][14][2]=t.RR().kR()),s}static kq(t){let s=0;return(s|=Number(t.pz())<<8)|Number(t.fz())<<7|Number(t.lz())<<6|Number(t.gz())<<5|Number(t.az())<<4|Number(t.nz())<<3|Number(t.hz())<<2|Number(t.iz())<<1|Number(t.K5())<<0}static TDt(t){let s=0;return s,511}}}{let d=self.ks,t=self.Ss,r=(t._s,d.lr(d.Rect)),n=d.lr(d.il),s=d.lr(d.Event,"bboxchange",!1),f=d.lr(d.Ho,0,0,0,0),l=d.lr(d.Pl),i=d.lr(d.Ho,1,1,1,1),o=d.lr(d.Rect,0,0,-1,-1),h=d.lr(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.j_t=class extends d.nr{constructor(t,s){super(),this.Gi=t,this.Sft=t.QF(),this.pf=t.iP(),this.bDt=s,this.Sft.g_t(this,null,s),this.vDt=-1,this.xDt=-1,this.ESt=196635,this.Sft.F4().y4()&&(this.ESt|=128),this.eu=NaN,this.hu=NaN,this.fT=NaN,this.GDt=NaN,this.IDt=NaN,this.Gb=NaN,this.Ko=NaN,this.CDt=NaN,this._Dt=NaN,this.EDt=NaN,this.DDt=NaN,this.ADt=d.lr(d.Rect),this.NDt=d.lr(d.il),this.LDt=h,this.ODt=o,this.RDt=null,this.PDt=null,this.kDt=null,this.cT=i,this.FDt=i,this.jDt=null,this.zDt=null,this.Gi.QF().qCt()&&(this.zDt=d.lr(d.BDt,this.Gi,this)),this.UDt=null,this.WEt=null,this.QEt=null,this.WDt=-1,this.QDt=null}K_t(){this.ESt|=256}cr(){if(this.Sft.g_t(this,this.bDt,null),this.jDt&&(this.pf.HS().lw(this.jDt),this.jDt=null),this.RDt=null,this.PDt&&(this.PDt.JDt.cr(),this.PDt=null),this.kDt&&(this.kDt.clear(),this.kDt=null),this.Sz(),this.zDt&&this.zDt.cr(),this.q5()&&this.P5().Y5(this),this.N7()){const t=[...this.Pq()];for(const s of t)this.Y5(s)}this.VDt(),this.YDt(),g.delete(this),a.delete(this),this.Gi=null,this.Sft=null,this.pf=null,this.bDt=null}B_t(t){if(m=!1,this.u5(t[0],t[1]),this.AT(t[2]),this.c_(t[3],t[4]),this.Gb=0,this.y4()?this.gk(t[6]):this.Ko=0,f.Va(t[7]),this.HDt(f),this.xnt(t[8]),this.Int(t[9]),this.pT(t[10]),this.zDt&&this.zDt.qDt(t[12]),t[14]&&g.set(this,{ZDt:t[14][1],XDt:t[14][2]}),t[15]){const s=t[15],e=(this.Mz(s[0],s[1]),this.Gz()),h=s[2];for(let i=0,t=h.length;i<t;++i){const r=h[i];for(let t=0,s=r.length;t<s;++t){const n=r[t],o=e.f2(t,i);o.IT(n[0]),o.ET(n[1]),o.AT(n[2]),o.LT(n[3]),o.RT(n[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],u=!!a,l=!u,c=this.pf.yEt();u&&c&&c.Qut(this.nU(),a),l&&c&&c.Qut(this.nU(),i)}m=!0,this.KDt()}U_t(){this.eu=0,this.hu=0,this.fT=0,this.GDt=0,this.IDt=0,this.Gb=0,this.Ko=0,this.CDt=0,this._Dt=1,this.EDt=0,this.DDt=0,this.KDt()}iP(){return this.pf}QF(){return this.Sft}nU(){return this.Gi}$Dt(){return this.az()?this.tAt(this.P5().sAt()-this.UDt.iDt()):0}IT(t){if(t=+t,this.K5()){const s=this.UDt,i=t-this.GT(),e=-this.$Dt();0==e?this.eu+=i/s.tDt():(this.eu+=Math.cos(e)*i/s.tDt(),this.iz()&&(this.hu+=Math.sin(e)*i/s.sDt()))}else this.eu=t}nnt(t,s=!1){t=+t,!s&&this.K5()?this.IT(this.GT()+t):this.eu+=t}GT(){if(this.K5()){let t=this.eu,s=this.UDt,i=this.P5(),e=this.$Dt();return 0===e?t*=s.tDt():(t=t*s.tDt()*Math.cos(e),this.iz()&&(t-=this.hu*s.sDt()*Math.sin(e))),i.GT()+t}return this.eu}ET(t){if(t=+t,this.iz()){const s=this.UDt,i=t-this._T(),e=-this.$Dt();0==e?this.hu+=i/s.sDt():(this.K5()&&(this.eu-=Math.sin(e)*i/s.tDt()),this.hu+=Math.cos(e)*i/s.sDt())}else this.hu=t}ont(t,s=!1){t=+t,!s&&this.iz()?this.ET(this._T()+t):this.hu+=t}_T(){if(this.iz()){let t=this.hu,s=this.UDt,i=this.P5(),e=this.$Dt();return 0===e?t*=s.sDt():(t=t*s.sDt()*Math.cos(e),this.K5()&&(t+=this.eu*s.tDt()*Math.sin(e))),i._T()+t}return this.hu}u5(t,s){if(t=+t,s=+s,this.iAt()){const i=this.K5(),e=this.iz(),h=this.UDt,r=t-this.GT(),n=s-this._T(),o=-this.$Dt();if(0==o)i?this.eu+=r/h.tDt():this.eu=t,e?this.hu+=n/h.sDt():this.hu=s;else{const a=Math.sin(o),u=Math.cos(o);i?this.eu+=e?(u*r-a*n)/h.tDt():u*r/h.tDt():this.eu=t,e?this.hu+=i?(a*r+u*n)/h.sDt():u*n/h.sDt():this.hu=s}}else this.eu=t,this.hu=s}eAt(){return[this.GT(),this._T()]}f5(t,s){t=+t,s=+s,this.iAt()?this.u5(this.GT()+t,this._T()+s):(this.eu+=t,this.hu+=s)}MTt(t,s){return this.GT()===t&&this._T()===s}AT(t){if(t=+t,this.lz()&&(t-=this.P5().DT()),this.fT!==t){this.fT=t,this.hAt();const s=this.PR();0!==this.fT&&s.q8(),s.BR(this)}}hAt(){if(this.KDt(),this.N7()){const i=this.Pq();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.lz()&&e.hAt()}}}Cnt(t){this.AT(this.DT()+t)}DT(){return this.lz()?this.P5().DT()+this.fT:this.fT}p5(){return this.PR().DT()+this.DT()}_it(){const t=this.nU().F4().aSt();return t<2&&this.nU().Nz()._it()}Gm(t){if(t=+t,this.hz()){const s=this.ym();0===s?this.GDt=Number.EPSILON:this.GDt*=t/s}else this.GDt=t;this.rAt()}Zm(t,s){t=+t,!s&&this.hz()?this.Gm(this.ym()+t):this.GDt+=t,this.rAt()}ym(){if(this.hz()){const t=this.P5(),s=t.ym(),i=t.cnt().lnt();return i===Number.EPSILON?(this.cnt().lnt()+s)*this.GDt:s*this.GDt}return this.GDt}Mm(t){if(t=+t,this.nz()){const s=this._m();0===s?this.IDt=Number.EPSILON:this.IDt*=t/s}else this.IDt=t;this.rAt()}mnt(t,s){t=+t,!s&&this.nz()?this.Mm(this._m()+t):this.IDt+=t,this.rAt()}_m(){if(this.nz()){const t=this.P5(),s=t._m(),i=t.cnt().dnt();return i===Number.EPSILON?(this.cnt().dnt()+s)*this.IDt:s*this.IDt}return this.IDt}c_(t,s){if(t=+t,s=+s,this.hz()){const i=this.ym();0===i?this.GDt=Number.EPSILON:this.GDt*=t/i}else this.GDt=t;if(this.nz()){const e=this._m();0===e?this.IDt=Number.EPSILON:this.IDt*=s/e}else this.IDt=s;this.rAt()}ac(){return[this.ym(),this._m()]}o7(){return this.Gb}nAt(t){if(t<0)throw new RangeError("invalid depth");this.Gb=t}oAt(){if(this.q5()){const t=this.UDt;return Math.min(t.tDt(),t.sDt())}return 1}y4(){return 0!=(128&this.ESt)}gk(t){t=+t,this.y4()&&(this.az()&&(t-=this.P5().yk()),t=d.Tr(t),this.Ko!==t)&&(this.Ko=t,this.rAt())}gnt(t){0!=(t=+t)&&this.y4()&&(this.Ko=d.Tr(this.Ko+t),this.rAt())}rAt(){if(this.ESt|=1<<18,this.N7()){const i=this.Pq();for(let t=0,s=i.length;t<s;t++)i[t].rAt()}}yk(){return this.az()&&this.y4()?this.tAt(d.Tr(this.P5().sAt()+this.Ko)):this.Ko}sAt(){return this.az()&&this.y4()?d.Tr(this.P5().sAt()+this.Ko):this.Ko}tAt(t){return this.hz()&&this.F5().ym()<0&&(t=d.Tr(d.Pr(t,this.F5().yk()+Math.PI))),this.nz()&&this.F5()._m()<0?d.Pr(t,this.F5().yk()):t}aAt(){const t=this.P5();return!!(this.hz()&&t.ym()<0)||!!(this.nz()&&t._m()<0)}uAt(){const t=this.P5();return!!(this.hz()&&t.ym()<0&&this.nz()&&t._m()<0)}lAt(){const t=this.ESt;if(0!=(t&1<<18)){const s=this.yk();this.CDt=Math.sin(s),this._Dt=Math.cos(s),this.ESt=-262145&t}}vTt(){return this.lAt(),this.CDt}bTt(){return this.lAt(),this._Dt}xnt(t){this.EDt=+t}vnt(t){this.EDt+=+t}wB(){return this.EDt}Int(t){this.DDt=+t}Gnt(t){this.DDt+=+t}TB(){return this.DDt}HDt(t){this.cT.equals(t)||(this.cT===i?(this.cT=d.lr(d.Ho,t),this.FDt=d.lr(d.Ho,t),this.FDt.Ga()):t.Sa(1,1,1,1)?(this.cT=i,this.FDt=i):(this.cT.set(t),this.FDt.set(t),this.FDt.Ga()),this.KDt())}WD(t){if(t=d.Sr(+t,0,1),this.fz()){if(this.cnt().UTt()===t)return;this.cnt().$Et(t),t=this.BD()}else if(this.cT.a===t)return;this.cAt(t)}fAt(){if(this.N7()){const i=this.Pq();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.cAt(e.BD())}}}cAt(t){f.ua(this.cT),f.a=t,this.HDt(f),this.fAt()}wnt(t){this.fz()?this.WD(this.cnt().UTt()+t):this.WD(this.BD()+t)}BD(){return this.fz()?this.P5().BD()*this.cnt().UTt():this.cT.a}v5(t){this.cT.Ma(t)||(f.ua(t),f.a=this.BD(),this.HDt(f))}Krt(t,s,i){f.ta(t,s,i),this.v5(f)}dAt(t,s,i){0===t&&0===s&&0===i||(f.ua(this.cT),f.r+=t,f.g+=s,f.b+=i,this.v5(f))}b5(){return this.cT}m8(){return this.FDt}gz(){return 0!=(512&this.ESt)}pAt(t){this.mAt(512,t)}K5(){return 0!=(1024&this.ESt)}gAt(t){this.mAt(1024,t)}iz(){return 0!=(2048&this.ESt)}iAt(){return 0!=(3072&this.ESt)}yAt(t){this.mAt(2048,t)}hz(){return 0!=(4096&this.ESt)}MAt(t){this.mAt(4096,t)}nz(){return 0!=(8192&this.ESt)}wAt(t){this.mAt(8192,t)}az(){return 0!=(16384&this.ESt)}SAt(t){this.mAt(16384,t)}lz(){return 0!=(32768&this.ESt)}TAt(t){this.mAt(32768,t)}fz(){return 0!=(this.ESt&1<<22)}bAt(t){this.mAt(1<<22,t)}pz(){return 0!=(this.ESt&1<<23)}vAt(t){this.mAt(1<<23,t)}xAt(){this.ESt&=-12647937}V5(t,s){if(t===this)return!1;if(t.q5())return!1;if(this.GAt(t))return!1;if(this.IAt(t))return!1;const i=t.GT(),e=t._T(),h=t.ym(),r=t._m(),n=t.yk(),o=t.DT(),a=t.BD(),u=(t.CAt(this),t.gAt(s.X5),t.yAt(s.sz),t.MAt(s.ez),t.wAt(s.rz),t.SAt(s.oz),t.TAt(s.uz),t.bAt(s.cz),t.vAt(s.dz),t.pAt(s.mz),i-this.GT()),l=e-this._T(),c=-this.yk(),f=Math.cos(c),d=Math.sin(c);if(s.X5&&(s.oz?t.eu=u*f-l*d:t.eu=u,s.ez)){const p=this.ym()/this.UDt.lnt();0!=p&&(t.eu/=p)}if(s.sz&&(s.oz?t.hu=u*d+l*f:t.hu=l,s.rz)){const m=this._m()/this.UDt.dnt();0!=m&&(t.hu/=m)}if(s.ez){const g=this.ym();0===g||g===Number.EPSILON?(t.GDt=1,t.UDt.XEt(1)):(t.GDt=h/this.ym(),t.UDt.XEt(t.GDt))}if(s.rz){const y=this._m();0===y||y===Number.EPSILON?(t.IDt=1,t.UDt.KEt(1)):(t.IDt=r/this._m(),t.UDt.KEt(t.IDt))}return s.oz&&(t.Ko=n-this.yk()),s.uz&&(t.fT=o-this.DT()),s.cz&&t.UDt.$Et(a),s.dz&&t.$k(this.sF()),this._At(t),this.a5(),this.fAt(),!0}Y5(t){if(t.P5()===this){const s=t.GT(),i=t._T(),e=t.ym(),h=t._m(),r=t.yk(),n=t.DT(),o=t.BD();t.CAt(null),t.xAt(),t.u5(s,i),t.c_(e,h),t.gk(r),t.AT(n),t.WD(o),this.EAt(t),this.a5()}}DAt(){return this.WDt}AAt(){this.NAt();const t=[...this.children()];for(const i of t)this.Y5(i);const s=this.P5();s&&s.Y5(this),this.xAt()}NAt(){if(this.LAt(),!this.WEt){const s=[...this.children()];s.length&&(this.WEt=[],this.QEt=new WeakMap);let t=0;for(const i of s){const e=i.nU();this.WEt.push(e),this.QEt.set(e,t),t++}}const t=this.P5();t&&t.NAt()}LAt(){if(-1===this.WDt){const t=[...this.j5()];this.WDt=t.length;for(const i of t)i.LAt();const s=[...this.children()];for(const e of s)e.LAt()}}YDt(){this.WEt&&(this.WEt.length=0),this.WEt=null,this.QEt=null;const t=this.P5();t&&t.YDt(),this.WDt=-1}q5(){return null!==this.P5()}P5(){const t=this.UDt;return null!==t?t.P5():null}F5(){let t=this;for(;t.q5();)t=t.P5();return t}*j5(){let t=this.P5();for(;t;)yield t,t=t.P5()}lEt(t){return this.Pq().includes(t)}N7(){const t=this.UDt;return null!==t&&t.N7()}Pq(){const t=this.UDt;return null!==t?t.Pq():e}children(){return this.Pq()}*Q5(){for(const t of this.children())yield t,yield*t.Q5()}B5(){return this.Pq().length}w2t(){return[...this.Q5()].length}W5(t){const s=this.Pq();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}pEt(s){if(s){const i=this.Pq();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}OAt(t){this.UDt||(this.UDt=d.lr(d.Fq,this)),t&&this.UDt.HEt(t)}cnt(){return this.UDt}VDt(){this.UDt&&(this.UDt.cr(),this.UDt=null)}CAt(t){t?(t.OAt(null),this.OAt(t)):(this.UDt&&this.UDt.HEt(null),this.N7()||this.VDt())}IAt(t){if(!this.q5())return!1;const s=this.P5();return s===t||s.IAt(t)}GAt(t){if(this.lEt(t))return!0;for(const s of this.Pq())if(s.GAt(t))return!0;return!1}_At(t){this.UDt.Pq().push(t)}EAt(t){const s=this.UDt.Pq(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.q5()||this.VDt(),t.N7()||t.VDt()}gEt(){const t=g.get(this);return t?t.ZDt:null}RAt(){const t=g.get(this);return t?t.XDt:NaN}A7(){const t=a.get(this);return d.pe(t)?t:NaN}PAt(t){a.set(this,t)}kAt(){this.mAt(1<<19,!0),this.KDt()}KDt(){if(m){const s=this.pf.HS();this.jDt&&s.lw(this.jDt);let t;t=0!=(this.ESt&1<<19)?s.WM()||"<point>":s.zM()||"<default>",this.jDt=s.rw(t,this.GF(),this.FDt,this.DT())}}p7(){return this.jDt}gY(){return this.cT===i}pT(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.GF()!==t&&(this.ESt=this.ESt&~(31<<26)|t<<26,this.KDt())}GF(){return(this.ESt&31<<26)>>26}zR(t,s){const i=s&&this.bDt!==t;i&&this.Y8(),this.Sft.g_t(this,this.bDt,t),this.bDt=t,i&&this.FAt(),0!==this.DT()&&this.bDt.q8()}PR(){return this.bDt}yR(){return this.PR().yR()}X8(t){this.vDt=0|t}kR(){return this.bDt.aH(),this.vDt}fH(t){this.xDt=0|t}h6(){return this.bDt.lH(),this.xDt}ZJ(){return this.vDt}mAt(t,s){s?this.ESt|=t:this.ESt&=~t}sF(){return 0!=(1&this.ESt)}$k(t){if(this.mAt(1,t),this.N7())for(const s of this.Pq())s.pz()&&s.$k(t)}L5(){return 0!=(8&this.ESt)}O5(t){t=!!t,this.L5()!==t&&(this.mAt(8,t),t?this.a5():this.jAt())}zAt(t,s){if(this.mAt(32,t),this.kDt&&this.kDt.clear(),s.trim()){this.kDt||(this.kDt=new Set);for(const i of s.split(" "))i&&this.kDt.add(i.toLowerCase())}else this.kDt=null}BAt(t){const s=0!=(32&this.ESt),i=this.kDt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}a5(){if(this.ESt|=65554,this.Sft.d_t(!0),this.pf.UR(),this.bDt.C8()&&(this.UAt(this.ADt,this.NDt,!0),this.ESt&=-3,this.FAt()),0!=(4&this.ESt)&&this.Gi.Hf().dispatchEvent(s),null!==this.UDt){const i=this.UDt.Pq();for(let t=0,s=i.length;t<s;++t)i[t].a5()}}UAt(t,s,i){const e=this.GT(),h=this._T(),r=this.ym(),n=this._m(),o=this.yk();t.Mu(e-this.EDt*r,h-this.DDt*n,r,n),i&&this.xz()&&this.WAt(t),0===o?s.vl(t):(t.offset(-e,-h),s.Gl(t,this.vTt(),this.bTt()),s.offset(e,h),s.Il(t)),t.normalize()}QAt(){const t=this.ESt;0!=(2&t)&&(this.UAt(this.ADt,this.NDt,!0),this.ESt=-3&t)}g5(){return this.QAt(),this.ADt}M5(){return this.QAt(),this.NDt}JAt(t){const s=this.GT(),i=this._T(),e=Math.round(s)-s,h=Math.round(i)-i;return 0==e&&0==h?t:(n.C(t),n.offset(e,h),n)}VAt(t){this.ADt.C(t),this.NDt.vl(this.ADt),this.ESt&=-3,this.m_t(),this.FAt()}YAt(t){this.mAt(4,t)}HAt(){return 0!=(4&this.ESt)}i7(t,s,i){return s&&0!==this.o7()?this.r7(this.PR().h7()):0===this.DT()||i?t.Zu(this.g5()):this.qAt()}qAt(){const t=this.PR(),s=this.p5();return!(s>=t.OY())&&(t.NY(s,r),r.Zu(this.g5()))}r7(t){const s=this.g5(),i=s.Iu(),e=s._u(),h=s.Cu(),r=s.Eu(),n=this.p5(),o=n+this.o7();return t.Cy(i,h,n,e,r,o)}S5(){const t=this.PR();if(t.VY())return this.r7(t.h7());{const s=t.yR();return this.i7(t.EF(),s.s7(),s.Qk())}}c7(t){this.mAt(1<<20,t)}l7(t){this.mAt(1<<21,t)}ZAt(){return 0!=(this.ESt&1<<20)}XAt(){return 0!=(this.ESt&1<<21)}KAt(t){this.RDt=t,this.$At(),this.xz()&&(this.QDt.tNt=null)}sNt(){return this.RDt}iNt(){return null!==this.RDt||this.xz()}eNt(){return this.hNt(this.ym(),this._m(),this.yk(),this.vTt(),this.bTt())}rNt(t,s,i){let e=0,h=1;return 0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.hNt(t,s,i,e,h)}hNt(h,r,t,n,o){let s=this.PDt;null===s&&(s={JDt:d.lr(d.Pl),width:NaN,height:NaN,angle:NaN},this.PDt=s);const a=s.JDt;if(s.width!==h||s.height!==r||s.angle!==t){const u=this.RDt;if(this.xz()){let t=this.wB(),s=this.TB(),i=this.Gz(),e=this.QDt.tNt;e||(u?(l.C(u),l.offset(t,s)):l.Ql(),e=i.M2(l),this.QDt.tNt=e),i.w2(e,a),a.offset(-t,-s),a.Hl(h,r,n,o)}else u?(a.C(u),a.Hl(h,r,n,o)):a.Yl(this.M5(),-this.GT(),-this._T());s.width=h,s.height=r,s.angle=t}return a}$At(){this.nNt(!0);const t=this.PDt;null!==t&&(t.width=NaN)}Mz(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.nU().F4().G4())throw new Error("object does not support mesh");this.Sz(),this.QDt={oNt:d.lr(d.my.WT,t,s),aNt:d.lr(d.my.WT,t,s),tNt:null}}xz(){return null!==this.QDt}Gz(){if(this.xz())return this.QDt.oNt;throw new Error("no mesh")}uNt(){if(this.xz())return this.QDt.aNt;throw new Error("no mesh")}lNt(t){this.mAt(65536,t)}cNt(){return 0!=(65536&this.ESt)}nNt(t){this.mAt(1<<17,t)}fNt(){return 0!=(this.ESt&1<<17)}WAt(t){const s=this.QDt.oNt,i=Math.min(s.n2(),0),e=Math.min(s.o2(),0),h=Math.max(s.a2(),1),r=Math.max(s.u2(),1),n=t.width(),o=t.height();t.offsetLeft(i*n),t.offsetTop(e*o),t.Pu((h-1)*n),t.ku((r-1)*o),this.Gb=s.l2()}Sz(){this.QDt&&(this.QDt.oNt.cr(),this.QDt.aNt.cr(),this.QDt=null,this.$At())}bz(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let h="relative"===e,r=i.x,n=i.y,o=i.MF,a="number"==typeof i.u?i.u:h?0:-1,u="number"==typeof i.v?i.v:h?0:-1;if(!this.xz())return!1;const l=this.Gz(),c=l.f2(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.DT()!==o&&(c.AT(o),f=!0),h&&(r+=t/(l.t2()-1),n+=s/(l.s2()-1)),a=-1!==a||h?(h&&(a+=t/(l.t2()-1)),d.Sr(a,0,1)):c.NT(),u=-1!==u||h?(h&&(u+=s/(l.s2()-1)),d.Sr(u,0,1)):c.OT(),c.GT()===r&&c._T()===n&&c.NT()===a&&c.OT()===u?f:(c.IT(r),c.ET(n),c.LT(a),c.RT(u),this.$At(),!0)}X_t(){return this.Gi.X_t()}R5(t,s){return!!this.g5().Ku(t,s)&&!!this.M5().Ku(t,s)&&(this.X_t()?this.Gi.Nz().Pxt(t,s):!this.iNt()||this.eNt().Ku(t-this.GT(),s-this._T()))}dNt(){return 0!=(16&this.ESt)}m_t(){if(this.dNt()&&this.L5()&&0==(256&this.ESt)){const t=this.g5(),s=this.Sft.f_t(),i=this.LDt;if(r.set(s.dV(t.Iu()),s.pV(t.Cu()),s.dV(t._u()),s.pV(t.Eu())),!i.equals(r)){const e=this.Gi;i===h?(s.mV(e,null,r),this.LDt=d.lr(d.Rect,r)):(s.mV(e,i,r),i.C(r)),this.ESt&=-17}}}pNt(){this.ESt|=16}jAt(){const t=this.LDt;t!==h&&(this.Sft.f_t().mV(this.Gi,t,null),this.LDt=h)}FAt(){const t=this.PR();if(t.C8()&&0==(256&this.ESt)){const s=t.MY(),i=this.g5(),e=this.ODt;if(r.set(s.dV(i.Iu()),s.pV(i.Cu()),s.dV(i._u()),s.pV(i.Eu())),!e.equals(r)){const h=this.Gi;e===o?(s.mV(h,null,r),this.ODt=d.lr(d.Rect,r)):(s.mV(h,e,r),e.C(r)),t.wY()}}}Y8(){const t=this.ODt;t!==o&&(this.PR().MY().mV(this.Gi,t,null),this.ODt=o)}uH(){return this.ODt}G5(){const t=this.Gi,s=this.bDt,i=s.jR();i.length&&i.at(-1)===t||(s.V8(t,!1),s.W8(t,!1),this.pf.UR())}C5(){const t=this.Gi,s=this.bDt,i=s.jR();i.length&&i[0]===t||(s.V8(t,!1),s.J8(t,!1),this.pf.UR())}E5(t){const s=this.Gi,i=this.bDt;if(i.yR()!==t.yR())throw new Error("layer from different layout");t!==i&&(i.V8(s,!0),this.zR(t),t.W8(s,!0),this.pf.UR())}A5(t,s){let i=this.Gi,e=!1,h=this.bDt;if(t.hj()!==i.hj()){const r=t.RR();if(!r)throw new Error("expected world instance");const n=r.PR(),o=(h.LO()!==n.LO()&&(h.V8(i,!0),this.zR(n),n.W8(i,!0),e=!0),n.mH(i,t,!!s));(e||o)&&this.pf.UR()}}n5(){return this.zDt}mNt(t){this.mAt(64,t)}bH(){return 0!=(64&this.ESt)}_7(t,s=null){const i={x:this.GT(),y:this._T(),w:this.ym(),h:this._m(),l:this.PR().fY(),zi:this.kR()},e=(0!==this.DT()&&(i.ze=this.DT()),0!==this.yk()&&(i.a=this.sAt()),this.gY()||(i.c=this.cT.toJSON()),.5!==this.wB()&&(i.oX=this.wB()),.5!==this.TB()&&(i.oY=this.TB()),0!==this.GF()&&(i.bm=this.GF()),this.sF()||(i.v=this.sF()),this.L5()||(i.ce=this.L5()),this.HAt()&&(i.be=this.HAt()),this.zDt&&(i.fx=this.zDt._7()),0!=(32&this.ESt));return e&&(i.sfi=e),this.kDt&&(i.sft=[...this.kDt].join(" ")),this.UDt&&"visual-state"!==t&&(i.sgi=this.UDt._7(t,s),g.has(this))&&(i.sgcd=g.get(this).ZDt,i.sgzid=g.get(this).XDt),this.xz()&&(i.mesh=this.Gz().FT()),i}aDt(){return{x:this.eu,y:this.hu,z:this.fT,w:this.GDt,h:this.IDt,a:this.Ko,sgi:this.cnt()?this.cnt().eDt():null}}fDt(t){t&&(this.eu=t.x,this.hu=t.y,this.fT=t.z,this.GDt=t.w,this.IDt=t.h,this.Ko=t.a,t.sgi&&this.cnt()&&this.cnt().E7(t.sgi),this.rAt(),this.a5())}v_t(){this.YDt(),this.AAt(),this.OAt(null),this.UDt&&this.UDt.lDt(this.WEt,this.QEt)}JZ(t){"visual-state"!==t&&this.AAt()}YZ(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.ESt)&&this.UDt.YZ(t.sgi,i)}LEt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.ESt)&&(this.UDt.lDt(null,null),this.YDt(),this.a5())}E7(t,s){if(m=!1,this.IT(t.x),this.ET(t.y),this.Gm(t.w),this.Mm(t.h),this.X8(t.zi),this.AT(t.hasOwnProperty("ze")?t.ze:0),this.gk(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.Va(t.c):t.hasOwnProperty("o")?(f.ua(this.cT),f.a=t.o):f.$o(1,1,1,1),this.HDt(f),this.xnt(t.hasOwnProperty("oX")?t.oX:.5),this.Int(t.hasOwnProperty("oY")?t.oY:.5),this.pT(t.hasOwnProperty("bm")?t.bm:0),this.$k(!t.hasOwnProperty("v")||t.v),this.O5(!t.hasOwnProperty("ce")||t.ce),this.YAt(!!t.hasOwnProperty("be")&&t.be),this.zAt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.zDt&&t.hasOwnProperty("fx")&&this.zDt.E7(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.WEt)for(const i of this.WEt)i.l6()||this.pf.XF(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.OAt(null);const e=this.UDt,h=t.sgi;e.E7(h),e.lDt(this.WEt,this.QEt),t.sgcd&&d.pe(t.sgzid)&&g.set(this,{ZDt:t.sgcd,XDt:t.sgzid})}if(t.hasOwnProperty("mesh")){const r=t.mesh;this.Mz(r.cols,r.rows),this.Gz().jT(r)}else this.Sz();this.a5(),m=!0,this.KDt(),"visual-state"!==s&&this.pf.gNt(this.nU(),t)}}}{const ba=self.ks;ba.eCt=class extends ba.nr{constructor(t,s){super();const i=t.iP(),e=i.Ayt(s[1]),h=(i.yNt().AGt(e),this.pf=i,this.Sft=t,this.lGt=ba.o4.Yz(e),this.Hvt=null,this.MNt=null,this.OIt=e.Instance,this.AV=s[2],this.mr=s[0],this.pMt=this.pf.qdt(s[3]),this.lGt.aSt());if(h<2&&(this.Hvt=ba.lr(e.SCt,this),!(this.Hvt instanceof ba.uGt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(ba.o4.Dvt(this,h),2<=h){const r=e.SCt??globalThis.T6;if(this.MNt=new r,!(this.MNt instanceof globalThis.T6))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.MNt=new globalThis.Jz;ba.o4.Avt(h),this.Ivt()}static dv(t,s){return ba.lr(ba.eCt,t,s)}cr(){this.pf=null,this.lGt=null,this.Hvt&&(this.Hvt.cr(),this.Hvt=null),this.OIt=null}hTt(){return this.Hvt}Ivt(){this.Hvt?this.Hvt.Ivt():this.MNt&&this.MNt.xU()}iP(){return this.pf}QF(){return this.Sft}jz(){return this.lGt}UCt(){return this.OIt}hf(){return this.mr}fY(){return this.AV}Bz(){return this.MNt}qdt(){return this.pMt}}}{const va=self.ks,xa=self.kz;va.P_t=class extends va.nr{constructor(t){super(),this.pf=t.runtime,this.VMt=t.zz,this.lGt=this.VMt.jz(),this.Gi=t.Wz,this.ty=t.index,this.__t=null,this.E_t=null,this.lGt.W8(this.Gi)}cr(){this.E_t&&(this.E_t.qF(),this.E_t=null),this.lGt.V8(this.Gi),this.__t&&(this.__t.cr(),this.__t=null),this.pf=null,this.VMt=null,this.lGt=null,this.Gi=null}kCt(t){if(this.__t)throw new Error("already got sdk instance");const s=this.jz().aSt();if(s<2){if(this.__t=va.lr(this.VMt.UCt(),this,t),!(this.__t instanceof va.cGt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.jz().Cvt();this.Evt(i.Instance,t)}}Nz(){return this.__t??this.E_t}Qz(){return this.Gi}iP(){return this.pf}Uz(){return this.VMt}jz(){return this.lGt}Frt(){return this.ty}mGt(){this.__t?this.__t.mGt():this.E_t.G6()}wGt(t,s){this.__t&&this.__t.wGt(t,s)}NEt(){return this.__t?this.__t.gxt():this.E_t.Vj()}FT(t="full"){return this.__t?this.__t.FT(t):this.E_t.Yj(t)}jT(t,s="full"){if(this.__t)return this.__t.jT(t,s);this.E_t.Hj(t,s)}static wNt(t,s,i){let e=globalThis.b6,h,r;h=s instanceof e?t.Dk(s):s.pGt(),r=i instanceof e?t.Dk(i):i.pGt();const n=h.Qz(),o=r.Qz(),a=n.QF().LO(),u=o.QF().LO();if(a!==u)return a-u;const l=n.SEt(),c=o.SEt();return l!==c?l-c:h.Frt()-r.Frt()}Evt(t,s){const i=xa,e=t??this.__t.Cvt(),h=e||i,r=this.jz().aSt();if(va.o4.Dvt(this,r),va.o4.NGt(s),this.E_t=new h,va.o4.LGt(),va.o4.Avt(r),!e||this.E_t instanceof i)return this.E_t;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}Xvt(){return this.E_t||this.Evt()}Sxt(){return!!this.E_t}}}{const Ga=self.ks;Ga.d8=class extends Ga.nr{constructor(t,s){super(),this.VT=t,this.SNt=[],this.TNt=[],this.bNt=new Map,this.vNt=[],this.xNt=[],this.GNt=new Set,this.PS=!0;for(const i of s){const e=Ga.lr(Ga.INt,this,i,this.SNt.length);this.SNt.push(e),this.bNt.set(e.hf().toLowerCase(),e),3<=i.length&&this.vNt.push(this.CNt(e,i[2]))}this.iP()._Nt(this)}cr(){this.iP().ENt(this);for(const t of this.xNt)t.cr();Ga.Wn(this.xNt),Ga.Wn(this.SNt),Ga.Wn(this.TNt),this.bNt.clear(),Ga.Wn(this.vNt),this.VT=null}DNt(t){this.GNt.add(t)}ANt(t){this.GNt.delete(t)}NNt(t){t.LM()&&(this.xNt=this.SNt.map(t=>{const s=t.Tx();return 0<s.GetCustomParametersByteSize()?Ga.lr(Ga.my.WebGPUEffectCustomParamsBuffer,s):null}),this.LNt());for(const s of this.GNt)s.NNt(t)}RCt(t){if(t.length){this.SNt=t.concat(this.SNt);for(const s of t)this.bNt.set(s.hf().toLowerCase(),s);for(let t=0,s=this.SNt.length;t<s;++t)this.SNt[t].nY(t)}}CNt(t,s){t.ONt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ga.lr(Ga.Ho);h.Va(e),i[t]=h}}return i}i2(){return this.VT}iP(){return this.VT.iP()}Xz(){Ga.Wn(this.TNt);let t=!0;for(const s of this.SNt)s.ymt()&&(this.TNt.push(s),s.Tx().tT()||(t=!1));this.PS=t}ck(){return this.SNt}ZCt(){return 0<this.SNt.length}Bht(t){return this.bNt.get(t.toLowerCase())||null}RNt(t){if((t=Math.floor(+t))<0||t>=this.SNt.length)throw new RangeError("invalid effect type index");return this.SNt[t]}qz(t){return this.RNt(t).ymt()}Zz(t,s){this.RNt(t).ONt(s)}yY(){return this.TNt}bH(){return 0<this.TNt.length}tT(){return this.PS}zht(t){return this.vNt[t]}y8(t){return(t<this.xNt.length?this.xNt:this.vNt)[t]}Kz(t,s){if(t<0||t>=this.vNt.length)return null;const i=this.vNt[t];return s<0||s>=i.length?null:i[s]}$z(t,s,i){if(t<0||t>=this.vNt.length)return!1;const e=this.vNt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ga.Ho){if(h.Ma(i))return!1;h.ua(i)}else{if(h===i)return!1;e[s]=i}return t<this.xNt.length&&this.xNt[t].SetParameterValue(s,i),!0}LNt(){const i=this.vNt,e=this.xNt;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}static PNt(t){return t&&t instanceof Ga.Ho?{t:"color",v:t.toJSON()}:t}static kNt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=Ga.lr(Ga.Ho);return i.Va(t.v),i}}}static FNt(t){return t.map(Ga.d8.PNt)}static jNt(t){return t.map(Ga.d8.kNt)}FT(){return this.SNt.map(t=>({name:t.hf(),active:t.ymt(),params:Ga.d8.FNt(this.vNt[t.LO()])}))}jT(t){for(const s of t){const i=this.Bht(s.name);i&&(i.ONt(s.active),this.vNt[i.LO()]=Ga.d8.jNt(s.params))}this.Xz(),this.LNt()}}}{const Ia=self.ks;Ia.INt=class extends Ia.nr{constructor(t,s,i){super(),this.f8=t,this.yf=s[0],this.mr=s[1],this.ty=i,this.aT=null,this.p0=!0}cr(){this.f8=null,this.aT=null}OCt(t){const s=Ia.lr(Ia.INt,t,[this.yf,this.mr],-1);return s.aT=this.aT,s.p0=this.p0,s}NNt(t){const s=t.jM(this.yf);if(!s)throw new Error("failed to find shader program '"+this.yf+"'");this.aT=s}lk(){return this.f8}hf(){return this.mr}nY(t){this.ty=t}LO(){return this.ty}i2(){return this.f8.i2()}iP(){return this.f8.iP()}ONt(t){this.p0=!!t}ymt(){return this.p0}Tx(){return this.aT}zNt(){const i=[];for(let t=0,s=this.aT.bx();t<s;++t){const e=this.aT.vx(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(Ia.lr(Ia.Ho,1,1,1,1))}}return i}}}{const Ca=self.ks;Ca.BDt=class extends Ca.nr{constructor(t,s){super(),this.Gi=t,this.BNt=s,this.f8=t.QF().lk(),this.UNt=!0,this.w8=!0,this.WNt=!1,this.QNt=!1,this.JNt=!1,this.VNt=!1,this.EO=Ca.lr(Ca.my.EN,t.iP().QP().p8(),{MN:(t,s)=>{const i=s.TO(),e=i.RR();t.mT(e.m8()),t.Gw(e.p5()),i.m2(t),t.Gw(0)},wN:t=>{const s=t.Axt(),[i,e]=t.Dxt();return{pO:s,mO:i,gO:e}},SN:t=>this.y8(t)}),this.YNt=[],this.TNt=[],this.PS=!0,this.vNt=[],this.xNt=[],this.NNt(t.iP().HS());for(let t=0,s=this.f8.ck().length;t<s;++t)this.YNt.push(!0);this.Xz(),this.f8.DNt(this)}cr(){this.f8.ANt(this);for(const t of this.xNt)t&&t.cr();Ca.Wn(this.xNt),this.EO.cr(),this.EO=null,Ca.Wn(this.YNt),Ca.Wn(this.TNt),Ca.Wn(this.vNt),this.Gi=null,this.f8=null}NNt(t){t.LM()&&(this.xNt=this.f8.ck().map(t=>{const s=t.Tx();return 0<s.GetCustomParametersByteSize()?Ca.lr(Ca.my.WebGPUEffectCustomParamsBuffer,s):null}))}qDt(t){let s=0;for(const i of t)this.vNt.push(this.CNt(s,i)),++s;this.LNt(),this.Xz()}CNt(t,s){this.YNt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ca.lr(Ca.Ho);h.Va(e),i[t]=h}}return i}W_t(){for(const t of this.f8.ck())this.vNt.push(t.zNt());this.LNt()}i2(){return this.VT}lk(){return this.f8}NO(){return this.mY(),this.EO}iP(){return this.Gi.iP()}Xz(){Ca.Wn(this.TNt);let t=this.BNt,i=this.f8.ck(),e=this.TNt,h=this.YNt,r=!0;for(let t=0,s=i.length;t<s;++t)if(h[t]){const n=i[t];e.push(n),n.Tx().tT()||(r=!1)}this.PS=r,t.mNt(!!e.length),this.UNt=!0}mY(){const t=this.Gi,s=this.BNt,i=s.gY(),e=t.F4().T4(),h=0!==s.yk()||0!==s.PR().yk()||s.ym()<0||s._m()<0,r=t.Oxt(),n=t.$S();(this.UNt||i!==this.w8||e!==this.WNt||h!==this.QNt||r!==this.JNt||n!==this.VNt||this.EO.wL())&&(this.EO.SL(this.TNt.map(t=>t.Tx()),{bN:this.TNt.map(t=>t.LO()),vN:!i||n,GN:e,IN:r,CN:h}),this.UNt=!1,this.w8=i,this.WNt=e,this.QNt=h,this.JNt=r,this.VNt=n)}yY(){return this.TNt}zht(t){return this.vNt[t]}y8(t){return(t<this.xNt.length?this.xNt:this.vNt)[t]}Kz(t,s){if(t<0||t>=this.vNt.length)return null;const i=this.vNt[t];return s<0||s>=i.length?null:i[s]}$z(t,s,i){if(t<0||t>=this.vNt.length)return!1;const e=this.vNt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ca.Ho){if(h.Ma(i))return!1;h.ua(i)}else{if(h===i)return!1;e[s]=i}return t<this.xNt.length&&this.xNt[t].SetParameterValue(s,i),!0}LNt(){const i=this.vNt,e=this.xNt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}tT(){return this.PS}HNt(){return this.TNt.some(t=>t.Tx().eT())}qz(t){return this.YNt[t]}Zz(t,s){this.YNt[t]=!!s}ck(){return this.f8.ck()}_7(){return this.f8.ck().map(t=>({name:t.hf(),active:this.YNt[t.LO()],params:Ca.d8.FNt(this.vNt[t.LO()])}))}E7(t){for(const s of t){const i=this.f8.Bht(s.name);i&&(this.YNt[i.LO()]=s.active,this.vNt[i.LO()]=Ca.d8.jNt(s.params))}this.Xz(),this.LNt()}}}{let I=self.ks,r=[],S=[],n=[],T=I.lr(I.Pl),M=I.lr(I.Pl),b=I.lr(I.il),d=I.lr(I.Rect),p=I.lr(I.Rect),m=null,g=null,y=null;I.qNt=class extends I.nr{constructor(t){super(),this.pf=t,this.ZNt=0,this.XNt=0,this.KNt=[],this.$Nt=0,this.tLt=0,this.sLt=0,this.iLt=0,this.eLt=new self.TP(this)}cr(){this.pf=null}iP(){return this.pf}jO(){return this.eLt}hLt(){this.tLt=this.$Nt,this.$Nt=0,this.iLt=this.sLt,this.sLt=0}rLt(){return this.tLt}nLt(){return this.iLt}oLt(t,s){const i=t.RR(),e=s.RR();i&&e&&i.L5()&&e.L5()&&this.KNt.push([t,s])}a2t(s,i,e){for(const[h,r]of this.KNt){let t=null;if(s===h)t=r;else{if(s!==r)continue;t=h}t.m2t(i)&&!e.includes(t)&&e.push(t)}}u2t(t,s){if(this.KNt.length)for(const[i,e]of this.KNt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}aLt(){I.Wn(this.KNt)}vP(t,s){if(!t||!s||t===s)return!1;const i=t.RR(),e=s.RR();if(!i.L5()||!e.L5())return!1;this.$Nt++;const h=i.PR(),r=e.PR(),n=h.hH(r);return n?this.uLt(i,e):this.lLt(i,e)}uLt(t,s){if(!t.g5().Zu(s.g5()))return!1;if(this.sLt++,!t.M5()._l(s.M5()))return!1;if(t.X_t()&&s.X_t())return!1;if(t.X_t())return this.cLt(t,s);if(s.X_t())return this.cLt(s,t);if(!t.iNt()&&!s.iNt())return!0;const i=t.eNt(),e=s.eNt();return i.ql(e,s.GT()-t.GT(),s._T()-t._T())}lLt(i,e){const t=i.X_t(),s=e.X_t();if(t&&!s)return this.fLt(i,e);if(s&&!t)return this.fLt(e,i);if(s||t)return!1;{const h=i.PR(),r=e.PR(),n=(T.C(i.eNt()),M.C(e.eNt()),T.Bl());for(let t=0,s=n.length;t<s;t+=2){const a=t+1,u=n[t],l=n[a],[c,f]=h.RF(u+i.GT(),l+i._T());n[t]=c,n[a]=f}const o=M.Bl();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=r.RF(p+e.GT(),m+e._T());o[t]=g,o[d]=y}return T.Jl(),M.Jl(),this.sLt++,T.ql(M,0,0)}}fLt(t,s){const i=t.PR(),e=s.PR(),h=(m=m||I.lr(I.Pl),g=g||I.lr(I.Rect),y=y||I.lr(I.il),s.GT()),r=s._T(),[n,o]=e.RF(h,r),[a,u]=i.AF(n,o),l=a-h,c=u-r;if(g.C(s.g5()),g.offset(l,c),!t.g5().Zu(g))return!1;if(y.C(s.M5()),y.offset(l,c),this.sLt++,!t.M5()._l(y))return!1;m.C(s.eNt());const f=m.Bl();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=l,f[d]+=c}return m.Jl(),this.cLt(t,s,a,u,m,g,y)}cLt(t,e,s,i,h,r,n){const o=void 0!==r?r:e.g5(),a=t.GT(),u=t._T(),l=t.nU().Nz(),c=void 0!==s?s:e.GT(),f=void 0!==i?i:e._T(),d=e.iNt(),p=void 0!==n?n:e.M5(),m=S;l.GetCollisionRectCandidates(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.GetRect();if(this.$Nt++,o.Xu(y,a,u)&&(b.vl(y),b.offset(a,u),b._l(p)))if(d){let t=void 0!==h?h:e.eNt(),s=c,i=f;void 0!==h&&(s=e.GT(),i=e._T());const M=g.GetPoly();if(M){if(this.sLt++,M.ql(t,s-(a+y.Iu()),i-(u+y.Cu())))return I.Wn(m),!0}else if(T.Yl(b,0,0),T.ql(t,s,i))return I.Wn(m),!0}else{const w=g.GetPoly();if(!w)return I.Wn(m),!0;if(T.Yl(p,0,0),w.ql(T,-(a+y.Iu()),-(u+y.Cu())))return I.Wn(m),!0}}return I.Wn(m),!1}dLt(t,o,a){const u=t.q4(),s=this.pf.S3();if(!s)throw new Error("cannot call outside event");const l=s.qft(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.aF(),i.set(t,s)),s};if(u.Nft()){a||(u.jft(!1),I.Wn(u.zft())),l&&I.Wn(u.Bft());for(const e of t.H4()){let h=e.RR(),r=h.PR();if(!(!c(r)||!h.S5())&&o.some(([t,s])=>{const[i,e]=r.AF(t,s,h.p5());return h.R5(i,e)})){if(a)return!1;u.kft(e)}else l&&u.Fft(e)}}else{let i,e=!1,n=(!l||s.Bgt(this.pf.zdt())||this.pf.uTt()&&!u.Bft().length&&u.zft().length?i=u.zft():(i=u.Bft(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],h=t.RR(),r=h.PR();if(!(!c(r)||!h.S5())&&o.some(([t,s])=>{const[i,e]=r.AF(t,s,h.p5());return h.R5(i,e)})){if(a)return!1;e?u.kft(t):i[n++]=t}else e?i[n++]=t:l&&u.Fft(t)}a||(i.length=n)}return t.byt(),i.clear(),!!a||u.Lft()}pLt(t,s){if(t)for(const i of s.y_t())if(!t.hH(i))return!1;return!0}aTt(t,s,i,e){if(s.eY())for(const h of s.pgt())this.pLt(t,h)?(h.p_t(),h.f_t().gV(i,e)):I.Zh(e,h.H4());else this.pLt(t,s)?(s.p_t(),s.f_t().gV(i,e)):I.Zh(e,s.H4())}LP(t,s,i,e){for(const h of s)this.aTt(t,h,i,e)}mLt(t,s,i){const e=this.pf.RGt();e&&this.LP(t,e.yX(),s,i)}gLt(t,s,i){const e=this.pf.PGt();e&&this.LP(t,e.yX(),s,i)}BAt(t,s){return t.tEt()&&(!s||s.RR().BAt(t.pSt().get("solidTags")))}IP(t){const s=t.RR();this.mLt(s.PR(),s.g5(),r);for(const i of r)if(this.BAt(i,t)&&this.vP(t,i))return I.Wn(r),i;return I.Wn(r),null}yLt(t,s){this.mLt(null,t,r);for(const i of r)if(this.BAt(i,s)&&this.MLt(t,i))return I.Wn(r),i;return I.Wn(r),null}wLt(t,s){let i=null;s&&(i=n,I.Wn(i));const e=t.RR();this.gLt(e.PR(),e.g5(),r);for(const h of r)if(h.iEt()&&this.vP(t,h)){if(!s)return I.Wn(r),h;i.push(h)}return I.Wn(r),i}SLt(s,i,e,h,r){h=h||50;const n=s.RR(),o=n.GT(),a=n._T();for(let t=0;t<h;++t)if(n.u5(o+i*t,a+e*t),n.a5(),!this.vP(s,r))return!0;return n.u5(o,a),n.a5(),!1}TLt(s,i,e,h,r,n){h=h||50;let o=s.RR(),a=o.GT(),u=o._T(),l=null,c=null;for(let t=0;t<h;++t)if(o.u5(a+i*t,u+e*t),o.a5(),!this.vP(s,l))if(l=this.IP(s))c=l;else if(r&&(l=n?this.vP(s,n)?n:null:this.wLt(s))&&(c=l),!l)return c&&this.bLt(s,i,e,c,16,!0),!0;return o.u5(a,u),o.a5(),!1}vLt(i,e,h,t){t=t||50;let r=i.RR(),n=r.GT(),o=r._T(),a=null,u=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const l=2*t-1;if(r.u5(n+e*s*l,o+h*s*l),r.a5(),!this.vP(i,a)){if(!(a=this.IP(i)))return u&&this.bLt(i,e*l,h*l,u,16,!0),!0;u=a}}return r.u5(n,o),r.a5(),!1}bLt(t,s,i,e,h,r){let n=2,o=!1,a=!1,u=t.RR(),l=u.GT(),c=u._T();for(;n<=h;){const f=1/n;n*=2,u.f5(s*f*(o?1:-1),i*f*(o?1:-1)),u.a5(),this.vP(t,e)||r&&this.IP(t)?(o=!0,a=!0):(o=!1,a=!1,l=u.GT(),c=u._T())}a&&(u.u5(l,c),u.a5())}xLt(i,t=100){let e=0,h=i.RR(),r=h.GT(),n=h._T(),o=0,a=this.IP(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,h.u5(Math.floor(r+t*e),Math.floor(n+s*e)),h.a5(),!this.vP(i,a)&&!(a=this.IP(i)))return!0}return h.u5(r,n),h.a5(),!1}GLt(t,s,i,e){const h=t.RR(),r=h.GT(),n=h._T(),o=Math.max(10,I.Cr(s,i,r,n)),a=I.Er(s,i,r,n),u=e||this.IP(t);if(!u)return I.Tr(a+Math.PI);let l=u,c=0,f=0,d=I.br(5),p;for(p=1;p<36;++p){const x=a-p*d;if(h.u5(s+Math.cos(x)*o,i+Math.sin(x)*o),h.a5(),!this.vP(t,l)&&!(l=e?null:this.IP(t))){c=x;break}}for(36===p&&(c=I.Tr(a+Math.PI)),l=u,p=1;p<36;++p){const G=a+p*d;if(h.u5(s+Math.cos(G)*o,i+Math.sin(G)*o),h.a5(),!this.vP(t,l)&&!(l=e?null:this.IP(t))){f=G;break}}if(36===p&&(f=I.Tr(a+Math.PI)),h.u5(r,n),h.a5(),f===c)return f;let m=I.Dr(f,c)/2,g;g=I.Nr(f,c)?I.Tr(c+m+Math.PI):I.Tr(f+m);const y=Math.cos(a),M=Math.sin(a),w=Math.cos(g),S=Math.sin(g),T=y*w+M*S,b=y-2*T*w,v=M-2*T*S;return I.Er(0,0,b,v)}ILt(t,s,i,e,h){if(!h)return!1;const r=h.RR();if(!r.L5())return!1;if(this.$Nt++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!r.g5().Zu(d))return!1;if(h.X_t())return this.CLt(t,s,i,e,h,r);if(this.sLt++,!r.M5().Cl(t,s,i,e))return!1;if(!r.iNt())return!0;const n=r.eNt();return n.Cl(r.GT(),r._T(),t,s,i,e)}CLt(i,e,h,r,t,s){const n=s.GT(),o=s._T(),a=t.Nz(),u=S;p.set(i,e,h,r),p.normalize(),a.GetCollisionRectCandidates(p,u);for(let t=0,s=u.length;t<s;++t){const l=u[t],c=l.GetRect();if(this.$Nt++,d.Xu(c,n,o)&&(b.vl(c),b.offset(n,o),b.Cl(i,e,h,r))){const f=l.GetPoly();if(!f)return I.Wn(u),!0;if(this.sLt++,f.Cl(n+c.Iu(),o+c.Cu(),i,e,h,r))return I.Wn(u),!0}}return I.Wn(u),!1}MLt(t,s){if(!s)return!1;const i=s.RR();if(!i.L5())return!1;if(this.$Nt++,!i.g5().Zu(t))return!1;if(s.X_t())return this._Lt(t,s,i);if(this.sLt++,b.vl(t),!i.M5()._l(b))return!1;if(!i.iNt())return!0;const e=T,h=(e.vl(t,i.GT(),i._T()),i.eNt());return e.ql(h,0,0)}_Lt(i,t,s){const e=s.GT(),h=s._T(),r=t.Nz(),n=S;r.GetCollisionRectCandidates(i,n);for(let t=0,s=n.length;t<s;++t){const o=n[t],a=o.GetRect();if(this.$Nt++,i.Xu(a,e,h)){const u=o.GetPoly();if(!u)return I.Wn(n),!0;if(this.sLt++,T.vl(i,0,0),u.ql(T,-(e+a.Iu()),-(h+a.Cu())))return I.Wn(n),!0}}return I.Wn(n),!1}ELt(t,s){if(t){const i=t.RR();i.L5()&&(this.$Nt++,i.g5().Zu(s.rect))&&(t.X_t()?this.DLt(t,i,s):(this.sLt++,i.iNt()?s.ALt(t,i.GT(),i._T(),i.eNt()):s.NLt(t,i.M5())))}}DLt(i,e,h){const r=e.GT(),n=e._T(),o=S;i.Nz().GetCollisionRectCandidates(h.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],u=a.GetRect();if(this.$Nt++,h.rect.Xu(u,r,n)){const l=a.GetPoly();this.sLt++,l?h.ALt(i,r+u.Iu(),n+u.Cu(),l):h.LLt(i,e.GT(),e._T(),u)}}I.Wn(o)}_P(t,s){if(t!==this.ZNt||s!==this.XNt){this.ZNt=t,this.XNt=s;const i=this.pf.iY();for(const e of i)if(e.f4()){for(const h of e.Y4())h.RR().jAt();e.f_t().OLt(t,s),e.d_t();for(const r of e.Y4()){const n=r.RR();n.pNt(),n.m_t()}}}}DP(){return[this.ZNt,this.XNt]}RLt(t,s){this.ZNt=t,this.XNt=s}}}{const _a=self.ks;_a.QIt=class extends _a.nr{constructor(t,s){super(),this.uV=t,this.lV=s,this.cV=_a.lr(_a.ic)}cr(){this.cV.cr(),this.cV=null}OLt(t,s){if(!this.cV.rc())throw new Error("grid not empty");this.uV=t,this.lV=s}fV(t,s,i){let e=this.cV.ei(t,s);return e||(i?(e=_a.lr(_a.PLt,this,t,s),this.cV.Set(t,s,e),e):null)}dV(t){const s=Math.floor(t/this.uV);return isFinite(s)?s:0}pV(t){const s=Math.floor(t/this.lV);return isFinite(s)?s:0}mV(e,h,r){if(h)for(let i=h.Iu(),t=h._u();i<=t;++i)for(let t=h.Cu(),s=h.Eu();t<=s;++t)if(!r||!r.Ku(i,t)){const n=this.fV(i,t,!1);n&&(n.C0(e),n.rc())&&this.cV.nc(i,t)}if(r)for(let i=r.Iu(),t=r._u();i<=t;++i)for(let t=r.Cu(),s=r.Eu();t<=s;++t)h&&h.Ku(i,t)||this.fV(i,t,!0).rV(e)}gV(t,s){let i=this.dV(t.Iu()),e=this.pV(t.Cu()),h=this.dV(t._u()),r=this.pV(t.Eu());if(isFinite(h)&&isFinite(r))for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.fV(i,t,!1);n&&n.oV(s)}}}}{const Ea=self.ks;Ea.PLt=class extends Ea.nr{constructor(t,s,i){super(),this.KJ=t,this.eu=s,this.hu=i,this.$J=Ea.lr(Ea.lc)}cr(){this.$J.cr(),this.$J=null,this.KJ=null}rc(){return this.$J.rc()}rV(t){this.$J.Mc(t)}C0(t){this.$J.nc(t)}oV(t){Ea.Zh(t,this.$J.wc())}}}{const Da=self.ks;Da.kLt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Da.Rect,this.FLt=2,this.jLt=null,this.zLt=0,this.BLt=0,this.ULt=0,this.WLt=0,this.QLt=0,this.Dt=0,this.JLt=1,this.VLt=0,this.YLt=1,this.HLt=0}qLt(){return this.FLt<1+1e-6}m0(){this.FLt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.FLt=2,this.jLt=null,this.zLt=0,this.BLt=0,this.ULt=0,this.WLt=0,this.QLt=0,this.Dt=0,this.JLt=1,this.VLt=0,this.YLt=1,this.HLt=0,this}ZLt(){if(!1!==this.qLt()){const t=this.dx*this.FLt,s=this.dy*this.FLt,i=Da.Gr(t,s),e=t/i,h=s/i,r=(this.Dt=i-1e-6,this.WLt=this.x1+e*this.Dt,this.QLt=this.y1+h*this.Dt,this.zLt=Math.atan2(this.ULt,this.BLt)+Math.PI/2,this.JLt=Math.cos(this.zLt),this.VLt=Math.sin(this.zLt),e*this.JLt+h*this.VLt);if(this.YLt=e-2*this.JLt*r,this.HLt=h-2*this.VLt*r,0<r){const n=Math.PI;this.zLt=Da.Tr(this.zLt+n),this.JLt=-this.JLt,this.VLt=-this.VLt}}}XLt(t,s,i,e,h){const r=Da.wn(this.x1,this.y1,this.x2,this.y2,s,i,e,h);0<=r&&r<this.FLt&&(this.FLt=r,this.jLt=t.hj(),this.BLt=s-e,this.ULt=i-h)}LLt(t,s,i,e){const h=s+e.Iu(),r=s+e._u(),n=i+e.Cu(),o=i+e.Eu();this.XLt(t,h,n,r,n),this.XLt(t,r,n,r,o),this.XLt(t,r,o,h,o),this.XLt(t,h,o,h,n)}NLt(t,s){const i=s.un(),e=s.ln(),h=s.cn(),r=s.dn(),n=s.pn(),o=s.mn(),a=s.gn(),u=s.yn();this.XLt(t,i,e,h,r),this.XLt(t,h,r,n,o),this.XLt(t,n,o,a,u),this.XLt(t,a,u,i,e)}ALt(i,e,h,t){const r=t.Bl();for(let t=0,s=r.length;t<s;t+=2){const n=(t+2)%s,o=r[t]+e,a=r[t+1]+h,u=r[n]+e,l=r[1+n]+h;this.XLt(i,o,a,u,l)}}}}{const b=self.ks,Aa=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Na=new Set(["high","low"]),La=self.Ss,vh=La.xs,xh=La._s,Oa=vh.create(),Ra=b.lr(b.il),v=b.lr(b.Rect);b.KLt=class extends b.nr{constructor(t){super(),this.pf=t,this.$Lt=[],this.tOt=!1,this.sOt=null,this.iOt=null,this.eOt=null,this.hOt="high-performance",this.rOt=!1,this.nOt="auto",this.oOt=0,this.aOt=0,this.uOt="",this.lOt=0,this.cOt=0,this.fOt=0,this.dOt=0,this.pOt=0,this.mOt=0,this.Py="normalized",this.gOt=0,this.yOt=1,this.MOt=1e4,this.fM=!0,this.wOt=0,this.tL=0,this.sL=0,this.SOt="letterbox-scale",this.TOt="letterbox-scale",this.bOt=0,this.vOt=0,this.xOt=vh.create(),this.GOt="high",this.IOt=this.GOt,this.COt=!1,this._Ot=[],this.EOt=new Set,this.DOt=self.C3_Shaders,this.AOt=b.lr(b.my.hN,{tN:()=>[this.FH(),this.jH()],sN:()=>this.NOt(),iN:t=>this.LOt(t),getTime:()=>this.iP().z3(),eN:()=>this.iP().UR()}),this.OOt=0,this.ROt=0,this.POt=NaN,this.kOt=null,this.FOt=new Map,this.jOt=NaN,this.zOt=new Map,this.BOt="",this.UOt=1,this.WOt=b.lr(b.Rect),this.QOt="",this.JOt=null,this.VOt=null,this.YOt=0,this.HOt=0,this.qOt=-1,this.ZOt=0,this.XOt=t=>this.ZOt=t.progress,this.KOt=null,this.$Ot={t3t:null,s3t:null,i3t:null},this.e3t=0,this.h3t=0,this.r3t=0,this.n3t="fade-in",this.o3t=null,this.a3t=new Promise(t=>this.o3t=t)}u3t(t){this.hOt=t}l3t(t){this.tOt=!!t}c3t(t){this.Py=t}f3t(){return this.Py}d3t(t){this.gOt=t}p3t(t,s){this.yOt=t,this.MOt=s}m3t(t){this.rOt=!!t}g3t(t){this.nOt=t}async Po(t){let s=t.canvas,i=(this.$Lt.push({canvas:s,y3t:null}),this.pf.Pj("runtime","window-resize",t=>this.M3t(t)),this.pf.Pj("runtime","fullscreenchange",t=>this.w3t(t)),this.pf.Pj("runtime","fullscreenerror",t=>this.S3t(t)),s.addEventListener("webglcontextlost",t=>this.T3t(t)),s.addEventListener("webglcontextrestored",t=>this.b3t(t)),this.COt=!!t.isFullscreen,this.uOt=t.cssDisplayMode,navigator.gpu&&this.tOt),e=!1;if(i)try{await this.v3t(!0)}catch(t){this.x3t("WebGPU",t),this.iOt=null}if(!this.HS())try{await this.G3t(!0)}catch(t){this.x3t("WebGL",t),this.sOt=null}if(this.HS()||(e=!0),!this.HS()&&i)try{await this.v3t(!1)}catch(t){this.x3t("WebGPU",t),this.iOt=null}if(!this.HS())try{await this.G3t(!1)}catch(t){this.x3t("WebGL",t),this.sOt=null}const h=this.HS();if(!h)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");h.yS(e),this.iOt&&(this.iOt.I3t=()=>this.C3t(),this.iOt._3t=()=>this.E3t()),"normalized"===this.Py?h.EM():(h.DM(),h.CM(this.gOt)),this.c_(t.windowInnerWidth,t.windowInnerHeight,!0),await this.NNt()}x3t(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async v3t(t){let s={Ey:this.yOt,Dy:this.MOt},i=!0;"no"===this.nOt?i=!1:"auto"===this.nOt&&(i=b.li.wi);const e={powerPreference:this.hOt,depth:this.pf.JY(),failIfMajorPerformanceCaveat:t,D3t:this.pf.YH(),A3t:this.pf.N3t(),TE:this.pf.L3t(),O3t:i};this.iOt=b.lr(b.my.WebGPURenderer,s),await this.iOt.dv(this.$Lt[0].canvas,e)}async G3t(t){const s={alpha:!0,powerPreference:this.hOt,SE:"xbox-uwp-webview2"!==this.pf.zP(),depth:this.pf.JY(),TE:this.pf.L3t(),failIfMajorPerformanceCaveat:t,Ey:this.yOt,Dy:this.MOt};this.rOt&&(s.bE=1),this.sOt=b.lr(b.my.GE,this.$Lt[0].canvas,s),await this.sOt.yM()}async R3t(){if(this.DOt){const t=[];for(const[s,i]of Object.entries(this.DOt)){i.src=i.P3t;const e=b.my.WebGPUShaderProgram.Bx();t.push(this.iOt.CD(Object.assign({uv:e,name:s},i)))}await Promise.all(t)}}async k3t(){if(this.DOt){const s=[];for(const[i,e]of Object.entries(this.DOt)){let t;if(e.F3t&&2<=this.sOt.H2())e.src=e.F3t,t=b.my.ov.Ux();else{if(!e.j3t)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.j3t,t=b.my.ov.Bx()}s.push(this.sOt.CD(Object.assign({uv:t,name:i},e)))}await Promise.all(s),this.sOt._D(),this.sOt.BM()}this.sOt.BA()&&(this.kOt=b.lr(b.my.lE,this.sOt))}async NNt(){this.iOt?await this.R3t():this.sOt&&await this.k3t();const t=this.HS();t.mS(this.fM),t.BA()&&(this.POt=0);for(const s of this.pf.z3t()){for(const i of s.ck())i.NNt(t);s.NNt(t),s.Xz()}this.eOt=new self.fW(this.pf,t)}cr(){this.pf=null,this.sOt=null,this.$Lt.length=0}ZO(){return this.pf.ZO()}M3t(t){const s=this.pf;if(!s.B3t()){const i=t.devicePixelRatio,e=(this.ZO()&&(self.devicePixelRatio=i),s.U3t(i),this.COt=!!t.isFullscreen,this.uOt=t.cssDisplayMode,this.c_(t.innerWidth,t.innerHeight),s.UR(),new b.Event("window-resize")),h=(e.data=t,s.Hf().h0(e),new b.Event("resize"));h.W3t=this.HP(),h.Q3t=this.ZP(),h.J3t=this.KP(),h.V3t=this.t4(),s.Zq(h),s.Bj()&&(s._1t()||self.C3Debugger.IsDebuggerPaused())&&s.DL()}}w3t(t){this.COt=!!t.isFullscreen,this.c_(t.innerWidth,t.innerHeight,!0),this.pf.UR()}S3t(t){this.COt=!!t.isFullscreen,this.c_(t.innerWidth,t.innerHeight,!0),this.pf.UR()}c_(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.oOt!==t||this.aOt!==s||i){this.oOt=t,this.aOt=s;const e=this.Y3t();"letterbox-scale"===e?this.H3t(t,s):"letterbox-integer-scale"===e?this.q3t(t,s):"off"===e?this.Z3t(t,s):this.X3t(t,s),this.K3t(e);for(const{canvas:n}of this.$Lt)n.width=this.fOt,n.height=this.dOt;this.pf.Mf("canvas","update-size",{marginLeft:this.pOt,marginTop:this.mOt,styleWidth:this.lOt,styleHeight:this.cOt,displayScale:this.c6()});const h=this.HS();h.c_(this.fOt,this.dOt,!0);for(const o of this._Ot)h.RA(o);b.Wn(this._Ot),this.$3t();const r=this.pf.gR();r.MZ(),r.wZ()}}$3t(){this.HS().NM(this.xOt,this.FH()/this.jH())}zH(){return this.xOt}H3t(t,s){const i=this.pf.s4(),e=this.pf.KO(),h=this.pf.t3(),r=e/h,n=t/s;if(r<n){const o=s*r;this.lOt=Math.round(o),this.cOt=s,this.pOt=Math.floor((t-this.lOt)/2),this.mOt=0}else{const a=t/r;this.lOt=t,this.cOt=Math.round(a),this.pOt=0,this.mOt=Math.floor((s-this.cOt)/2)}this.fOt=Math.round(this.lOt*i),this.dOt=Math.round(this.cOt*i),this.pf.tRt(e,h)}q3t(t,s){let i=this.pf.s4(),e=(1!==i&&(t+=1,s+=1),this.pf.KO()),h=this.pf.t3(),r=e/h,n=t/s,o;if(r<n){const a=s*r;o=a*i/e}else{const u=t/r;o=u*i/h}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.fOt=Math.round(e*o),this.dOt=Math.round(h*o),this.lOt=this.fOt/i,this.cOt=this.dOt/i,this.pOt=Math.max(Math.floor((t-this.lOt)/2),0),this.mOt=Math.max(Math.floor((s-this.cOt)/2),0),this.pf.tRt(e,h)}X3t(t,s){const i=this.pf.s4(),e=(this.lOt=t,this.cOt=s,this.fOt=Math.round(this.lOt*i),this.dOt=Math.round(this.cOt*i),this.pOt=0,this.mOt=0,this.c6());this.pf.tRt(this.lOt/e,this.cOt/e)}Z3t(t,s){const i=this.pf.s4();this.lOt=this.pf.RY(),this.cOt=this.pf.PY(),this.fOt=Math.round(this.lOt*i),this.dOt=Math.round(this.cOt*i),this.sRt()?(this.pOt=Math.floor((t-this.lOt)/2),this.mOt=Math.floor((s-this.cOt)/2)):(this.pOt=0,this.mOt=0),this.pf.tRt(this.pf.RY(),this.pf.PY())}K3t(i){if("high"===this.GOt)this.tL=this.fOt,this.sL=this.dOt,this.IOt="high";else{let t,s;if(s="off"===this.Y3t()?(t=this.pf.RY(),this.pf.PY()):(t=this.pf.KO(),this.pf.t3()),this.fOt<t||this.dOt<s)this.tL=this.fOt,this.sL=this.dOt,this.IOt="high";else if(this.tL=t,this.sL=s,this.IOt="low","scale-inner"===i){const e=t/s,h=this.oOt/this.aOt;h<e?this.tL=this.sL*h:e<h&&(this.sL=this.tL/h)}else if("scale-outer"===i){const r=t/s,n=this.oOt/this.aOt;r<n?this.tL=this.sL*n:n<r&&(this.sL=this.tL/n)}}}iP(){return this.pf}iRt(){return this.$Lt[0].canvas}p8(){return this.AOt}sRt(){return this.COt}eRt(){return this.uOt}hRt(t){if(!Aa.has(t))throw new Error("invalid fullscreen mode");this.SOt=t;const s=this.pf.gR();s.MZ(),s.wZ()}u6(){return this.SOt}rRt(t){if(!Aa.has(t))throw new Error("invalid fullscreen mode");this.TOt=t;const s=this.pf.gR();s.MZ(),s.wZ()}nRt(){return this.TOt}Y3t(){return this.sRt()?this.nRt():this.u6()}oRt(t){if(!Na.has(t))throw new Error("invalid fullscreen scaling quality");this.GOt=t,this.pf.gR().MZ()}aRt(){return this.GOt}HH(){return this.IOt}static uRt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}ZU(){return this.oOt}XU(){return this.aOt}FH(){return this.tL}jH(){return this.sL}mS(t){this.fM=!!t}lRt(t){this.wOt=t}VJ(){return this.wOt}cRt(){return this.HS().z_()}T3t(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this._Ot=[],this.EOt.clear(),this.AOt.gT(),this.sOt.gT(),this.pf.H9()}C3t(){console.log("[Construct] WebGPU device lost"),this._Ot=[],this.EOt.clear(),this.AOt.gT(),this.pf.H9()}async b3t(t){await this.sOt.yT(),await this.NNt(),await this.pf.fRt(),console.log("[Construct] WebGL context restored")}async E3t(){await this.NNt(),await this.pf.fRt(),console.log("[Construct] WebGPU device restored")}dRt(){return this.sOt}pRt(){return this.iOt}HS(){return this.iOt||this.sOt}BCt(){return this.eOt}WP(){let t="";return t=this.pf.pRt()?"webgpu":"webgl"+this.pf.dRt().H2(),this.pf.HS().MS()&&(t+="-software"),t}VP(){return this.pf.pRt()?this.pf.pRt().GetAdapterInfoString():this.pf.dRt().ZA()}BF(){return"low"===this.IOt?1/this.pf.s4():this.c6()}c6(){const t=this.Y3t();if("off"===t||"crop"===t)return 1;const s=this.pf.KO(),i=this.pf.t3(),e=s/i,h=this.fOt/this.dOt;return"scale-inner"!==t&&e<h||"scale-inner"===t&&h<e?this.cOt/i:this.lOt/s}M7(){return"low"===this.HH()?1:this.c6()}g7(){return"low"===this.HH()?1:this.pf.s4()}mRt(t,s){this.bOt=t,this.vOt=s}KW(s,i,e,t=!0){i=i||this.tL,e=e||this.sL;const h=i/2+this.bOt,r=e/2+this.vOt;if(t){let t=this.zH();i===this.tL&&e===this.sL||(s.NM(Oa,i/e),t=Oa),s.DD(t)}const n=s.PM(h,r,s.wM(e),h,r,0,e);s.PD(n)}gRt(t,s=!0){const i=this.HP(),e=this.ZP(),h=i/2,r=e/2,n=(s&&t.DD(this.zH()),t.PM(h,r,t.wM(e),h,r,0,e));t.PD(n)}KP(){return this.fOt}t4(){return this.dOt}HP(){return this.lOt}ZP(){return this.cOt}NF(){return this.pOt}LF(){return this.mOt}A9(){return this.$Lt.length}yRt(){return"undefined"!=typeof OffscreenCanvas&&this.iRt()instanceof OffscreenCanvas&&("Chromium"!==b.li.yi||124<=b.li.gi)}async tq(e,h=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.$Lt.length!==e){let t=this.pf.gR().dR(),s={count:e,layersDomState:t.cY().filter(t=>t.rF()).map(t=>t.pH()),immediate:h,marginLeft:this.pOt,marginTop:this.mOt,styleWidth:this.lOt,styleHeight:this.cOt},i;if(i=this.ZO()?await this.pf.QR("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.$Lt.length)this.$Lt.length=e;else for(const r of i.addedCanvases){r.width=this.fOt,r.height=this.dOt;const n=this.yRt()?"bitmaprenderer":"2d",o=r.getContext(n);if(!o)throw new Error(`failed to acquire '${n}' canvas context`);this.$Lt.push({canvas:r,y3t:o})}this.pf.UR()}}Yq(t){if(!(t>=this.$Lt.length)){const s=this.iRt(),i=this.$Lt[t].y3t;this.yRt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}qH(s){s.depth=this.pf.JY();let t=this._Ot,i=t.findIndex(t=>t.$b(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.HS().DA(s),this.EOt.add(e),e}g8(t){if(!this.EOt.has(t))throw new Error("render target not in use");this.EOt.delete(t),this._Ot.push(t)}NOt(){const t={_2:this.pf.s3()};return"low"===this.HH()&&(t.width=this.FH(),t.height=this.jH()),this.qH(t)}LOt(t){this.g8(t)}*MRt(){for(const t of this.pf.gR().mZ())for(const s of t.Ik()){const i=this.FOt.get(s);i&&(yield i)}}QH(t){if(!this.HS().BA())return null;let s=this.FOt.get(t);return s||(s={o5:t,name:t.hf(),wRt:b.lr(b.my.lE,this.sOt),SRt:0,TRt:0,bRt:0},this.FOt.set(t,s)),s.wRt}vRt(){const t=this.HS();if(t.BA()&&0===this.ROt){this.ROt=t.dS(),this.jOt=NaN;for(const s of this.MRt())s.SRt=NaN}}xRt(){this.sOt&&this.sOt.BA()&&this.GRt(),this.iOt&&this.iOt.BA()&&this.IRt()}GRt(){if(isNaN(this.jOt)&&(this.jOt=this.kOt.yE(this.OOt,this.ROt),!isNaN(this.jOt))){if(this.pf.Bj())for(const t of this.MRt())if(t.SRt=t.wRt.yE(this.OOt,this.ROt),isNaN(t.SRt))return;if(this.kOt.ME(this.ROt),this.POt=Math.min(this.jOt,1),this.pf.Bj()){const i=new Map;for(const h of this.MRt())h.wRt.ME(this.ROt),h.TRt=Math.min(h.SRt,1),i.set(h.o5,h.TRt);for(const r of this.MRt()){const n=r.o5,o=i.get(n)||0,a=o-n.qk().reduce((t,s)=>t+(i.get(s)||0),0);r.bRt=b.Sr(a,0,1)}const s=this.pf.dR(),e=this.POt-s.cY().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(b.Sr(e,0,1),this.POt,[...this.MRt()])}this.OOt=this.ROt,this.ROt=0}}CRt(){return this.kOt}IRt(){if(0!==this.ROt){for(let t=this.OOt;t<this.ROt;++t){const i=this.zOt.get(t);if(i&&!i.K_())return}let t=this.pf.dR(),n=b.Yo(t.G9()+1,0),s=0;for(let t=this.OOt;t<this.ROt;++t){const o=this.zOt.get(t);if(o){let i=o.tE(),e=BigInt(0),h=BigInt(0),r=BigInt(0);for(let t=0,s=Math.min(n.length,i.length/2);t<s;++t){const l=i[2*t],c=i[2*t+1],f=(l!==r&&(e===r||l<e)&&(e=l),c>h&&(h=c),c-l),d=Number(f)/1e9;n[t]+=d}const a=h-e,u=Number(a)/1e9;s+=u}}if(this.POt=b.Sr(s,0,1),this.pf.Bj()){const e=t.Ik(),h=new Map;for(let t=0,s=Math.min(e.length,n.length-1);t<s;++t){const g=n[t+1];h.set(e[t],g)}const r=[],p=new Map;for(const[y,M]of h){const w=[...y.Xk()].reduce((t,s)=>t+(h.get(s)||0),0);p.set(y,w),r.push({name:y.hf(),bRt:b.Sr(M,0,1),TRt:b.Sr(w,0,1)})}const m=this.POt-t.cY().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(b.Sr(m,0,1),this.POt,r)}for(let t=this.OOt;t<this.ROt;++t)this.zOt.delete(t);this.OOt=this.ROt,this.ROt=0}}_Rt(t){this.zOt.set(this.iOt.dS(),t)}X3(){return this.POt}ERt(t,s,i,e,h,r){return this.BOt=t,this.UOt=s,this.WOt.Mu(i,e,h,r),this.JOt||(this.JOt=new Promise(t=>{this.VOt=t})),this.JOt}DRt(){if(this.BOt){let t=this.iRt(),s=this.WOt,i=b.Sr(Math.floor(s.Iu()),0,t.width),e=b.Sr(Math.floor(s.Cu()),0,t.height),h=s.width(),r=(h=0===h?t.width-i:b.Sr(Math.floor(h),0,t.width-i),s.height());if(r=0===r?t.height-e:b.Sr(Math.floor(r),0,t.height-e),(0!==i||0!==e||h!==t.width||r!==t.height)&&0<h&&0<r){const n=b.Po(h,r),o=n.getContext("2d");o.drawImage(t,i,e,h,r,0,0,h,r),t=n}b.ko(t,this.BOt,this.UOt).then(t=>{this.QOt&&URL.revokeObjectURL(this.QOt),this.QOt=URL.createObjectURL(t),this.JOt=null,this.VOt(this.QOt)}),this.BOt="",this.UOt=1}}ARt(){return this.QOt}NRt(t){t?this.YOt++:this.YOt--}LRt(){return 0<this.YOt}ORt(t){const s=this.HS();if(2===t)this.KOt=b.lr(b.my.GS,this.HS()),this.KOt.BC("Arial"),this.KOt.UC(16),this.KOt.i_("center"),this.KOt.h_("center"),this.KOt.c_(300,200);else if(0===t){const i=this.pf.RRt();i&&i.QW(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.PRt("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSIxNzAwLjc5MDA0cHgiIGhlaWdodD0iMTcwMC43OTAwNHB4IiB2aWV3Qm94PSIyODcgMzE3IDExMjUgMTEyNSINCgkgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTcwMC43OTAwNCAxNzAwLjc5MDA0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJsb2dvIj4NCgk8Zz4NCgkJPGc+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTM1NC45Nzc1NCwxMTk1LjYyMzA1DQoJCQkJYzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NjI5LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOGwtNC45MzI2Miw4LjU0MTk5DQoJCQkJYy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNjU2LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMzMiwwLDUuOTYxOTEtMC40NDMzNiw4LjcyNjU2LTEuMjY4NTVjNi4yOTQ5Mi0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTczOCw2LjUwMDk4bDQuOTMxNjQsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM4NDgsNS43MzQzOGMtOS4wMDM5MSw1LjYwMTU2LTE5LjYzMTg0LDguODM3ODktMzEuMDE2Niw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzI5Ni4xNTgyLDEyMjEuOTU3MDMsMzIyLjQ5MjE5LDExOTUuNjIzMDUsMzU0Ljk3NzU0LDExOTUuNjIzMDUNCgkJCQlMMzU0Ljk3NzU0LDExOTUuNjIzMDV6IE03MDMuMjE0ODQsMTI1OS4xNzU3OGMtMTQuNTU5NTctOS44MTczOC0yMC4yMDMxMy0yMC4wMzIyMy0yMC4yMDMxMy0zMy4wODAwOA0KCQkJCWMwLTE4LjQ4OTI2LDE1LjcxNDg0LTI5Ljc2MzY3LDM4LjI2NjYtMjkuNzYzNjdjOS42NTcyMywwLDE4LjcyMTY4LDIuNTQyOTcsMjYuNTU5NTcsNi45OTQxNA0KCQkJCWMyLjA0OTgsMS4xNjQwNiwyLjc2MTcyLDMuNzgzMiwxLjU4MzAxLDUuODI0MjJsLTMuNDE3OTcsNS45MTk5MmMtMy4yNDcwNyw1LjYyNDAyLTkuOTA4Miw4LjMzMTA1LTE2LjE1MzMyLDYuNTQ4ODMNCgkJCQljLTIuNzIzNjMtMC43NzYzNy01LjU5ODYzLTEuMTkyMzgtOC41NzEyOS0xLjE5MjM4Yy0xMC40OTAyMywwLTExLjU5ODYzLDkuNTc2MTctNC44NTc0MiwxNC4xMjMwNWwyMy42ODY1MiwxNS45NzY1Ng0KCQkJCWM5Ljk5MDIzLDYuNzM4MjgsMTUuODk1NTEsMTcuMDY2NDEsMTUuODk1NTEsMjguNzE4NzVjMCwxOC43ODYxMy0xNS4wMDY4NCwzMy4zMDc2Mi0zOC4yNjc1OCwzMy4zMDc2Mg0KCQkJCWMtOS41MjI0NiwwLTE4LjU4Nzg5LTEuOTU3MDMtMjYuODE1NDMtNS40OTAyM2MtNy43ODEyNS0zLjMzOTg0LTEwLjkzMzU5LTEyLjc4MjIzLTYuNjk3MjctMjAuMTE4MTZsMy40ODczLTYuMDQxOTkNCgkJCQljMS4yMTM4Ny0yLjA5OTYxLDMuOTMxNjQtMi43NTk3Nyw1Ljk3NDYxLTEuNDU2MDVjNi44NTkzOCw0LjM4MjgxLDE2LjQ5MDIzLDcuNTk0NzMsMjQuNzU4NzksNy41OTQ3Mw0KCQkJCWMxMC41NDU5LDAsMTEuMzI4MTMtOS45NTg5OCwzLjc2NzU4LTE1LjA1NzYyTDcwMy4yMTQ4NCwxMjU5LjE3NTc4TDcwMy4yMTQ4NCwxMjU5LjE3NTc4eiBNOTg0LjYzMDg2LDEyMDIuMDAwOTgNCgkJCQljMC0yLjM0NzY2LDEuOTAzMzItNC4yNTE5NSw0LjI1MTk1LTQuMjUxOTVoOS45MjE4OGM3LjgyNzE1LDAsMTQuMTcyODUsNi4zNDU3LDE0LjE3Mjg1LDE0LjE3MzgzdjU3LjQwMTM3DQoJCQkJYzAsOC42MTAzNSw2Ljk4MDQ3LDE1LjU5MDgyLDE1LjU5MDgyLDE1LjU5MDgyczE1LjU5MDgyLTYuOTgwNDcsMTUuNTkwODItMTUuNTkwODJ2LTU3LjQwMTM3DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoOS45MjA5YzIuMzQ4NjMsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2NjcuMzIzMjQNCgkJCQljMCwyNC4yNjU2My0xOS42NzA5LDQzLjkzNzUtNDMuOTM2NTIsNDMuOTM3NXMtNDMuOTM3NS0xOS42NzE4OC00My45Mzc1LTQzLjkzNzVWMTIwMi4wMDA5OEw5ODQuNjMwODYsMTIwMi4wMDA5OHoNCgkJCQkgTTQ2Ni44NjkxNCwxMTk1LjYyMzA1YzMyLjQ4NDM4LDAsNTguODE4MzYsMjYuMzMzOTgsNTguODE4MzYsNTguODE5MzRjMCwzMi40ODQzOC0yNi4zMzM5OCw1OC44MTkzNC01OC44MTgzNiw1OC44MTkzNA0KCQkJCWMtMzIuNDg2MzMsMC01OC44MTkzNC0yNi4zMzQ5Ni01OC44MTkzNC01OC44MTkzNEM0MDguMDQ5OCwxMjIxLjk1NzAzLDQzNC4zODI4MSwxMTk1LjYyMzA1LDQ2Ni44NjkxNCwxMTk1LjYyMzA1DQoJCQkJTDQ2Ni44NjkxNCwxMTk1LjYyMzA1eiBNNDY2Ljg2OTE0LDEyMjUuMDMzMmMtMTYuMjQzMTYsMC0yOS40MTAxNiwxMy4xNjY5OS0yOS40MTAxNiwyOS40MDkxOA0KCQkJCXMxMy4xNjY5OSwyOS40MDgyLDI5LjQxMDE2LDI5LjQwODJjMTYuMjQxMjEsMCwyOS40MDgyLTEzLjE2NjAyLDI5LjQwODItMjkuNDA4MlM0ODMuMTEwMzUsMTIyNS4wMzMyLDQ2Ni44NjkxNCwxMjI1LjAzMzINCgkJCQlMNDY2Ljg2OTE0LDEyMjUuMDMzMnogTTU1Ni43MzI0MiwxMzExLjEzNDc3Yy0yLjM0NzY2LDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtOTQuOTYxOTENCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzM4My0xNC4xNzM4M2gzLjk1ODk4YzQuNjI1LDAsOC45NTg5OCwyLjI1Njg0LDExLjYxMTMzLDYuMDQ1OWw0MS4xMjIwNyw1OC43NDcwN3YtNTAuNjE5MTQNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2g5LjkyMTg4YzIuMzQ3NjYsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2OTQuOTYwOTQNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3MzgzLDE0LjE3Mjg1aC0zLjk1ODk4Yy00LjYyNSwwLTguOTU4OTgtMi4yNTU4Ni0xMS42MTEzMy02LjA0NDkybC00MS4xMjIwNy01OC43NDYwOXY1MC42MTgxNg0KCQkJCWMwLDcuODI5MS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVINTU2LjczMjQyTDU1Ni43MzI0MiwxMzExLjEzNDc3eiBNMTIxNS4wMjA1MSwxMjExLjkyMjg1DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoNTAuMzE1NDNjMi4zNDg2MywwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyDQoJCQkJYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVoLTYuMDI0NDF2NzUuMTE4MTZjMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMTg4DQoJCQkJYy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtODUuMDQxMDJoLTE1Ljk0NDM0Yy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMzMyLTQuMjUxOTUtNC4yNTE5NVYxMjExLjkyMjg1DQoJCQkJTDEyMTUuMDIwNTEsMTIxMS45MjI4NXogTTc3Ni40NDkyMiwxMjExLjkyMjg1YzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTczODMtMTQuMTczODNoNTAuMzE0NDUNCgkJCQljMi4zNDk2MSwwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcxODgsMTQuMTcyODVoLTYuMDI1Mzl2NzUuMTE4MTYNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMDljLTIuMzQ5NjEsMC00LjI1MTk1LTEuOTAyMzQtNC4yNTE5NS00LjI1di04NS4wNDEwMmgtMTUuOTQ1MzENCgkJCQljLTIuMzQ3NjYsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMTEuOTIyODVMNzc2LjQ0OTIyLDEyMTEuOTIyODV6IE05MjkuNjA0NDksMTI3Mi4wMjI0NmwyNi45NTgwMSwzMi4xMjc5Mw0KCQkJCWMyLjMxNDQ1LDIuNzU3ODEsMC4zNDM3NSw2Ljk4NDM4LTMuMjU2ODQsNi45ODQzOGgtMTkuNzA1MDhjLTQuMTg5NDUsMC04LjE2NTA0LTEuODUxNTYtMTAuODU3NDItNS4wNjA1NWwtMjIuNjgxNjQtMjcuMDMxMjUNCgkJCQl2MjcuODQxOGMwLDIuMzQ3NjYtMS45MDMzMiw0LjI1LTQuMjUxOTUsNC4yNWgtOS45MjA5Yy03LjgyNzE1LDAtMTQuMTcyODUtNi4zNDM3NS0xNC4xNzI4NS0xNC4xNzI4NXYtODUuMDM5MDYNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2gyOS43NjM2N2MyMi43MDAyLDAsNDEuMTAyNTQsMTcuMTMzNzksNDEuMTAyNTQsMzguMjY4NTUNCgkJCQlDOTU2Ljc1NDg4LDEyNTIuNTkwODIsOTQ1LjQzNjUyLDEyNjYuNzAyMTUsOTI5LjYwNDQ5LDEyNzIuMDIyNDZMOTI5LjYwNDQ5LDEyNzIuMDIyNDZ6IE05MDAuMDYxNTIsMTIyMS44NDM3NXYzMi41OTg2M2g4LjUwMzkxDQoJCQkJYzEwLjk1ODk4LDAsMTkuODQyNzctNy4yOTc4NSwxOS44NDI3Ny0xNi4yOTg4M2MwLTkuMDAxOTUtOC44ODM3OS0xNi4yOTk4LTE5Ljg0Mjc3LTE2LjI5OThIOTAwLjA2MTUyTDkwMC4wNjE1MiwxMjIxLjg0Mzc1eg0KCQkJCSBNMTE1OC4zNTkzOCwxMTk1LjYyMzA1YzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NzI3LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOA0KCQkJCWwtNC45MzI2Miw4LjU0MTk5Yy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNTU5LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMyMjMsMCw1Ljk2MDk0LTAuNDQzMzYsOC43MjU1OS0xLjI2ODU1YzYuMjk1OS0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTgzNiw2LjUwMDk4bDQuOTMwNjYsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM3NSw1LjczNDM4Yy05LjAwNDg4LDUuNjAxNTYtMTkuNjMyODEsOC44Mzc4OS0zMS4wMTc1OCw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzEwOTkuNTQwMDQsMTIyMS45NTcwMywxMTI1Ljg3NDAyLDExOTUuNjIzMDUsMTE1OC4zNTkzOCwxMTk1LjYyMzA1eiIvPg0KCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMwMEZGREEiIGQ9Ik0xMzE4LjE5NzI3LDEyMDYuMDMyMjMNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2MyMC42NTYyNSwwLDQxLjMxMjUsMCw2MS45Njg3NSwwYzMuNDI5NjksMCw1LjQ1MDIsMy44ODA4NiwzLjQ4MzQsNi42OTA0Mw0KCQkJCWwtMTkuMjk2ODgsMjcuNTY3MzhjMTUuNTQyOTcsOC4zNzU5OCwyNi4xMDY0NSwyNC44MDA3OCwyNi4xMDY0NSw0My42OTUzMWMwLDI3LjM5NzQ2LTIyLjIwODk4LDQ5LjYwNjQ1LTQ5LjYwNjQ1LDQ5LjYwNjQ1DQoJCQkJYy0xNi42ODg0OCwwLTMxLjQ1MTE3LTguMjQwMjMtNDAuNDQzMzYtMjAuODc1OThjLTEuNDUwMi0yLjAzOTA2LTAuODMxMDUtNC44OTk0MSwxLjMzNTk0LTYuMTUyMzRsMTAuOTc3NTQtNi4zMzc4OQ0KCQkJCWM0Ljg4MTg0LTIuODE4MzYsMTAuOTc5NDktMi40NzU1OSwxNS41MTQ2NSwwLjg3MzA1YzMuNTI4MzIsMi42MDU0Nyw3Ljg5MTYsNC4xNDY0OCwxMi42MTUyMyw0LjE0NjQ4DQoJCQkJYzExLjc0MjE5LDAsMjEuMjU5NzctOS41MTg1NSwyMS4yNTk3Ny0yMS4yNTk3N3MtOS41MTc1OC0yMS4yNTk3Ny0yMS4yNTk3Ny0yMS4yNTk3N2gtMTUuMjE3NzcNCgkJCQljLTMuNDI5NjksMC01LjQ1MDItMy44ODA4Ni0zLjQ4NDM4LTYuNjkwNDNsMTguMTM1NzQtMjUuOTA4MmgtMzIuMDA5NzdjLTIuMzQ4NjMsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMDYuMDMyMjN6DQoJCQkJIi8+DQoJCTwvZz4NCgkJPGc+DQoJCQk8Zz4NCgkJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0RBRThGNyIgZD0iTTg1MC4zOTU1MSw4NTcuNTkxOA0KCQkJCQljLTUwLjM1NjQ1LDAtOTQuMzI1Mi0yNy4zNTY0NS0xMTcuODUyNTQtNjguMDIwNTFsLTgwLjAzMDI3LDQ2LjIwNDFjLTQuNjU1MjcsMi42ODk0NS02LjEzMTg0LDguNzE4NzUtMy4yNDkwMiwxMy4yNTU4Ng0KCQkJCQljNDIuMjM3Myw2Ni40ODYzMywxMTYuNTMzMiwxMTAuNjA3NDIsMjAxLjEzMTg0LDExMC42MDc0MmM4OC4xMjU5OCwwLDE2NS4wNzEyOS00Ny44NzUsMjA2LjI0MzE2LTExOS4wMzYxM2wtODAuNDg3My00Ni40Njk3Mw0KCQkJCQljLTQuMzEzNDgtMi40OTAyMy05LjgwMTc2LTEuMjA1MDgtMTIuNTcwMzEsMi45MzU1NUM5MzkuMTc1NzgsODMzLjU2MjUsODk3LjU5MTgsODU3LjU5MTgsODUwLjM5NTUxLDg1Ny41OTE4DQoJCQkJCUw4NTAuMzk1NTEsODU3LjU5MTh6IE0xMTM2LjcyMTY4LDU1Ni4yMTc3N2M0LjYxNDI2LTIuNjYzMDksNi4xMTAzNS04LjYxOTE0LDMuMzEyNS0xMy4xNTEzNw0KCQkJCQljLTU5LjkxNTA0LTk3LjAzMDI3LTE2Ny4yMjQ2MS0xNjEuNjk0MzQtMjg5LjYzODY3LTE2MS42OTQzNGMtMTI1Ljg5MzU1LDAtMjM1LjgxMzQ4LDY4LjM5MjU4LTI5NC42MzM3OSwxNzAuMDQ5OA0KCQkJCQlsODAuMzc2OTUsNDYuNDA2MjVjNC4zOTc0NiwyLjUzOTA2LDEwLjAwMTk1LDEuMTQ5NDEsMTIuNzEwOTQtMy4xNDU1MQ0KCQkJCQljNDIuMTY0MDYtNjYuODUxNTYsMTE2LjY2ODk1LTExMS4yNjM2NywyMDEuNTQ1OS0xMTEuMjYzNjdjODguMTI1OTgsMCwxNjUuMDcxMjksNDcuODc1OTgsMjA2LjI0MzE2LDExOS4wMzYxMw0KCQkJCQlMMTEzNi43MjE2OCw1NTYuMjE3Nzd6Ii8+DQoJCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNBNUJBQzgiIGQ9Ik04NTAuMzk1NTEsOTU5LjYzODY3DQoJCQkJCWMtODQuNTk4NjMsMC0xNTguODk0NTMtNDQuMTIxMDktMjAxLjEzMTg0LTExMC42MDc0MmMtMi44NzY5NS00LjUzMDI3LTEuMzk5NDEtMTAuNTcwMzEsMy4yNDkwMi0xMy4yNTU4Nmw4MC4wMzAyNy00Ni4yMDQxDQoJCQkJCWMtMTEuNTgxMDUtMjAuMDE2Ni0xOC4yMDk5Ni00My4yNTQ4OC0xOC4yMDk5Ni02OC4wNDE5OWMwLTc0Ljc4NTE2LDYwLjU1NzYyLTEzNi4wNjI1LDEzNi4wNjI1LTEzNi4wNjI1DQoJCQkJCWM0Ny4xOTYyOSwwLDg4Ljc4MDI3LDI0LjAyOTMsMTEzLjE4NTU1LDYwLjUyMjQ2YzIuNzY0NjUsNC4xMzM3OSw4LjI2MzY3LDUuNDIxODgsMTIuNTcwMzEsMi45MzU1NWw4MC40ODczLTQ2LjQ2OTczDQoJCQkJCWMtNDEuMTcxODgtNzEuMTYwMTYtMTE4LjExNzE5LTExOS4wMzYxMy0yMDYuMjQzMTYtMTE5LjAzNjEzYy04NC44NzY5NSwwLTE1OS4zODE4NCw0NC40MTIxMS0yMDEuNTQ1OSwxMTEuMjYzNjcNCgkJCQkJYy0yLjcwNjA1LDQuMjkxMDItOC4zMTgzNiw1LjY4MTY0LTEyLjcxMDk0LDMuMTQ1NTFsLTgwLjM3Njk1LTQ2LjQwNjI1DQoJCQkJCWMtMjguOTUyMTUsNTAuMDQwMDQtNDUuNTIzNDQsMTA4LjEzOTY1LTQ1LjUyMzQ0LDE3MC4xMDc0MmMwLDE4Ni45NjM4NywxNTEuMzk0NTMsMzQwLjE1NzIzLDM0MC4xNTcyMywzNDAuMTU3MjMNCgkJCQkJYzEyMi40MTQwNiwwLDIyOS43MjM2My02NC42NjQwNiwyODkuNjM4NjctMTYxLjY5NTMxYzIuNzk0OTItNC41MjYzNywxLjI5NDkyLTEwLjQ5MDIzLTMuMzEyNS0xMy4xNTEzN2wtODAuMDgzMDEtNDYuMjM3Mw0KCQkJCQlDMTAxNS40NjY4LDkxMS43NjM2Nyw5MzguNTIxNDgsOTU5LjYzODY3LDg1MC4zOTU1MSw5NTkuNjM4Njd6Ii8+DQoJCQk8L2c+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzAwRkZEQSIgZD0iTTExMzcuMTg1NTUsNzU4LjExMzI4di03My4xNjc5N2wtNjMuMzY1MjMsMzYuNTgzOTgNCgkJCQlMMTEzNy4xODU1NSw3NTguMTEzMjhMMTEzNy4xODU1NSw3NTguMTEzMjh6IE0xMDI2LjU3NjE3LDcwNS4xNjQwNmwxMjAuMDU4NTktNjkuMzE2NDENCgkJCQljMTIuNTY4MzYtNy4yNTU4NiwyOC4zNDQ3MywxLjg1MjU0LDI4LjM0NTcsMTYuMzY2MjF2MTM4LjYzMDg2Yy0wLjAwMDk4LDE0LjUxMjctMTUuNzc3MzQsMjMuNjIyMDctMjguMzQ1NywxNi4zNjYyMQ0KCQkJCWwtMTIwLjA1ODU5LTY5LjMxNjQxQzEwMTQuMDI4MzIsNzMwLjY0OTQxLDEwMTQuMDI4MzIsNzEyLjQwOTE4LDEwMjYuNTc2MTcsNzA1LjE2NDA2eiIvPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=").then(t=>{"done"===this.n3t?s.Fb(t):this.$Ot.t3t=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.kRt("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAmd137hFVqjO7zCKIRGZ881JRAAAFY0lEQVR42u2aPW/bVhSGn1iiPizZ8D+QgSJBNglFmiboQA0NUKAD1XotYA0BOspAkZnqx24vnTrIQNCpg4QkQMcYKDoW9j9w5y6qLNqWFDlvh3tJUa6ddHBhAuS7SKBIQffhuee851CQKVOmTJkyZcqUKXmqa8O+uyNlABKsFRmdP0o5AOle2gHoWdoBzFrpBHACwPeetJNmAFSlt6kGwGH0LqUAVqRuqgHkpEaqAVRkfvOWr+Dh9Rc4j6VvwnrhPNAbgK2ezj+yx7Z6GjUuASi4Ch4lHQAGwBeRK1rROQAdUx5K0hE4NUkaAdS02ZEuoms2wkCSgvYSgFJfkn6CobkSPG0mEcAOrHnGFOxAToHNjk/MygLgO/PxL0BN9yRdQKlufMQAoCdJGi8BOJYknXTJ269cu9HtdqNb4Ni6oimUbFb0dAZQ1DmULJ+TFtT0qQHwg73mLlCMfFUMQPR5VWrbmttNHICC1KDiSZ+w3pMOwFPDhP4IYFtv4ZX0nIorbUBNmjWAiqdZg5fmNFd6jvPhJQDjAV9LI0r28IpmycsBZalNWfoRWJcuoKY9c7cCkwpOwdcIqNT1BmrSgQkNbQAvpAGOF+aHOIBpCxhKR/TVBNjVOHkAOgrg2N6aoU7sklmVidtD7bNm/fIrjaBmk+Sxea142iBnTyguAfjZZscNXLOdXFM8EgVgXRpDz/6yonTEts6AXdV1APTVoKigFSXEmj3XN0kSV01WFQwAHC8O4Mhagye8NgHS137SALzsS3dxwhtXkQ4oaw64eqomOFKXbc2xJbFLTX8DOHYnsKsJu2Gdu8IIuTqjrMB8eyM5ACIFXQo2S5t7lNMM6AdFTaCgADqahHW8EQIohBk9rzEdE+JXAtjVmHWpDTmplUAA96Ea/bJDnVKSWjgaFTSHqubgmjVDXQchgFy4wBXNcXV6LYC8RjbEypomcCAyBopRShxqAn21yenM8WawqjOoKVbmLYBFndeImsnyVwJY1RR8NW1FTRiA6UNTCsP6fKwLONQBZTXx1WVbT0KbtwygvAxg81oAZU0xe2QYxkmyrDDx2DzWBXTUZFs7dNQwHUEMwN4VAKb47wOQ1wj8Gx0+/Y8A8powVJtt7XOoxn8A8N4IqCrA8cJUmzgAl3JAUWN8tSjqDX0NwI/XbwugGLe178oBK7bBaBesm0gggOUqwLrOHe8c1jV2NAMOw/XFAFRth2dr/burANS1cSc0C8kDsB7zAZvgKCjoLTiaFqwpmvwLQC7e2b3PB4CrZj48KXkAKktOEPr6VqeAr680udzEWACluK0LreJ1ThBe6+w4HkfJAhD1AtbAu3qgPcDVX2oCK9bqxwFQ1+fRsVW7va/uBZpAWaND652TCGBoM1rHHN6VmQlsq6cdE+4mC75oLAC49prKB1zTDd6NukHIKahbIkkEsGrmAQWZbZqXNLClrg04dTP4KnjnCwBfmgkZT7WD45k94C8BmA3MPGBgeqcbfQBxwwDsRMi3N7Iqc3dzsuVhV5ofkevpJOoGKUn6Ax5L92F49USoayZCls08uQDiM0ETCWPb8k7DMmH02SICGC7ayVhnsABwEpsZQkfxUpI4ALGpsFn4xCbHcVjnwgnvAkBh0U6CbzqrXgzA1E6FB9YOJGcacgUAfl36t0Ro/SIDUDEL/D1WBcJr5q0oRoJ2LQZgZJ4LPIu2RCPJAJafDLm2Yr2OHmQ4H0vzBksA2PKl38L3fY0aLAFYejK0ZpJhelVKzkj8dlRNzkj8dpRP0DTkVjTUXroB9PVnqtefS9I05BZU8NOdAyUl5q8RtwUg6KYcwP1Up8CanpMpU6ZMmTLdgP4BRYsi23xEdOAAAAAASUVORK5CYII=").then(t=>{"done"===this.n3t?s.Fb(t):this.$Ot.s3t=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.kRt("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAdxHdu4hmVZnuRMwzqiLYE4y2AAAFw0lEQVR42u2Yy+9LQRTHp6Xq0VIkXkFvwkYslAWJiGJj2a6sJJe/oF3YWGElEQmxkYi4ErFWNpatWFmIx9Lm1sJCLKgqraqv82h726l6hOuRzDf53TtnOr+ZOZ+ZOffca5ycnJycnJycnJycnJycnJz+pi7g2G9osxjvzX8qB8ABcAAcgH8XwDa85dspNOiaRDuAR4U0PnHtDuyy7IJRJS6gvVmL6TywVkp4ZxIhulUxFvlaXQTrgEHbnMDH5XRjlXCdb+uAnc2ojWgFFTYBZ8e9tzcaswAk6v/3K4sPfPNRFj87IXj+KXQUS9m2jXoH1lMuLq2DtEcAtNMBT9PjanFq7ySAhbABVEAaeDaAwkk2D7GRqctAMQJIq2sBauLnB/VxCfqKpWrbRhSC1W5SMQ9RTgBUwKpF1ccmAIQ2gCxE+20Au9nSESvDgeIDkJSBMpA9vgyXdsj0H0GORL3n2fbwPOKoSQS4Q2cBOGzSJbQYAHDbZEI+rEuBcyZRlF71fIP/x0wBuIBOw6xH3xu2GQFAP2cegmvSwHkeqBZjECzB46UXD3bg8UKJCT6QYzgDY9uiU7hC11doERq6MAZ2CPJ7ipEulOrteDcB4KOZBpBG7zrV1JGzATzmIdnrl/go3bRiBJBHlZc+6ItjuQQ+yFLz8Gka2LZFRVTFGdoQJQ0LPodHnXkS8AjlRWkBLwKQswAs0PDzGpcsAAMNuG+5WgdqxwjgEcp8qcBjN5oZdPhEvOfhU/hsbJuVloWV6WWgp2IBLxXQNEwLDfKqoMXrEQBjATiFA3qePlgAZJRl+EStdaAQjfgALOC1zfeX8ALV+7S69JdALWjxHGqztmxyMnTD6OOBWvAdGDkn60c6vrI5H4CPnOJsWQDe8G0hIU0MB8ojFx+AFAeqeitLy5FkL3w0yNNcSOx3oDxjjxaH9XxldZluY5NBfwrAQvQbRjQXAO8UqVq5dh6A7HCgWzgdFwBdgOX4lMZbTndkWWkDN07Bk+zItllLdHm1+FkLwBSADNDf8B0AnGOp5gFYgJEexwcgGQx4iyeD9ybFkWsbDZbv0+2Y8XvGtqMpWsUimpMAzA1AUrj5ALjm2wCoONKB+ACYsEeDlU04MMs4imeJQqljslSuD4xl/zgAsx6ku/8DgDwaO9AwFU56qhzOPiXpKCzCpSSdb8v+CQDmXshb99cARAPFCOA1chWaFXlP55yn2FqEgiFvOSzYtmiJzisKB7MxQPS8iO63YsD3AHDv8QPgjR92eKuf9vts1wdZjvZhN4XajD35FNDiR7ln0LYBaILY+OZT4DsA+BkTP4AUrgXkxSJcDFps+72X7EGlx6mBbU/lAbdQjvKA7hSAlSuHxdw0gORsHrAUnXkAUuj+AQAZdHGRp9bShX2ECz1JRSk4zNhRJqj5SZQJfpgCUNS2eRsAP/usTDAxPxFKA834AZgAOM1z6qGgxxpdmUDQNjP25LtAsojxu0AehSkAF6RLXWR/EkAdVYEevQtswVtpMwuAB1JGh2jbxQcgBKrig/qSxTD6o2Nm7fttSY6uUnErV+jb4CJyaArAI5luJkCDOy5HAPISSB5A3wYbhJERahvtPALAAw2EI9Vzsh2TTuk23qEceN9d4vVVv227hNroe0CRi/o9IKTZTQFIAc/M8jwGEiouG2/042u8u25uAuPvAavRH7XhzqcBpICdRpssRa+aNLFoh2JeyBzU08fih/ht20WZXghW34s+/ZQnAKhzojsSH4CC/sjARPKamLXacOfTAIwfNSkCbROLluG9Tm2gdl3PY178tu2SBIpFQ6fHH//2GAvAogCkjtGDEAFQYPsu6DdBqw11bgFIF8dNHsQGIEFRSDOe0RS9YYJk23JMrw+/Cr9bFX0VXmNsACbhA088qXhBrMYAlq8Gjhh//FX4YNSGO7cASO9n9B99AuHk5OTk5OTk5OTk5OTk5OTk5OT0VX0B7+fX+9cwWYYAAAAASUVORK5CYII=").then(t=>{"done"===this.n3t?s.Fb(t):this.$Ot.i3t=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async PRt(t){t=new URL(t,this.pf.FRt()).toString();const s=await b.Eo(t),i=await this.pf.jRt(s,2048,2048);return this.HS().EA(i,{N2:"high"})}async kRt(t){t=new URL(t,this.pf.FRt()).toString();const s=await b.Eo(t);return this.HS().EA(s,{N2:"high"})}zRt(){this.pf.Mf("runtime","hide-cordova-splash")}BRt(){this.HOt=Date.now(),this.pf.Hf().addEventListener("loadingprogress",this.XOt),this.qOt=requestAnimationFrame(()=>this.URt());const t=this.pf.WRt();3!==t&&this.zRt()}async QRt(){const t=this.HS(),s=(this.ZOt=1,this.pf.WRt());4===s&&await this.a3t,this.o3t=null,this.a3t=null,-1!==this.qOt&&(cancelAnimationFrame(this.qOt),this.qOt=-1),this.pf.Hf().removeEventListener("loadingprogress",this.XOt),this.XOt=null,this.KOt&&(this.KOt.cr(),this.KOt=null),this.pf.JRt(),t.wA(),this.$Ot.t3t&&(t.Fb(this.$Ot.t3t),this.$Ot.t3t=null),this.$Ot.s3t&&(t.Fb(this.$Ot.s3t),this.$Ot.s3t=null),this.$Ot.i3t&&(t.Fb(this.$Ot.i3t),this.$Ot.i3t=null),t.MA(0,0,0,0),t.cS(),this.n3t="done",this.OOt=t.dS(),3===s&&this.zRt()}URt(){if(-1!==this.qOt){const t=this.HS(),s=(t.wA(),this.qOt=-1,this.pf.kO().yJ()),i=this.pf.WRt();if(3!==i&&(this.gRt(t),t.MA(0,0,0,0),t.QD(),t.BM(),t.VD(null)),0===i)this.VRt(s);else if(1===i)this.YRt(s,120,0);else if(2===i)this.HRt(s);else if(3===i)b.jn();else{if(4!==i)throw new Error("invalid loader style");this.qRt(s)}t.cS(),this.qOt=requestAnimationFrame(()=>this.URt())}}HRt(t){t?this.KOt.s_(1,0,0):this.KOt.s_(.6,.6,.6),this.KOt.wf(Math.round(100*this.ZOt)+"%");const s=this.lOt/2,i=this.cOt/2,e=(Ra.cl(s-150,i-100,150+s,100+i),this.HS());e.VD(this.KOt.Qb()),e.Pw(Ra,this.KOt.U_())}YRt(t,s,i){const e=this.HS(),h=(e.YM(),t?e.UD(1,0,0,1):e.UD(.118,.565,1,1),this.lOt/2),r=this.cOt/2,n=s/2;v.Mu(h-n,r-4+i,Math.floor(s*this.ZOt),8),e.Rect(v),v.Mu(h-n,r-4+i,s,8),v.offset(-.5,-.5),v.ju(.5,.5),e.UD(0,0,0,1),e.Bw(v),v.ju(1,1),e.UD(1,1,1,1),e.Bw(v)}VRt(t){const s=this.HS(),i=this.pf.RRt();if(i){const e=i.Qb();if(e){const h=e.ym(),r=e._m(),n=this.lOt/2,o=this.cOt/2,a=h/2,u=r/2;Ra.cl(n-a,o-u,n+a,o+u),s.VD(e),s.il(Ra),this.YRt(t,h,16+u)}else this.YRt(t,120,0)}else this.YRt(t,120,0)}qRt(t){let s=this.HS(),i=this.$Ot.t3t,e=this.$Ot.s3t,h=this.$Ot.i3t,r=Date.now(),n=(0===this.e3t&&(this.HOt=r),this.pf.ZRt()||this.pf.XRt()&&!this.pf.KRt()),o=n?0:200,a=n?0:3e3,u=1,l=("fade-in"===this.n3t?u=Math.min((r-this.HOt)/300,1):"fade-out"===this.n3t&&(u=Math.max(1-(r-this.r3t)/300,0)),s.YM(),s.UD(.231*u,.251*u,.271*u,u),v.set(0,0,this.lOt,this.cOt),s.Rect(v),Math.ceil(this.lOt)),c=Math.ceil(this.cOt),f,d;256<this.cOt?(s.UD(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),v.Mu(0,.8*c-d/2,f,d),s.Rect(v),t?s.UD(u,0,0,u):s.UD(.161*u,.953*u,.816*u,u),f=l*this.ZOt,v.Mu(.5*l-f/2,.8*c-d/2,f,d),s.Rect(v),s.UD(u,u,u,u),s.BM(),e&&(f=1.5*b.Sr(.22*c,105,.6*l),d=f/8,v.Mu(.5*l-f/2,.2*c-d/2,f,d),s.VD(e),s.Rect(v)),i&&(f=Math.min(.395*c,.95*l),d=f,v.Mu(.5*l-f/2,.485*c-d/2,f,d),s.VD(i),s.Rect(v)),h&&(f=1.5*b.Sr(.22*c,105,.6*l),d=f/8,v.Mu(.5*l-f/2,.868*c-d/2,f,d),s.VD(h),s.Rect(v))):(s.UD(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),v.Mu(0,.85*c-d/2,f,d),s.Rect(v),t?s.UD(u,0,0,u):s.UD(.161*u,.953*u,.816*u,u),f=l*this.ZOt,v.Mu(.5*l-f/2,.85*c-d/2,f,d),s.Rect(v),s.UD(u,u,u,u),s.BM(),i&&(f=.55*c,d=f,v.Mu(.5*l-f/2,.45*c-d/2,f,d),s.VD(i),s.Rect(v))),this.e3t++,"fade-in"===this.n3t&&300<=r-this.HOt&&2<=this.e3t&&(this.n3t="wait",this.h3t=r),"wait"===this.n3t&&r-this.h3t>=a&&1<=this.ZOt&&(this.n3t="fade-out",this.r3t=r),("fade-out"===this.n3t&&r-this.r3t>=300+o||n&&1<=this.ZOt&&r-this.HOt<500)&&this.o3t()}}}{let U=self.ks,W=self.C3Debugger,h=self.b6,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},n=!0;U.$Rt=class extends U.nr{constructor(t){t=Object.assign({},i,t),super(),this.tPt=t.messagePort,this.sPt=t.runtimeBaseUrl,this.iPt=t.previewUrl,this.ePt=!!t.headless,this.hPt=!!t.hasDom,this.rPt=!!t.isInWorker,n=t.ife,this.nPt=!!t.useAudio,this.oPt=t.exportType,this.aPt=t.isNWjs,this.SQ=!!t.isiOSCordova,this.uPt=!!t.isiOSWebView,this.lPt=!!t.isWindowsWebView2,this.cPt=!!t.isAnyWebView2Wrapper,this.fPt=!!t.isFBInstantAvailable,this.dPt=!("preview"!==this.oPt||!t.isDebug),this.pPt=this.dPt,this.mPt=this.dPt,this.gPt=0,this.yPt=[],this.MPt=[],this.wPt=!1,this.SPt="",this.TPt="",this.bPt="",this.vPt="",this.xPt=0,this.GPt=0,this.IPt=0,this.uL=self.devicePixelRatio,this.CPt=0,this._Pt=0,this.EPt=0,this.DPt=0,this.APt=0,this.NPt=!1,this.Wg=!0,this.LPt=!1,this.OPt=!1,this.RPt=!1,this.PPt=null,this.LJ=U.lr(U.gQ,this,t),this.O7=U.lr(U.$q,this),this.Xft=U.lr(U.H0t,this),this.kPt=U.lr(U.o4,this,t.wrapperComponentIds),this.FPt=U.lr(U.qNt,this),this.N$=U.lr(U.SZ,this),this.jPt=U.lr(U.Put,this),this.zPt=U.lr(U.Fut,this),this.Kut=U.lr(U.Vut,this),this.Fg=U.lr(U.Ig,{Eg:t=>this.BPt(t),Ag:t=>this.UPt(t)}),this.WPt=new Map,this.QPt=[],this.JPt=new Map,this.VPt=new Map,this.YPt=0,this.HPt=[],this.qPt=new Set,this.ZPt=[],this.XPt=[],this.KPt=new Map,this.$Pt=!1,this.t4t=!1,this.s4t=0,this.i4t=0,this.e4t=new Map,this.h4t=new Set,this.r4t=new Set,this.n4t=[],this.o4t=[],this.a4t=null,this.u4t=!1,this.l4t="vsync",this.z2="trilinear",this.c4t=!1,this.f4t=!0,this.d4t=!1,this.p4t=!1,this.m4t=null,this.g4t={y4t:t=>{this.qOt=-1,this.M4t=-1,this.QX(t)},w4t:t=>{this.M4t=-1,this.QX(t,!1,"skip-render")},S4t:()=>{this.qOt=-1,this.DL()}},this.qOt=-1,this.M4t=-1,this.T4t=0,this.b4t=0,this.v4t=!1,this.x4t=!1,this.G4t=!1,this.I4t=!0,this.C4t=!0,this._4t=!1,this.E4t=0,this.D4t=new U.wd(1),this.A4t=()=>Math.random(),this.N4t=0,this.L4t=0,this.O4t=0,this.R4t=0,this.P4t=0,this.F_t=1,this.k4t=1/30,this.F4t=0,this.j4t=U.lr(U.E0),this.z4t=U.lr(U.E0),this.B4t=U.lr(U.E0),this.U4t=new Map,this.W4t=-1,this.Q4t=0,this.J4t=0,this.V4t=-1,this.Y4t=0,this.H4t=0,this.q4t=0,this.Z4t=!1,this.X4t="",this.K4t=!1,this.$4t="",this.Hj=null,this.tkt="",this.skt=null,this.ikt=null,this.UIt=U.lr(U.Event.Hf),this.ekt=new Map,this.hkt=new Map,this.rkt=0,this.nkt=!1,this.okt=!1,this.akt=!1,this.ukt=[],this.lkt={pretick:U.lr(U.Event,"pretick",!1),tick:U.lr(U.Event,"tick",!1),tick2:U.lr(U.Event,"tick2",!1),instancecreate:U.lr(U.Event,"instancecreate",!1),instancedestroy:U.lr(U.Event,"instancedestroy",!1),beforelayoutchange:U.lr(U.Event,"beforelayoutchange",!1),layoutchange:U.lr(U.Event,"layoutchange",!1)},this.lkt.instancecreate.Wz=null,this.lkt.instancedestroy.Wz=null,this.f9=U.lr(U.Event.Hf),this.ckt=null;const s=(t,s)=>U.P_t.wNt(this,t,s);this.fkt=U.lr(U.F0,s),this.dkt=U.lr(U.F0,s),this.pkt=U.lr(U.F0,s),this.mkt=U.lr(U.gkt,this,t.jobScheduler),t.canvas&&(this.a4t=U.lr(U.KLt,this)),this.tPt.onmessage=t=>this._OnMessageFromDOM(t.data),this.Pj("runtime","visibilitychange",t=>this.ykt(t)),this.Pj("runtime","wrapper-extension-message",t=>this.Mkt(t)),this.Pj("runtime","get-remote-preview-status-info",()=>this.wkt()),this.Pj("runtime","js-invoke-function",t=>this.bdt(t)),this.Pj("runtime","go-to-last-error-script",self.goToLastErrorScript),this.Pj("runtime","offline-audio-render-completed",t=>this.Skt(t)),this.UIt.addEventListener("window-blur",t=>this.Tkt(t)),this.UIt.addEventListener("window-focus",()=>this.bkt()),this.N$.$Z(),this.zPt.$Z(),this.vkt=null,this.xkt=new WeakMap,this.Gkt={keyboard:null,xR:null,GR:null,IR:null},this.Ikt=new WeakMap,this.Ckt=[]}static dv(t){return U.lr(U.$Rt,t)}cr(){U.Wn(this.QPt),this.JPt.clear(),this.VPt.clear(),this.O7.cr(),this.O7=null,this.Xft.cr(),this.Xft=null,this.kPt.cr(),this.kPt=null,this.LJ.cr(),this.LJ=null,this.FPt.cr(),this.FPt=null,this.N$.cr(),this.N$=null,this.jPt.cr(),this.jPt=null,this.zPt.cr(),this.zPt=null,this.Kut.cr(),this.Kut=null,this.Fg.cr(),this.Fg=null,this.a4t&&(this.a4t.cr(),this.a4t=null),this.UIt.cr(),this.UIt=null,this._kt=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.Ekt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.Dkt(t)}}Ekt(t){if(this.akt){const s=t.component,i=t.handler,e=t.data,h=t.dispatchOpts,r=!(!h||!h.dispatchRuntimeEvent),n=!(!h||!h.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const u=new U.Event(i);u.data=e,this.UIt.h0(u)}if(n){const l=new U.Event(i,!0);for(const[c,f]of Object.entries(e))l[c]=f;this.Zq(l)}}const a=this.ekt.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.Akt(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.Akt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.Akt(o,!1,""+t)}):this.Akt(o,!0,t))}else r||n||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else r||n||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.ukt.push(t)}Akt(t,s,i){this.tPt.postMessage({type:"result",responseId:t,isOk:s,result:i})}Dkt(t){const s=t.responseId,i=t.isOk,e=t.result,h=this.hkt.get(s);i?h.resolve(e):h.reject(e),this.hkt.delete(s)}Pj(t,s,i){let e=this.ekt.get(t);if(e||(e=new Map,this.ekt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}Mf(t,s,i,e){this.tPt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}QR(t,s,i,e){const h=this.rkt++,r=new Promise((t,s)=>{this.hkt.set(h,{resolve:t,reject:s})});return this.tPt.postMessage({type:"event",component:t,handler:s,data:i,responseId:h},e),r}O6(t,s,i,e=-1){this.Mf("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}R6(t,s,i){const e=this.rkt++,h=new Promise((t,s)=>{this.hkt.set(e,{resolve:t,reject:s})});return this.O6(t,s,i,e),h}Mkt(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.hkt.get(s);i.resolve(t.params),this.hkt.delete(s)}else this.Ekt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}Kj(t,s,i){this.Pj("wrapper-extension:"+t,s,i)}Zj(t){return this.kPt.Zj(t)}Nkt(t){if(!this.Bj())throw new Error("not in debug mode");this.Mf("runtime","post-to-debugger",t)}async B_t(t){U.cTt(this),this.Bj()?await W.B_t(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const s=await this.LJ._o("data.json");if(await this.Lkt(s),await this.Okt(t),this.ZRt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.dRt()){const i=this.dRt();console.info(`[C3 runtime] Hosted in ${this.ZO()?"worker":"DOM"}, rendering with WebGL ${i.H2()} [${i.ZA()}]`)}else this.pRt()&&console.info(`[C3 runtime] Hosted in ${this.ZO()?"worker":"DOM"}, rendering with WebGPU [${this.pRt().GetAdapterInfoString()}]`);this.HS().MS()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.akt=!0;for(const e of this.ukt)this.Ekt(e);U.Wn(this.ukt),this.a4t&&this.a4t.BRt();for(const h of t.runOnStartupFunctions)this.yPt.push(this.Rkt(h));if(await Promise.all([this.LJ.mJ(),...this.yPt]),U.Wn(this.yPt),!this.LJ.yJ())return this.a4t&&await this.a4t.QRt(),await this.UIt.i0(new U.Event("beforeruntimestart")),await this.wA(),this.tPt.postMessage({type:"runtime-ready"}),this;this.a4t&&this.a4t.zRt()}async Rkt(t){try{await t(this.vkt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async Lkt(t){const s=t.project,i=(this.SPt=s[0],this.TPt=s[16],this.bPt=s[31],this.vPt=s[38],this.xPt=s[36],s[39]||"loading-logo.png"),e=(this.c4t=!!s[9],this.GPt=this.EPt=s[10],this.IPt=this.DPt=s[11],this.FPt.RLt(this.GPt,this.IPt),this.CPt=this.GPt/2,this._Pt=this.IPt/2,this.l4t=s[37],this.u4t=!!s[40],this.z2=s[14],this.LPt=s[15],this.OPt=s[42],this.RPt=s[17],this.NPt=!!s[18],this.APt=s[19],this.i4t=s[21],this.d4t=s[22],this.LJ);if(e.VQ(s[45]),e.xJ(s[7],s[25]),e.HQ(s[8]),e.qQ(s[32]),e.XQ(s[28]),e.SJ(s[29]),0===this.APt){let t;(t="flat"===e.lP()?e.KQ()+i:i)&&(this.PPt=e.aJ({url:t}))}this.a4t&&(this.a4t.hRt(U.KLt.uRt(s[12])),this.a4t.oRt(s[23]?"high":"low"),this.a4t.mS(0!==s[24]),this.a4t.u3t(s[34]),this.a4t.lRt(s[41]),this.a4t.l3t(s[13]),this.a4t.c3t(s[30]),this.a4t.p3t(s[46],s[47]),this.a4t.d3t(s[26]),this.a4t.m3t(s[48]),this.a4t.g3t(s[50]));const h=s[43],r=(h&&await this.Pkt(h),this.kkt(),this.kPt._Gt(),this.n4t=self.Fkt(),s[2]);for(const u of r[1])this.kPt.EGt(u);for(const l of r[0])this.kPt.CGt(l);this.n4t=self.Fkt(),this.jkt(),this.kPt.OGt();for(const c of s[3]){const f=U.Wut.dv(this,this.QPt.length,c);this.QPt.push(f),this.JPt.set(f.hf().toLowerCase(),f),this.VPt.set(f.fY(),f)}for(const d of s[4]){const p=this.QPt[d[0]];p.ICt(d)}for(const m of s[27]){const g=m.map(t=>this.QPt[t]);this.HPt.push(U.lr(U.G_t,this,g))}this.zkt();for(const y of this.QPt)y._Ct();for(const M of s[5])this.O7.dv(M);const n=s[1];if(n){const w=this.O7.lZ(n);w&&this.O7.aZ(w)}for(const S of s[35])this.jPt.dv(S);for(const T of s[33])this.N$.dv(T);for(const b of s[44])this.zPt.dv(b);this.zPt.But()||(this.zPt.cr(),this.zPt=null);for(const v of s[49])this.Kut.dv(v);this.Kut.Zut()||(this.Kut.cr(),this.Kut=null);for(const x of s[6])this.Xft.dv(x);this.Xft.Gdt(),this.Bkt(),U.Wn(this.n4t),this.ak();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Mf("runtime","set-target-orientation",{targetOrientation:o})}async Pkt(t){const s=t.format;"image-sequence"===s?this.m4t=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.m4t=new self.C3ExportToGIF(this,t):"webm"===s?this.m4t=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.m4t=new self.C3ExportToMP4Video(this,t)),this.l4t="unlimited-frame",this.a4t.hRt("off"),this.uL=1,self.devicePixelRatio=1,await this.QR("runtime","set-exporting-to-video",{message:this.m4t.GetExportingMessageForPercent(0),duration:this.m4t.yB()})}WRt(){return this.APt}B3t(){return null!==this.m4t}Ukt(){return this.m4t.yB()}Wkt(){return this.m4t.GetFramerate()}Qkt(){return this.m4t.B_t({width:this.a4t.KP(),height:this.a4t.t4()})}Jkt(){const t=this.T4t/this.Wkt();return this.m4t.AddFrame(this.a4t.iRt(),t)}Vkt(){this.m4t&&this.m4t.Bit()}Skt(t){this.m4t.OnOfflineAudioRenderCompleted(t)}Ykt(){return this.m4t.cS()}XRt(){return this.fPt}Hg(){return this.Wg}HR(t){this.yPt.push(t)}iq(t){this.wPt=!!t}Hkt(t){this.wPt&&this.MPt.push(t)}aq(){return this.MPt}wCt(){return this.YPt++}DCt(){return this.YPt}_Nt(t){this.qPt.add(t)}ENt(t){this.qPt.delete(t)}z3t(){return this.qPt}async Okt(t){this.a4t&&(await this.a4t.Po(t),this.a4t.ORt(this.APt))}async wA(){this.v4t=!0,this.N4t=Date.now();let s=null,t=new Promise(t=>s=t);if(this.NPt){for(const h of this.QPt)h.eY()||h.jCt()||!h.f4()||h.Ivt();(async()=>{await this.LJ.mJ(),await t,this.Wg=!1,this.qkt()})()}else this.Wg=!1;this.LJ.gJ(),this.Bj()&&W.RuntimeInit(n);for(const r of this.O7.wR())r.Cq();this.B3t()&&await this.Qkt();const i=this.O7.uZ(),e=(await i.j9(null,this.HS()),await i.q9(!0),this.Q4t=performance.now(),s(),this.NPt||this.qkt(),await this.QR("runtime","before-start-ticking"));e.isSuspended&&!this.B3t()?(this.E4t++,this._4t=!0):this.QX()}qkt(){this.Nj(U.Tq.Sq.wq.Zkt,null,null),this.Mf("runtime","register-sw")}Ayt(t){t=Math.floor(t);const s=this.n4t;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}jkt(){for(const t of self.Xkt){const s=U.first(Object.keys(t));this.o4t.push(s)}}qdt(t){t=Math.floor(t);const s=this.o4t;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}Kkt(){return this.hPt}$kt(){return this.ePt}ZO(){return this.rPt}FRt(){return this.sPt}tFt(){return this.iPt}d3(){return this.Xft}C3(){return this.Xft.C3()}jdt(){return this.Xft.jdt()}S3(){return this.Xft.S3()}zdt(){return this.Xft.zdt()}uTt(){return 0===this.jdt().g0t()}Udt(){return this.Xft.Udt()}yNt(){return this.kPt}wJ(){return this.kPt.wJ()}A8(t){if((t=Math.floor(t))<0||t>=this.QPt.length)throw new RangeError("invalid index");return this.QPt[t]}sFt(t){return this.JPt.get(t.toLowerCase())||null}Q6(t){return this.VPt.get(t)||null}nrt(t){const s=U.o4._4(t);return s?s.N4():null}iY(){return this.QPt}*iFt(){for(const t of this.QPt)t.eY()||(yield*t.instances())}Hf(){return this.UIt}a3(){return this.f9}Zq(t){t.runtime=this.a4();const s=this.Bj()&&!this.Xft.rk();s&&W.StartMeasuringScriptTime(),this.f9.dispatchEvent(t),s&&W.AddScriptTime()}gq(t){return t.runtime=this.a4(),this.f9.i0(t)}KO(){return this.GPt}t3(){return this.IPt}eFt(t,s){if(this.GPt!==t||this.IPt!==s){this.GPt=t,this.IPt=s;const i=this.gR();i.MZ(),i.wZ()}}RY(){return this.EPt}PY(){return this.DPt}tRt(t,s){if(this.EPt!==t||this.DPt!==s){this.EPt=t,this.DPt=s;const i=this.gR();i.MZ(),i.wZ()}}U3t(t){this.B3t()||(this.uL=t)}s4(){return this.uL}AH(){return this.CPt}NH(){return this._Pt}QP(){return this.a4t}FH(){return this.a4t?this.a4t.FH():this.EPt}jH(){return this.a4t?this.a4t.jH():this.DPt}BF(){return this.a4t?this.a4t.BF():1}c6(){return this.a4t?this.a4t.c6():1}M7(){return this.a4t?this.a4t.M7():1}g7(){return this.a4t?this.a4t.g7():1}NF(){return this.a4t?this.a4t.NF():0}LF(){return this.a4t?this.a4t.LF():0}hFt(){return this.a4t?this.a4t.HP():0}rFt(){return this.a4t?this.a4t.ZP():0}u6(){return this.a4t?this.a4t.u6():"off"}qH(t){return this.a4t?this.a4t.qH(t):null}g8(t){this.a4t&&this.a4t.g8(t)}YH(){return this.LPt}N3t(){return this.OPt}L3t(){return this.RPt}X3(){return this.a4t?this.a4t.X3():NaN}Vb(){return"nearest"!==this.s3()}tR(){return this.l4t}sR(t){this.l4t!==t&&(this.l4t=t,-1!==this.qOt||-1!==this.M4t)&&(this.nFt(),this.oFt())}s3(){return this.z2}vCt(){return this.NPt}RRt(){return this.PPt}JRt(){this.PPt&&(this.PPt.LC(),this.PPt.cr(),this.PPt=null)}gR(){return this.O7}dR(){return this.O7.dR()}ytt(){return this.N$}aFt(){return this.jPt}yEt(){return this.zPt}Slt(){return this.Kut}kO(){return this.LJ}aJ(t){return this.LJ.aJ(t)}sk(t,s,i,e,h,r){if(r&&this.zPt){if(t instanceof U.Wut&&t.eY()){const o=t.pgt(),a=Math.floor(this.fR()*o.length);return this.sk(o[a],s,i,e,h,r)}const n=this.zPt.Uut(t,r);if(n){const u=this.B8(n,s,!1,i,e,!1,h,void 0,h);return this.zPt.Qut(u,r),u}}return this.B8(t,s,!1,i,e,!1,h,void 0,h)}B8(t,s,i,e,h,r,n,o,a){let u=null,l=null;if(t instanceof U.Wut){if((l=t).eY()){const S=l.pgt(),T=Math.floor(this.fR()*S.length);l=S[T]}u=l.L8()}else u=t,l=this.A8(u[1]);const c=l.F4().f4();if(this.Wg&&c&&!l.jCt())return null;const f=s;c||(s=null);let d;d=i&&!r&&u&&!this.e4t.has(u[2])?u[2]:this.i4t++;const p=u?u[0]:null,m=U.lr(U.Instance,{runtime:this,WF:l,o5:s,z_t:p,Q_t:u?u[3]:null,uid:d,tags:u?u[6]:null});this.e4t.set(d,m);let g=null,y=(c&&(g=m.RR(),void 0!==e&&void 0!==h&&(g.IT(e),g.ET(h)),l.d_t(!0)),s&&(a||s.W8(m,!0),s.yR().B9(l)),this.s4t++,!0);if(o){const b=o.QF();if(b.ij()&&l.ij()){const v=l.k9(),x=b.k9();v===x&&(y=!1)}}if(l.ij()&&!i&&!r&&y){const G=new Set;for(const I of l.k9().xq())if(I!==l){const C=this.uFt(I,g,G);if(C){const _=this.B8(C,f,!1,g?g.GT():e,g?g._T():h,!0,!1,void 0,a);m.Gq(_)}else{const F=this.B8(I,f,!1,g?g.GT():e,g?g._T():h,!0,!1,void 0,a);m.Gq(F)}}for(const E of m.ej()){E.Gq(m);for(const D of m.ej())E!==D&&E.Gq(D)}}if(c&&!i&&n&&this.lFt(m,p,g,s,e,h,a),l.ij()&&!i&&!r&&n)for(const A of m.ej()){const N=A.RR();if(N){const j=A.F4(),L=A.QF().L8()[0];j.f4()?this.lFt(A,L,N,s,N.GT(),N._T(),a):this.lFt(A,L,N,s,void 0,void 0,a)}}if(!r&&n){void 0===e&&(e=p[0]),void 0===h&&(h=p[1]);const O=g.F5(),z=e-g.GT()+O.GT(),B=h-g._T()+O._T();O.u5(z,B)}l.a_t();const P=u?U.ho(u[5]):null,k=u?u[4].map(t=>U.ho(t)):null,M=c&&p&&p[13];if(M&&m.Z_t(),m.kCt(P,k),M){const R=p[13];m.Nz().Wvt(R[2],R[0],R[1])}this.XPt.push(m),this.$Pt=!0,this.Bj()&&W.InstanceCreated(m);const w=this.lkt.instancecreate;return w.Wz=m,this.UIt.dispatchEvent(w),m}pDt(t){const s=t[0],i=t[1],e=t[2],h=t[6];if(h)return h;const r=this.O7.cZ(s),n=r.PR(i);return n.k8(e)}uFt(t,s,i){const e=s?.gEt()??[];for(const h of e){const r=this.pDt(h),n=!!h[4],o=this.A8(r[1]);if(!i.has(r)&&t===o&&n)return i.add(r),r}}lFt(a,t,s,u,l,c,f){const i=s.RAt(),e=s.gEt();if(a.RR().PAt(i),e){void 0===l&&(l=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],h=!!g[4],r=g[5],n=g[6],o;if(n)o=n;else{const S=this.O7.cZ(t),T=S.PR(s);o=T.k8(i)}const y=this.A8(o[1]),M=a.MEt(y),w=d.has(y);if(M&&!w&&h){const b=a.wEt(y),v=(b.RR().B_t(o[0]),l+o[0][0]-p),x=c+o[0][1]-m;b.RR().u5(v,x),b.RR().PAt(r),a.V5(b,{X5:!!(e>>0&1),sz:!!(e>>1&1),ez:!!(e>>2&1),rz:!!(e>>3&1),oz:!!(e>>4&1),mz:!!(e>>5&1),uz:!!(e>>6&1),cz:!!(e>>7&1),dz:!!(e>>8&1)}),d.add(y)}else{const G=l+o[0][0]-p,I=c+o[0][1]-m,C=this.B8(o,u,!1,G,I,!1,!0,a,f);C.RR().PAt(r),a.V5(C,{X5:!!(e>>0&1),sz:!!(e>>1&1),ez:!!(e>>2&1),rz:!!(e>>3&1),oz:!!(e>>4&1),mz:!!(e>>5&1),uz:!!(e>>6&1),cz:!!(e>>7&1),dz:!!(e>>8&1)})}}}}XF(i){if(!this.h4t.has(i)){let t=i.QF(),s=this.KPt.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.KPt.set(t,s);if(this.Bj()&&W.InstanceDestroyed(i),i.K_t(),this.$Pt=!0,i.ij())for(const e of i.ej())this.XF(e);for(const h of i.children())h.gz()&&this.XF(h);if(!this.O7.nk()&&!this.Z4t){const r=this.d3();r.ek(!0),i.EEt(),r.ek(!1)}i.DEt(this.O7.nk())}}ak(){this.$Pt&&(this.t4t=!0,this.cFt(),this.fFt(),this.t4t=!1,this.$Pt=!1,this.UR())}cFt(){for(const t of this.XPt){const s=t.QF();s.W8(t);for(const i of s.i1t())i.W8(t),i.a_t()}U.Wn(this.XPt)}fFt(){this.UIt.Bf(!0);for(const[t,s]of this.KPt.entries())this.dFt(t,s),s.clear();this.KPt.clear(),this.UIt.Bf(!1)}dFt(t,s){for(const i of s){const e=this.lkt.instancedestroy,h=(e.Wz=i,this.UIt.dispatchEvent(e),this.e4t.delete(i.hj()),this.U4t.delete(i),i.RR());h&&(h.jAt(),h.Y8(),h.K_t()),this.h4t.add(i),this.s4t--}U.Kn(t.H4(),s),t.a_t(),this.r4t.add(t);for(const r of t.i1t())U.Kn(r.H4(),s),r.a_t(),this.r4t.add(r);if(t.F4().f4()){const n=new Set([...s].map(t=>t.RR().PR()));for(const o of n)o.oH(s)}}l_t(){return this.XPt}*p2t(t){for(const s of this.l_t())t.eY()?s.QF().lTt(t)&&(yield s):s.QF()===t&&(yield s)}PCt(){return this.i4t++}FCt(t,s){this.e4t.set(t,s)}j6(t){this.C4t!==(t=!!t)&&(this.C4t=!!t,this.C4t)&&this._4t&&(this.U6(!1),this._4t=!1)}z6(){return this.C4t}H9(){this.UIt.dispatchEvent(U.lr(U.Event,"renderercontextlost")),this.U6(!0);for(const s of this.QPt)!s.eY()&&s.zCt()&&s.V9();const t=this.dR();t&&t.H9(),U.kGt.JJ(),U.lJ.JJ()}async fRt(){await this.dR().j9(null,this.HS()),this.UIt.dispatchEvent(U.lr(U.Event,"renderercontextrestored")),this.U6(!1),this.UR()}ykt(t){if(this.C4t){const s=t.hidden;this.U6(s),(this._4t=s)||this.UR()}}Tkt(t){this.ZRt()&&this.d4t&&!U.li.Si&&!t.data.parentHasFocus&&(this.U6(!0),this.p4t=!0)}bkt(){this.p4t&&(this.U6(!1),this.p4t=!1)}oFt(){const t=this.g4t;"vsync"===this.l4t?-1===this.qOt&&(this.qOt=self.requestAnimationFrame(t.y4t)):"unlimited-tick"===this.l4t?(-1===this.M4t&&(this.M4t=U.yo(t.w4t)),-1===this.qOt&&(this.qOt=self.requestAnimationFrame(t.S4t))):-1===this.M4t&&(this.M4t=U.yo(t.y4t))}nFt(){-1!==this.qOt&&(self.cancelAnimationFrame(this.qOt),this.qOt=-1),-1!==this.M4t&&(U.Mo(this.M4t),this.M4t=-1)}O3(){return 0<this.E4t}U6(t){if(!this.B3t()){const s=this.O3(),i=(this.E4t+=t?1:-1,this.E4t<0&&(this.E4t=0),this.O3());if(!s&&i)console.log("[Construct] Suspending"),this.nFt(),this.UIt.dispatchEvent(U.lr(U.Event,"suspend")),this.Nj(U.Tq.Sq.wq.pFt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.L4t=e,this.Q4t=e,this.W4t=0,this.J4t=0,this.V4t=0,this.Y4t=0,this.q4t=0,this.H4t=0,this.UIt.dispatchEvent(U.lr(U.Event,"resume")),this.Nj(U.Tq.Sq.wq.mFt,null,null),this._1t()||this.QX(e)}}}I6(t){this.fkt.Mc(t)}D6(t){this.dkt.Mc(t)}_6(t){this.pkt.Mc(t)}C6(t){this.fkt.C0(t)}A6(t){this.dkt.C0(t)}E6(t){this.pkt.C0(t)}gFt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.Uj(),s&&W.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.QX(),s&&W.AddIndividualBehaviorTickTime(t.jz(),performance.now()-i)),e}yFt(){const t=this.Bj();this.fkt.yd(!0);for(const s of this.fkt)this.gFt(s,t);this.fkt.yd(!1)}MFt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.L6(),s&&W.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.gGt(),s&&W.AddIndividualBehaviorTickTime(t.jz(),performance.now()-i)),e}wFt(){const t=this.Bj();this.dkt.yd(!0);for(const s of this.dkt)this.MFt(s,t);this.dkt.yd(!1)}SFt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.Qj(),s&&W.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.cxt(),s&&W.AddIndividualBehaviorTickTime(t.jz(),performance.now()-i)),e}TFt(){const t=this.Bj();this.pkt.yd(!0);for(const s of this.pkt)this.SFt(s,t);this.pkt.yd(!1)}*bFt(){const t=this.Bj();this.fkt.yd(!0);for(const s of this.fkt){const i=this.gFt(s,t);U.Vo(i)&&(yield*i)}this.fkt.yd(!1)}*vFt(){const t=this.Bj();this.dkt.yd(!0);for(const s of this.dkt){const i=this.MFt(s,t);U.Vo(i)&&(yield*i)}this.dkt.yd(!1)}*xFt(){const t=this.Bj();this.pkt.yd(!0);for(const s of this.pkt){const i=this.SFt(s,t);U.Vo(i)&&(yield*i)}this.pkt.yd(!1)}async QX(a,t,s){this.G4t=!0;const u="background-wake"===s,l="background-wake"!==s&&"skip-render"!==s,c=this.gR(),f=this.QP();if(this.v4t&&(!this.O3()||t||u)){let t=performance.now(),s=(this.x4t=!0,this.GFt(a||0),this.V4t++,this.IFt(),this.CFt()),i=(this.o2t()&&await s,this.UIt.e0(this.lkt.pretick)),e=(i instanceof Promise&&await i,this.Zq(this.ckt.pretick),this._Ft()),h=(this.o2t()&&await e,this.EFt()&&await this.DFt(),c.TR()&&await this.AFt(),this.NFt()),r=(this.o2t()&&await h,c.dR()),n=r.N9(),o=!1;if(-1!==n&&(r.L9(),f.A9()!==n)){const d=this.QP().tq(n);this.ZO()&&(o=!0,await d)}this.Mf("canvas","update-html-layer-dom-state",{layersDomState:r.cY().filter(t=>t.rF()).map(t=>t.pH())}),l&&this.DL(),o&&this.Mf("canvas","cleanup-html-layers"),this.B3t()&&(await this.Jkt(),this.z3()>=this.Ukt())?this.Ykt():(this.O3()||u||this.oFt(),this.T4t++,this.b4t++,this.x4t=!1,this.H4t+=performance.now()-t)}}async CFt(){const t=this.Xft,s=this.Bj();this.ak(),t.ek(!0),this.g1t(this.dR()),s&&W.StartMeasuringTime(),this.o2t()?await t.q1t():t.Q1t(),s&&W.AddEventsTime(),this.y1t(),t.ek(!1),this.ak(),t.ek(!0)}async _Ft(){const t=this.Xft,s=this.Bj(),i=this.o2t(),e=this.UIt,h=this.lkt,r=this.ckt;s&&W.StartMeasuringTime(),i?await this.LFt(this.bFt()):this.yFt(),i?await this.LFt(this.vFt()):this.wFt(),s&&W.AddBehaviorTotalTickTime(),s&&W.StartMeasuringTime(),i?await this.OFt(h.tick):e.dispatchEvent(h.tick),s&&W.AddPluginTotalTickTime(),t.ek(!1),this.Zq(r.tick)}async NFt(){const t=this.Xft,s=this.UIt,i=this.lkt,e=this.ckt,h=this.Bj(),r=this.o2t();h&&W.StartMeasuringTime(),r?await t.M1t(this.O7):t.m1t(this.O7),h&&W.AddEventsTime(),this.FPt.aLt(),this.IFt(),this.I4t=!1,t.ek(!0),h&&W.StartMeasuringTime(),r?await this.LFt(this.xFt()):this.TFt(),h&&W.AddBehaviorTotalTickTime(),h&&W.StartMeasuringTime(),r?await this.OFt(i.tick2):s.dispatchEvent(i.tick2),h&&W.AddPluginTotalTickTime(),t.ek(!1),this.Zq(e.tick2),r&&await t.E1t()}IFt(){if(0!==this.h4t.size){const t=this.UIt;t.Bf(!0);for(const s of this.r4t)s.F1t().Cft(this.h4t);this.r4t.clear(),this.Xft.X1t(this.h4t);for(const i of this.h4t)i.cr();this.h4t.clear(),t.Bf(!1)}}async AFt(){let t=this.gR(),s=0;for(;t.TR()&&s++<10;)await this.RFt(t.yZ())}GFt(t){let s=0;if(this.B3t())s=1/this.Wkt(),this.O4t=s,this.R4t=s;else if(0!==this.L4t){const i=Math.max(t-this.L4t,0);.5<(s=i/1e3)&&(s=0),this.O4t=s,this.R4t=U.Sr(s,this.F4t,this.k4t)}this.L4t=t,this.P4t=this.R4t*this.F_t,this.j4t.Mc(this.P4t),this.z4t.Mc(s*this.F_t),this.B4t.Mc(this.R4t);for(const[e,h]of this.U4t)h.Mc(this.R4t*e.W3());this.a4t&&this.a4t.xRt(),1e3<=t-this.Q4t&&(this.Q4t+=1e3,1e3<=t-this.Q4t&&(this.Q4t=t),this.J4t=this.W4t,this.W4t=0,this.Y4t=this.V4t,this.V4t=0,this.q4t=Math.min(this.H4t/1e3,1),this.H4t=0,this.a4t&&this.a4t.vRt(),this.FPt.hLt(),this.Bj())&&W.Update1sPerfStats()}H_t(t,s){if(s){if(!this.U4t.has(t)){const i=U.lr(U.E0);i.O0(this.j4t),this.U4t.set(t,i)}}else this.U4t.delete(t)}q_t(t){const s=this.U4t.get(t);return s?s.ei():this.z3()}async RFt(t){const s=this.UIt,i=this.gR(),e=i.dR();await e.Eq(),e.Y9(t,this.HS()),e===t&&this.Xft.Nq(),this.FPt.aLt(),this.IFt(),s.dispatchEvent(this.lkt.beforelayoutchange),U.Wf.n0(!0),await t.j9(e,this.HS()),U.Wf.n0(!1),await t.q9(!1),s.dispatchEvent(this.lkt.layoutchange),this.UR(),this.I4t=!0,this.ak(),this.Vkt()}UR(){this.f4t=!0}dRt(){return this.a4t?this.a4t.dRt():null}pRt(){return this.a4t?this.a4t.pRt():null}HS(){return this.a4t?this.a4t.HS():null}DL(){const i=this.a4t;if(i&&!i.cRt()){const e=this.HS(),t=e.BA(),h=t&&e.wS(),r=t&&e.LM();if(h&&e.CA(),this.f4t||this.B3t()){const n=this.O7.dR(),o=(this.W4t++,e.wA(),this.Bj());o&&W.StartMeasuringTime(),this.f4t=!1;let t=null,s=(h&&(t=i.CRt().mE(),e.zA(t)),null);r&&(s=e.StartFrameTiming(2*(1+n.G9())),e.StartMeasuringRenderPassTime(0,1)),this.JY()&&"low"===i.HH()?e.ND(i.FH(),i.jH()):e.LD(),this.PFt(this.HS(),n),t&&e.UA(t),r&&(e.StopMeasuringRenderPassTime(),this.a4t._Rt(s)),e.cS(),o&&(W.AddDrawCallsTime(),W.UpdateInspectHighlight()),i&&i.DRt()}else e.pS()}}Uq(t){return"low"===this.QP().HH()||t.wS()&&(this.YH()||this.JY())}PFt(s,i){s.BM(),s.ZD(),s.UD(1,1,1,1),s.AA(null),s.VD(null),s.TA(this.JY()),this.Uq(s)&&i.zq(s);const e=i.A9();for(let t=1;t<e;++t)i.Vq(s,t),s.LM()&&s.Restart();this.Uq(s)||i.zq(s),i.Jq(s)}Nj(t,s,i){if(!this.v4t)return!1;let e=!this.x4t&&!this.Xft.L1t(),h=0;e&&(h=performance.now());const r=this.Bj(),n=(r&&this.eW(!1),this.Xft.b1t(this.O7,t,s,i));if(e){const o=performance.now()-h;this.H4t+=o,r&&W.AddTriggersTime(o)}return r&&this.eW(!0),n}Kvt(t,s,i){if(!this.o2t())return this.Nj(t,s,i);if(this._1t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.x4t||this.Xft.L1t())return this.Xft.G1t(this.O7,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async Oj(t,s,i){if(!this.o2t())return this.Nj(t,s,i);if(!this.v4t)return!1;if(this._1t())return this.Xft.I1t(t,s,i);if(!this.dR())return this.Xft.v1t(t,s,i);let e=performance.now(),h=this.Xft.G1t(this.O7,t,s,i),r=h.next();for(;!r.done;)await this.S1t(r.value),r=h.next();return this.O3()||this.Xft.L1t()||(await this.Xft.E1t(),this.G4t&&!this.x4t&&this.oFt()),this.H4t+=performance.now()-e,r.value}$vt(t,s,i){const e=this.Bj(),h=(e&&this.eW(!1),this.Xft.D1t(this.O7,t,s,i));return e&&this.eW(!0),h}txt(t,s,i){return this.Xft.A1t(this.O7,t,s,i)}sxt(t){return this.D4t.Mc(t)}g1t(t){this.ZPt.push(t)}y1t(){if(!this.ZPt.length)throw new Error("layout stack empty");this.ZPt.pop()}LR(){return this.ZPt.length?this.ZPt.at(-1):this.dR()}P3(t){return t&&-1!==t.W3()?this.R4t*t.W3():this.P4t}UX(){return this.P4t}WX(){return this.R4t}j3(){return this.O4t}W3(){return this.F_t}Q3(t){(isNaN(t)||t<0)&&(t=0),this.F_t=t}hR(t){this.F4t=Math.max(t,0)}eR(){return this.F4t}oR(t){this.k4t=Math.max(t,0)}nR(){return this.k4t}J3(){return this.J4t}Y3(){return this.Y4t}q3(){return this.q4t}kFt(){return this.N4t}z3(){return this.j4t.ei()}FFt(){return this.z4t.ei()}U3(){return this.B4t.ei()}jtt(){return this.T4t}jFt(){return this.b4t}zFt(){return this.s4t}QO(){return this.SPt}VO(){return this.TPt}BFt(){return this.bPt}UFt(){return this.vPt}HO(){return this.xPt}DR(t){if(this.Z4t)throw new Error("cannot call while loading state - wait until afterload event");return this.e4t.get(t)||null}vq(){this.e4t.clear();for(const t of this.QPt)if(!t.eY())for(const s of t.H4())this.e4t.set(s.hj(),s)}ZRt(){return"preview"===this.oPt}Bj(){return this.dPt}zP(){return this.oPt}BP(){return"nwjs"===this.zP()||this.aPt}KRt(){return"cordova"===this.oPt}WFt(){return"Android"===U.li.ci&&("cordova"===this.oPt||"playable-ad-single-file"===this.oPt||"playable-ad-zip"===this.oPt||"instant-games"===this.oPt)}QFt(){return this.SQ}JFt(){return this.uPt}UP(){return this.lPt}VFt(){return this.cPt}zO(){return this.FPt}RGt(){return this.kPt.RGt()}PGt(){return this.kPt.PGt()}JY(){return this.u4t}YFt(){return this.HS().bM(this.PY())}wM(t){return this.HS().wM(t||this.PY())}HFt(){return this.I4t}qFt(t){this.c4t!==(t=!!t)&&(this.c4t=t,this.gR().wZ(),this.UR())}e3(){return this.c4t}ZFt(t){if(!this.WPt.has(t)){const i=()=>this.XFt(t);this.WPt.set(t,i),t.Hf().addEventListener("animationframeimagechange",i)}const s=this.Fg.Ng(t);return s.Yg()||s.qg().then(()=>this.UR()),s}XFt(t){this.Fg.Pg(t)}BPt(t){const s=[];for(const i of t.KCt())for(const e of i.lB()){const h=e.gB();s.push({source:e,width:h.ym(),height:h._m(),tag:e.RB()})}return{Jg:s}}async UPt(t){const s=U.lr(U.wd),i=[],h=new Map;for(const n of t.KCt())for(const o of n.lB()){const a=o.gB().eIt();h.has(a)||(h.set(a,null),i.push(s.Mc(async()=>{const t=await a.qJ();h.set(a,t)})))}await Promise.all(i);const e=[];for(const u of t.KCt())for(const l of u.lB())e.push(s.Mc(async()=>{const t=l.gB(),s=h.get(t.eIt()),i=await t.hIt(s),e=await createImageBitmap(i);return{Xg:e}}));const r=await Promise.all(e);for(const c of h.values())c instanceof ImageBitmap&&c.close&&c.close();return{Jg:r}}KFt(t){this.X4t=t,this.K4t=!1}$Ft(){this.X4t="",this.K4t=!0}tjt(t){this.$4t=t}ibt(t){this.Hj=t}sjt(){return this.tkt}EFt(){return!!(this.X4t||this.K4t||this.$4t||null!==this.Hj)}async DFt(){if(this.X4t&&(this.ak(),await this.ijt(this.X4t),this.ejt()),this.$4t&&(await this.hjt(this.$4t),this.ejt(),this.Bj())&&W.StepIfPausedInDebugger(),this.K4t){const t=await this.rjt();this.tkt=t,await this.Oj(U.Tq.Sq.wq.njt,null),this.tkt="",this.ejt()}if(null!==this.Hj){this.ak();try{await this.ojt(this.Hj),this.tkt=this.Hj,await this.Oj(U.Tq.Sq.wq.ajt,null),this.tkt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.Oj(U.Tq.Sq.wq.ujt,null)}this.ejt()}}ejt(){this.X4t="",this.K4t=!1,this.$4t="",this.Hj=null}e4(){return this.skt||(this.skt=localforage.ki({name:"c3-localstorage-"+this.BFt(),description:this.QO()})),this.skt}ljt(){return this.ikt||(this.ikt=localforage.ki({name:"c3-savegames-"+this.BFt(),description:this.QO()})),this.ikt}async ijt(t){const s=await this.rjt();try{await this.ljt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.tkt=s,await this.Oj(U.Tq.Sq.wq.njt,null),this.tkt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.Oj(U.Tq.Sq.wq.cjt,null)}}async hjt(t){try{const s=await this.ljt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.ojt(s),this.tkt=s,await this.Oj(U.Tq.Sq.wq.ajt,null),this.tkt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.Oj(U.Tq.Sq.wq.ujt,null)}}async rjt(){const t={c3save:!0,version:1,rt:{time:this.z3(),timeRaw:this.FFt(),walltime:this.U3(),timescale:this.W3(),tickcount:this.jtt(),next_uid:this.i4t,running_layout:this.dR().fY(),start_time_offset:Date.now()-this.N4t},types:{},layouts:{},events:this.Xft._7(),timelines:this.N$._7(),user_script_data:null};for(const i of this.QPt)i.eY()||i.S_t()||(t.types[i.fY().toString()]=i._7());for(const e of this.O7.wR())t.layouts[e.fY().toString()]=e._7();const s=this.fjt("save");return s.saveData=null,await this.gq(s),t.user_script_data=s.saveData,JSON.stringify(t)}uq(){return this.Z4t}async ojt(t){const s=this.gR(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.ebt(),this.UIt.dispatchEvent(U.lr(U.Event,"beforeload"));for(const a of this.iFt()){const u=a.QF();u.S_t()||a.JZ()}let e=i.rt,h=(this.j4t.Set(e.time),e.hasOwnProperty("timeRaw")&&this.z4t.Set(e.timeRaw),this.B4t.Set(e.walltime),this.F_t=e.timescale,this.T4t=e.tickcount,this.N4t=Date.now()-e.start_time_offset,e.running_layout),r=!(this.Z4t=!0);if(h!==this.dR().fY()){const l=s.cZ(h);if(!l)return;await this.RFt(l),r=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.cZ(d);p&&p.E7(f)}const n=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),M=this.Q6(y);!M||M.eY()||M.S_t()||M.E7(g,n)}for(const w of this.O7.wR())for(const S of w.Ck())S.D7();if(this.ak(),this.vq(),this.Z4t=!1,r){for(const T of this.iFt())T.lq();for(const[b,v]of Object.entries(i.types)){const x=parseInt(b,10),G=this.Q6(x);!G||G.eY()||G.S_t()||G.v_t(v)}}this.i4t=e.next_uid,this.Xft.E7(i.events);for(const I of this.QPt)if(!I.eY()&&I.ij())for(const C of I.H4()){const _=C.nj();for(const E of I.k9().xq())if(E!==I){const D=E.H4();if(_<0||_>=D.length)throw new Error("missing sibling instance");C.Gq(D[_])}}this.N$.E7(i.timelines),s.MZ(),s.wZ();for(const A of n)A._Et();this.hbt(),this.UIt.dispatchEvent(U.lr(U.Event,"afterload")),this.Zq(this.fjt("afterload"));for(const[N,L]of Object.entries(i.types)){const O=parseInt(N,10),R=this.Q6(O);R&&R.b_t()}const o=this.fjt("load");o.saveData=i.user_script_data,await this.gq(o),this.UR()}djt(t,s){return t.RR().DAt()-s.RR().DAt()}gNt(t,s){t.RR()&&!this.Ikt.has(t)&&(this.Ikt.set(t,s),this.Ckt.push(t))}ebt(){this.Ikt=new WeakMap,U.Wn(this.Ckt)}hbt(t="full",s=null){this.Ckt.sort(this.djt);for(const i of this.Ckt)i.YZ(this.Ikt.get(i),t,s);for(const e of this.Ckt)e.LEt(this.Ikt.get(e),t,s);this.ebt()}async pjt(t){const s=await Promise.all(t.map(async t=>{const s=this.KRt()&&this.LJ.$Q();if(s||"playable-ad-single-file"===this.zP()){const i=await this.LJ.Eo(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.mkt.mjt(s)}gjt(t,s){this.mkt.yjt(t,s)}Mjt(t,s){this.mkt.wjt(t,s)}Sjt(t,s,i,e){return this.mkt.Sjt(t,s,i,null,null,e)}Tjt(t,s,i,e){return this.mkt.Tjt(t,s,i,e)}bjt(){return this.mkt.vjt()}_R(t,s){this.Mf("runtime","invoke-download",{url:t,filename:s})}async jRt(t,s,i,e,h,r){if(e=e||s,h=h||i,this.ZO()){const n=await this.QR("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:h,imageBitmapOpts:r});return n.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,h);return r?self.createImageBitmap(o,r):o}}async xjt(t){return this.ZO()?this.QR("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}Gjt(){this.nkt||(this.nkt=!0,this.Mf("runtime","enable-device-orientation"))}Ijt(){this.okt||(this.okt=!0,this.Mf("runtime","enable-device-motion"))}fR(){return this.A4t()}Cjt(t){this.A4t=t}wkt(){const t=this.HS();return{fps:this.J3(),tps:this.Y3(),cpu:this.q3(),gpu:this.X3(),layout:this.dR()?this.dR().hf():"",renderer:t.wS()?t.ZA():t.GetAdapterInfoString()}}_1t(){return!!this.Bj()&&W._1t()}S1t(t){return this.o2t()?W.S1t(t):Promise.resolve()}iyt(){return!!this.o2t()&&W.BreakNext()}_jt(t){this.pPt=!!t,this.Ejt()}Djt(){return this.pPt}o2t(){return this.mPt}eW(t){t?this.gPt--:this.gPt++,this.Ejt()}Ejt(){this.mPt=this.Bj()&&this.pPt&&0===this.gPt}Smt(){return this.Bj()&&W.Smt()}WH(){return this.Bj()&&this.HS().BA()&&W.WH()}async LFt(t){if(t)for(const s of t)await this.S1t(s)}OFt(t){return this.LFt(this.UIt.r0(t))}bdt(t){return this.Xft.bdt(t.name,t.params)}VR(t){if(this.ZO())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}a4(){return this.vkt}fjt(t){const s=U.lr(U.Event,t,!1);return s.runtime=this.vkt,s}kkt(){this.vkt=new self.OO(this),this.ckt={pretick:this.fjt("pretick"),tick:this.fjt("tick"),tick2:this.fjt("tick2")}}zkt(){const t={};for(const s of this.QPt)t[s.qdt()]={value:s.A4(),enumerable:!0,writable:!1};this.vkt.u3(t)}Bkt(){const t={};for(const s of this.d3().e1t())t[s.qdt()]=s.Zdt();this.vkt.l3(t)}vR(){return this.Gkt}I4(t,s){this.xkt.set(t,s)}Dk(t){return this.xkt.get(t)}NP(t){if(!(t instanceof self.R4))throw new TypeError("expected IObjectClass");const s=this.Dk(t);if(s&&s instanceof U.Wut)return s;throw new Error("invalid IObjectClass")}J4(t){if(!(t instanceof self.UF))throw new TypeError("expected IInstance");const s=this.Dk(t);if(s&&s instanceof U.Instance)return s;throw new Error("invalid IInstance")}OR(t){if(!(t instanceof self.Cz))throw new TypeError("expected IWorldInstance");const s=this.Dk(t);if(s&&s instanceof U.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=U.$Rt.dv,self.C3_InitRuntime=(t,s)=>t.B_t(s)}{const Pa=self.ks;Pa.gkt=class extends Pa.nr{constructor(t,s){super(),this.pf=t,this.Ajt=new Map,this.Njt=0,this.Ljt=s.inputPort,s.outputPort.onmessage=t=>this.Ojt(t),this.Rjt=s.maxNumWorkers,this.Pjt=1,this.kjt=!1,this.Fjt=!1}vjt(){return this.Rjt}mjt(t){this.Ljt.postMessage({type:"_import_scripts",scripts:t})}yjt(t,s){this.Ljt.postMessage({type:"_send_blob",blob:t,id:s})}wjt(t,s){this.Ljt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}Sjt(t,s,i,e,h,r){if(i=i||[],"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const n=this.Njt++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:n,params:s,transferables:i},a=new Promise((t,s)=>{this.Ajt.set(n,{resolve:t,progress:e,reject:s,jjt:!1,maxWorkerNum:r})});return h&&h.G0(()=>this.zjt(n)),this.Ljt.postMessage(o,i),this.Bjt(),a}Tjt(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const h=this.Njt++,r={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:h,params:s,transferables:i};this.Ljt.postMessage(r,i)}zjt(t){const s=this.Ajt.get(t);s&&(s.jjt=!0,s.resolve=null,s.progress=null,s.reject=null,this.Ljt.postMessage({type:"_cancel",jobId:t}))}Ojt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.Ujt(e,s.result);break;case"progress":this.Wjt(e,s.progress);break;case"error":this.Qjt(e,s.error);break;case"ready":this.Jjt();break;default:throw new Error(`unknown message from worker '${i}'`)}}Ujt(t,s){const i=this.Ajt.get(t);if(!i)throw new Error("invalid job ID");i.jjt||i.resolve(s),this.Ajt.delete(t)}Wjt(t,s){const i=this.Ajt.get(t);if(!i)throw new Error("invalid job ID");!i.jjt&&i.progress&&i.progress(s)}Qjt(t,s){const i=this.Ajt.get(t);if(!i)throw new Error("invalid job ID");i.jjt||i.reject(s),this.Ajt.delete(t)}Jjt(){this.kjt&&(this.kjt=!1,this.Pjt++,this.Pjt<this.Rjt?this.Bjt():this.Ljt.postMessage({type:"_no_more_workers"}))}Vjt(){let t=0,s=[...this.Ajt.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async Bjt(){if(!(this.Pjt>=this.Rjt||this.kjt||this.Fjt||this.Vjt()<=this.Pjt))try{this.kjt=!0;const t=await this.pf.QR("runtime","create-job-worker");t.outputPort.onmessage=t=>this.Ojt(t)}catch(t){this.Fjt=!0,this.kjt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.Pjt} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.vignette={j3t:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform mediump float vignetteStart;\nuniform mediump float vignetteEnd;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp float a = front.a;\nif (a != 0.0)\nfront.rgb /= a;\nmediump vec2 tex = (vTex - srcStart) / (srcEnd - srcStart);\nlowp float d = distance(tex, vec2(0.5, 0.5));\nfront.rgb *= smoothstep(vignetteEnd, vignetteStart, d);\nfront.rgb *= a;\ngl_FragColor = front;\n}",F3t:"",P3t:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nvignetteStart : f32,\nvignetteEnd : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3PARAMS_STRUCT%%\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\nconst center : vec2<f32> = vec2<f32>(0.5);\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = c3_unpremultiply(textureSample(textureFront, samplerFront, input.fragUV));\nvar rgb : vec3<f32> = front.rgb;\nvar tex : vec2<f32> = c3_srcToNorm(input.fragUV);\nvar d : f32 = distance(tex, center);\nrgb = rgb * smoothstep(shaderParams.vignetteEnd, shaderParams.vignetteStart, d);\nvar output : FragmentOutput;\noutput.color = vec4<f32>(rgb * front.a, front.a);\nreturn output;\n}",WS:!1,JS:!1,ES:0,AS:0,LS:!1,RS:!1,kS:!0,jS:!1,BS:!1,parameters:[["vignetteStart",0,"percent"],["vignetteEnd",0,"percent"]]},self.C3_Shaders.emboss={j3t:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp float intensity;\nuniform mediump vec2 pixelSize;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp vec3 color = vec3(0.5);\ncolor -= texture2D(samplerFront, vTex - pixelSize).rgb * 2.0;\ncolor += texture2D(samplerFront, vTex + pixelSize).rgb * 2.0;\ncolor = vec3(color.r * 0.299 + color.g * 0.587 + color.b * 0.114);\ngl_FragColor = mix(front, vec4(color * front.a, front.a), intensity);\n}",F3t:"",P3t:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nintensity : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar pixelSize : vec2<f32> = c3_getPixelSize(textureFront);\nvar color : vec3<f32> = vec3<f32>(0.5)\n- textureSample(textureFront, samplerFront, input.fragUV - pixelSize).rgb * 2.0\n+ textureSample(textureFront, samplerFront, input.fragUV + pixelSize).rgb * 2.0;\ncolor = vec3<f32>(c3_grayscale(color));\nvar output : FragmentOutput;\noutput.color = mix(front, vec4<f32>(color * front.a, front.a), shaderParams.intensity);\nreturn output;\n}",WS:!1,JS:!1,ES:0,AS:0,LS:!1,RS:!1,kS:!1,jS:!1,BS:!1,parameters:[["intensity",0,"percent"]]};{let w=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const h=""+i,r=""+e;return h<r?-1:r<h?1:0}},S=(w,self.ks),i=null,e="",h="",r=[],n="",o="",a="",T=S.lr(S.Y0t);S.Tq.Sq=class extends S.evt{constructor(t){super(t),this.U0t=this.pf.d3().sW(),this._ft=this.pf.d3().C3(),this.Yjt=0,this.Hjt=0,this.qjt=new Map}cr(){super.cr()}UR(){this.pf.UR()}Nj(t){this.pf.Nj(t,null,null)}Zjt(t,s){return i&&t===e&&s===h||(i=new RegExp(t,s),e=t,h=s),i.lastIndex=0,i}Xjt(t,s,i){if(t!==n||s!==o||i!==a){const e=this.Zjt(s,i);r=t.match(e),n=t,o=s,a=i}return r}async Kjt(t,s){if(s.length){this.Yjt+=s.length;const i=[];for(const e of s)i.push(t.B9(e));await S.do(i,()=>{this.Hjt++}),this.Hjt++,this.Hjt===this.Yjt&&(this.Hjt=0,this.Yjt=0,this.pf.Nj(S.Tq.Sq.wq.$jt,null,null))}}MJ(){return 0===this.Yjt?1:this.Hjt/this.Yjt}t5t(t,s){for(const i of s)0===i.X4()&&t.J9(i)}s5t(){return T}i5t(s){const i=this.pf.d3(),t=i.C3(),e=t.K6(),h=e.S3(),r=h.X6(),n=e._0t(),o=t.tW(h),a=i.sW(),u=a.tW();if(u.J0t(s),n)for(let t=0;t<s&&!u.lW();++t)i.rW(r),u.aW(t),h.nW(e,o),i.oW(r);else for(let t=0;t<s&&!u.lW();++t)u.aW(t),h.nW(e,o);return t.cW(),a.cW(),!1}*e5t(s){const i=this.pf.d3(),t=i.C3(),e=t.K6(),h=e.S3(),r=h.X6(),n=e._0t(),o=t.tW(h),a=i.sW(),u=a.tW();if(u.J0t(s),n)for(let t=0;t<s&&!u.lW();++t)i.rW(r),u.aW(t),yield*h.dyt(e,o),i.oW(r);else for(let t=0;t<s&&!u.lW();++t)u.aW(t),yield*h.dyt(e,o);return t.cW(),a.cW(),!1}h5t(){const s=this.pf.d3(),t=s.C3(),i=t.K6(),e=i.S3(),h=e.X6(),r=i._0t(),n=t.tW(e),o=s.sW(),a=o.tW();if(r)for(let t=0;!a.lW();++t)s.rW(h),a.aW(t),e.nW(i,n)||a.jB(),s.oW(h);else for(let t=0;!a.lW();++t)a.aW(t),e.nW(i,n)||a.jB();return t.cW(),o.cW(),!1}*r5t(){const s=this.pf.d3(),t=s.C3(),i=t.K6(),e=i.S3(),h=e.X6(),r=i._0t(),n=t.tW(e),o=s.sW(),a=o.tW();if(r)for(let t=0;!a.lW();++t){s.rW(h),a.aW(t);const u=yield*e.dyt(i,n);u||a.jB(),s.oW(h)}else for(let t=0;!a.lW();++t){a.aW(t);const l=yield*e.dyt(i,n);l||a.jB()}return t.cW(),o.cW(),!1}n5t(t,s,i){const e=this.pf.d3(),h=e.C3(),r=h.K6(),n=r.S3(),o=n.X6(),a=r._0t(),u=h.tW(n),l=e.sW(),c=l.tW();if(c.iW(t),c.J0t(i),i<s)if(a)for(let t=s;t>=i&&!c.lW();--t)e.rW(o),c.aW(t),n.nW(r,u),e.oW(o);else for(let t=s;t>=i&&!c.lW();--t)c.aW(t),n.nW(r,u);else if(a)for(let t=s;t<=i&&!c.lW();++t)e.rW(o),c.aW(t),n.nW(r,u),e.oW(o);else for(let t=s;t<=i&&!c.lW();++t)c.aW(t),n.nW(r,u);return h.cW(),l.cW(),!1}*o5t(t,s,i){const e=this.pf.d3(),h=e.C3(),r=h.K6(),n=r.S3(),o=n.X6(),a=r._0t(),u=h.tW(n),l=e.sW(),c=l.tW();if(c.iW(t),c.J0t(i),i<s)if(a)for(let t=s;t>=i&&!c.lW();--t)e.rW(o),c.aW(t),yield*n.dyt(r,u),e.oW(o);else for(let t=s;t>=i&&!c.lW();--t)c.aW(t),yield*n.dyt(r,u);else if(a)for(let t=s;t<=i&&!c.lW();++t)e.rW(o),c.aW(t),yield*n.dyt(r,u),e.oW(o);else for(let t=s;t<=i&&!c.lW();++t)c.aW(t),yield*n.dyt(r,u);return h.cW(),l.cW(),!1}a5t(i){const t=i.q4(),s=t.H4();if(0!==s.length){const e=this.pf.d3(),h=e.C3(),r=h.K6(),n=r.S3(),o=n.X6(),a=r._0t(),u=h.tW(n),l=e.sW(),c=l.tW(),f=i.ij(),d=T.tW();if(S.Yn(d,s),c.J0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.lW();++t){e.rW(o);const p=d[t];i.q4().Uft(p),f&&p.Imt(),c.aW(t),n.nW(r,u),e.oW(o)}else{t.jft(!1);const m=t.zft();S.Wn(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.lW();++t){const g=d[t];m[0]=g,f&&g.Imt(),c.aW(t),n.nW(r,u)}}h.cW(),l.cW(),S.Wn(d),T.cW()}return!1}*u5t(i){const t=i.q4(),s=t.H4();if(0!==s.length){const e=this.pf.d3(),h=e.C3(),r=h.K6(),n=r.S3(),o=n.X6(),a=r._0t(),u=h.tW(n),l=e.sW(),c=l.tW(),f=i.ij(),d=T.tW();if(S.Yn(d,s),c.J0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.lW();++t){e.rW(o);const p=d[t];i.q4().Uft(p),f&&p.Imt(),c.aW(t),yield*n.dyt(r,u),e.oW(o)}else{t.jft(!1);const m=t.zft();S.Wn(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.lW();++t){const g=d[t];m[0]=g,f&&g.Imt(),c.aW(t),yield*n.dyt(r,u)}}h.cW(),l.cW(),S.Wn(d),T.cW()}return!1}l5t(i,t){const s=i.q4(),e=s.H4();if(0!==e.length){const h=this.pf.d3(),r=h.C3(),n=h.zdt(),o=r.K6(),a=o.S3(),u=a.X6(),l=o._0t(),c=r.tW(a),f=h.sW(),d=f.tW(),p=i.ij(),m=T.tW();S.Wn(m),d.J0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.CSt(1,t)]);if(m.sort(w),1===t&&m.reverse(),l)for(let t=0,s=m.length;t<s&&!d.lW();++t){h.rW(u);const g=m[t][0];i.q4().Uft(g),p&&g.Imt(),d.aW(t),a.nW(o,c),h.oW(u)}else{s.jft(!1);const y=s.zft();S.Wn(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.lW();++t){const M=m[t][0];y[0]=M,p&&M.Imt(),d.aW(t),a.nW(o,c)}}r.cW(),f.cW(),S.Wn(m),T.cW()}return!1}*c5t(i,t){const s=i.q4(),e=s.H4();if(0!==e.length){const h=this.pf.d3(),r=h.C3(),n=h.zdt(),o=r.K6(),a=o.S3(),u=a.X6(),l=o._0t(),c=r.tW(a),f=h.sW(),d=f.tW(),p=i.ij(),m=T.tW();S.Wn(m),d.J0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.CSt(1,t)]);if(m.sort(w),1===t&&m.reverse(),l)for(let t=0,s=m.length;t<s&&!d.lW();++t){h.rW(u);const g=m[t][0];i.q4().Uft(g),p&&g.Imt(),d.aW(t),yield*a.dyt(o,c),h.oW(u)}else{s.jft(!1);const y=s.zft();S.Wn(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.lW();++t){const M=m[t][0];y[0]=M,p&&M.Imt(),d.aW(t),yield*a.dyt(o,c)}}r.cW(),f.cW(),S.Wn(m),T.cW()}return!1}f5t(t,s){let i=this.qjt.get(t);if(!i){if(!s)return null;i={d5t:null,p5t:new Map},this.qjt.set(t,i)}return i}m5t(t,s,i,e,h){s.M3().Eyt(i,s.v3()),e&&t.oW(h)}*g5t(t,s,i,e,h){yield*s.M3().Dyt(i,s.v3()),e&&t.oW(h)}}}{const ka=self.ks;ka.Tq.Sq.SCt=class extends ka.nr{constructor(t){super(),this.Sft=t,this.pf=t.iP(),this.Uvt=t.F4()}Ivt(){}cr(){this.Sft=null,this.pf=null,this.Uvt=null}}}{const Fa=self.ks;Fa.Tq.Sq.Instance=class extends Fa.nr{constructor(t,s){super(),this.Gi=t,this.Sft=this.Gi.QF(),this.Hvt=this.Sft.hTt(),this.pf=this.Gi.iP()}cr(){this.Gi=null,this.Sft=null,this.Hvt=null,this.pf=null}}}{const x=self.ks,ja=[];x.Tq.Sq.wq={y5t(){return!0},Mq(){return!0},Dq(){return!0},pFt(){return!0},mFt(){return!0},O3(){return this.pf.O3()},lgt(){const t=this.pf.jdt();return!t.v0t()&&!t.T0t()},M5t(){let t=this.pf.zdt(),s=t.pSt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.pf.jtt();return s.set("TriggerOnce_lastTick",e),this.pf.HFt()||i!==e-1},w5t(t){const s=this.pf.zdt(),i=s.pSt(),e=i.get("Every_lastTime")||0,h=this.pf.z3(),r=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+r<=h?(i.set("Every_lastTime",e+r),h>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",h),i.set("Every_seconds",t),!0):(h<e-.1&&i.set("Every_lastTime",h),!1)},Ipt(t){const s=this.pf.d3().o1t(t);return s&&s.Ipt()},ZRt(){return this.pf.ZRt()},Si(){return x.li.Si},Zkt(){return!0},S5t(){return!0},T5t(){return!0},njt(){return!0},cjt(){return!0},ajt(){return!0},ujt(){return!0},b5t(t){return!!this.pf.DR(t)},v5t(t){switch(t){case 0:return"browser"===x.li.Mi;case 1:return"iOS"===x.li.ci;case 2:return"Android"===x.li.ci;case 8:return"cordova"===x.li.Mi;case 9:return"scirra-arcade"===this.pf.zP();case 10:return"nwjs"===x.li.Mi;case 13:return"windows-uwp"===this.pf.zP();default:return!1}},x5t(t,s,i){const e=this.Zjt(s,i);return e.test(t)},G5t(t,s,i){return x.compare(t,s,i)},I5t(t,s,i){return s<=t&&t<=i},C5t(t,s,i){return x.compare(t.Let(),s,i)},_5t(t){return!!t.Let()},E5t(t,s){const i=this.pf.z3();if(0!==t)return x.compare(i,t,s);{const e=this.pf.zdt(),h=e.pSt();return!h.get("CompareTime_executed")&&s<=i&&(h.set("CompareTime_executed",!0),!0)}},D5t(t){return isNaN(t)},xbt(t,s,i){return x.Dr(x.br(t),x.br(i))<=x.br(s)},Gbt(t,s){return x.Nr(x.br(t),x.br(s))},RTt(t,s,i){let e=x.br(t),h=x.br(s),r=x.br(i),n=!x.Nr(r,h);return n?!(!x.Nr(e,h)&&x.Nr(e,r)):x.Nr(e,h)&&!x.Nr(e,r)},A5t(t,s){return"number"==typeof t?0===s:1===s},N5t(t){return!!t},hpt(t){return t.toLowerCase()===this.pf.d3().apt()},L5t(t,i,e,h){if(!t)return!1;let s=this.s5t(),r=s.tW(),n=t.q4(),o=(x.Yn(r,n.H4()),n.Nft()&&x.Wn(n.Bft()),this.pf.zdt()),a=0;for(let t=0,s=r.length;t<s;++t){const l=r[t];r[a]=l,i=o.CSt(1,t),h=o.CSt(3,t),x.compare(i,e,h)?++a:n.Fft(l)}x.Un(r,a),n.Wft(r);const u=!!r.length;return x.Wn(r),s.cW(),t.byt(),u},O5t(t,s){if(!t)return!1;let i=this.s5t(),e=i.tW(),h=t.q4(),r=(x.Yn(e,h.H4()),h.Nft()&&x.Wn(h.Bft()),this.pf.zdt()),n=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[n]=a,r.CSt(1,t)?++n:h.Fft(a)}x.Un(e,n),h.Wft(e);const o=!!e.length;return x.Wn(e),i.cW(),t.byt(),o},R5t(t,i,e){if(!t)return!1;const s=t.q4(),h=s.H4();if(0===h.length)return!1;let r=this.pf.zdt(),n=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t];e=r.CSt(2,t),(null===n||0===i&&e<o||1===i&&e>o)&&(o=e,n=a)}return s.Hft(n),t.byt(),!0},P5t(t,s){if(!t)return!1;const i=t.q4(),e=i.H4();if((s=Math.floor(s))>=e.length)return!1;const h=e[s];return i.Hft(h),t.byt(),!0},k5t(t){if(!t)return!1;const s=t.q4(),i=s.H4(),e=Math.floor(this.pf.fR()*i.length);if(e>=i.length)return!1;const h=i[e];return s.Hft(h),t.byt(),!0},F5t(t){if(!t)return!1;if(!t.X4())return!1;const s=t.q4();return s.jft(!0),t.byt(),!0},j5t(t,i,e){if(!t)return!1;const h=t.q4(),s=h.H4(),r=this.pf.S3(),n=r.qft(),o=this.pf.zdt().uSt();h.Nft()?(x.Yn(ja,s),h.Aft(),h.jft(!1)):n?(x.Yn(ja,h.Bft()),x.Wn(h.Bft())):(x.Yn(ja,h.zft()),x.Wn(h.zft()));for(let t=0,s=ja.length;t<s;++t){const a=ja[t];x.xor(a.RR().R5(i,e),o)?h.kft(a):h.Fft(a)}return t.byt(),x.xor(!!h.zft().length,o)},z5t(s){if(!s)return!1;let i=s.eY(),e=null,h=this.pf.l_t();for(let t=h.length-1;0<=t;--t){const r=h[t];if(i){if(r.QF().lTt(s)){e=r;break}}else if(r.QF()===s){e=r;break}}if(!e){const n=s.H4();n.length&&(e=n.at(-1))}if(!e)return!1;const t=s.q4();return t.Hft(e),s.byt(),!0},B5t(t){return this.pf.o2t()?this.e5t(t):this.i5t(t)},U5t(){return this.pf.o2t()?this.r5t():this.h5t()},W5t(t,s,i){return this.pf.o2t()?this.o5t(t,s,i):this.n5t(t,s,i)},Md(t){return this.pf.o2t()?this.u5t(t):this.a5t(t)},Q5t(t,s,i){return this.pf.o2t()?this.c5t(t,i):this.l5t(t,i)},J5t(t){return!!t&&t.sF()},V5t(t){return!!t&&t.aF()},Y5t(t){return!!t&&t.rF()},H5t(t){return!!t&&!t.X4()},q5t(t,s,i){return!!t&&x.compare(100*t.BD(),s,i)},Z5t(t){const s=this.pf.dR();return!!s&&s.I9(t)},$jt(){return!0},X5t(){return 0<this.Yjt},K5t(t,s){const i=this.pf.yEt();return!!i&&!!s&&!!i.Uut(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},g=function(t,s){return t[1]-s[1]};m,g;const za=self.ks,Ba=[],Ua=[],Wa=za.lr(za.Rect),Qa=za.lr(za.Ho),Ja=[];za.Tq.Sq.ort={$5t(t,s){t.mht(s)},tzt(t,s){t.de()&&"number"!=typeof s&&(s=parseFloat(s)),t.mht(t.Let()+s)},szt(t,s){t.de()&&t.mht(t.Let()-s)},izt(t,s){t.mht(!!s)},ezt(t){t.mht(!t.Let())},hzt(t){t.mht(t.Fdt())},rzt(t){this.pf.d3().r1t(t)},nzt(t,s,i,e,h,r){if(t&&s){const n=this.pf.sk(t,s,i,e,h,r);if(n){h&&s.ik(n);const o=this.pf.d3(),a=(o.ek(!0),n.hk(),o.ek(!1),new Map);n.aEt(a,t,h);for(const[u,l]of a)u.q4().Qft(l)}}},ozt(t,s,i,e,h,r){if(t&&s){const n=this.pf.sFt(t);n&&za.Tq.Sq.ort.nzt.call(this,n,s,i,e,h,r)}},sY(h,r,n,o,a,t,u,l,c,f,d){if(h){let s=this.pf.LR(),i=s;if(t){const p=this.pf.gR().lZ(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof u||0<=u)||(e=i.PR(u))){let t=null;if(!("number"!=typeof l||0<=l)||(t=s.PR(l))){Wa.set(r,n,o,a);const m=i.sY(h,Wa,e,t,c,f,d);h.q4().Wft(m),h.byt()}}}},azt(){const t=this.U0t;t.F0t()&&t.P0t().jB()},Cpt(t,s){const i=this.pf.d3().o1t(t);i&&(0===s?i.Cpt(!1):1===s?i.Cpt(!0):i.Cpt(!i.Ipt()))},uzt(t){this.pf.Q3(t)},lzt(t,s){if(s<0&&(s=0),t){const i=t.q4(),e=i.H4();for(const h of e)h.Q3(s)}},czt(t){if(t){const s=t.q4(),i=s.H4();for(const e of i)e.cj()}},kn(t,s){if(!(t<0)){const i=this.pf.d3().B1t();return s?i.Hbt(t):i.qbt(t),!0}},N3(t){return this.pf.d3().B1t().Zbt(t),!0},fzt(){const t=this.pf.d3();return t.B1t().Xbt(t.ept()),!0},D3(t){this.pf.d3().D3(t)},async ERt(t,s,i,e,h,r){const n=this.pf.QP();n&&(this.UR(),await n.ERt(0===t?"image/png":"image/jpeg",s/100,i,e,h,r),await this.pf.Oj(za.Tq.Sq.wq.S5t,null))},dzt(t,s){if(!(t<=0||s<=0)){this.pf.tRt(t,s),this.pf.LR().S7();const i=this.pf.QP();i&&("off"!==i.Y3t()&&this.pf.eFt(t,s),i.c_(i.ZU(),i.XU(),!0),this.pf.UR())}},pzt(t){const s=this.pf.QP();s&&"off"!==s.Y3t()&&(s.oRt(0!==t?"high":"low"),s.c_(s.ZU(),s.XU(),!0))},Hit(t){this.pf.KFt(t)},mzt(){this.pf.$Ft()},gzt(t){this.pf.tjt(t)},yzt(t){this.pf.ibt(t)},Mzt(t){},wzt(){for(const t of this.pf.gR().wR())t.jq()},Szt(t){this.pf.qFt(0!==t)},Tzt(t,s){this.pf.oR(1/t),this.pf.hR(1/s)},bzt(t,s){this.pf.hR(t),this.pf.oR(s)},vzt(t){this.pf.sR(["vsync","unlimited-tick","unlimited-frame"][t])},xzt(t,i){if(t){const s=t.q4(),e=s.H4(),h=Ba,r=Ua,n=this.pf.LR(),o=t.eY(),a=t.QMt();for(let t=0,s=e.length;t<s;++t){const u=e[t],l=u.RR();if(l){let t;t=o?u.tnt(i+u.QF().WMt(a)):u.tnt(i),h.push([l.PR().LO(),l.kR()]),r.push([u,t])}}if(h.length){h.sort(m),r.sort(g);let i=!1;for(let t=0,s=h.length;t<s;++t){const c=r[t][0],f=n.FR(h[t][0]),d=h[t][1],p=f.jR();p[d]!==c&&((p[d]=c).RR().zR(f,!0),f.BR(c),i=!0)}i&&this.pf.UR(),za.Wn(Ba),za.Wn(Ua)}}},_P(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.pf.zO()._P(t,s)},Gzt(t){if(!this.pf.Hg()){const s=this.pf.gR();s.TR()||s.bR(t)}},Izt(t){if(!this.pf.Hg()){const s=this.pf.gR();if(!s.TR()){const i=s.lZ(t);i&&s.bR(i)}}},Czt(t){if(!this.pf.Hg()){const s=this.pf.gR();if(!s.TR()){const i=s.wR(),e=i.indexOf(s.dR());if((!t||0!==e)&&(t||e!==i.length-1)){const h=i[e+(t?-1:1)];s.bR(h)}}}},_zt(){if(!this.pf.Hg()){const t=this.pf.gR();t.TR()||(t.bR(t.dR()),this.pf.d3().c1t())}},Ezt(t,s){t&&t.$k(s)},Dzt(t,s){t&&t.eF(s)},Azt(t,s){t&&t.nF(s)},Nzt(t,s){t&&t.WD(s/100)},Lzt(t,s){t&&t.uF(s)},Ozt(t,s){t&&t.cF(s)},Rzt(t,s){t&&t.gk(za.br(+s))},Pzt(t,s,i){t&&(t.CF(!0),t.Mk(s),t.Sk(i))},kzt(t){t&&t.CF(!1)},Fzt(t,s,i){t&&t.kY(s/100,i/100)},jzt(t,s){t&&t.AT(+s)},zzt(t,s){if(t){Qa.Ca(s),Qa.Sr();const i=t.IF();i.Ma(Qa)||(i.ua(Qa),this.UR())}},Bzt(t,s){t&&t.SF(s)},Uzt(t,s){t&&t.pT(s)},Wzt(t,s,i){if(t){const e=t.lk(),h=e.Bht(i);if(h){const r=1===s;h.ymt()!==r&&(h.ONt(r),t.Xz(),this.pf.UR())}}},Qzt(t,s,i,e){if(t){const h=t.lk(),r=h.Bht(s);if(r){i=Math.floor(i);const n=r.Tx().vx(i);if(n){"color"===n?(Qa.Ca(e),e=Qa):"percent"===n&&(e/=100);const o=h.$z(r.LO(),i,e);o&&r.ymt()&&this.pf.UR()}}}},Jzt(t,s){t&&t.vF(s)},Vzt(t){this.pf.LR().pk(+t)},Yzt(t){this.pf.LR().gk(za.br(+t))},Hzt(t,s){const i=this.pf.LR(),e=i.lk(),h=e.Bht(s);if(h){const r=1===t;h.ymt()!==r&&(h.ONt(r),i.Xz(),this.pf.UR())}},qzt(t,s,i){const e=this.pf.LR(),h=e.lk(),r=h.Bht(t);if(r){s=Math.floor(s);const n=r.Tx().vx(s);if(n){"color"===n?(Qa.Ca(i),i=Qa):"percent"===n&&(i/=100);const o=h.$z(r.LO(),s,i);o&&r.ymt()&&this.pf.UR()}}},Zzt(t,s){const i=this.pf.LR();i.jk(t/100,s/100)},Xzt(t){const s=this.pf.LR();0===t?s.Uk():s.Wk()},Kzt(t){const s=this.pf.LR();s.Mk(t)},$zt(t){const s=this.pf.LR();s.Sk(t)},tBt(t,s){const i=this.pf.LR();i.Mk(t),i.Sk(s)},sBt(t){if(t){const s=t.XTt();if(s){const i=s.RR();if(i){const e=this.pf.LR();e.Mk(i.GT()),e.Sk(i._T())}}}},Ak(t,s,i){const e=this.pf.LR();try{e.Ak(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},Lk(t,s,i){if(t){const e=this.pf.LR();try{e.Lk(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},Rk(t){if(t){const s=this.pf.LR();s.Rk(t)}},kk(){this.pf.LR().kk()},async iBt(t){const s=this.pf.dR();if(s&&t&&!this.pf.Hg()){const i=t.eY()?t.pgt():[t];await this.Kjt(s,i)}},async eBt(t){await za.Tq.Sq.ort.iBt.call(this,this.pf.sFt(t))},hBt(t){const s=this.pf.dR();if(s&&t){const i=t.eY()?t.pgt():[t];this.t5t(s,i)}},rBt(t){za.Tq.Sq.ort.hBt.call(this,this.pf.sFt(t))},nBt(){const t=this.pf.dR();if(t){const s=t.F9();this.t5t(t,s)}},async oBt(t){const s=this.pf.dR();t&&s&&!this.pf.Hg()&&await this.Kjt(s,t.R9())},async aBt(t){const s=this.pf.dR(),i=this.pf.gR().lZ(t);i&&s&&!this.pf.Hg()&&await this.Kjt(s,i.R9())},E3(t){const s=this._ft.I3();if(s)switch(s._3()){case 1:"number"==typeof t&&s.E3(t);break;case 2:"string"==typeof t&&s.E3(t);break;case 3:s.E3(t)}},uBt(t,s,i){const e=this.f5t(t.toLowerCase(),!0),h=e.p5t,r=s.toLowerCase(),n=(h.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),za.first(h.values())||e.d5t);if(n){const o=0!==n.x3(),a=0!==i.x3();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}h.set(r,i)},lBt(t,s){const i=this.f5t(t.toLowerCase(),!0),e=(i.d5t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),za.first(i.p5t.values())||i.d5t);if(e){const h=0!==e.x3(),r=0!==s.x3();if(h!=r)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.d5t=s},cBt(t,s,i){const e=this.pf,h=e.o2t()?Ja:null,r=(i=Math.floor(i),this.f5t(t.toLowerCase(),!1));if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),h;let n=r.p5t.get(s.toLowerCase());if(!n){if(!r.d5t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),h;n=r.d5t,i=0}if(!n.tc())return h;if(0!==n.x3())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),h;const o=e.d3(),a=o.S3(),u=a.w3(),l=0<u.length,c=(l&&(n.v3()?o.rW(u):o.j1t(u)),[]),f=o.Lpt(a);if(f){const p=f.Rpt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].Let())}const d=n.Rpt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Fdt());return e.o2t()?this.g5t(o,n,c,l,u):this.m5t(o,n,c,l,u)}}}{const G=self.ks;G.Tq.Sq.art={fBt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},P(t){return t.toString()},Vt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.pf.fR()*t:this.pf.fR()*(s-t)+t},_Mt(...t){const s=Math.floor(this.pf.fR()*t.length);return t[s]},dBt(t,...s){return"number"!=typeof t&&(t=0),s[t=G.Sr(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},pBt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},mBt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(G.br(t))},cos(t){return Math.cos(G.br(t))},tan(t){return Math.tan(G.br(t))},asin(t){return G.vr(Math.asin(t))},acos(t){return G.vr(Math.acos(t))},atan(t){return G.vr(Math.atan(t))},exp(t){return Math.exp(t)},Kt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},Sr(t,s,i){return G.Sr(t,s,i)},Dt(t,s,i,e){return G.Cr(t,s,i,e)},angle(t,s,i,e){return G.vr(G.Er(t,s,i,e))},Pt(t,s,i){return G.Pt(t,s,i)},kr(t,s,i){return G.kr(t,s,i)},jr(t,s,i,e){return G.jr(t,s,i,e)},zr(t,s,i,e,h){return G.zr(t,s,i,e,h)},Br(t,s,i){return G.Br(t,s,i)},gBt(t,s){return G.vr(G.Dr(G.br(t),G.br(s)))},yBt(t,s,i){return G.vr(G.Lr(G.br(t),G.br(s),i))},MBt(t,s,i){return G.vr(G.Ar(G.br(t),G.br(s),G.br(i)))},wBt(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},SBt(t,s){return(t|=0)^1<<(0|s)},TBt(t,s){return(t|=0)&1<<(0|s)?1:0},bBt(){return"\n"},vBt(t){return"string"==typeof t?t.toUpperCase():""},xBt(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},GBt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},IBt(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(G.le(s),"i")):-1},CBt(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(G.le(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(G.le(s),"gi"),i):"string"==typeof t?t:""},_Bt(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},EBt(t,s,i){const e=this.Zjt(s,i);return t?t.search(e):-1},DBt(t,s,i,e){const h=this.Zjt(s,i);return t?t.replace(h,e):""},ABt(t,s,i){const e=this.Xjt(t.toString(),s,i);return e?e.length:0},NBt(t,s,i,e){e=Math.floor(e);const h=this.Xjt(t.toString(),s,i);return!h||e<0||e>=h.length?"":h[e]},LBt(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},OBt(t){return encodeURIComponent(t)},RBt(t){return decodeURIComponent(t)},R3(){return this.pf.UX()},PBt(){return this.pf.WX()},timescale(){return this.pf.W3()},kBt(){return(Date.now()-this.pf.kFt())/1e3},FBt(){return Date.now()},time(){return this.pf.z3()},tickcount(){return this.pf.jtt()},jBt(){return this.pf.zFt()},fps(){return this.pf.J3()},zBt(){return this.pf.q3()},BBt(){return this.pf.X3()},UBt(){return this.pf.QP().KP()},WBt(){return this.pf.QP().t4()},QBt(){return this.pf.KO()},JBt(){return this.pf.t3()},VBt(){return this.pf.KO()},YBt(){return this.pf.t3()},HBt(){return this.pf.LR().wk()},qBt(){return this.pf.LR().Tk()},ZBt(){return this.pf.LR().hf()},XBt(){return this.pf.LR().mk()},KBt(){return G.vr(this.pf.LR().yk())},$Bt(){return this.pf.LR().ym()},tUt(){return this.pf.LR()._m()},sUt(){return 100*this.pf.LR().DY()},iUt(){return 100*this.pf.LR().AY()},eUt(t){const s=this.pf.LR().PR(t);return s?s.EY().Iu():0},hUt(t){const s=this.pf.LR().PR(t);return s?s.EY().Cu():0},rUt(t){const s=this.pf.LR().PR(t);return s?s.EY()._u():0},nUt(t){const s=this.pf.LR().PR(t);return s?s.EY().Eu():0},oUt(t){const s=this.pf.LR().PR(t);return s?s.EY().width():0},aUt(t){const s=this.pf.LR().PR(t);return s?s.EY().height():0},uUt(t){const s=this.pf.LR().PR(t);if(s){const i=s.EY();return(i.Iu()+i._u())/2}return 0},lUt(t){const s=this.pf.LR().PR(t);if(s){const i=s.EY();return(i.Cu()+i.Eu())/2}return 0},cUt(t,s,i){const e=this.pf.LR().PR(t);return e?e.AF(s,i)[0]:0},fUt(t,s,i){const e=this.pf.LR().PR(t);return e?e.AF(s,i)[1]:0},dUt(t,s,i){const e=this.pf.LR().PR(t);return e?e.RF(s,i)[0]:0},pUt(t,s,i){const e=this.pf.LR().PR(t);return e?e.RF(s,i)[1]:0},mUt(t,s,i,e){const h=this.pf.LR(),r=h.PR(t),n=h.PR(s);if(!r||!n||r===n)return i;const[o,a]=r.RF(i,e);return n.AF(o,a)[0]},gUt(t,s,i,e){const h=this.pf.LR(),r=h.PR(t),n=h.PR(s);if(!r||!n||r===n)return e;const[o,a]=r.RF(i,e);return n.AF(o,a)[1]},yUt(t){const s=this.pf.LR().PR(t);return s?s.lF():0},MUt(t){const s=this.pf.LR().PR(t);return s?G.vr(s.dF()):0},wUt(t){const s=this.pf.LR().PR(t);return s?100*s.BD():0},SUt(t){const s=this.pf.LR().PR(t);return s?s.fF():0},TUt(t){const s=this.pf.LR().PR(t);return s?s.wk():0},bUt(t){const s=this.pf.LR().PR(t);return s?s.Tk():0},vUt(t){const s=this.pf.LR().PR(t);return s?100*s.mF():0},xUt(t){const s=this.pf.LR().PR(t);return s?100*s.yF():0},GUt(t){const s=this.pf.LR().PR(t);return s?s.DT():0},IUt(t){const s=this.pf.LR().PR(t);return s?s.LO():-1},CUt(){const t=this.pf.QP();return t?t.ARt():""},_Ut(t){const s=this.U0t;if(!s.F0t())return 0;if(t){const i=s.z0t(t);return i?i.LO():0}return s.P0t().LO()},EUt(){return this.pf.sjt()},DUt(t,s,...i){const e=this.f5t(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let h=e.p5t.get(s.toLowerCase());if(!h){if(!e.d5t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;h=e.d5t}const r=h.x3(),n=h.g3();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!h.tc())return n;const o=this.pf,a=o.d3(),u=a.S3(),l=u.w3(),c=0<l.length,f=(c&&(h.v3()?a.rW(l):a.j1t(l)),h.Rpt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].Fdt());const d=h.M3(),p=d.b3(d.w3(),h.v3(),r,n,...i);return c&&a.oW(l),p},AUt(){return this.pf.kO().uR()},NUt(){return this.MJ()},renderer(){return this.pf.pRt()?"webgpu":"webgl"},LUt(){return this.pf.pRt()?this.pf.pRt().GetAdapterInfoString():this.pf.dRt().ZA()},OUt(){let t=this.pf.HS().bS();return Math.round(100*t/1048576)/100},RUt(t,s,i){return G.Hr(t,s,i)},PUt(t,s,i){return G.Zr(t/100,s/100,i/100)},kUt(t,s,i,e){return G.qr(t/100,s/100,i/100,e/100)},FUt(t,s,i){return G.Zr(t/255,s/255,i/255)},jUt(t,s,i,e){return G.qr(t/255,s/255,i/255,e/255)},zUt(){return this.pf.QO()},BUt(){return this.pf.VO()},UUt(){return this.pf.S3().x9().hf()},WUt(){return this.pf.S3().Ngt()}}}{const Va=self.ks;Va.Tq.Qht=class extends Va.evt{constructor(t){super(t)}cr(){super.cr()}}}{const Ya=self.ks,Ha=self.Hs,qa=[],Za=(Ya.Tq.Qht.SCt=class extends Ya.Bvt{constructor(t){super(t),this.dCt=t.KCt()}cr(){Ya.Wn(this.dCt),super.cr()}Ivt(){for(const t of this.dCt)t.pIt(this.pf)}z9(s){const i={_2:this.pf.s3()};return Promise.all(this.dCt.map(t=>t.mIt(s,i)))}V9(){for(const t of this.dCt)t.gIt()}W9(){this.QUt()}QUt(){for(const t of this.Sft.Y4())t.Nz().JUt()}SSt(t){Ya.Tq.Qht.Rbt(this,t)}rTt(t){qa.push({Jvt:null,VUt:!1,instances:[]})}YUt(t,s,i){const e=qa.at(-1);e.Jvt=t,e.VUt=i,e.instances.push(s)}nTt(t){const s=qa.pop(),i=s.Jvt,e=s.VUt;if(i){const h=new Map;for(const r of s.instances)r.aEt(h,i,e);for(const[n,o]of h)n.q4().Qft(o)}}HUt(t){const s=this.QF().e_t(t),i=this.iP(),e=s.yIt(0);return e.gB().QW(i.HS(),{_2:i.s3()}).then(()=>this.QUt()),s}qUt(t){for(const s of this.Sft.Y4())s.Nz().ZUt(t);this.QF().h_t(t)}XUt(t,s){const i=this.Sft.s_t(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.TIt(s);e<0&&(e+=i.aB()+1);const h=Ya.cIt.dIt(this.iP()),r=(i.MIt(h,e),this.iP());h.gB().QW(r.HS(),{_2:r.s3()}).then(()=>this.QUt());for(const n of this.Sft.Y4())n.Nz().KUt();return h}$Ut(t,s){const i=this.Sft.s_t(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.aB())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.TIt(s);e<0&&(e+=i.aB()),i.wIt(e);for(const h of this.Sft.Y4())h.Nz().KUt()}Cvt(){return self.t6t}},new WeakMap);self.t6t=class extends self.R4{constructor(t){super(t),Za.set(this,t.hTt())}s6t(t){Ha.Ge(t);const s=Za.get(this).QF().s_t(t);return s?s.bIt():null}i6t(){return Za.get(this).QF().t_t().map(t=>t.bIt())}e6t(t){return Ha.Ge(t),Za.get(this).HUt(t).bIt()}h6t(t){Ha.Ge(t),Za.get(this).qUt(t)}r6t(t,s){if(Ha.Ge(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return Za.get(this).XUt(t,s).cB()}n6t(t,s){if(Ha.Ge(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");Za.get(this).$Ut(t,s)}}}{const C=self.ks,Xa=self.Hs,Ka=C.lr(C.Rect),$a=C.lr(C.il),tu=C.lr(C.iu),_=(C.Tq.Qht.Instance=class extends C.Txt{constructor(t,s){super(t);let i=!0,e="",h=0,r=!0;s&&(i=!!s[0],e=s[1],h=s[2],r=s[3]),this.o6t=this.Sft.s_t(e)||this.Sft.KCt()[0],this.a6t=C.Sr(h,0,this.o6t.aB()-1),this.u6t=this.o6t.yIt(this.a6t);const n=this.u6t.gB(),o=(this.l6t=n.Qb(),this.c6t=n.U_(),this.f6t=n.Lxt(),this.Gxt(),t.nEt(2,!0),t.nEt(1,0<=this.o6t.sB()),this.d6t=Math.abs(this.o6t.sB()),this.p6t=this.o6t.rB(),this.m6t=C.lr(C.E0),this.g6t=0,this.y6t=0,this.M6t="",this.w6t=-1,this.S6t="",this.T6t=0,this.RR());this.b6t=o.M5(),o.$k(i),o.O5(r),o.xnt(this.u6t.wB()),o.Int(this.u6t.TB()),o.KAt(this.u6t.AB()),o.a5(),1===this.Sft.$Ct()&&1===this.Sft.KCt()[0].aB()||0===this.d6t||this.fxt()}cr(){this.o6t=null,this.u6t=null,this.l6t=null,this.m6t=null,super.cr()}Ext(){return this.u6t.gB()}_it(){return!0}JJ(){this.l6t=null}_xt(){this.JUt()}m2(t){const s=this.l6t;if(null!==s){t.VD(s);const i=this.RR();i.xz()?this.v6t(i,t):this.x6t(i,t)}}x6t(t,s){let i=this.b6t;this.pf.e3()&&(i=t.JAt(i)),s.iA(i,this.f6t)}v6t(s,t){const i=s.uNt();if(s.cNt()){s.UAt(Ka,$a,!1);let t=$a;this.pf.e3()&&(t=s.JAt(t)),i.d2(s.Gz(),t,this.f6t),s.lNt(!1)}i.m2(t)}G6t(){return this.m6t.ei()}I6t(){return this.Gi.oEt(2)}C6t(t){this.Gi.nEt(2,t)}_6t(){return this.Gi.oEt(1)}E6t(t){this.Gi.nEt(1,t)}D6t(){return this.Gi.oEt(4)}A6t(t){this.Gi.nEt(4,t)}QX(){this.S6t&&this.N6t(),0<=this.w6t&&this.L6t();const t=this.d6t;if(this.I6t()&&0!==t){const s=this.pf.P3(this.Gi),i=(this.m6t.Mc(s),this.G6t()),e=this.u6t,h=e.yB()/t;if(!(i<this.g6t+h)){const r=this.o6t,n=this.p6t,o=r.aB(),a=r.eB(),u=r.iB(),l=r.oB(),c=(this._6t()?this.a6t++:this.a6t--,this.g6t+=h,this.a6t>=o&&(l?(this.E6t(!1),this.a6t=o-2):!u&&(this.y6t++,this.y6t>=a)?this.O6t(!1):this.a6t=n),this.a6t<0&&(l?(this.a6t=1,this.E6t(!0),u||(this.y6t++,this.y6t>=a&&this.O6t(!0))):!u&&(this.y6t++,this.y6t>=a)?this.O6t(!0):this.a6t=n),this.a6t=C.Sr(this.a6t,0,o-1),r.yIt(this.a6t));i>this.g6t+c.yB()/t&&(this.g6t=i),this.R6t(e,c)}}else this.qvt()}O6t(t){this.a6t=t?0:this.o6t.aB()-1,this.C6t(!1),this.M6t=this.o6t.hf(),this.A6t(!0),this.Qvt("animationend",!1,{animationName:this.M6t}),this.Nj(C.Tq.Qht.wq.P6t),this.Nj(C.Tq.Qht.wq.k6t),this.A6t(!1),this.y6t=0}R6t(i,e,t){if(i!==e){const s=this.RR(),h=i.gB(),r=e.gB(),n=h.ym(),o=h._m(),a=r.ym(),u=r._m(),l=(t&&t.onFrameChange?t.onFrameChange(s,n,o,a,u):(n!==a&&s.Gm(s.ym()*(a/n)),o!==u&&s.Mm(s._m()*(u/o))),s.xnt(e.wB()),s.Int(e.TB()),s.KAt(e.AB()),s.a5(),this.u6t=e,this.l6t=r.Qb(),this.c6t=r.U_(),this.f6t=r.Lxt(),this.nU().Fht());for(let t=0,s=l.length;t<s;++t)l[t].wGt(i,e);this.Qvt("framechange",!1,{animationName:this.o6t.hf(),F6t:this.a6t}),this.Nj(C.Tq.Qht.wq.j6t),this.pf.UR()}}z6t(t){this.C6t(!0),this.g6t=this.G6t(),1===t&&0!==this.a6t&&(this.w6t=0,this.D6t()||this.L6t()),this.fxt()}B6t(t,s,i){this.S6t=t,this.T6t=s,this.fxt(),!i&&this.D6t()||this.N6t()}U6t(){return this.o6t}W6t(){return this.S6t||this.o6t.hf()}ZUt(t){C.gh(t,this.W6t())&&this.B6t(this.Sft.r_t().hf(),1,!0)}Q6t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.Sft.s_t(this.W6t());if(!s)return;if(-1===(t=s.SIt(t)))return}isFinite(t)&&(this.w6t=t,this.D6t()||this.L6t())}KUt(){if(!this.S6t&&-1===this.w6t){const t=this.u6t,s=this.o6t.yIt(C.Sr(this.a6t,0,this.o6t.aB()-1));t!==s&&this.R6t(t,s),1<this.o6t.aB()&&0<this.d6t&&this.fxt()}}J6t(){return this.a6t}V6t(){return this.u6t.RB()}Y6t(t){this.d6t=Math.abs(t),this.E6t(0<=t),0<this.d6t&&this.fxt()}H6t(){return this._6t()?this.d6t:-this.d6t}q6t(t){"string"==typeof t&&-1===(t=this.o6t.SIt(t))||(t=C.Sr(Math.floor(t),0,this.o6t.aB()-1),this.p6t=t)}Z6t(){return this.p6t}N6t(t){const s=this.u6t,i=this.Sft.s_t(this.S6t);if(this.S6t="",i&&(i!==this.o6t||!this.I6t())){this.o6t=i,this.E6t(0<=i.sB()),this.d6t=Math.abs(i.sB()),this.p6t=i.rB(),this.a6t=C.Sr(this.a6t,0,this.o6t.aB()-1),1===this.T6t&&(this.a6t=0),this.C6t(!0),this.g6t=this.G6t();const e=this.o6t.yIt(this.a6t);this.R6t(s,e,t)}}L6t(t){const s=this.u6t,i=this.a6t;if(this.a6t=C.Sr(Math.floor(this.w6t),0,this.o6t.aB()-1),this.w6t=-1,t||i!==this.a6t){const e=this.o6t.yIt(this.a6t);this.R6t(s,e),this.g6t=this.G6t()}}JUt(){const t=this.u6t.gB();this.l6t=t.Qb(),this.c6t=t.U_(),this.f6t=t.Lxt(),this.RR().lNt(!0)}Qb(){return this.l6t}U_(){return this.c6t}Lxt(){return this.f6t}xB(){return this.u6t.xB()}STt(t){let s=this.u6t,i=this.RR(),e=null;if("string"==typeof t)e=s.EB(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s._B(t-1)}let h=i.p5();if(!e)return[i.GT(),i._T(),h];if(tu.C(e.LIt()),i.xz()){const[r,n,o]=i.Gz().b2(tu.ou(),tu.uu());tu.set(r,n),h+=o}return tu.offset(-s.wB(),-s.TB()),tu.scale(i.ym(),i._m()),tu.rotate(i.yk()),tu.offset(i.GT(),i._T()),[tu.ou(),tu.uu(),h]}X6t(){return this.RR().eNt().Ul()}K6t(t){t=Math.floor(t);const s=this.RR(),i=s.eNt(),e=i.Ul();if((t=t===e?0:t)<0||e<=t)return[0,0];const h=i.Bl();return[h[2*t+0]+s.GT(),h[2*t+1]+s._T()]}gxt(){const s=C.Tq.Qht.ort,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.o6t.hf(),$6t:t=>this.Mxt(s.tWt,t,0)},{name:t+".current-frame",value:this.a6t,$6t:t=>this.Mxt(s.sWt,t)},{name:t+".is-playing",value:this.I6t(),$6t:t=>t?this.Mxt(s.iWt,0):this.Mxt(s.eWt)},{name:t+".speed",value:this.d6t,$6t:t=>this.Mxt(s.hWt,t)},{name:t+".repeats",value:this.y6t,$6t:t=>this.y6t=t}]}]}FT(){const t={a:this.o6t.fY()},s=(0!==this.g6t&&(t.fs=this.g6t),this.G6t()),i=(0!==s&&(t.at=s),0!==this.a6t&&(t.f=this.a6t),0!==this.d6t&&(t.cas=this.d6t),1!==this.y6t&&(t.ar=this.y6t),0!==this.p6t&&(t.rt=this.p6t),this.I6t()||(t.ap=this.I6t()),this._6t()||(t.af=this._6t()),this.RR());return i.L5()&&(t.ce=i.L5()),t}jT(t){const s=this.QF().i_t(t.a),i=(s&&(this.o6t=s),this.g6t=t.hasOwnProperty("fs")?t.fs:0,this.m6t.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.a6t=C.Sr(i,0,this.o6t.aB()-1),this.d6t=t.hasOwnProperty("cas")?t.cas:0,this.y6t=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),h=(this.p6t=C.Sr(e,0,this.o6t.aB()-1),this.C6t(!t.hasOwnProperty("ap")||!!t.ap),this.E6t(!t.hasOwnProperty("af")||!!t.af),this.o6t.yIt(this.a6t)),r=(this.u6t=h,this.JUt(),this.RR());r.xnt(h.wB()),r.Int(h.TB()),r.KAt(h.AB()),r.O5(!!t.ce),this.I6t()&&this.fxt()}Jrt(t){const s=this.RR();switch(t){case 3:return s.L5();case 2:return C.Sr(this.a6t,0,this.o6t.aB()-1);case 1:return this.o6t.hf()}}Xrt(t,s,i){const e=this.RR();switch(t){case 3:e.O5(!!s);break;case 2:{this.C6t(!1);const h=this.o6t.aB()-1,r=s=C.Sr(s,0,h),n=this.o6t.yIt(this.a6t),o=this.o6t.yIt(r);this.R6t(n,o,i),this.a6t=C.Sr(r,0,h);break}case 1:{this.S6t=s,this.N6t(i);const a=this.o6t.aB();1<a&&0<this.o6t.sB()?this.fxt():this.qvt();break}}}Cvt(){return self.rWt}},new WeakMap),su=new Map([["current-frame",0],["beginning",1]]);self.rWt=class extends self.Cz{constructor(){super(),_.set(this,self.UF.YF().Nz())}vB(){return _.get(this).xB()}GB(t){return this.IB(t)[0]}CB(t){return this.IB(t)[1]}nWt(t){return this.IB(t)[2]}IB(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return _.get(this).STt(t)}DB(){return _.get(this).X6t()}NB(t){return Xa.Se(t),_.get(this).K6t(t)[0]}OB(t){return Xa.Se(t),_.get(this).K6t(t)[1]}LB(t){return Xa.Se(t),_.get(this).K6t(t)}oWt(){_.get(this).C6t(!1)}aWt(t="current-frame"){Xa.Ge(t);const s=su.get(t);if(void 0===s)throw new Error("invalid mode");_.get(this).z6t(s)}uWt(t,s="beginning"){Xa.Ge(t),Xa.Ge(s);const i=su.get(s);if(void 0===i)throw new Error("invalid mode");const e=_.get(this);if(!e.QF().s_t(t))throw new Error(`animation name "${t}" does not exist`);e.B6t(t,i)}s6t(t){Xa.Ge(t);const s=_.get(this).QF().s_t(t);return s?s.bIt():null}get animation(){return _.get(this).U6t().bIt()}get animationName(){return _.get(this).W6t()}set F6t(t){Xa.Se(t),_.get(this).Q6t(t)}get F6t(){return _.get(this).J6t()}set lWt(t){Xa.Ge(t),_.get(this).Q6t(t)}get lWt(){return _.get(this).V6t()}set cWt(t){Xa.Se(t),_.get(this).Y6t(t)}get cWt(){return _.get(this).H6t()}set fWt(t){Xa.Se(t),_.get(this).q6t(t)}get fWt(){return _.get(this).Z6t()}get imageWidth(){return _.get(this).Ext().ym()}get imageHeight(){return _.get(this).Ext()._m()}dWt(){const t=_.get(this).Ext();return[t.ym(),t._m()]}async pWt(t){Xa.ih(t,Blob);const s=_.get(this),i=s.iP(),e=s.Ext(),h=C.lr(C.kGt);if(h.XGt(i,t),await h.QW(i.HS(),{_2:i.s3()}),s.dr())h.cr();else{e.KGt(h);const r=s.hTt();r.QUt(),r.QF().Hf().dispatchEvent(new C.Event("animationframeimagechange")),i.UR()}}mWt(t,s){Xa.Ge(s),_.get(this).RR().zAt(!!t,s)}}}{const iu=self.ks;iu.Tq.Qht.wq={gWt(t){return iu.gh(this.W6t(),t)},yWt(t,s){return iu.compare(this.a6t,t,s)},MWt(t,s){if("string"!=typeof s)return!1;const i=this.u6t.RB();return iu.compare(i.toLowerCase(),t,s.toLowerCase())},wWt(t,s){return iu.compare(this.H6t(),t,s)},k6t(t){return iu.gh(this.M6t,t)},P6t(){return!0},j6t(){return!0},SWt(){return this.RR().ym()<0},TWt(){return this.RR()._m()<0},bWt(){return!0},vWt(){return!0},L5(){return this.RR().L5()}}}{const eu=self.ks;eu.Tq.Qht.ort={xWt(t,s,i,e,h){if(t&&s){const[r,n]=this.STt(i),o=this.pf.sk(t,s,r,n,e,h);if(o){if(e&&s.ik(o),t.F4().y4()){const u=o.RR();u.gk(this.RR().yk()),u.a5()}const a=this.pf.d3();a.ek(!0),o.hk(),a.ek(!1),t!==this.pf.Udt().QF()&&this.Hvt.YUt(t,o,e)}}},eWt(){this.C6t(!1)},iWt(t){this.z6t(t)},tWt(t,s){this.B6t(t,s)},sWt(t){this.Q6t(t)},hWt(t){this.Y6t(t)},GWt(t){this.q6t(t)},IWt(s,t){try{0===s?this.hTt().HUt(t):this.hTt().qUt(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},CWt(s,t,i){try{0===s?this.hTt().XUt(t,i):this.hTt().$Ut(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},_Wt(t){const s=this.RR(),i=s.ym(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Gm(e),s.a5())},EWt(t){const s=this.RR(),i=s._m(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Mm(e),s.a5())},pk(t){const s=this.u6t,i=s.gB(),e=this.RR(),h=e.ym()<0?-1:1,r=e._m()<0?-1:1,n=i.ym()*t*h,o=i._m()*t*r;e.ym()===n&&e._m()===o||(e.c_(n,o),e.a5())},async DWt(t,s,i){const e=this.u6t,h=e.gB(),r=this.RR(),n=this.pf,o=this.Hvt;if(h.cJ()===t)0===s&&(r.c_(h.ym(),h._m()),r.a5()),this.Nj(eu.Tq.Qht.wq.bWt);else{const a=eu.lr(eu.kGt);try{if(await a.ZGt(n,t),!a.jJ())throw new Error("image failed to load");if(this.dr())return void a.cr();await a.QW(n.HS(),{_2:n.s3()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.dr()||this.Nj(eu.Tq.Qht.wq.vWt))}this.dr()?a.cr():(h.KGt(a),o.QUt(),o.QF().Hf().dispatchEvent(new eu.Event("animationframeimagechange")),n.UR(),0===s&&(r.c_(h.ym(),h._m()),r.a5()),await this.Oj(eu.Tq.Qht.wq.bWt))}},AWt(t){this.RR().O5(t)},zAt(t,s){this.RR().zAt(0===t,s)},NWt(t){this.RR().pT(t),this.pf.UR()}}}{const hu=self.ks;hu.Tq.Qht.art={LWt(){return this.J6t()},OWt(){return this.V6t()},RWt(){return this.o6t.aB()},PWt(){return this.o6t.hf()},kWt(){return this.H6t()},FWt(){return this.o6t.sB()},jWt(t){return this.STt(t)[0]},zWt(t){return this.STt(t)[1]},BWt(t){return this.STt(t)[2]},UWt(){return this.xB()},WWt(){return this.Ext().ym()},QWt(){return this.Ext()._m()},JWt(t){return this.K6t(t)[0]},VWt(t){return this.K6t(t)[1]},YWt(){return this.X6t()}}}{const ru=self.ks;ru.Tq.Touch=class extends ru.evt{constructor(t){super(t)}cr(){super.cr()}}}{let i=function(){return s.O4().Nz()};i;const nu=self.ks,ou=self.Hs;nu.Tq.Touch.SCt=class extends nu.Bvt{constructor(t){super(t)}cr(){super.cr()}Ivt(){}Cvt(){return self.HWt}};let s=null;self.HWt=class extends self.R4{constructor(t){super(t),(s=t).iP().vR().GR=this}requestPermission(t){ou.Ge(t);const s=i();if("orientation"===t)return s.qWt(0);if("motion"===t)return s.qWt(1);throw new Error("invalid type")}}}{const E=self.ks;E.Tq.Touch.Instance=class extends E.Vvt{constructor(t,s){super(t,"touch"),this.ZWt=new Map,this.XWt=!1,this.KWt=!1,this.$Wt=0,this.tQt=0,this.sQt=0,this.iQt=0,this.eQt=0,this.hQt=0,this.rQt=0,this.nQt=0,this.oQt=0,this.aQt=0,this.uQt=0,this.lQt=0,this.cQt=0,this.fQt=0,this.dQt=0,this.pQt=0,this.mQt=0,this.gQt=[],s&&(this.XWt=s[0]),this.ixt("permission-result",t=>this.yQt(t));const i=this.iP().Hf();this.I0=new E.v0(E.y0.b0(i,"pointerdown",t=>this.MQt(t.data)),E.y0.b0(i,"pointermove",t=>this.wQt(t.data)),E.y0.b0(i,"pointerup",t=>this.SQt(t.data,!1)),E.y0.b0(i,"pointercancel",t=>this.SQt(t.data,!0)),E.y0.b0(i,"deviceorientation",t=>this.TQt(t.data)),E.y0.b0(i,"deviceorientationabsolute",t=>this.bQt(t.data)),E.y0.b0(i,"devicemotion",t=>this.vQt(t.data)),E.y0.b0(i,"tick2",t=>this.kZ()))}cr(){this.ZWt.clear(),super.cr()}MQt(t){if("mouse"===t.pointerType){if(!this.XWt)return;this.KWt=!0}const s=t.pointerId;if(!this.ZWt.has(s)){const i=t.pageX-this.pf.NF(),e=t.pageY-this.pf.LF(),h=performance.now(),r=this.ZWt.size,n=(this.uQt=r,this.lQt=s,E.lr(E.Tq.Touch.xQt));n.B_t(h,i,e,s,r),this.ZWt.set(s,n),this.Nj(E.Tq.Touch.wq.GQt),this.Nj(E.Tq.Touch.wq.IQt),this.fQt=i,this.dQt=e,this.mQt=0,this.Nj(E.Tq.Touch.wq.CQt)}}wQt(t){if("mouse"!==t.pointerType||this.KWt){const s=this.ZWt.get(t.pointerId);if(s){const i=performance.now();if(!(i-s.gN()<2)){const e=t.pageX-this.pf.NF(),h=t.pageY-this.pf.LF();s.mV(i,e,h,t.width,t.height,t.pressure)}}}}SQt(t,s){if("mouse"===t.pointerType){if(!this.KWt)return;this.KWt=!1}const i=performance.now(),e=t.pointerId,h=this.ZWt.get(e);if(h){if(this.uQt=h._Qt(),this.lQt=h.lU(),!s){const r=t.pageX-this.pf.NF(),n=t.pageY-this.pf.LF();this.fQt=r,this.dQt=n,this.mQt=1,this.Nj(E.Tq.Touch.wq.CQt)}if(this.Nj(E.Tq.Touch.wq.EQt),this.Nj(E.Tq.Touch.wq.DQt),!s){const o=h.AQt(i);"single-tap"===o?(this.Nj(E.Tq.Touch.wq.NQt),this.fQt=h.GT(),this.dQt=h._T(),this.Nj(E.Tq.Touch.wq.LQt)):"double-tap"===o&&(this.Nj(E.Tq.Touch.wq.OQt),this.fQt=h.GT(),this.dQt=h._T(),this.Nj(E.Tq.Touch.wq.RQt))}h.cr(),this.ZWt.delete(e)}}qWt(i){return this.oxt("request-permission",{type:i}),new Promise((t,s)=>{this.gQt.push({type:i,resolve:t,reject:s})})}yQt(t){const s=t.result,i=t.type,e=(this.cQt=i,this.gQt.filter(t=>t.type===i));for(const h of e)h.resolve(s?"granted":"denied");this.gQt=this.gQt.filter(t=>t.type!==i),s?(this.Nj(E.Tq.Touch.wq.PQt),0===i?this.pf.Gjt():this.pf.Ijt()):this.Nj(E.Tq.Touch.wq.kQt)}TQt(t){"number"==typeof t.webkitCompassHeading?this.$Wt=t.webkitCompassHeading:t.absolute&&(this.$Wt=t.alpha),this.tQt=t.alpha,this.sQt=t.beta,this.iQt=t.gamma}bQt(t){this.$Wt=t.alpha}vQt(t){const s=t.acceleration,i=(s&&(this.eQt=s.x,this.hQt=s.y,this.rQt=s.z),t.accelerationIncludingGravity);i&&(this.nQt=i.x,this.oQt=i.y,this.aQt=i.z)}kZ(){let t=performance.now(),s=0;for(const i of this.ZWt.values())i.gN()<=t-50&&i.FQt(t),i.jQt(t)&&(this.uQt=i._Qt(),this.lQt=i.lU(),this.pQt=s,this.Nj(E.Tq.Touch.wq.zQt),this.fQt=i.GT(),this.dQt=i._T(),this.Nj(E.Tq.Touch.wq.BQt),this.pQt=0),++s}UQt(t){t=Math.floor(t);for(const s of this.ZWt.values()){if(0===t)return s;--t}return null}WQt(t,s){return 0<=t&&0<=s&&t<this.pf.hFt()&&s<this.pf.rFt()}gxt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.ZWt.values()].map(t=>({name:"$"+t.lU(),value:t.GT()+", "+t._T()}))}]}}}{const au=self.ks;au.Tq.Touch.wq={IQt(){return!0},DQt(){return!0},QQt(){return 0<this.ZWt.size},CQt(t,s){return!!t&&s===this.mQt&&!!this.WQt(this.fQt,this.dQt)&&this.pf.zO().dLt(t,[[this.fQt,this.dQt]],!1)},JQt(t){if(!t)return!1;const s=this.pf.zdt(),i=s.uSt(),e=[...this.ZWt.values()].filter(t=>this.WQt(t.GT(),t._T())).map(t=>[t.GT(),t._T()]);return au.xor(this.pf.zO().dLt(t,e,i),i)},VQt(t,s,i){const e=this.UQt(t);return!!e&&au.compare(e.sB(),s,i)},YQt(){return!0},HQt(){return!0},qQt(t,s,i){this.pf.Gjt();let e;return e=0===t?this.tQt:1===t?this.sQt:this.iQt,au.compare(e,s,i)},ZQt(t,s,i){this.pf.Ijt();let e;return e=0===t?this.nQt:1===t?this.oQt:2===t?this.aQt:3===t?this.eQt:4===t?this.hQt:this.rQt,au.compare(e,s,i)},GQt(t){return(t=Math.floor(t))===this.uQt},EQt(t){return(t=Math.floor(t))===this.uQt},XQt(t){return t=Math.floor(t),this.ZWt.size>=t+1},zQt(){return!0},NQt(){return!0},OQt(){return!0},BQt(t){return!!t&&!!this.WQt(this.fQt,this.dQt)&&this.pf.zO().dLt(t,[[this.fQt,this.dQt]],!1)},LQt(t){return!!t&&!!this.WQt(this.fQt,this.dQt)&&this.pf.zO().dLt(t,[[this.fQt,this.dQt]],!1)},RQt(t){return!!t&&!!this.WQt(this.fQt,this.dQt)&&this.pf.zO().dLt(t,[[this.fQt,this.dQt]],!1)},PQt(t){return this.cQt===t},kQt(t){return this.cQt===t}}}{const uu=self.ks;uu.Tq.Touch.ort={KQt(t){this.qWt(t)}}}{const lu=self.ks;lu.Tq.Touch.art={$Qt(){return this.ZWt.size},pbt(t){const s=this.UQt(this.pQt);return s?s.tJt(this.pf.LR(),t,!0):0},mbt(t){const s=this.UQt(this.pQt);return s?s.tJt(this.pf.LR(),t,!1):0},sJt(t,s){const i=this.UQt(t);return i?i.tJt(this.pf.LR(),s,!0):0},iJt(t,s){const i=this.UQt(t);return i?i.tJt(this.pf.LR(),s,!1):0},eJt(t,s){const i=this.ZWt.get(t);return i?i.tJt(this.pf.LR(),s,!0):0},hJt(t,s){const i=this.ZWt.get(t);return i?i.tJt(this.pf.LR(),s,!1):0},rJt(){const t=this.UQt(0);return t?t.GT():0},nJt(){const t=this.UQt(0);return t?t._T():0},oJt(t){const s=this.UQt(t);return s?s.GT():0},aJt(t){const s=this.UQt(t);return s?s._T():0},uJt(t){const s=this.ZWt.get(t);return s?s.GT():0},lJt(t){const s=this.ZWt.get(t);return s?s._T():0},cJt(t){const s=this.UQt(t);return s?s.sB():0},fJt(t){const s=this.ZWt.get(t);return s?s.sB():0},dJt(t){const s=this.UQt(t);return s?lu.vr(s.yk()):0},pJt(t){const s=this.ZWt.get(t);return s?lu.vr(s.yk()):0},mJt(){return this.pf.Gjt(),this.$Wt},gJt(){return this.pf.Gjt(),this.tQt},yJt(){return this.pf.Gjt(),this.sQt},MJt(){return this.pf.Gjt(),this.iQt},wJt(){return this.pf.Ijt(),this.nQt},SJt(){return this.pf.Ijt(),this.oQt},TJt(){return this.pf.Ijt(),this.aQt},bJt(){return this.pf.Ijt(),this.eQt},vJt(){return this.pf.Ijt(),this.hQt},xJt(){return this.pf.Ijt(),this.rQt},GJt(){return this.uQt},IJt(){return this.lQt},CJt(t){const s=this.ZWt.get(t);return s?s.ym():0},_Jt(t){const s=this.ZWt.get(t);return s?s._m():0},EJt(t){const s=this.ZWt.get(t);return s?s.DJt():0}}}{let n=self.ks,s=-1e3,i=-1e3,e=-1e4;n.Tq.Touch.xQt=class extends n.nr{constructor(){super(),this.AJt=0,this.GG=0,this.N4t=0,this.fL=0,this.NJt=0,this.LJt=0,this.OJt=0,this.eu=0,this.hu=0,this.RJt=0,this.PJt=0,this.tg=0,this.sg=0,this.kJt=0,this.FJt=!1,this.jJt=!1}cr(){}B_t(t,s,i,e,h){this.AJt=e,this.GG=h,this.fL=t,this.NJt=t,this.N4t=t,this.LJt=s,this.OJt=i,this.eu=s,this.hu=i,this.RJt=s,this.PJt=i}mV(t,s,i,e,h,r){this.NJt=this.fL,this.fL=t,this.RJt=this.eu,this.PJt=this.hu,this.eu=s,this.hu=i,this.tg=e,this.sg=h,this.kJt=r,!this.jJt&&15<=n.Cr(this.LJt,this.OJt,this.eu,this.hu)&&(this.jJt=!0)}lU(){return this.AJt}_Qt(){return this.GG}gN(){return this.fL}FQt(t){this.NJt=t}GT(){return this.eu}_T(){return this.hu}sB(){const t=n.Cr(this.eu,this.hu,this.RJt,this.PJt),s=(this.fL-this.NJt)/1e3;return 0<s?t/s:0}yk(){return n.Er(this.RJt,this.PJt,this.eu,this.hu)}ym(){return this.tg}_m(){return this.sg}DJt(){return this.kJt}jQt(t){return!this.FJt&&500<=t-this.N4t&&!this.jJt&&n.Cr(this.LJt,this.OJt,this.eu,this.hu)<15&&(this.FJt=!0)}AQt(t){return!this.FJt&&t-this.N4t<=333&&!this.jJt&&n.Cr(this.LJt,this.OJt,this.eu,this.hu)<15?t-e<=666&&n.Cr(s,i,this.eu,this.hu)<25?(s=-1e3,i=-1e3,e=-1e4,"double-tap"):(s=this.eu,i=this.hu,e=t,"single-tap"):""}tJt(t,s,i){if(void 0===s){const e=t.FR(0);return e.v7(this.eu,this.hu)[i?0:1]}{const h=t.PR(s);return h?h.AF(this.eu,this.hu)[i?0:1]:0}}}}{const cu=self.ks;cu.Tq.Text=class extends cu.evt{constructor(t){super(t)}cr(){super.cr()}}}{const fu=self.ks;fu.Tq.Text.SCt=class extends fu.Bvt{constructor(t){super(t)}cr(){super.cr()}Ivt(){}z9(t){}V9(){}}}{const du=self.ks,pu=self.Hs,mu=[0,0,0],gu=["left","center","right"],yu=["top","center","bottom"],Mu=["ltr","rtl"],wu=["word","cjk","character"],Su=new du.Rect,Tu=new du.il,bu=new du.Ho,vu=du.lr(du.iu),xu=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),D=(du.Tq.Text.Instance=class extends du.Txt{constructor(t,s){if(super(t),this.gf="",this.zJt=!0,this.BJt="Arial",this.UJt=12,this.WJt=0,this.ZI=!1,this.XI=!1,this.cT=du.lr(du.Ho),this.eC=0,this.hC=0,this.oC="word",this.aC=0,this.QJt="auto",this.JJt=1,this.VJt=null,this.YJt="",this.HJt=!1,this.qJt=!1,this.ZJt=null,this.XJt=-1,this.KJt=-1,this.$Jt=0,this.tVt=du.lr(du.my.GS,this.pf.HS(),{timeout:5}),this.tVt.RC=()=>this.pf.UR(),this.sVt=()=>this.iVt(),this.eVt=!1,s){this.gf=s[0],this.zJt=!!s[1],this.BJt=s[2],this.UJt=s[3],this.WJt=s[4],this.ZI=!!s[5],this.XI=!!s[6],this.eC=s[8],this.hC=s[9],this.oC=wu[s[10]],this.aC=s[11],this.hVt(this.pf.Q6(s[12]));const i=s[7];this.cT.ta(i[0],i[1],i[2]),this.RR().$k(s[13]),this.qJt=!!s[15]}this.rVt(),this.nVt()}cr(){this.hVt(null),this.oVt(),this.ZJt&&(this.ZJt.cr(),this.ZJt=null),this.tVt.cr(),this.tVt=null,super.cr()}rVt(){const t=this.tVt;t.wf(this.gf),t.jC(this.zJt),this.tVt.WI()&&this.VJt?this.tVt.pm(this.iP().ZFt(this.VJt)):this.tVt.pm(null),t.zC("nearest"!==this.pf.s3()),t.BC(this.BJt),t.JC(this.WJt),t.YC(this.ZI),t.qC(this.XI),t.mT(this.cT),t.i_(gu[this.eC]),t.h_(yu[this.hC]),t.n_(this.oC),t.a_(Mu[this.aC])}aVt(){let t=this.RR(),s=(this.tVt.UC(this.UJt),this.tVt.QC(t.oAt()),t.PR()),i;"auto"===this.QJt?i=s.GH(t.p5()):"fixed"===this.QJt&&(i=this.JJt),t.xz()&&i!==this.tVt.f_()&&t.lNt(!0),this.tVt.c_(t.ym(),t._m(),i)}hVt(t){t&&(t.eY()||t.F4().constructor!==du.Tq.Qht)||t!==this.VJt&&(this.VJt&&this.VJt.Hf().removeEventListener("animationframeimagechange",this.sVt),this.VJt=t,this.VJt&&this.VJt.Hf().addEventListener("animationframeimagechange",this.sVt),this.rVt(),this.HJt=!1,this.pf.UR())}iVt(){this.pf.XFt(this.VJt),this.pf.UR(),this.eVt=!0}nVt(){if(this.qJt){let t=this.gf;this.zJt&&(t=du.Dh.rm(t)),this.ZJt?this.ZJt.wf(t):this.ZJt=du.lr(du.df,this.pf,t)}else this.ZJt&&(this.ZJt.cr(),this.ZJt=null)}m2(t){const s=this.RR(),i=(this.aVt(),this.eVt&&(this.eVt=!1,this.tVt.WI())&&this.VJt&&this.tVt.pm(this.iP().ZFt(this.VJt)),this.tVt.Qb());if(i){const e=s.PR();if(0===s.yk()&&0===e.yk()&&0===s.p5()&&!s.xz()&&e.QY()){const h=s.M5(),[r,n]=e.jF(h.un(),h.ln()),[o,a]=e.jF(h.pn(),h.mn()),u=r-Math.round(r),l=n-Math.round(n),[c,f]=(Su.set(r,n,o,a),Su.offset(-u,-l),Tu.vl(Su),t.nA(t.GA()));this.pf.QP().KW(t,c,f),t.VD(i),t.Pw(Tu,this.tVt.U_()),e.tQ(t)}else t.VD(i),s.xz()?this.v6t(s,t):this.x6t(s,t)}}x6t(t,s){let i=t.M5();this.pf.e3()&&(i=this.uVt(i)),s.Pw(i,this.tVt.U_())}v6t(s,t){const i=s.uNt();if(s.cNt()){s.UAt(Su,Tu,!1);let t=Tu;this.pf.e3()&&(t=this.uVt(t)),i.d2(s.Gz(),t,this.tVt.U_()),s.lNt(!1)}i.m2(t)}uVt(t){const s=t.un()-Math.round(t.un()),i=t.ln()-Math.round(t.ln());return 0==s&&0==i?t:(Tu.C(t),Tu.offset(-s,-i),Tu)}Dxt(){const t=this.tVt.Qb();return t?[t.ym(),t._m()]:[100,100]}Axt(){return this.tVt.U_()}Oxt(){return!1}FT(){const t={t:this.gf,c:this.cT.toJSON(),fn:this.BJt,ps:this.UJt};return this.zJt&&(t.bbc=this.zJt),0!==this.eC&&(t.ha=this.eC),0!==this.hC&&(t.va=this.hC),"word"!==this.oC&&(t.wr=this.oC),0!==this.WJt&&(t.lho=this.WJt),this.ZI&&(t.b=this.ZI),this.XI&&(t.i=this.XI),-1!==this.KJt&&(t.tw={st:this.XJt,en:this.KJt,l:this.$Jt}),this.VJt&&(t.ioc=this.VJt.fY()),"fixed"===this.QJt&&(t.fs=this.JJt),t}jT(t){if(this.oVt(),this.gf=t.t,this.cT.Va(t.c),this.BJt=t.fn,this.UJt=t.ps,this.zJt=!!t.hasOwnProperty("bbc")&&t.bbc,this.eC=t.hasOwnProperty("ha")?t.ha:0,this.hC=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.oC="boolean"==typeof s?s?"word":"character":s}else this.oC="word";if(this.WJt=t.hasOwnProperty("lho")?t.lho:0,this.ZI=!!t.hasOwnProperty("b")&&t.b,this.XI=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const i=t.tw;this.XJt=i.st,this.KJt=i.en,this.$Jt=i.l}if(t.hasOwnProperty("ioc")){const e=this.iP().Q6(t.ioc);e&&this.hVt(e)}else this.hVt(null);t.hasOwnProperty("fs")?(this.QJt="fixed",this.JJt=t.fs):this.QJt="auto",this.rVt(),this.nVt(),this.HJt=!1,-1!==this.KJt&&this.fxt()}Jrt(t){switch(t){case 0:return this.l_();case 1:return this.zJt;case 2:return this.lVt();case 3:return this.cVt();case 4:return this.fVt();case 5:return this.dVt();case 6:return this.pVt();case 7:return mu[0]=this.cT.la(),mu[1]=this.cT.ca(),mu[2]=this.cT.fa(),mu;case 8:return this.mVt();case 9:return this.gVt();case 10:return this.yVt();case 15:return this.MVt()}}Xrt(t,s){switch(t){case 0:this.wVt(s);break;case 1:this.zJt!==!!s&&(this.zJt=!!s,this.rVt());break;case 2:this.SVt(s);break;case 3:this.TVt(s);break;case 4:this.bVt(s);break;case 5:this.vVt(s);break;case 6:this.xVt(s);break;case 7:const i=this.cT,e=s;i.la()===e[0]&&i.ca()===e[1]&&i.fa()===e[2]||(this.cT.ta(e[0],e[1],e[2]),this.rVt());break;case 8:this.GVt(s);break;case 9:this.IVt(s);break;case 10:this.CVt(s)}}yxt(t,s,i,e){0===s&&0===i&&0===e||7===t&&(this.cT.ia(s,i,e),this.rVt())}wVt(t){this.gf!==t&&(this.gf=t,this.tVt.wf(t),this.nVt(),this.HJt=!1,this.pf.UR())}l_(){return this.gf}_Vt(t,s){this.aVt(),this.wVt(t),this.XJt=this.pf.U3(),this.KJt=this.XJt+s/this.nU().uj(),this.$Jt=this.tVt.g_(),this.tVt.XC(0),this.fxt()}oVt(){this.XJt=-1,this.KJt=-1,this.$Jt=0,this.tVt.XC(-1),this.qvt()}EVt(){-1!==this.KJt&&(this.oVt(),this.Nj(du.Tq.Text.wq.DVt),this.pf.UR())}SVt(t){this.BJt!==t&&(this.BJt=t,this.tVt.BC(t),this.pf.UR())}lVt(){return this.BJt}vVt(t){this.ZI!==(t=!!t)&&(this.ZI=t,this.tVt.YC(t),this.pf.UR())}dVt(){return this.ZI}xVt(t){this.XI!==(t=!!t)&&(this.XI=t,this.tVt.qC(t),this.pf.UR())}pVt(){return this.XI}TVt(t){this.UJt!==t&&(this.UJt=t,this.pf.UR())}cVt(){return this.UJt}AVt(t){this.cT.Ma(t)||(this.cT.ua(t),this.tVt.mT(this.cT),this.pf.UR())}NVt(){return this.cT}bVt(t){this.WJt!==t&&(this.WJt=t,this.rVt(),this.pf.UR())}fVt(){return this.WJt}GVt(t){this.eC!==t&&(this.eC=t,this.rVt(),this.pf.UR())}mVt(){return this.eC}IVt(t){this.hC!==t&&(this.hC=t,this.rVt(),this.pf.UR())}gVt(){return this.hC}LVt(t){this.CVt(wu[t])}CVt(t){this.oC!==t&&(this.oC=t,this.rVt(),this.pf.UR())}yVt(){return this.oC}OVt(t){this.aC!==t&&(this.aC=t,this.rVt(),this.pf.UR())}RVt(){return this.aC}PVt(t){this.qJt=!!t,this.nVt()}MVt(){return this.qJt}kVt(t){this.QJt!==t&&(this.QJt=t,this.pf.UR())}FVt(){return this.QJt}jVt(t){this.JJt!==t&&(this.JJt=t,"fixed"===this.QJt)&&this.pf.UR()}zVt(){return this.JJt}BVt(){return this.aVt(),this.tVt.d_()}UVt(){return this.aVt(),this.tVt.m_()}WVt(t,s){this.aVt();const i=this.RR(),e=(vu.set(t-i.GT(),s-i._T()),vu.rotate(-i.yk()),vu.offset(i.ym()*i.wB(),i._m()*i.TB()),vu._t(i.ym(),i._m()),vu.scale(this.tVt.ym(),this.tVt._m()),this.tVt.M_(vu.ou(),vu.uu()));if(e){const h=e.gg("tag");if(h)return h.param}return""}QVt(t,s,i){const e=this.WVt(s,i);return e&&du.gh(t,e)}JVt(t,s){this.aVt(),s=Math.floor(s);const i=this.tVt.S_(t,s);if(!i)return null;const e=this.RR(),h=this.tVt.t_(),r=i.lg(),n=i.dg()-(i._m()-i.Dm())*h,o=i.ym()*h/this.tVt.ym()*e.ym(),a=i._m()*h/this.tVt._m()*e._m();return vu.set(r,n),vu._t(this.tVt.ym(),this.tVt._m()),vu.scale(e.ym(),e._m()),vu.offset(-e.ym()*e.wB(),-e._m()*e.TB()),vu.rotate(e.yk()),vu.offset(e.GT(),e._T()),{x:vu.ou(),y:vu.uu(),width:o,height:a}}VVt(t){return this.aVt(),this.tVt.T_(t)}YVt(t){let s=xu.get(t);return null===s?"":`</${s||"span"||"span"}>`}HVt(t,s){let i=xu.get(t);if(null===i)return"";switch(i=i||"span",t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async qVt(){if(!this.HJt){let t=new du.Dh(this.gf,{jp:!0}).Zp(),s=new Map,h='<span class="c3-text"',i=[],r=(i.push(`font-family: '${this.lVt()}';`),this.dVt()&&i.push("font-weight: bold;"),this.pVt()&&i.push("font-style: italic;"),"character"===this.yVt()&&i.push("word-break: break-all;"),h+=` style="${i.join(" ")}">`,this.VJt?this.iP().ZFt(this.VJt):null);if(this.VJt){const o=du.lr(du.wd),a=[],u=new Map;for(const c of t)if(c.Im()){const f=c.bg(r);if(f){const d=f.hy(),p=d.gB().eIt();u.has(p)||(u.set(p,null),a.push(o.Mc(async()=>{const t=await p.qJ();u.set(p,t)})))}}await Promise.all(a);const l=[];for(const m of t)if(m.Im()){const g=m.bg(r);if(g){const y=g.hy(),M=y.gB().eIt();l.push(o.Mc(async()=>{const t=await y.gB().rIt(u.get(M));s.set(g,t)}))}}await Promise.all(l);for(const w of u.values())w instanceof ImageBitmap&&w.close&&w.close()}const n=new Map;for(const S of t){let e=S.Mg(),t=[...n.keys()];t.reverse();for(const T of t)e.has(T)&&e.get(T)===n.get(T)||(n.delete(T),h+=this.YVt(T));for(const[b,v]of e)n.has(b)||(n.set(b,v),h+=this.HVt(b,v));if(S.xm()&&(h+=du.rp(du.ep(S.Um().join("")),"\n","<br>")),S.Im()&&r){const x=S.bg(r);if(x){const G=s.get(x);if(G){let t=[],s="0.2em",i=e.get("iconoffsety");if(i){let t=i.trim();s=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}t.push("top: "+s),"nearest"===this.pf.s3()&&t.push("image-rendering: pixelated"),h+=`<img class="c3-text-icon" data-icon="${S.Tg()}" width="${x.ym()}" height="${x._m()}" style="${t.join(";")}" src="${G}">`}}}}const e=[...n.keys()];e.reverse();for(const I of e)h+=this.YVt(I);h+="</span>",this.YJt=h,this.HJt=!0}return this.YJt}QX(){const s=this.pf.U3();if(s>=this.KJt)this.oVt(),this.Nj(du.Tq.Text.wq.DVt),this.pf.UR();else{let t=du.Fr(this.XJt,this.KJt,s,0,this.$Jt);(t=Math.floor(t))!==this.tVt.KC()&&(this.tVt.XC(t),this.pf.UR())}}gxt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.l_(),$6t:t=>this.wVt(t)},{name:t+".properties.font.name",value:this.lVt(),$6t:t=>this.SVt(t)},{name:t+".properties.size.name",value:this.cVt(),$6t:t=>this.TVt(t)},{name:t+".properties.line-height.name",value:this.fVt(),$6t:t=>this.bVt(t)},{name:t+".properties.bold.name",value:this.dVt(),$6t:t=>this.vVt(t)},{name:t+".properties.italic.name",value:this.pVt(),$6t:t=>this.xVt(t)}]}]}Cvt(){return self.ZVt}},new WeakMap),Gu=new Map([["left",0],["center",1],["right",2]]),Iu=new Map([["top",0],["center",1],["bottom",2]]),Cu=["ltr","rtl"];new Set(["auto","fixed"]);self.ZVt=class extends self.Cz{constructor(){super(),D.set(this,self.UF.YF().Nz())}get text(){return D.get(this).l_()}set text(t){pu.Ge(t);const s=D.get(this);s.oVt(),s.wVt(t)}XVt(t,s){pu.Ge(t),pu.Se(s);const i=D.get(this);i.oVt(),i._Vt(t,s)}KVt(){D.get(this).EVt()}set eQ(t){pu.Ge(t),D.get(this).SVt(t)}get eQ(){return D.get(this).lVt()}set rQ(t){D.get(this).vVt(t)}get rQ(){return D.get(this).dVt()}set nQ(t){D.get(this).xVt(t)}get nQ(){return D.get(this).pVt()}set hQ(t){pu.Se(t),D.get(this).TVt(t)}get hQ(){return D.get(this).cVt()}set $Vt(t){if(pu.Be(t),t.length<3)throw new Error("expected 3 elements");bu.ta(t[0],t[1],t[2]),D.get(this).AVt(bu)}get $Vt(){const t=D.get(this).NVt();return[t.la(),t.ca(),t.fa()]}set lineHeight(t){pu.Se(t),D.get(this).bVt(t)}get lineHeight(){return D.get(this).fVt()}set uQ(t){pu.Ge(t);const s=Gu.get(t);if(void 0===s)throw new Error("invalid mode");D.get(this).GVt(s)}get uQ(){return gu[D.get(this).mVt()]}set verticalAlign(t){pu.Ge(t);const s=Iu.get(t);if(void 0===s)throw new Error("invalid mode");D.get(this).IVt(s)}get verticalAlign(){return yu[D.get(this).gVt()]}set lQ(t){if(!wu.includes(t))throw new Error("invalid mode");D.get(this).CVt(t)}get lQ(){return D.get(this).yVt()}set cQ(t){pu.Ge(t);const s=Cu.indexOf(t);if(-1===s)throw new Error("invalid text direction");D.get(this).OVt(s)}get cQ(){return Cu[D.get(this).RVt()]}set t8t(t){D.get(this).PVt(!!t)}get t8t(){return D.get(this).MVt()}s8t(t){pu.Se(t);const s=D.get(this);s.kVt("fixed"),s.jVt(t)}i8t(){D.get(this).kVt("auto")}get pQ(){return D.get(this).BVt()}get mQ(){return D.get(this).UVt()}e8t(){const t=D.get(this);return[t.BVt(),t.UVt()]}h8t(t,s,i){return pu.Ge(t),pu.Se(s),pu.Se(i),D.get(this).QVt(t,s,i)}r8t(t,s){return pu.Se(t),pu.Se(s),D.get(this).WVt(t,s)}n8t(t,s=0){return pu.Ge(t),pu.Se(s),D.get(this).JVt(t,s)}o8t(t){return pu.Ge(t),D.get(this).VVt(t)}a8t(t){const s=D.get(this),i=s.iP().NP(t);s.hVt(i)}u8t(){return D.get(this).qVt()}}}{const _u=self.ks;_u.Tq.Text.wq={l8t(t,s){return s?this.gf===t:_u.gh(this.gf,t)},c8t(){return-1!==this.KJt},DVt(){return!0},f8t(t,s,i){return this.QVt(t,s,i)}}}{const Eu=self.ks,Du=Eu.lr(Eu.Ho);Eu.Tq.Text.ort={wf(t){this.oVt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.wVt(t.toString())},d8t(t){this.oVt(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.wVt(this.gf+t)},p8t(t,s){this.oVt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this._Vt(t.toString(),s)},m8t(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.BJt&&i===this.ZI&&e===this.XI||(this.SVt(t),this.vVt(i),this.xVt(e))},UC(t){this.TVt(t)},g8t(t){Du.Ca(t),Du.Sr(),this.AVt(Du)},y8t(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},NWt(t){this.RR().pT(t),this.pf.UR()},M8t(){this.EVt()},JC(t){this.bVt(t)},w8t(t){this.GVt(t)},S8t(t){this.IVt(t)},T8t(t){this.LVt(t)},a_(t){this.OVt(t)},b8t(t){this.hVt(t)},v8t(){return this.qVt()},x8t(t){this.PVt(t)},G8t(t,s){this.kVt(["auto","fixed"][t]),this.jVt(s)}}}{const Au=self.ks;Au.Tq.Text.art={Text(){return this.gf},I8t(){return this.zJt?Au.Dh.rm(this.gf):this.gf},C8t(){return this.BJt},_8t(){return this.UJt},E8t(){return this.BVt()},D8t(){return this.UVt()},A8t(){return this.WJt},N8t(t,s){return this.WVt(t,s)},L8t(t){return this.VVt(t)},O8t(t,s){const i=this.JVt(t,s);return i?i.x:0},R8t(t,s){const i=this.JVt(t,s);return i?i.y:0},P8t(t,s){const i=this.JVt(t,s);return i?i.width:0},k8t(t,s){const i=this.JVt(t,s);return i?i.height:0},F8t(){return this.YJt}}}{const Nu=self.ks;Nu.Tq.j8t=class extends Nu.evt{constructor(t){super(t)}cr(){super.cr()}}}{const Lu=self.ks;Lu.Tq.j8t.SCt=class extends Lu.Bvt{constructor(t){super(t)}cr(){super.cr()}Ivt(){this.gB().sP(this.pf)}z9(t){return this.gB().QW(t,{_2:this.pf.s3()})}V9(){this.gB().LC()}}}{let s=function(t){return ku.get(t).z8t()};s;const Ou=self.ks,Ru=self.Hs,Pu=Ou.lr(Ou.Rect),ku=(Ou.Tq.j8t.Instance=class extends Ou.Txt{constructor(t,s){super(t),this.B8t=!0;const i=Ou.lr(self.U8t);(this.Q8t=i).W8t=()=>this.J8t(),this.V8t=null,this.Y8t=(t,s,i,e,h,r)=>this.H8t(t,s,i,e,h,r),this.q8t=t=>this.Z8t(t);let e=this.X8t=!0;s&&(i.K8t(s[0]),i.$8t(Ou.br(s[1])),i.tYt(s[2]?"one-shot":"continuous-spray"),this.sYt(this.pf.Q6(s[3])),e=s[4],i.iYt(s[5]),i.eYt(s[6]),i.hYt(s[7]/100),i.rYt(s[8]),i.nYt(s[9]),i.oYt(s[10]),i.aYt(s[11]),i.uYt(s[12]),i.lYt(s[13]),i.cYt(s[14]),i.fYt(s[15]),i.dYt(s[16]),i.pYt(s[17]),i.mYt(s[18]),i.gYt(s[19]),i.yYt(s[20])),this.MYt(),this.V8t&&(this.X8t=!1),"one-shot"===i.wYt()?i.SYt():i.TYt(!0);const h=this.RR();h.$k(e),h.YAt(!0),this.Gi.Hf().addEventListener("bboxchange",()=>{h.VAt(this.Q8t.g5())}),this.iP().HS().LM()&&h.kAt(),this.VZ=t=>this.YZ(t),this.iP().Hf().addEventListener("afterload",this.VZ),this.fxt()}cr(){this.iP().Hf().removeEventListener("afterload",this.VZ),this.VZ=null,this.Q8t.cr(),this.Q8t=null,this.Y8t=null,this.q8t=null,super.cr()}z8t(){return this.Q8t}bYt(t){this.Q8t.K8t(t),"one-shot"===this.Q8t.wYt()&&this.B8t&&this.Q8t.vYt(t)}sYt(t){(t=t===this.QF()?null:t)===this.V8t||(this.V8t=t,this.Q8t.xYt=t?t=>this.GYt(t):null,this.V8t)||(this.X8t=!0)}MYt(){const t=this.Q8t,s=this.RR();t.IYt(s.BD()),t.Szt(this.pf.e3()),t.CYt(s.GT()),t._Yt(s._T()),t.EYt(s.yk()),t.DYt(Math.abs(s.oAt()))}J8t(){this.pf.XF(this.Gi)}m2(t){if(this.X8t){const s=this.Sft.gB(),i=s.Qb();if(i){const e=this.RR(),h=e.PR(),r=Pu,n=(this.pf.QP().LRt()?r.set(-1/0,-1/0,1/0,1/0):h.VY()?h.T7(e.p5(),r):h.NY(e.p5(),r),t.VD(i),h.LY(e.p5()));this.Q8t.AYt(h.BF()*n),this.Q8t.m2(t,s.Lxt(),r,h.VY())}}}FT(){const t=this.Q8t;return{r:t.NYt(),sc:t.LYt(),st:t.wYt(),isp:t.OYt(),isz:t.RYt(),io:t.PYt(),gr:t.kYt(),xr:t.FYt(),yr:t.jYt(),spr:t.zYt(),szr:t.BYt(),grnd:t.UYt(),acc:t.WYt(),g:t.QYt(),lar:t.JYt(),lsr:t.VYt(),lor:t.YYt(),dm:t.HYt(),to:t.qYt(),s:t.ZYt(),pcc:t.XYt(),ft:this.B8t,soc:this.V8t?this.V8t.fY():null,p:t.KYt().map(t=>t.toJSON())}}jT(t,s){const i=this.Q8t;if(i.K8t(t.r),i.$8t(t.sc),i.tYt(t.st),i.iYt(t.isp),i.eYt(t.isz),i.hYt(t.io),i.rYt(t.gr),i.nYt(t.xr),i.oYt(t.yr),i.aYt(t.spr),i.uYt(t.szr),i.lYt(t.grnd),i.cYt(t.acc),i.fYt(t.g),i.dYt(t.lar),i.pYt(t.lsr),i.mYt(t.lor),i.gYt(t.dm),i.yYt(t.to),i.TYt(t.s),i.$Yt(t.pcc),this.B8t=t.ft,t.hasOwnProperty("soc")){const r=this.iP().Q6(t.soc);r&&this.sYt(r)}const e=t.p,h=(i.vYt(e.length,!1),i.KYt());for(let t=0,s=h.length;t<s;++t)h[t].Va(e[t]);"state"===s&&this.V8t&&(i.tHt(),i.sHt(this))}YZ(){const t=this.Q8t,i=(t.tHt(),t.sHt(this),t.KYt());for(let t=0,s=i.length;t<s;++t){const e=i[t],h=e.iHt();if(h){const r=h.RR();if(r){const n=r.nU();if(n){const o=e.eHt(),a=n.hj();if(("number"!=typeof o||"number"!=typeof a||o!==a)&&"number"==typeof o){const u=this.iP(),l=u.DR(o);l&&u.XF(l)}}}}}}QX(){const t=this.pf.P3(this.Gi);this.MYt(),this.B8t&&"one-shot"===this.Q8t.wYt()&&this.Q8t.hHt(),this.Q8t.QX(t),this.Q8t.ZYt()&&this.pf.UR(),this.RR().a5(),this.B8t=!1}rHt(t){for(this.B8t&&"one-shot"===this.Q8t.wYt()&&this.Q8t.hHt();0<t;)this.Q8t.QX(1/60),t-=1/60;this.Q8t.ZYt()&&this.pf.UR(),this.RR().a5(),this.B8t=!1}GYt(t,s){let i,e=(i=(i=(i="number"==typeof s?this.pf.DR(s):i)&&i.QF()!==this.V8t?null:i)||this.pf.sk(this.V8t,this.RR().PR(),t.GT(),t._T())).RR();return e.c_(t.ac(),t.ac()),e.gk(t.yk()),e.WD(t.BD()),e.v5(this.RR().b5()),e.a5(),e.A5(this.nU(),!0),i.fq(),t.nHt(this.Y8t),t.oHt(this.q8t),i}H8t(t,s,i,e,h,r){if(!t.l6()){const n=t.RR();n.f5(s,i),n.c_(n.ym()+e,n._m()+e),n.gk(n.yk()+h),n.WD(n.BD()+r),n.a5()}}Z8t(t){t.l6()||this.pf.XF(t)}Jrt(t){const s=this.Q8t;switch(t){case 0:return s.NYt();case 1:return Ou.vr(s.LYt());case 2:return"one-shot"===s.wYt()?1:0;case 5:return s.OYt();case 6:return s.RYt();case 7:return 100*s.PYt();case 8:return s.kYt();case 9:return s.FYt();case 10:return s.jYt();case 11:return s.zYt();case 12:return s.BYt();case 13:return s.UYt();case 14:return s.WYt();case 15:return s.QYt();case 16:return s.JYt();case 17:return s.VYt();case 18:return s.YYt();case 19:return s.HYt();case 20:return s.qYt()}}Xrt(t,s){const i=this.Q8t;switch(t){case 0:i.K8t(s);break;case 1:i.$8t(Ou.br(s));break;case 2:i.tYt(s?"one-shot":"continuous-spray");break;case 5:i.iYt(s);break;case 6:i.eYt(s);break;case 7:i.hYt(s/100);break;case 8:i.rYt(s);break;case 9:i.nYt(s);break;case 10:i.oYt(s);break;case 11:i.aYt(s);break;case 12:i.uYt(s);break;case 13:i.lYt(s);break;case 14:i.cYt(s);break;case 15:i.fYt(s);break;case 16:i.dYt(s);break;case 17:i.pYt(s);break;case 18:i.mYt(s);break;case 19:i.gYt(s);break;case 20:i.yYt(s)}}gxt(){const t="plugins.particles",s=t+".properties",i=t+".debugger",e=this.Q8t;return[{title:t+".name",properties:[{name:i+".particle-count",value:e.aHt()},{name:s+".type.name",value:[s+".type.items."+e.wYt()]},{name:i+".is-spraying",value:e.ZYt(),$6t:t=>e.TYt(t)},{name:s+".rate.name",value:e.NYt(),$6t:t=>e.K8t(t)},{name:s+".spray-cone.name",value:Ou.vr(e.LYt()),$6t:t=>e.$8t(Ou.br(t))},{name:s+".speed.name",value:e.OYt(),$6t:t=>e.iYt(t)},{name:s+".size.name",value:e.RYt(),$6t:t=>e.eYt(t)},{name:s+".opacity.name",value:e.PYt(),$6t:t=>e.hYt(t)},{name:s+".grow-rate.name",value:e.kYt(),$6t:t=>e.rYt(t)},{name:s+".x-randomiser.name",value:e.FYt(),$6t:t=>e.nYt(t)},{name:s+".y-randomiser.name",value:e.jYt(),$6t:t=>e.oYt(t)},{name:s+".initial-speed-randomiser.name",value:e.zYt(),$6t:t=>e.aYt(t)},{name:s+".size-randomiser.name",value:e.BYt(),$6t:t=>e.uYt(t)},{name:s+".grow-rate-randomiser.name",value:e.UYt(),$6t:t=>e.lYt(t)},{name:s+".acceleration.name",value:e.WYt(),$6t:t=>e.cYt(t)},{name:s+".gravity.name",value:e.QYt(),$6t:t=>e.fYt(t)},{name:s+".angle-randomiser.name",value:e.JYt(),$6t:t=>e.dYt(t)},{name:s+".life-speed-randomiser.name",value:e.VYt(),$6t:t=>e.pYt(t)},{name:s+".opacity-randomiser.name",value:e.YYt(),$6t:t=>e.mYt(t)},{name:s+".timeout.name",value:e.qYt(),$6t:t=>e.yYt(t)}]}]}Cvt(){return self.uHt}},new WeakMap);self.uHt=class extends self.Cz{constructor(){super(),ku.set(this,self.UF.YF().Nz())}set lHt(t){s(this).TYt(!!t)}get lHt(){return s(this).ZYt()}set rate(t){Ru.Se(t),ku.get(this).bYt(t)}get rate(){return s(this).NYt()}set cHt(t){Ru.Se(t),s(this).$8t(t)}get cHt(){return s(this).LYt()}set fHt(t){Ru.Se(t),s(this).iYt(t)}get fHt(){return s(this).OYt()}set dHt(t){Ru.Se(t),s(this).eYt(t)}get dHt(){return s(this).RYt()}set pHt(t){Ru.Se(t),s(this).hYt(t)}get pHt(){return s(this).PYt()}set mHt(t){Ru.Se(t),s(this).nYt(t)}get mHt(){return s(this).FYt()}set gHt(t){Ru.Se(t),s(this).oYt(t)}get gHt(){return s(this).jYt()}set yHt(t){Ru.Se(t),s(this).aYt(t)}get yHt(){return s(this).zYt()}set MHt(t){Ru.Se(t),s(this).uYt(t)}get MHt(){return s(this).BYt()}set wHt(t){Ru.Se(t),s(this).rYt(t)}get wHt(){return s(this).kYt()}set SHt(t){Ru.Se(t),s(this).lYt(t)}get SHt(){return s(this).UYt()}set acceleration(t){Ru.Se(t),s(this).cYt(t)}get acceleration(){return s(this).WYt()}set THt(t){Ru.Se(t),s(this).fYt(t)}get THt(){return s(this).QYt()}set bHt(t){Ru.Se(t),s(this).dYt(t)}get bHt(){return s(this).JYt()}set vHt(t){Ru.Se(t),s(this).pYt(t)}get vHt(){return s(this).VYt()}set xHt(t){Ru.Se(t),s(this).mYt(t)}get xHt(){return s(this).YYt()}set timeout(t){Ru.Se(t),s(this).yYt(t)}get timeout(){return s(this).qYt()}GHt(t){Ru.Se(t),ku.get(this).rHt(t)}IHt(t){const s=ku.get(this);t?s.sYt(s.iP().NP(t)):s.sYt(null)}}}{const Fu=self.ks;Fu.Tq.j8t.wq={ZYt(){return this.Q8t.ZYt()}}}{const ju=self.ks;ju.Tq.j8t.ort={TYt(t){this.Q8t.TYt(0!==t)},K8t(t){this.bYt(t)},CHt(t){this.sYt(t)},_Ht(){this.sYt(null)},$8t(t){this.Q8t.$8t(ju.br(t))},iYt(t){this.Q8t.iYt(t)},eYt(t){this.Q8t.eYt(t)},hYt(t){this.Q8t.hYt(t/100)},rYt(t){this.Q8t.rYt(t)},EHt(t){this.Q8t.nYt(t)},DHt(t){this.Q8t.oYt(t)},AHt(t){this.Q8t.aYt(t)},NHt(t){this.Q8t.uYt(t)},LHt(t){this.Q8t.lYt(t)},OHt(t){this.Q8t.cYt(t)},fYt(t){this.Q8t.fYt(t)},RHt(t){this.Q8t.dYt(t)},PHt(t){this.Q8t.pYt(t)},kHt(t){this.Q8t.mYt(t)},yYt(t){this.Q8t.yYt(t)},FHt(t){this.rHt(t)},NWt(t){this.RR().pT(t),this.pf.UR()}}}{const zu=self.ks;zu.Tq.j8t.art={jHt(){return this.Q8t.aHt()},zHt(){return this.Q8t.NYt()},BHt(){return zu.vr(this.Q8t.LYt())},UHt(){return this.Q8t.OYt()},WHt(){return this.Q8t.RYt()},QHt(){return 100*this.Q8t.PYt()},JHt(){return this.Q8t.kYt()},VHt(){return this.Q8t.FYt()},YHt(){return this.Q8t.jYt()},HHt(){return this.Q8t.BYt()},qHt(){return this.Q8t.zYt()},ZHt(){return this.Q8t.UYt()},XHt(){return this.Q8t.WYt()},KHt(){return this.Q8t.QYt()},$Ht(){return this.Q8t.JYt()},t7t(){return this.Q8t.VYt()},s7t(){return this.Q8t.YYt()},i7t(){return this.Q8t.qYt()}}}{const Bu=self.ks,Uu=[],Wu=new Set(["continuous-spray","one-shot"]),Qu=["fade-to-invisible","timeout-expired","particle-stopped"],Ju=Bu.lr(Bu.Rect);self.U8t=class{constructor(){this.e7t=0,this.h7t=0,this.r7t="continuous-spray",this.n7t=!1,this.o7t=0,this.a7t=!1,this.u7t=0,this.l7t=0,this.c7t=0,this.f7t=0,this.d7t=0,this.p7t=1,this.m7t=0,this.g7t=0,this.y7t=0,this.M7t=0,this.w7t=0,this.S7t=0,this.T7t=0,this.b7t=0,this.v7t=0,this.x7t=0,this.G7t=0,this.I7t=0,this.C7t=0,this.f0=0,this._7t=0,this.E7t=1,this.W8t=null,this.xYt=null,this.D7t=[],this.ADt=new Bu.Rect,this.cT=new Bu.Ho}cr(){this.g0(),Bu.Wn(this.D7t),this.D7t=null,this.W8t=null,this.xYt=null,this.ADt=null,this.cT=null}g0(){const i=this.D7t;for(let t=0,s=i.length;t<s;++t)i[t].H2t();Bu.Zh(Uu,i),Bu.Wn(i),1e3<Uu.length&&Bu.Un(Uu,1e3),this.n7t=!1}SYt(){for(let t=0,s=this.e7t;t<s;++t)this.A7t();this.D7t.length&&(this.n7t=!0)}A7t(t=!0){let s=null;return Uu.length?(s=Uu.pop()).N7t(this):s=Bu.lr(self.L7t,this),this.D7t.push(s),t?s.B_t(this.xYt):s.B_t(),s}hHt(){const i=this.D7t,e=this.xYt;for(let t=0,s=i.length;t<s;++t)i[t].B_t(e)}tHt(){const i=this.D7t,e=this.xYt;for(let t=0,s=i.length;t<s;++t)i[t].O7t(e)}sHt(i){const e=this.D7t;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=h.iHt();if(r){const n=r.RR();n.IT(h.GT()),n.ET(h._T()),n.c_(h.ac(),h.ac()),n.WD(h.BD()),n.gk(h.yk()),n.v5(i.RR().b5()),n.a5()}}}vYt(t,s=!0){const i=this.D7t;if(t<i.length){const e=i.length-t;for(let t=0;t<e;++t){const h=i.pop();h.H2t(),Uu.push(h)}1e3<Uu.length&&Bu.Un(Uu,1e3)}else if(t>i.length){const r=t-i.length;for(let t=0;t<r;++t)this.A7t(s)}}KYt(){return this.D7t}aHt(){return this.D7t.length}QX(t){this.R7t(t),this.P7t(t),this.k7t()}R7t(t){if("continuous-spray"===this.r7t&&this.n7t){this._7t+=t*this.e7t;const s=Math.floor(this._7t);this._7t-=s;for(let t=0;t<s;++t)this.A7t()}}$Yt(t){this._7t=t}XYt(){return this._7t}P7t(i){let e=this.ADt,h=(e.set(this.u7t,this.l7t,this.u7t,this.l7t),this.D7t),r=0;for(let t=0,s=h.length;t<s;++t){const n=h[t];(h[r]=n).QX(i),n.ymt()?(++r,e.tl(n.g5())):(n.H2t(),Uu.push(n))}Bu.Un(h,r),1e3<Uu.length&&Bu.Un(Uu,1e3)}k7t(){"one-shot"===this.r7t&&0===this.D7t.length&&this.n7t&&(this.W8t&&this.W8t(),this.n7t=!1)}m2(i,e,h,r){Ju.set(e.un(),e.ln(),e.pn(),e.mn()),i.oA(Ju),this.cT.C(i.JD());const n=this.D7t;for(let t=0,s=n.length;t<s;++t){const o=n[t];h.Zu(o.g5())&&o.m2(i,e,r)}i.aA()}JD(){return this.cT}K8t(t){this.e7t=+t}NYt(){return this.e7t}$8t(t){this.h7t=+t}LYt(){return this.h7t}tYt(t){if(!Wu.has(t))throw new Error("invalid spray type");this.r7t=t}wYt(){return this.r7t}TYt(t){this.n7t=!!t}ZYt(){return this.n7t}IYt(t){this.o7t=+t}F7t(){return this.o7t}Szt(t){this.a7t=!!t}j7t(){return this.a7t}CYt(t){this.u7t=+t}z7t(){return this.u7t}_Yt(t){this.l7t=+t}B7t(){return this.l7t}EYt(t){this.c7t=+t}U7t(){return this.c7t}iYt(t){this.f7t=+t}OYt(){return this.f7t}eYt(t){this.d7t=+t}RYt(){return this.d7t}DYt(t){this.p7t=+t}W7t(){return this.p7t}hYt(t){this.m7t=+t}PYt(){return this.m7t}rYt(t){this.g7t=+t}kYt(){return this.g7t}nYt(t){this.y7t=+t}FYt(){return this.y7t}oYt(t){this.M7t=+t}jYt(){return this.M7t}aYt(t){this.w7t=+t}zYt(){return this.w7t}uYt(t){this.S7t=+t}BYt(){return this.S7t}lYt(t){this.T7t=+t}UYt(){return this.T7t}cYt(t){this.b7t=+t}WYt(){return this.b7t}fYt(t){this.v7t=+t}QYt(){return this.v7t}dYt(t){this.x7t=+t}JYt(){return this.x7t}pYt(t){this.G7t=+t}VYt(){return this.G7t}mYt(t){this.I7t=+t}YYt(){return this.I7t}Q7t(t){let s=Qu.indexOf(t);if(-1===s)throw new Error("invalid destroy mode");this.C7t=s}gYt(t){this.Q7t(Qu[t])}J7t(){return Qu[this.C7t]}HYt(){return this.C7t}yYt(t){this.f0=+t}qYt(){return this.f0}AYt(t){this.E7t=+t}V7t(){return this.E7t}g5(){return this.ADt}}}{let p=function(t){return Math.random()*t-t/2},m=(p,self.ks),u=new m.il,l=new m.Ho,t=self.devicePixelRatio||1,c=!1;self.L7t=class{constructor(t){this.Y7t=t,this.p0=!1,this.eu=0,this.hu=0,this.oIt=0,this.YV=0,this.H7t=1,this.q7t=0,this.Z7t=0,this.RJ=0,this.X7t=0,this.K7t=0,this.$7t=0,this.Fl=new m.Rect,this.t9t=null,this.s9t=NaN,this.i9t=null,this.e9t=null}N7t(t){this.Y7t=t}B_t(t){const s=this.Y7t;this.p0=!0,this.eu=s.z7t()+p(s.FYt()),this.hu=s.B7t()+p(s.jYt()),this.oIt=s.OYt()+p(s.zYt()),this.YV=s.U7t()+p(s.LYt()),this.H7t=s.PYt(),this.q7t=this.H7t,this.RJ=(s.RYt()+p(s.BYt()))*s.W7t(),this.X7t=this.RJ/2,this.Z7t=s.kYt()+p(s.UYt()),this.K7t=0,this.$7t=0,this.h9t(),t?this.t9t||(this.t9t=t(this)):(this.t9t=null,this.i9t=null,this.e9t=null)}O7t(t){t?this.t9t&&!this.t9t.l6()||(this.t9t=t(this,this.s9t)):(this.t9t=null,this.i9t=null,this.e9t=null)}nHt(t){this.i9t=t}oHt(t){this.e9t=t}H2t(){const t=this.e9t;t&&t(this.t9t),this.t9t=null,this.i9t=null,this.e9t=null}toJSON(){let t;return this.t9t&&this.t9t.RR()&&(t=this.t9t.RR().nU().hj()),[this.eu,this.hu,this.oIt,this.YV,this.H7t,this.Z7t,this.RJ,this.K7t,this.$7t,t]}Va(t){this.eu=t[0],this.hu=t[1],this.oIt=t[2],this.YV=t[3],this.H7t=t[4],this.q7t=this.H7t,this.Z7t=t[5],this.RJ=t[6],this.K7t=t[7],this.$7t=t[8],this.s9t=t[9],this.X7t=this.RJ/2,this.h9t()}QX(t){let s=this.Y7t,i=this.oIt*t,e=this.YV,h=Math.cos(e)*i,r=Math.sin(e)*i+this.K7t*t,n=(this.eu+=h,this.hu+=r,this.Z7t*t),o=(this.RJ+=n,this.X7t=this.RJ/2,this.oIt+=s.WYt()*t,this.K7t+=s.QYt()*t,this.$7t+=t,this.h9t(),s.JYt()),a=s.VYt(),u=s.YYt(),l=0;0!==o&&(l=p(o*t),this.YV+=l),0!==a&&(this.oIt+=p(a*t)),0!==u&&(this.H7t=m.Sr(this.H7t+p(u*t),0,1));const c=1<=this.RJ&&(2===s.HYt()?0<this.oIt:this.$7t<s.qYt()),f=this.i9t;if(f&&c){let t=s.F7t()*this.H7t;0===s.HYt()&&(t*=1-this.$7t/s.qYt());const d=t-this.q7t;this.q7t=t,f(this.t9t,h,r,n,l,d)}this.p0=c}ymt(){return this.p0}g5(){return this.Fl}h9t(){const t=this.eu,s=this.hu,i=this.X7t;this.Fl.set(t-i,s-i,t+i,s+i)}m2(h,r,n){if(!this.t9t){let i=this.Y7t,e=i.F7t()*this.H7t;if(0===i.HYt()&&(e*=1-this.$7t/i.qYt()),!(e<=0)){const o=this.RJ,a=o*i.V7t()*t;if(!(a<1)){let t=this.eu,s=this.hu;i.j7t()&&(t=t+.5|0,s=s+.5|0),h.LM()?h.uA(t,s,o,e):n||a>h.VA()||a<h.JA()?(l.C(i.JD()),l.xa(e),h.mT(l),c=!0,u.vl(this.Fl),h.iA(u,r)):(c&&(h.mT(i.JD()),c=!1),h.uA(t,s,a,e))}}}}iHt(){return this.t9t}eHt(){return this.s9t}GT(){return this.eu}_T(){return this.hu}ac(){return this.RJ}yk(){return this.YV}BD(){return this.H7t}}}{const Vu=self.ks;Vu.Tq.Keyboard=class extends Vu.evt{constructor(t){super(t)}cr(){super.cr()}}}{let i=function(){return s.O4().Nz()};i;const Yu=self.ks;Yu.Tq.Keyboard.SCt=class extends Yu.Bvt{constructor(t){super(t)}cr(){super.cr()}Ivt(){}Cvt(){return self.r9t}};let s=null;self.r9t=class extends self.R4{constructor(t){super(t),(s=t).iP().vR().keyboard=this}n9t(t){const s=i();if("string"==typeof t)return s.o9t(t);if("number"==typeof t)return s.a9t(t);throw new TypeError("expected string or number")}}}{const Hu=self.ks;Hu.Tq.Keyboard.Instance=class extends Hu.Vvt{constructor(t,s){super(t,"keyboard"),this.u9t=new Set,this.l9t=new Set,this.c9t=0,this.f9t="",this.d9t="",this.p9t=!1;const i=this.iP().Hf();this.I0=new Hu.v0(Hu.y0.b0(i,"keydown",t=>this.m9t(t.data)),Hu.y0.b0(i,"keyup",t=>this.g9t(t.data)),Hu.y0.b0(i,"window-blur",()=>this.y9t()),Hu.y0.b0(i,"keyboard-blur",()=>this.y9t())),this.pf.HR(this.xT())}cr(){super.cr()}async xT(){const t=await this.nxt("init");this.p9t=t.isKeyboardLockSupported}m9t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.u9t.has(i)||(this.u9t.add(i),this.l9t.add(s),this.f9t=i,this.c9t=s,this.d9t=e,this.Nj(Hu.Tq.Keyboard.wq.M9t),this.Nj(Hu.Tq.Keyboard.wq.w9t),this.Nj(Hu.Tq.Keyboard.wq.S9t),this.Nj(Hu.Tq.Keyboard.wq.T9t))}g9t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.u9t.delete(i),this.l9t.delete(s),this.f9t=i,this.c9t=s,this.d9t=e,this.Nj(Hu.Tq.Keyboard.wq.b9t),this.Nj(Hu.Tq.Keyboard.wq.v9t),this.Nj(Hu.Tq.Keyboard.wq.x9t),this.Nj(Hu.Tq.Keyboard.wq.G9t)}y9t(){for(const t of this.l9t)this.l9t.delete(t),this.c9t=t,this.Nj(Hu.Tq.Keyboard.wq.b9t),this.Nj(Hu.Tq.Keyboard.wq.v9t),this.Nj(Hu.Tq.Keyboard.wq.G9t);this.u9t.clear()}o9t(t){return this.u9t.has(t)}a9t(t){return this.l9t.has(t)}FT(){return{tk:this.c9t,tkk:this.d9t}}jT(t){this.c9t=t.tk,t.hasOwnProperty("tkk")&&(this.d9t=t.tkk)}gxt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.c9t},{name:t+".debugger.last-key-string",value:Hu.Tq.Keyboard.art.I9t(this.c9t)},{name:t+".debugger.last-typed-key",value:this.d9t}]}]}}}{const qu=self.ks,Zu=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];qu.Tq.Keyboard.wq={o9t(t){return this.l9t.has(t)},w9t(t){return this.c9t===t},M9t(){return!0},b9t(){return!0},v9t(t){return this.c9t===t},a9t(t){return t=Math.floor(t),this.l9t.has(t)},T9t(t){return this.c9t===t},G9t(t){return this.c9t===t},S9t(t){const s=Zu[t];return this.f9t===s},x9t(t){const s=Zu[t];return this.f9t===s},C9t(t){const s=Zu[t];return this.u9t.has(s)},_9t(){return this.p9t},E9t(){return!0},D9t(){return!0}}}{const Xu=self.ks;Xu.Tq.Keyboard.ort={async A9t(s){if(this.p9t){let t=[];s&&(t=s.split(","));const i=await this.nxt("lock-keyboard",{keysArr:t});i.isOk?this.Nj(Xu.Tq.Keyboard.wq.E9t):this.Nj(Xu.Tq.Keyboard.wq.D9t)}},N9t(){this.p9t&&this.nxt("unlock-keyboard")}}}{let s=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};s;const Ku=self.ks;Ku.Tq.Keyboard.art={L9t(){return this.c9t},I9t(t){return s(t)},O9t(){return this.d9t}}}{const $u=self.ks,tl=[];$u.Tq.Audio=class extends $u.evt{constructor(t){super(t)}R9t(t){tl.push(t)}static async P9t(){await Promise.all(tl),$u.Wn(tl)}cr(){super.cr()}}}{let s=function(){return i.O4().Nz()},t=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};s,t;const sl=self.ks,il=self.Hs;sl.Tq.Audio.SCt=class extends sl.Bvt{constructor(t){super(t)}cr(){super.cr()}Ivt(){}Cvt(){return self.k9t}};let i=null;self.k9t=class extends self.R4{constructor(t){super(t),i=t}get F9t(){return t().GetAudioContextExtern()}get j9t(){return t().GetDestinationNodeExtern()}get isSilent(){return s().z9t()}set isSilent(t){s().B9t(t)}get masterVolume(){return s().U9t()}set masterVolume(t){il.Se(t),s().W9t(t)}Q9t(){s().J9t()}}}{const el=self.ks,hl=["interactive","balanced","playback"];el.Tq.Audio.Instance=class extends el.Vvt{constructor(t,s){super(t,"audio"),this.V9t=0,this.Y9t=[],this.H9t=!0,this.q9t=0,this.Z9t=0,this.X9t=!1,this.K9t=1,this.$9t=1,this.tqt=[this.pf.RY()/2,this.pf.PY()/2,600],this.sqt=[0,0,-1],this.iqt=[0,1,0],this.eqt=600,this.hqt=1e4,this.rqt=1,this.nqt=null,this.oqt=-1,this.aqt=1,this.uqt=!1,this.lqt=0,this.cqt="suspended",this.fqt=0,this.dqt=new Map,this.pqt=0,this.mqt=0,this.gqt=new Map,this.yqt=new Map;let i="interactive";s&&(this.q9t=s[0],this.Z9t=s[1],this.X9t=s[2],i=hl[s[3]],this.H9t=s[4],this.K9t=s[5],this.$9t=s[6],this.tqt[2]=s[7],this.eqt=s[8],this.hqt=s[9],this.rqt=s[10]),this.Mqt=[],this.wqt=[],this.Sqt=[],this.hxt([["state",t=>this.Tqt(t)],["audiocontext-state",t=>this.bqt(t)],["fxstate",t=>this.vqt(t)],["trigger",t=>this.xqt(t)],["buffer-metadata",t=>this.Gqt(t)]]);const e=this.iP().Hf(),h=(this.I0=new el.v0(el.y0.b0(e,"instancedestroy",t=>this.Iqt(t.Wz)),el.y0.b0(e,"afterload",()=>this.YZ()),el.y0.b0(e,"suspend",()=>this.Cqt()),el.y0.b0(e,"resume",()=>this._qt())),this.pf.zP()),r="Safari"===el.li.di,n=this.pf.JFt()||"macos-wkwebview"===h,o=this.pf.kO().$Q(),a="playable-ad-single-file"===this.pf.zP(),u=r||n||o||a;this.pf.HR(this.nxt("create-audio-context",{preloadList:this.pf.kO().DJ().map(t=>({originalUrl:t.originalUrl,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.q9t,latencyHint:i,panningModel:this.K9t,distanceModel:this.$9t,refDistance:this.eqt,maxDistance:this.hqt,rolloffFactor:this.rqt,listenerPos:this.tqt,usePlayMusicAsSoundWorkaround:u}).then(t=>{this.lqt=t.sampleRate,this.cqt=t.audioContextState,this.fqt=t.outputLatency})),this.fxt()}cr(){this.nqt=null,super.cr()}Eqt(t){return this.H9t?t.split(" ").filter(t=>!!t):t?[t]:[]}Dqt(s,t){for(const i of t){let t=!1;for(const e of s)if(el.gh(e,i)){t=!0;break}if(!t)return!1}return!0}Aqt(t,s){return this.Dqt(t,this.Eqt(s))}R9t(t){this.F4().R9t(t)}Iqt(t){this.nqt===t&&(this.nqt=null)}Nqt(t){return Math.pow(10,t/20)}Lqt(t){const s=this.Nqt(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}Oqt(t){return Math.log(t)/Math.log(10)*20}Rqt(t){return this.Oqt(Math.max(Math.min(t,1),0))}Cqt(){this.X9t||this.rxt("set-suspended",{isSuspended:!0})}_qt(){this.X9t||this.rxt("set-suspended",{isSuspended:!1})}Tqt(t){const s=t.tickCount,i=(this.fqt=t.outputLatency,this.Mqt.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder)));this.Mqt=t.audioInstances,this.Sqt=t.analysers,0<i.length&&el.Zh(this.Mqt,i)}Gqt(t){this.gqt.set(t.originalUrl,{duration:t.duration})}bqt(t){this.cqt=t.audioContextState}yrt(){return this.pf.B3t()?"running":this.cqt}vqt(t){this.wqt=t.fxstate}Pqt(t){const s=this.Eqt(t);for(const i of this.Mqt)if(this.Dqt(i.tags,s))return i;return null}kqt(t){const s=this.Eqt(t);return this.Mqt.some(t=>this.Dqt(t.tags,s)&&t.isPlaying)}Fqt(t,s,i,e,h){if(this.kqt(s))return null;const r=this.gqt.get(t),n={tags:this.Eqt(s),duration:r?r.duration:0,volume:h,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.Mqt.push(n),n}jqt(t){const s=this.Eqt(t);for(const i of this.Mqt)this.Dqt(i.tags,s)&&(i.isPlaying=!1)}async xqt(t){const s=t.type,i=(this.Y9t=t.tags,t.aiid);if("ended"===s){for(const e of this.Mqt)if(e.aiid===i){e.isPlaying=!1;break}await this.Oj(el.Tq.Audio.wq.zqt)}else"fade-ended"===s&&await this.Oj(el.Tq.Audio.wq.Bqt)}Uqt(t){return this.Aqt(this.Y9t,t)}QX(){const t={timeScale:this.pf.W3(),gameTime:this.pf.FFt(),instPans:this.Wqt(),tickCount:this.pf.jFt()};if(this.nqt){const s=this.nqt.RR();this.tqt[0]=s.GT(),this.tqt[1]=s._T(),t.listenerPos=this.tqt,t.listenerOrientation=[...this.sqt,...this.iqt]}this.rxt("tick",t)}Qqt(t,s,i,e,h){if(0!==i){const r=Math.sin(i),n=Math.cos(i),o=(t-=e)*r,a=(s-=h)*r,u=t*n,l=s*n;t=u-a,s=l+o,t+=e,s+=h}return[t,s]}Wqt(){return this.Mqt.filter(t=>-1!==t.uid).map(t=>this.pf.DR(t.uid)).filter(t=>t).map(t=>{const s=t.RR(),i=s.PR().yk(),[e,h]=this.Qqt(s.GT(),s._T(),-i,this.tqt[0],this.tqt[1]);return{uid:t.hj(),x:e,y:h,z:s.p5(),angle:s.yk()-i}})}Jqt(t,s){for(const i of this.Sqt)if(i.index===s&&el.gh(i.tag,t))return i;return null}Vqt(t){for(const s of this.Eqt(t)){const i=s.toLowerCase();this.dqt.set(i,(this.dqt.get(i)||0)+1)}}z9t(){return this.uqt}B9t(t){this.uqt!==(t=!!t)&&(this.uqt=t,this.rxt("set-silent",{isSilent:t}))}U9t(){return this.aqt}W9t(t){this.aqt!==t&&(this.aqt=t,this.rxt("set-master-volume",{vol:t}))}J9t(){this.rxt("stop-all");for(const t of this.Mqt)t.isPlaying=!1}Yqt(t){return!t.hasOwnProperty("placeholder")&&3!==this.Z9t&&!(t.isMusic&&1===this.Z9t||!t.isMusic&&2===this.Z9t)}FT(){return{isSilent:this.uqt,masterVolume:this.aqt,listenerZ:this.tqt[2],listenerForwardVec:this.sqt,listenerUpVec:this.iqt,listenerUid:this.nqt?this.nqt.hj():-1,remoteUrls:[...this.yqt.entries()],playing:this.Mqt.filter(t=>this.Yqt(t)),effects:this.wqt,analysers:this.Sqt}}jT(t){if(this.uqt=t.isSilent,this.aqt=t.masterVolume,this.tqt[2]=t.listenerZ,this.nqt=null,this.oqt=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.sqt=t.listenerForwardVec:this.sqt=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.iqt=t.listenerUpVec:this.iqt=[0,1,0],this.yqt.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.yqt.set(s,i);this.Mqt=t.playing;for(const e of this.Mqt)e.hasOwnProperty("tag")&&!e.hasOwnProperty("tags")&&(e.tags=[e.tag].filter(t=>!!t));this.wqt=t.effects,this.Sqt=t.analysers}YZ(){if(-1!==this.oqt&&(this.nqt=this.pf.DR(this.oqt),this.oqt=-1,this.nqt)){const t=this.nqt.RR();this.tqt[0]=t.GT(),this.tqt[1]=t._T()}for(const s of this.Mqt){const i=this.pf.kO().EJ(s.bufferOriginalUrl);i?(s.bufferUrl=i.url,s.bufferType=i.type):s.bufferUrl=null}for(const e of Object.values(this.wqt))for(const h of e)if(h.hasOwnProperty("bufferOriginalUrl")){const r=this.pf.kO().EJ(h.bufferOriginalUrl);r&&(h.bufferUrl=r.url,h.bufferType=r.type)}this.rxt("load-state",{saveLoadMode:this.Z9t,timeScale:this.pf.W3(),gameTime:this.pf.FFt(),listenerPos:this.tqt,listenerOrientation:[...this.sqt,...this.iqt],isSilent:this.uqt,masterVolume:this.aqt,playing:this.Mqt.filter(t=>null!==t.bufferUrl),effects:this.wqt})}gxt(){const t=[];for(const[i,e]of Object.entries(this.wqt))t.push({name:"$"+i,value:e.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.Mqt.length},...this.Mqt.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / `+Math.round(10*t.duration)/10}))]}]}}}{const rl=self.ks;rl.Tq.Audio.wq={zqt(t){return this.Uqt(t)},Bqt(t){return this.Uqt(t)},Hqt(){return this.mqt===this.pqt},qqt(){return!0},Zqt(){return this.z9t()},Xqt(){for(const t of this.Mqt)if(t.isPlaying)return!0;return!1},Kqt(t){return this.kqt(t)}}}{const A=self.ks,nl=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];A.Tq.Audio.ort={Play(t,s,i,e,h){const r=A.Tq.Audio.ort.$qt.call(this,t,s,i,e,h);return this.R9t(r),r},Mrt(t,s,i,e){A.Tq.Audio.ort.$qt.call(this,t,0,s,0,i,e)},async $qt(t,s,i,e,h,r){if(!this.uqt){const n=t[1],o=this.pf.kO().EJ(t[0]);if(o){const a=this.V9t,u=(this.V9t=0,this.Fqt(t[0],h,n,0!==s,this.Lqt(i)));try{await this.nxt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:n,tags:this.Eqt(h),isLooping:0!==s,vol:this.Lqt(i),stereoPan:A.Sr(e/100,-1,1),pos:r||0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{u&&(u.placeholder=this.pf.jFt())}}}},async tZt(t,s,i,e,h,r,n,o,a,u,l){if(!this.uqt){const c=t[1],f=this.pf.kO().EJ(t[0]);if(f){const d=this.V9t,p=(this.V9t=0,this.Fqt(t[0],l,c,0!==s,this.Lqt(i)));try{await this.nxt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.Eqt(l),isLooping:0!==s,vol:this.Lqt(i),pos:0,off:d,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:e,y:h,z:r,angle:A.br(n),innerAngle:A.br(o),outerAngle:A.br(a),outerGain:this.Lqt(u)}})}finally{p&&(p.placeholder=this.pf.jFt())}}}},async sZt(t,s,i,e,h,r,n,o){if(!this.uqt&&e){const a=e.XTt();if(a&&a.RR()){const u=a.RR(),l=u.PR().yk(),[c,f]=this.Qqt(u.GT(),u._T(),-l,this.tqt[0],this.tqt[1]),d=t[1],p=this.pf.kO().EJ(t[0]);if(p){const m=this.V9t,g=(this.V9t=0,this.Fqt(t[0],o,d,0!==s,this.Lqt(i)));try{await this.nxt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.Eqt(o),isLooping:0!==s,vol:this.Lqt(i),pos:0,off:m,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:c,y:f,z:u.p5(),angle:u.yk()-l,innerAngle:A.br(h),outerAngle:A.br(r),outerGain:this.Lqt(n),uid:a.hj()}})}finally{g&&(g.placeholder=this.pf.jFt())}}}}},async iZt(t,s,i,e,h,r){if(!this.uqt){const n=1===t,o=this.pf.kO().EJ(s)||this.yqt.get(s.toLowerCase());if(o){const a=this.V9t,u=(this.V9t=0,this.Fqt(s,r,n,0!==i,this.Lqt(e)));try{await this.nxt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:n,tags:this.Eqt(r),isLooping:0!==i,vol:this.Lqt(e),stereoPan:A.Sr(h/100,-1,1),pos:0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{u&&(u.placeholder=this.pf.jFt())}}}},async eZt(t,s,i,e,h,r,n,o,a,u,l,c){if(!this.uqt){const f=1===t,d=this.pf.kO().EJ(s)||this.yqt.get(s.toLowerCase());if(d){const p=this.V9t,m=(this.V9t=0,this.Fqt(s,c,f,0!==i,this.Lqt(e)));try{await this.nxt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.Eqt(c),isLooping:0!==i,vol:this.Lqt(e),pos:0,off:p,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:h,y:r,z:n,angle:A.br(o),innerAngle:A.br(a),outerAngle:A.br(u),outerGain:this.Lqt(l)}})}finally{m&&(m.placeholder=this.pf.jFt())}}}},async hZt(t,s,i,e,h,r,n,o,a){if(!this.uqt&&!this.uqt&&h){const u=h.XTt();if(u&&u.RR()){const l=u.RR(),c=l.PR().yk(),[f,d]=this.Qqt(l.GT(),l._T(),-c,this.tqt[0],this.tqt[1]),p=1===t,m=this.pf.kO().EJ(s)||this.yqt.get(s.toLowerCase());if(m){const g=this.V9t,y=(this.V9t=0,this.Fqt(s,a,p,0!==i,this.Lqt(e)));try{await this.nxt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.Eqt(a),isLooping:0!==i,vol:this.Lqt(e),pos:0,off:g,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:f,y:d,z:l.p5(),angle:l.yk()-c,innerAngle:A.br(r),outerAngle:A.br(n),outerGain:this.Lqt(o),uid:u.hj()}})}finally{y&&(y.placeholder=this.pf.jFt())}}}}},rZt(t,s){this.rxt("set-looping",{tags:this.Eqt(t),isLooping:0===s})},nZt(t,s){this.rxt("set-muted",{tags:this.Eqt(t),isMuted:0===s})},mrt(t,s){this.rxt("set-volume",{tags:this.Eqt(t),vol:this.Lqt(s)})},oZt(t,s,i,e){this.rxt("fade-volume",{tags:this.Eqt(t),vol:this.Lqt(s),duration:i,stopOnEnd:0===e})},aZt(t,s){this.rxt("set-stereo-pan",{tags:this.Eqt(t),p:A.Sr(s/100,-1,1)})},async uZt(t){const s=t[1],i=this.pf.kO().EJ(t[0]);i&&(this.pqt++,await this.nxt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.mqt++)},async lZt(t,s){const i=1===t,e=this.pf.kO().EJ(s)||this.yqt.get(s.toLowerCase());e&&(this.pqt++,await this.nxt("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.mqt++)},qB(t,s){this.rxt("set-playback-rate",{tags:this.Eqt(t),rate:Math.max(s,0)})},jB(t){this.jqt(t),this.rxt("stop",{tags:this.Eqt(t)})},cZt(){this.J9t()},fZt(t,s){this.rxt("set-paused",{tags:this.Eqt(t),paused:0===s})},dZt(t,s){this.rxt("seek",{tags:this.Eqt(t),pos:s})},pZt(t){2===t&&(t=this.z9t()?1:0),this.B9t(0===t)},mZt(t){const s=this.Lqt(t);this.W9t(s)},gZt(t,s,i,e,h,r,n){const o=nl[s];this.Vqt(t),this.rxt("add-effect",{type:"filter",tags:this.Eqt(t),params:[o,i,e,h,r,A.Sr(n/100,0,1)]})},yZt(t,s,i,e){this.Vqt(t),this.rxt("add-effect",{type:"delay",tags:this.Eqt(t),params:[s,this.Lqt(i),A.Sr(e/100,0,1)]})},MZt(t,s,i,e,h,r){this.Vqt(t),this.rxt("add-effect",{type:"flanger",tags:this.Eqt(t),params:[s/1e3,i/1e3,e,h/100,A.Sr(r/100,0,1)]})},wZt(t,s,i,e,h,r,n){this.Vqt(t),this.rxt("add-effect",{type:"phaser",tags:this.Eqt(t),params:[s,i,e,h,r,A.Sr(n/100,0,1)]})},SZt(t,s,i,e){const h=this.pf.kO().EJ(s[0]);h&&(this.Vqt(t),this.rxt("add-effect",{type:"convolution",tags:this.Eqt(t),bufferOriginalUrl:s[0],bufferUrl:h.url,bufferType:h.type,params:[0===i,A.Sr(e/100,0,1)]}))},TZt(t,s){this.Vqt(t),this.rxt("add-effect",{type:"gain",tags:this.Eqt(t),params:[this.Lqt(s)]})},bZt(t,s){this.Vqt(t),this.rxt("add-effect",{type:"stereopan",tags:this.Eqt(t),params:[A.Sr(s/100,-1,1)]})},vZt(t){this.Vqt(t),this.rxt("add-effect",{type:"gain",tags:this.Eqt(t),params:[0]})},xZt(t,s,i){this.Vqt(t),this.rxt("add-effect",{type:"tremolo",tags:this.Eqt(t),params:[s,A.Sr(i/100,0,1)]})},GZt(t,s,i){this.Vqt(t),this.rxt("add-effect",{type:"ringmod",tags:this.Eqt(t),params:[s,A.Sr(i/100,0,1)]})},IZt(t,s,i,e,h,r){this.Vqt(t),this.rxt("add-effect",{type:"distortion",tags:this.Eqt(t),params:[this.Nqt(s),this.Nqt(i),e,this.Nqt(h),A.Sr(r/100,0,1)]})},CZt(t,s,i,e,h,r){this.Vqt(t),this.rxt("add-effect",{type:"compressor",tags:this.Eqt(t),params:[s,i,e,h/1e3,r/1e3]})},_Zt(t,s,i){this.Vqt(t),this.rxt("add-effect",{type:"analyser",tags:this.Eqt(t),params:[s,i]})},EZt(t){const s=this.Eqt(t);for(const i of s)this.dqt.set(i.toLowerCase(),0);this.rxt("remove-effects",{tags:s}),this.wqt={}},$z(t,s,i,e,h,r){this.rxt("set-effect-param",{tags:this.Eqt(t),index:Math.floor(s),param:i,value:e,ramp:h,time:r})},DZt(t){if(t){const s=t.XTt();s&&s.RR()&&(this.nqt=s)}},AZt(t){this.tqt[2]=t},NZt(t,s,i,e,h,r){this.sqt[0]=t,this.sqt[1]=s,this.sqt[2]=-i,this.iqt[0]=e,this.iqt[1]=h,this.iqt[2]=-r},LZt(t){this.V9t=Math.max(t,0)},OZt(t){const s=t[1],i=this.pf.kO().EJ(t[0]);i&&this.rxt("unload",{url:i.url,type:i.type,isMusic:s})},RZt(t,s){const i=1===t,e=this.pf.kO().EJ(s)||this.yqt.get(s.toLowerCase());e&&this.rxt("unload",{url:e.url,type:e.type,isMusic:i})},PZt(){this.rxt("unload-all")},kZt(t,s,i){this.yqt.set(i.toLowerCase(),{url:t,type:s})}}}{const ol=self.ks;ol.Tq.Audio.art={FZt(t){const s=this.Pqt(t);return s?s.duration:0},crt(t){const s=this.Pqt(t);return s?s.playbackTime:0},grt(t){const s=this.Pqt(t);return s?s.playbackRate:0},frt(t){const s=this.Pqt(t);return s?this.Rqt(s.volume):0},jZt(){return this.Rqt(this.U9t())},zZt(t){return this.dqt.get(t.toLowerCase())||0},BZt(t,s){const i=this.Jqt(t,Math.floor(s));return i?i.binCount:0},UZt(t,s,i){const e=this.Jqt(t,Math.floor(s));return!e||(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]},WZt(t,s){const i=this.Jqt(t,Math.floor(s));return i?i.peak:0},QZt(t,s){const i=this.Jqt(t,Math.floor(s));return i?i.rms:0},JZt(){return this.lqt},VZt(){return self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3},YZt(){return this.fqt},HZt(t,s){return 0==(t=ol.Sr(+t,0,100)/100)?-1/0:t<.1?this.Rqt(ol.Pt(0,this.Lqt(s),10*t)):ol.Pt(s,0,(t-.1)/.9)}}}{const al=self.ks;al.$at.li=class extends al.hGt{constructor(t){super(t)}cr(){super.cr()}}}{const ul=self.ks;ul.$at.li.SCt=class extends ul.uGt{constructor(t){super(t)}cr(){super.cr()}Ivt(){}}}{let b=function(t,s,i,e,h){const r=s*h,n=i*h;return N.Sr(t*h+.5*e*h*h,r,n)};b;const N=self.ks,ll=self.Hs,cl=self.kz,L=(N.$at.li.Instance=class extends N.cGt{constructor(t,s){super(t),this.qZt=null,this.ZZt=!1,this.XZt=!1,this.KZt=!1,this.$Zt=!1,this.tXt=!1,this.sXt=!1,this.iXt=!1,this.eXt=!1,this.hXt=!1,this.rXt=!1,this.nXt=null,this.oXt=-1,this.aXt=0,this.uXt=0,this.lXt=!1,this.cXt=!1,this.fXt=this.pf.zO().wLt(this.Gi),this.dXt=-1,this.pXt="stopped",this.mXt=-1,this.B8t=!0,this.gXt=0,this.yXt=0,this.MXt=0,this.wXt=0,this.SXt=0,this.TXt=0,this.Zo=1500,this.bXt=1500,this.vXt=N.br(90),this.xXt=330,this.GXt=1500,this.IXt=1500,this.CXt=650,this._Xt=1e3,this.EXt=!1,this.DXt=0,this.AXt=0,this.NXt=!0,this.LXt=0,this.zyt=!0,s&&(this.xXt=s[0],this.GXt=s[1],this.IXt=s[2],this.CXt=s[3],this.Zo=s[4],this._Xt=s[5],this.EXt=!!s[6],this.DXt=s[7]/1e3,this.NXt=!!s[8],this.zyt=!!s[9]);const i=this.pf.Hf();this.I0=new N.v0(N.y0.b0(i,"instancedestroy",t=>this.Iqt(t.Wz)),N.y0.b0(i,"afterload",t=>this.YZ())),this.NXt&&this.OXt(),this.zyt&&this.yGt(),this.RXt()}cr(){this.qZt&&(this.qZt.cr(),this.qZt=null),this.nXt=null,this.fXt=null,super.cr()}OXt(){if(!this.qZt){const t=this.pf.Hf();this.qZt=new N.v0(N.y0.b0(t,"keydown",t=>this.m9t(t.data)),N.y0.b0(t,"keyup",t=>this.g9t(t.data)),N.y0.b0(t,"window-blur",()=>this.y9t()),N.y0.b0(t,"keyboard-blur",()=>this.y9t()))}}PXt(){this.qZt&&(this.qZt.cr(),this.qZt=null)}Iqt(t){this.nXt===t&&(this.nXt=null),this.fXt===t&&(this.fXt=null)}m9t(t){switch(t.key){case"ArrowLeft":this.ZZt=!0;break;case"ArrowRight":this.XZt=!0;break;case"ArrowUp":this.KZt=!0}}g9t(t){switch(t.key){case"ArrowLeft":this.ZZt=!1;break;case"ArrowRight":this.XZt=!1;break;case"ArrowUp":this.KZt=!1,this.$Zt=!1}}y9t(){this.ZZt=!1,this.XZt=!1,this.KZt=!1,this.$Zt=!1}FT(){return{ii:this.iXt,lfx:this.aXt,lfy:this.uXt,lfo:this.nXt?this.nXt.hj():-1,am:this.pXt,en:this.zyt,fallt:this.mXt,ft:this.B8t,dx:this.gXt,dy:this.yXt,ms:this.xXt,acc:this.GXt,dec:this.IXt,js:this.CXt,g:this.Zo,g1:this.bXt,mf:this._Xt,wof:this.cXt,woj:this.fXt?this.fXt.hj():-1,ga:this.vXt,edj:this.EXt,cdj:this.sXt,dj:this.tXt,sus:this.DXt,dc:this.NXt,cc:this.LXt}}jT(t){this.iXt=t.ii,this.aXt=t.lfx,this.uXt=t.lfy,this.oXt=t.lfo,this.pXt=t.am;const s=t.en;this.mXt=t.fallt||-1,this.B8t=t.ft,this.gXt=t.dx,this.yXt=t.dy,this.xXt=t.ms,this.GXt=t.acc,this.IXt=t.dec,this.CXt=t.js,this.Zo=t.g,this.bXt=t.g1,this._Xt=t.mf,this.cXt=t.wof,this.dXt=t.woj,this.vXt=t.ga,this.EXt=t.edj,this.sXt=t.cdj,this.tXt=t.dj,this.DXt=t.sus,this.NXt=t.dc,this.LXt=t.cc||0,this.ZZt=!1,this.XZt=!1,this.KZt=!1,this.$Zt=!1,this.eXt=!1,this.hXt=!1,this.rXt=!1,this.AXt=0,this.NXt?this.OXt():this.PXt(),this.R2t(s),this.RXt()}YZ(){-1===this.oXt?this.nXt=null:this.nXt=this.pf.DR(this.oXt),-1===this.dXt?this.fXt=null:this.fXt=this.pf.DR(this.dXt)}kXt(t){if(this.nXt=t){const s=t.RR();this.aXt=s.GT(),this.uXt=s._T()}}FXt(){return this.pf.z3()>this.mXt+.05}RXt(){this.MXt=Math.cos(this.vXt),this.wXt=Math.sin(this.vXt),this.SXt=Math.cos(this.vXt-Math.PI/2),this.TXt=Math.sin(this.vXt-Math.PI/2),this.MXt=N.Vr(this.MXt,6),this.wXt=N.Vr(this.wXt,6),this.SXt=N.Vr(this.SXt,6),this.TXt=N.Vr(this.TXt,6),this.bXt=this.Zo,this.Zo<0&&(this.MXt*=-1,this.wXt*=-1,this.Zo=Math.abs(this.Zo))}jXt(){return this.Zo<0?-1:1}zXt(){const s=this.Gi.RR(),h=this.pf.zO(),r=this.Gi,t=this.nXt,i=s.GT(),n=s._T();if(s.f5(this.MXt,this.wXt),s.a5(),!t||!h.vP(r,t)||t.QF().M_t()&&!h.BAt(t,r)||t.QF().w_t()&&!t.iEt()){let t=h.IP(r),e=null;if(!t&&this.FXt()&&(e=h.wLt(r,!0)),s.u5(i,n),s.a5(),t)return h.vP(r,t)?null:(this.lXt=!1,t);if(e&&e.length){let i=0;for(let t=0,s=e.length;t<s;++t)e[i]=e[t],h.vP(r,e[t])||++i;if(1<=i)return this.lXt=!0,e[0]}return null}return s.u5(i,n),s.a5(),t}gGt(){if(this.zyt){const c=this.pf.P3(this.Gi);this.KZt||this.rXt||(this.$Zt=!1);let e=this.ZZt||this.eXt,h=this.XZt||this.hXt,r=this.KZt||this.rXt,n=r&&!this.$Zt,[o,,a]=(this.eXt=!1,this.hXt=!1,this.rXt=!1,this.iXt&&(e=!1,h=!1,r=!1,n=!1),r||(this.AXt=0),this.BXt(),this.UXt()),u=this.zXt(),l=u&&!this.cXt,t=!1;if([t,u]=this.WXt(u),!t){this.QXt(u,a,o,r),n=this.JXt(u,n,r),u||this.VXt(n,r,c),this.cXt=!!u;let t=this.YXt(e,h),s=!1,i=0;if(0!==this.gXt&&([s,u]=this.HXt(c,t,u,n)),0!==this.yXt){const[f,d]=this.qXt(c,u);s=s||f,i=d}!s&&l&&this.yXt<0&&0<i&&(this.yXt=0,s=!0),this.ZXt(e,h,t,c),u&&!n||s||(this.yXt=Math.min(this.yXt+this.Zo*c,this._Xt)),this.XXt(u,s,n),this.fXt=this.pf.zO().wLt(this.Gi)}}}BXt(){if(this.B8t){const t=this.Gi,s=this.pf.zO();(s.IP(t)||s.wLt(t))&&s.TLt(t,-this.MXt,-this.wXt,4,!0),this.B8t=!1}}UXt(){let t=this.nXt,s=t?t.RR():null,i=0,e=0,h=!1;if(t&&0===this.yXt&&(s._T()!==this.uXt||s.GT()!==this.aXt)){const r=this.Gi,n=r.RR(),o=this.pf.zO(),a=s.GT(),u=s._T(),l=(i=a-this.aXt,e=u-this.uXt,n.f5(i,e),n.a5(),this.aXt=a,this.uXt=u,h=!0,o.IP(r));l&&(o.oLt(r,l),o.TLt(r,-i,-e,2.5*N.Gr(i,e)))}return[i,e,h]}WXt(t){let s=!1,i=this.Gi,e=i.RR(),h=this.pf.zO(),r=h.IP(i);if(!r)return[!1,t];const n=Math.abs(e.ym()),o=Math.abs(e._m());return h.TLt(i,-this.MXt,-this.wXt,o/8)?(h.oLt(i,r),this.kXt(t=r),this.lXt=!1,this.yXt=0):h.vLt(i,this.SXt,this.TXt,n/2)||h.vLt(i,this.MXt,this.wXt,o/2)||h.xLt(i,Math.max(n,o)/2)?h.oLt(i,r):s=!0,[s,t]}QXt(t,s,i,e){const h=this.Gi,r=this.pf.zO();if(t){const n=this.MXt,o=this.wXt,a=this.SXt,u=this.TXt;if(this.tXt=!1,this.sXt=!1,0<this.yXt&&(this.cXt||(r.bLt(h,-n,-o,t,16),this.cXt=!0),this.yXt=0),this.nXt!==t)this.kXt(t),r.oLt(h,t);else if(s){const l=r.IP(h);l&&(r.oLt(h,l),0!==i&&(0<i?r.TLt(h,-a,-u):r.TLt(h,a,u)),r.TLt(h,-n,-o))}}else e||(this.sXt=!0)}JXt(t,s,i){if(t&&s||!t&&this.EXt&&i&&this.sXt&&!this.tXt){const e=this.Gi,h=e.RR(),r=this.pf.zO(),n=h.GT(),o=h._T();h.f5(-this.MXt,-this.wXt),h.a5(),r.IP(e)?s=!1:(this.AXt=this.DXt,this.Nj(N.$at.li.wq.KXt),this.pXt="jumping",this.yXt=-this.CXt,s=!0,t?this.$Zt=!0:this.tXt=!0),h.u5(n,o),h.a5()}return s}VXt(t,s,i){s&&0<this.AXt?(this.yXt=-this.CXt,this.AXt-=i):this.nXt=null,t&&(this.$Zt=!0)}YXt(t,s){let i=0,e=this.GXt,h=this.IXt;return t&&!s&&(i=0<this.gXt?-(e+h):-e),i=s&&!t?this.gXt<0?e+h:e:i}ZXt(t,s,i,e){const h=this.IXt,r=(t===s&&(this.gXt<0?this.gXt=Math.min(this.gXt+h*e,0):0<this.gXt&&(this.gXt=Math.max(this.gXt-h*e,0))),this.gXt=N.Sr(this.gXt+i*e,-this.xXt,this.xXt),this.pf.zO()),n=this.gXt<0?this.$Xt(0,1,1):null;if(n)this.gXt=0,r.oLt(this.Gi,n);else{const o=0<this.gXt?this.$Xt(1,1,1):null;o&&(this.gXt=0,r.oLt(this.Gi,o))}}HXt(e,t,h,s){let r=this.Gi,n=r.RR(),o=this.pf.zO(),a=this.MXt,u=this.wXt,i=this.SXt,l=this.TXt,c=this.xXt,f=!1,d=new Set(o.wLt(r,!0)),p=n.GT(),m=n._T(),g=b(this.gXt,-c,c,t,e)*i,y=b(this.gXt,-c,c,t,e)*l,M=(n.f5(i*(1<this.gXt?1:-1)-a,l*(1<this.gXt?1:-1)-u),n.a5(),!1),w=o.IP(r),S=(n.u5(p+g,m+y),n.a5(),o.IP(r));if(!S&&h&&this.lXt&&(S=o.wLt(r),d.has(S)?S=null:M=!0),S){let t=Math.abs(this.gXt*e)+2;w||!o.TLt(r,-a,-u,t,M,S)?(o.oLt(r,S),t=Math.max(Math.abs(this.gXt*e*2.5),Math.floor(n.ym())),o.TLt(r,i*(this.gXt<0?1:-1),l*(this.gXt<0?1:-1),t,!1)&&(!h||M||this.lXt||(p=n.GT(),m=n._T(),n.f5(a,u),o.IP(r)&&o.TLt(r,-a,-u,3,!1)))||(n.u5(p,m),n.a5()),M||(this.gXt=0)):!w&&!s&&Math.abs(this.yXt)<Math.abs(this.CXt/4)&&(this.yXt=0,h||(f=!0))}else{const T=this.zXt();if(h&&!T){let t=Math.ceil(Math.abs(this.gXt*e))+2,s=(p=n.GT(),m=n._T(),n.f5(a*t,u*t),n.a5(),o.wLt(r)),i=!1;s&&!d.has(s)&&o.TLt(r,-a,-u,t+2,!0,s)&&(this.kXt(h=s),this.lXt=!0,i=!0),i||(o.IP(r)?o.TLt(r,-a,-u,t+2,!1):(n.u5(p,m),n.a5()))}else T&&(!h&&this.lXt&&(this.kXt(T),this.yXt=0,f=!0),0===this.yXt)&&o.bLt(r,-a,-u,T,16)}return[f,h]}qXt(s,t){let e=this.Gi,h=e.RR(),r=this.pf.zO(),i=this.MXt,n=this.wXt,o=!1,a=h.GT(),u=h._T(),l=b(this.yXt,-1/0,this._Xt,this.Zo,s),c=(h.f5(l*i,l*n),h.GT()),f=h._T(),d=(h.a5(),r.IP(e)),p=!1;if(!d&&0<this.yXt&&!t){const m=this.FXt()?r.wLt(e,!0):null;if(m&&m.length){if(this.fXt){h.u5(a,u),h.a5();let i=0;for(let t=0,s=m.length;t<s;++t)m[i]=m[t],r.vP(e,m[t])||++i;N.Un(m,i),h.u5(c,f),h.a5()}1<=m.length&&(d=m[0])}p=!!d}if(d){r.oLt(e,d),this.AXt=0;let t=1.1;p&&!this.fXt&&(t=2);const g=Math.max(Math.abs(this.yXt*s*t),2);r.TLt(e,i*(this.yXt<0?1:-1),n*(this.yXt<0?1:-1),g,p,d)?(this.kXt(d),this.lXt=p,0<this.yXt&&(o=!0),(0<this.yXt||0===this.LXt)&&(this.yXt=0),this.yXt<0&&1===this.LXt&&r.bLt(e,i,n,d,32)):(h.u5(a,u),h.a5(),this.cXt=!0,p||(this.yXt=0))}return[o,l]}XXt(t,s,i){"falling"!==this.pXt&&0<this.yXt&&!t&&(this.Nj(N.$at.li.wq.tKt),this.pXt="falling"),(t||s)&&0<=this.yXt&&("falling"===this.pXt||s||i&&0===this.yXt?(this.Nj(N.$at.li.wq.sKt),0===this.gXt&&0===this.yXt?this.pXt="stopped":this.pXt="moving"):("stopped"!==this.pXt&&0===this.gXt&&0===this.yXt&&(this.Nj(N.$at.li.wq.iKt),this.pXt="stopped"),"moving"===this.pXt||0===this.gXt&&0===this.yXt||i||(this.Nj(N.$at.li.wq.eKt),this.pXt="moving")))}hKt(){return 0!==this.rKt()||0!==this.nKt()}oKt(){if(0===this.yXt){let e=this.Gi,t=this.RR(),h=this.pf.zO(),s=t.GT(),i=t._T(),r=(t.f5(this.MXt,this.wXt),t.a5(),h.IP(e)),n=null;if(!r&&this.FXt()&&(n=h.wLt(e,!0)),t.u5(s,i),t.a5(),r)return!h.vP(e,r);if(n&&n.length){let i=0;for(let t=0,s=n.length;t<s;++t)n[i]=n[t],h.vP(e,n[t])||i++;if(1<=i)return!0}}return!1}aKt(t,s=2,i=3){return!!this.$Xt(t,s,i)}$Xt(t,s=2,i=3){const e=this.Gi,h=this.RR(),r=this.pf.zO(),n=h.GT(),o=h._T();if(0===t?h.f5(-this.SXt*s,-this.TXt*s):h.f5(this.SXt*s,this.TXt*s),h.a5(),!r.IP(e))return h.u5(n,o),h.a5(),null;h.f5(-this.MXt*i,-this.wXt*i),h.a5();const a=r.IP(e);return h.u5(n,o),h.a5(),a}uKt(){const t=this.RR(),s=t.GT(),i=t._T(),e=(t.f5(this.MXt,this.wXt),t.a5(),this.pf.zO().wLt(this.Gi,!1));t.u5(s,i),t.a5(),e&&(this.mXt=this.pf.z3(),this.nXt=null)}lKt(t){this.tXt=!t}cKt(){return Math.hypot(this.gXt,this.yXt)}fKt(){return Math.atan2(this.yXt,this.gXt)}dKt(){return this.yXt<0}pKt(){return 0<this.yXt}mKt(t){this.xXt=Math.max(t,0)}gKt(){return this.xXt}yKt(t){this.GXt=Math.max(t,0)}MKt(){return this.GXt}wKt(t){this.IXt=Math.max(t,0)}SKt(){return this.IXt}TKt(t){this.CXt=Math.max(t,0)}bKt(){return this.CXt}vKt(t){this._Xt=Math.max(t,0)}xKt(){return this._Xt}GKt(t){if(this.bXt!==t){this.Zo=t,this.RXt();const s=this.pf.zO(),i=this.RR();s.IP(this.Gi)&&(s.TLt(this.Gi,this.MXt,this.wXt,10),i.f5(2*this.MXt,2*this.wXt),i.a5()),this.nXt=null}}IKt(){return this.Zo}CKt(t){t=N.Tr(t),this.vXt!==t&&(this.vXt=t,this.RXt(),this.nXt=null)}_Kt(){return this.vXt}EKt(t){this.EXt=!!t}DKt(){return this.EXt}AKt(t){this.DXt=t}NKt(){return this.DXt}LKt(t){this.LXt=t}OKt(){return this.LXt}RKt(t){this.gXt=t}rKt(){return this.gXt}PKt(t){this.yXt=t}nKt(){return this.yXt}kKt(t){if(this.zyt)switch(t){case 0:this.eXt=!0;break;case 1:this.hXt=!0;break;case 2:this.rXt=!0}}FKt(t){this.NXt!==(t=!!t)&&(this.NXt=t,this.NXt?this.OXt():(this.PXt(),this.y9t()))}jKt(){return this.NXt}zKt(t){this.iXt=!!t}BKt(){return this.iXt}R2t(t){this.zyt!==(t=!!t)&&(this.zyt=t,this.zyt?this.yGt():(this.dGt(),this.nXt=null,this.eXt=!1,this.hXt=!1,this.rXt=!1))}k2t(){return this.zyt}Jrt(t){switch(t){case 0:return this.gKt();case 1:return this.MKt();case 2:return this.SKt();case 3:return this.bKt();case 4:return this.IKt();case 5:return this.xKt();case 6:return this.DKt();case 7:return 1e3*this.NKt();case 8:return this.jKt();case 9:return this.k2t()}}Xrt(t,s){switch(t){case 0:this.mKt(s);break;case 1:this.yKt(s);break;case 2:this.wKt(s);break;case 3:this.TKt(s);break;case 4:this.GKt(s);break;case 5:this.vKt(s);break;case 6:this.EKt(!!s);break;case 7:this.AKt(s/1e3);break;case 8:this.FKt(!!s);break;case 9:this.R2t(!!s)}}gxt(){const t="behaviors.platform";return[{title:"$"+this.Uz().hf(),properties:[{name:t+".debugger.vector-x",value:this.rKt(),$6t:t=>this.RKt(t)},{name:t+".debugger.vector-y",value:this.nKt(),$6t:t=>this.PKt(t)},{name:t+".properties.max-speed.name",value:this.gKt(),$6t:t=>this.mKt(t)},{name:t+".properties.acceleration.name",value:this.MKt(),$6t:t=>this.yKt(t)},{name:t+".properties.deceleration.name",value:this.SKt(),$6t:t=>this.wKt(t)},{name:t+".properties.jump-strength.name",value:this.bKt(),$6t:t=>this.TKt(t)},{name:t+".properties.gravity.name",value:this.IKt(),$6t:t=>this.GKt(t)},{name:t+".debugger.gravity-angle",value:N.vr(this._Kt()),$6t:t=>this.CKt(N.br(t))},{name:t+".properties.max-fall-speed.name",value:this.xKt(),$6t:t=>this.vKt(t)},{name:t+".properties.double-jump.name",value:this.DKt(),$6t:t=>this.EKt(t)},{name:t+".properties.jump-sustain.name",value:1e3*this.NKt(),$6t:t=>this.AKt(t/1e3)},{name:t+".debugger.animation-mode",value:[t+".debugger.anim-"+this.pXt]},{name:t+".properties.enabled.name",value:this.k2t(),$6t:t=>this.R2t(t)}]}]}Cvt(){return self.UKt}},new WeakMap),fl=new Map([["left",0],["right",1],["jump",2]]);self.UKt=class extends cl{constructor(){super(),L.set(this,cl.YF().Nz())}WKt(){L.get(this).uKt()}QKt(t){L.get(this).lKt(!!t)}JKt(t){ll.Ge(t);const s=fl.get(t);if("number"!=typeof s)throw new Error("invalid control");L.get(this).kKt(s)}get speed(){return L.get(this).cKt()}get VKt(){return L.get(this).gKt()}set VKt(t){ll.Se(t),L.get(this).mKt(t)}get acceleration(){return L.get(this).MKt()}set acceleration(t){ll.Se(t),L.get(this).yKt(t)}get YKt(){return L.get(this).SKt()}set YKt(t){ll.Se(t),L.get(this).wKt(t)}get HKt(){return L.get(this).bKt()}set HKt(t){ll.Se(t),L.get(this).TKt(t)}get qKt(){return L.get(this).xKt()}set qKt(t){ll.Se(t),L.get(this).vKt(t)}get THt(){return L.get(this).IKt()}set THt(t){ll.Se(t),L.get(this).GKt(t)}get ZKt(){return L.get(this)._Kt()}set ZKt(t){ll.Se(t),L.get(this).CKt(t)}get XKt(){return L.get(this).DKt()}set XKt(t){L.get(this).EKt(!!t)}get KKt(){return L.get(this).NKt()}set KKt(t){ll.Se(t),L.get(this).AKt(t)}get $Kt(){const t=L.get(this).OKt();return 0===t?"stop":"preserve-momentum"}set $Kt(t){ll.Ge(t);const s=L.get(this);if("stop"===t)s.LKt(0);else{if("preserve-momentum"!==t)throw new Error("invalid mode");s.LKt(1)}}get t$t(){return L.get(this).oKt()}s$t(t){ll.Ge(t);const s=L.get(this);if("left"===t)return s.aKt(0);if("right"===t)return s.aKt(1);throw new Error("invalid side")}get i$t(){return L.get(this).hKt()}get e$t(){return L.get(this).dKt()}get h$t(){return L.get(this).pKt()}get r$t(){return L.get(this).rKt()}set r$t(t){ll.Se(t),L.get(this).RKt(t)}get n$t(){return L.get(this).nKt()}set n$t(t){ll.Se(t),L.get(this).PKt(t)}o$t(t,s){ll.Se(t),ll.Se(s);const i=L.get(this);i.RKt(t),i.PKt(s)}a$t(){const t=L.get(this);return[t.rKt(),t.nKt()]}get u$t(){return L.get(this).jKt()}set u$t(t){L.get(this).FKt(!!t)}get l$t(){return L.get(this).BKt()}set l$t(t){L.get(this).zKt(!!t)}get isEnabled(){return L.get(this).k2t()}set isEnabled(t){L.get(this).R2t(!!t)}}}{const dl=self.ks;dl.$at.li.wq={c$t(){return this.hKt()},f$t(t,s){return dl.compare(this.cKt(),t,s)},d$t(){return this.oKt()},p$t(t){return this.aKt(t)},m$t(){return this.dKt()},g$t(){return this.pKt()},y$t(){return this.DKt()},KXt(){return!0},tKt(){return!0},iKt(){return!0},eKt(){return!0},sKt(){return!0},tc(){return this.k2t()}}}{const pl=self.ks;pl.$at.li.ort={M$t(t){this.mKt(t)},cYt(t){this.yKt(t)},w$t(t){this.wKt(t)},S$t(t){this.TKt(t)},T$t(t){this.vKt(t)},fYt(t){this.GKt(t)},b$t(t){this.kKt(t)},v$t(t){this.zKt(!!t)},x$t(t){this.RKt(t)},G$t(t){this.PKt(t)},I$t(t){this.CKt(pl.br(t))},Obt(t){this.R2t(0!==t)},C$t(){this.uKt()},_$t(t){this.EKt(0!==t)},E$t(t){this.AKt(t/1e3)},D$t(t){this.LKt(t)},A$t(t){this.FKt(t)},N$t(t){this.lKt(t)}}}{const ml=self.ks;ml.$at.li.art={L$t(){return this.cKt()},O$t(){return this.gKt()},R$t(){return this.MKt()},P$t(){return this.SKt()},k$t(){return this.bKt()},KHt(){return this.IKt()},F$t(){return ml.vr(this._Kt())},j$t(){return this.xKt()},z$t(){return ml.vr(this.fKt())},B$t(){return this.rKt()},U$t(){return this.nKt()},W$t(){return 1e3*this.NKt()}}}{const gl=self.ks;gl.$at.bound=class extends gl.hGt{constructor(t){super(t)}cr(){super.cr()}}}{const yl=self.ks;yl.$at.bound.SCt=class extends yl.uGt{constructor(t){super(t)}cr(){super.cr()}Ivt(){}}}{const Ml=self.ks;Ml.$at.bound.Instance=class extends Ml.cGt{constructor(t,s){super(t),this.Q$t=0,s&&(this.Q$t=s[0]),this.pxt()}cr(){super.cr()}FT(){return{m:this.Q$t}}jT(t){this.Q$t=t.m}cxt(){let t=this.Gi.RR(),s=t.g5(),i=t.yR(),e=!1;0===this.Q$t?(t.GT()<0&&(t.IT(0),e=!0),t._T()<0&&(t.ET(0),e=!0),t.GT()>i.ym()&&(t.IT(i.ym()),e=!0),t._T()>i._m()&&(t.ET(i._m()),e=!0)):(s.Iu()<0&&(t.nnt(-s.Iu()),e=!0),s.Cu()<0&&(t.ont(-s.Cu()),e=!0),s._u()>i.ym()&&(t.nnt(-(s._u()-i.ym())),e=!0),s.Eu()>i._m()&&(t.ont(-(s.Eu()-i._m())),e=!0)),e&&t.a5()}Jrt(t){if(0===t)return this.Q$t}Xrt(t,s){0===t&&(this.Q$t=s)}}}{const wl=self.ks;wl.$at.bound.wq={}}{const Sl=self.ks;Sl.$at.bound.ort={}}{const Tl=self.ks;Tl.$at.bound.art={}}{const bl=self.ks;bl.$at.J$t=class extends bl.hGt{constructor(t){super(t)}cr(){super.cr()}}}{const vl=self.ks;vl.$at.J$t.SCt=class extends vl.uGt{constructor(t){super(t)}cr(){super.cr()}Ivt(){}}}{const xl=self.ks,Gl=self.Hs,Il=self.kz,Cl=(xl.$at.J$t.Instance=class extends xl.cGt{constructor(t,s){super(t);const i=this.RR(),e=(this.oIt=0,this.GXt=0,this.Zo=0,this.V$t=!1,this.Y$t=!1,this.H$t=!1,this.zyt=!0,this.gXt=0,this.yXt=0,this.RJt=i.GT(),this.PJt=i._T(),this.q$t=i.yk(),this.Z$t=0,this.X$t=Math.min(Math.abs(i.ym()),Math.abs(i._m())/2),this.K$t=!1,s&&(this.oIt=s[0],this.GXt=s[1],this.Zo=s[2],this.V$t=!!s[3],this.Y$t=!!s[4],this.H$t=!!s[5],this.zyt=!!s[6]),i.yk());this.gXt=Math.cos(e)*this.oIt,this.yXt=Math.sin(e)*this.oIt,this.zyt&&(this.fxt(),this.V$t)&&this.yGt()}cr(){super.cr()}FT(){const t={dx:this.gXt,dy:this.yXt,lx:this.RJt,ly:this.PJt,lka:this.q$t,t:this.Z$t};return 0!==this.GXt&&(t.acc=this.GXt),0!==this.Zo&&(t.g=this.Zo),this.H$t&&(t.st=this.H$t),this.zyt||(t.e=this.zyt),this.V$t&&(t.bos=this.V$t),this.Y$t&&(t.sa=this.Y$t),t}jT(t){this.gXt=t.dx,this.yXt=t.dy,this.RJt=t.lx,this.PJt=t.ly,this.q$t=t.lka,this.Z$t=t.t,this.GXt=t.hasOwnProperty("acc")?t.acc:0,this.Zo=t.hasOwnProperty("g")?t.g:0,this.H$t=!!t.hasOwnProperty("st")&&t.st,this.V$t=!!t.hasOwnProperty("bos")&&t.bos,this.Y$t=!!t.hasOwnProperty("sa")&&t.sa,this.R2t(!t.hasOwnProperty("e")||t.e)}QX(){if(this.zyt){const h=this.pf.P3(this.Gi),r=this.Gi.RR();if(r.yk()!==this.q$t){const t=r.yk();if(this.Y$t){const s=xl.Cr(0,0,this.gXt,this.yXt);this.gXt=Math.cos(t)*s,this.yXt=Math.sin(t)*s}this.q$t=t}let i=0,e=0;if(0!==this.GXt){let t=xl.Cr(0,0,this.gXt,this.yXt),s;s=0===this.gXt&&0===this.yXt?r.yk():xl.Er(0,0,this.gXt,this.yXt),t+=this.GXt*h,i=Math.cos(s)*this.GXt,e=Math.sin(s)*this.GXt,t<0&&(t=0,i=0,e=0),this.gXt=Math.cos(s)*t,this.yXt=Math.sin(s)*t}if(0!==this.Zo&&(this.yXt+=this.Zo*h,e+=this.Zo),this.RJt=r.GT(),this.PJt=r._T(),0!==this.gXt||0!==this.yXt){const n=this.gXt*h+.5*i*h*h,o=this.yXt*h+.5*e*h*h,a=xl.Cr(0,0,n,o);if(this.$$t(n,o,a),this.Z$t+=a,this.Y$t&&(0!=n||0!=o)){const u=xl.Er(0,0,n,o);r.gk(u),this.q$t=r.yk()}r.a5()}}}$$t(t,s,i){const e=this.RR();if(!this.H$t||i<=this.X$t)e.f5(t,s),e.a5(),this.H$t&&this.Nj(xl.$at.J$t.wq.tts);else{this.K$t=!1;const h=e.GT(),r=e._T(),n=h+t,o=r+s,a=xl.Er(0,0,t,s),u=Math.cos(a)*this.X$t,l=Math.sin(a)*this.X$t,c=Math.floor(i/this.X$t);for(let t=1;t<=c;++t)if(e.u5(h+u*t,r+l*t),e.a5(),this.Nj(xl.$at.J$t.wq.tts),this.Gi.l6()||this.K$t)return;e.u5(n,o),e.a5(),this.Nj(xl.$at.J$t.wq.tts)}}gGt(){if(this.zyt&&this.V$t&&(0!==this.gXt||0!==this.yXt)){const t=this.pf.P3(this.Gi),s=this.Gi.RR(),i=this.pf.zO(),e=i.IP(this.Gi);if(e){i.oLt(this.Gi,e);const h=xl.Cr(0,0,this.gXt,this.yXt),r=i.GLt(this.Gi,this.RJt,this.PJt);this.gXt=Math.cos(r)*h,this.yXt=Math.sin(r)*h,s.f5(this.gXt*t,this.yXt*t),s.a5(),this.Y$t&&(s.gk(r),this.q$t=s.yk(),s.a5()),i.TLt(this.Gi,this.gXt/h,this.yXt/h,Math.max(2.5*h*t,30))||i.xLt(this.Gi,100)}}}Jrt(t){switch(t){case 0:return this.cKt();case 1:return this.MKt();case 2:return this.IKt();case 4:return this.Y$t;case 5:return this.H$t;case 6:return this.k2t()}}Xrt(t,s){switch(t){case 0:this.sts(s);break;case 1:this.GXt=s;break;case 2:this.Zo=s;break;case 4:this.Y$t=!!s;break;case 5:this.H$t=!!s;break;case 6:this.R2t(!!s)}}sts(t){const s=xl.Er(0,0,this.gXt,this.yXt);this.gXt=Math.cos(s)*t,this.yXt=Math.sin(s)*t}cKt(){return xl.Vr(xl.Cr(0,0,this.gXt,this.yXt),6)}yKt(t){this.GXt=t}MKt(){return this.GXt}GKt(t){this.Zo=t}IKt(){return this.Zo}its(t){const s=xl.Cr(0,0,this.gXt,this.yXt);this.gXt=Math.cos(t)*s,this.yXt=Math.sin(t)*s}ets(){return xl.Er(0,0,this.gXt,this.yXt)}hts(t){this.V$t!==(t=!!t)&&(this.V$t=t,this.zyt)&&(this.V$t?this.yGt():this.dGt())}rts(){return this.V$t}nts(t){this.Z$t=t}ots(){return this.Z$t}R2t(t){this.zyt=!!t,this.zyt?(this.fxt(),this.V$t&&this.yGt()):(this.qvt(),this.dGt())}k2t(){return this.zyt}gxt(){const t="behaviors.bullet";return[{title:"$"+this.Uz().hf(),properties:[{name:t+".debugger.vector-x",value:this.gXt,$6t:t=>this.gXt=t},{name:t+".debugger.vector-y",value:this.yXt,$6t:t=>this.yXt=t},{name:t+".properties.speed.name",value:this.cKt(),$6t:t=>this.sts(t)},{name:t+".debugger.angle-of-motion",value:xl.vr(this.ets())},{name:t+".properties.gravity.name",value:this.IKt(),$6t:t=>this.GKt(t)},{name:t+".properties.acceleration.name",value:this.MKt(),$6t:t=>this.yKt(t)},{name:t+".debugger.distance-travelled",value:this.ots()},{name:t+".properties.enabled.name",value:this.k2t(),$6t:t=>this.R2t(t)}]}]}Cvt(){return self.ats}},new WeakMap);self.ats=class extends Il{constructor(){super(),Cl.set(this,Il.YF().Nz())}get speed(){return Cl.get(this).cKt()}set speed(t){Gl.Se(t),Cl.get(this).sts(t)}get acceleration(){return Cl.get(this).MKt()}set acceleration(t){Gl.Se(t),Cl.get(this).yKt(t)}get THt(){return Cl.get(this).IKt()}set THt(t){Gl.Se(t),Cl.get(this).GKt(t)}get uts(){return Cl.get(this).ets()}set uts(t){Gl.Se(t),Cl.get(this).its(t)}get lts(){return Cl.get(this).rts()}set lts(t){Cl.get(this).hts(!!t)}get cts(){return Cl.get(this).ots()}set cts(t){Gl.Se(t),Cl.get(this).nts(t)}get isEnabled(){return Cl.get(this).k2t()}set isEnabled(t){Cl.get(this).R2t(t)}}}{const _l=self.ks;_l.$at.J$t.wq={f$t(t,s){const i=Math.hypot(this.gXt,this.yXt);return _l.compare(i,t,s)},fts(t,s){return _l.compare(this.ots(),t,s)},tts(){return!0},tc(){return this.k2t()}}}{const El=self.ks;El.$at.J$t.ort={dts(t){this.sts(t)},cYt(t){this.yKt(t)},fYt(t){this.GKt(t)},pts(t){this.its(El.br(t))},IL(t){if(t){const s=t.XTt(this.Gi);if(s){const i=this.Gi.RR(),e=this.pf.zO(),h=this.pf.P3(this.Gi),r=El.Cr(0,0,this.gXt,this.yXt),n=e.GLt(this.Gi,this.RJt,this.PJt,s);this.gXt=Math.cos(n)*r,this.yXt=Math.sin(n)*r,i.f5(this.gXt*h,this.yXt*h),i.a5(),this.Y$t&&(i.gk(n),this.q$t=i.yk(),i.a5()),0!==r&&(this.V$t?e.TLt(this.Gi,this.gXt/r,this.yXt/r,Math.max(2.5*r*h,30))||e.xLt(this.Gi,100):e.SLt(this.Gi,this.gXt/r,this.yXt/r,Math.max(2.5*r*h,30),s))}}},gts(t){this.hts(t)},yts(t){this.nts(t)},Obt(t){this.R2t(t)},Mts(){this.K$t=!0}}}{const Dl=self.ks;Dl.$at.J$t.art={L$t(){return this.cKt()},R$t(){return this.MKt()},wts(){return Dl.vr(this.ets())},Sts(){return this.ots()},KHt(){return this.IKt()}}}{const Al=self.ks;Al.$at.DGt=class extends Al.hGt{constructor(t){super(t)}cr(){super.cr()}}}{const Nl=self.ks;Nl.$at.DGt.SCt=class extends Nl.uGt{constructor(t){super(t)}cr(){super.cr()}Ivt(){}}}{const Ll=self.ks,Ol=self.Hs,Rl=self.kz,Pl=new Set,kl=(Ll.$at.DGt.Instance=class extends Ll.cGt{constructor(t,s){super(t),this.Obt(!0),s&&(this.Obt(s[0]),this.Ltt(s[1]))}cr(){super.cr()}Obt(t){this.Gi.sEt(!!t)}tc(){return this.Gi.tEt()}Ltt(s){const i=this.Gi.pSt();if(s.trim()){let t=i.get("solidTags");t||(t=new Set,i.set("solidTags",t)),t.clear();for(const e of s.split(" "))e&&t.add(e.toLowerCase())}else i.delete("solidTags")}XB(){return this.Gi.pSt().get("solidTags")||Pl}Tts(){return[...this.XB()].join(" ")}FT(){return{e:this.tc()}}jT(t){this.Obt(t.e)}Jrt(t){if(0===t)return this.tc()}Xrt(t,s){0===t&&this.Obt(s)}gxt(){return[{title:"$"+this.Uz().hf(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this.tc(),$6t:t=>this.Obt(t)},{name:"behaviors.solid.properties.tags.name",value:this.Tts(),$6t:t=>this.Ltt(t)}]}]}Cvt(){return self.bts}},new WeakMap);self.bts=class extends Rl{constructor(){super(),kl.set(this,Rl.YF().Nz())}set isEnabled(t){kl.get(this).Obt(!!t)}get isEnabled(){return kl.get(this).tc()}set tags(t){Ol.Ge(t),kl.get(this).Ltt(t)}get tags(){return kl.get(this).Tts()}}}{const Fl=self.ks;Fl.$at.DGt.wq={tc(){return this.tc()}}}{const jl=self.ks;jl.$at.DGt.ort={Obt(t){this.Obt(t)},Ltt(t){this.Ltt(t)}}}{const zl=self.ks;zl.$at.DGt.art={}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s};t,0;self.twt=[()=>-18,()=>0,()=>"",t=>{const s=t.lwt(0).DMt();return()=>s(0,21)},()=>"Esquerda",()=>"Direita",()=>"Parado",()=>1,()=>-10,()=>3,t=>{const s=t.lwt(0).DMt();return()=>s(64,900)},()=>2,()=>5,()=>6,()=>7,()=>4,()=>8,()=>9,t=>{const s=t.lwt(0).$Mt();return()=>s.Let()},()=>869,()=>106,t=>{const s=t.lwt(0).DMt(),i=t.lwt(1).DMt();return()=>s(i(10,51))},()=>485,()=>285,()=>185,()=>402,()=>556,()=>414,()=>301,()=>182,()=>370,()=>115,()=>491,()=>605,t=>{const s=t.lwt(0).DMt();return()=>s(5,20)},()=>-75,()=>523,()=>150,()=>746,()=>507,()=>748,()=>"animao",()=>"morto",()=>266,()=>391,()=>487,()=>708,()=>-95,()=>480,()=>143,()=>693,()=>510,()=>696,()=>-717706215031807,()=>-1049599,t=>{const s=t.lwt(0).DMt(),i=t.lwt(1).DMt();return()=>s(i(1,4))}]}var t=self.ks;self.Fkt=function(){return[t.Tq.Qht,t.Tq.Touch,t.$at.li,t.$at.bound,t.$at.J$t,t.Tq.Text,t.Tq.j8t,t.Tq.Keyboard,t.$at.DGt,t.Tq.Audio,t.Tq.Touch.wq.JQt,t.Tq.Sq.ort.Gzt,t.Tq.Sq.wq.Mq,t.Tq.Sq.wq._5t,t.Tq.Audio.ort.cZt,t.Tq.Audio.ort.Play,t.Tq.Sq.ort.izt,t.Tq.Qht.ort.H2t,t.Tq.Sq.ort.nzt,t.Tq.Sq.wq.y5t,t.Tq.Sq.ort.$5t,t.Tq.Sq.art.random,t.$at.li.ort.b$t,t.Tq.Qht.ort.tWt,t.Tq.Keyboard.wq.o9t,t.Tq.Qht.wq.n2t,t.Tq.Sq.ort.tzt,t.Tq.Qht.ort.xWt,t.Tq.Sq.ort.szt,t.Tq.Sq.wq.w5t,t.Tq.Sq.wq.C5t,t.Tq.Sq.ort.kn,t.Tq.Text.ort.wf,t.Tq.Sq.art.fBt,t.Tq.Sq.ort.hzt,t.Tq.Touch.wq.LQt,t.Tq.Qht.ort.AWt,t.Tq.Text.ort.H2t,t.Tq.Qht.ort.WTt]},self.Xkt=[{Play:0},{vts:0},{xts:0},{Gts:0},{Its:0},{Cts:0},{_ts:0},{Ets:0},{Dts:0},{Ats:0},{Nts:0},{Lts:0},{Ots:0},{Rts:0},{Pts:0},{kts:0},{Fts:0},{jts:0},{zts:0},{Bts:0},{Uts:0},{Wts:0},{Qts:0},{Jts:0},{Vts:0},{Yts:0},{Hts:0},{qts:0},{Zts:0},{Xts:0},{Kts:0},{$ts:0},{tss:0},{sss:0},{iss:0},{ess:0},{hss:0},{rss:0},{nss:0},{oss:0},{ass:0},{uss:0},{lss:0},{css:0},{fss:0},{dss:0},{pss:0},{Qht:0},{mss:0},{gss:0},{yss:0},{Mss:0},{wss:0},{Sss:0},{Tss:0},{bss:0},{vss:0},{xss:0},{Gss:0},{Iss:0},{Css:0},{_ss:0}],self.Ess={Play:class extends self.rWt{},vts:class extends self.UF{},xts:class extends self.rWt{},Cts:class extends self.rWt{},_ts:class extends self.rWt{},Ets:class extends self.rWt{},Dts:class extends self.rWt{},Nts:class extends self.rWt{},Lts:class extends self.ZVt{},Ots:class extends self.uHt{},Rts:class extends self.UF{},Pts:class extends self.ZVt{},kts:class extends self.ZVt{},jts:class extends self.rWt{},zts:class extends self.rWt{},Bts:class extends self.rWt{},Uts:class extends self.rWt{},Wts:class extends self.ZVt{},Qts:class extends self.ZVt{},Jts:class extends self.ZVt{},Vts:class extends self.ZVt{},Yts:class extends self.rWt{},Hts:class extends self.rWt{},qts:class extends self.ZVt{},Zts:class extends self.ZVt{},Xts:class extends self.ZVt{},Kts:class extends self.rWt{},$ts:class extends self.rWt{},tss:class extends self.rWt{},sss:class extends self.rWt{},iss:class extends self.ZVt{},ess:class extends self.rWt{},hss:class extends self.rWt{},rss:class extends self.rWt{},nss:class extends self.rWt{},oss:class extends self.rWt{},ass:class extends self.rWt{},uss:class extends self.rWt{},lss:class extends self.rWt{},css:class extends self.rWt{},fss:class extends self.rWt{},dss:class extends self.rWt{},pss:class extends self.rWt{},Qht:class extends self.rWt{},mss:class extends self.rWt{},gss:class extends self.uHt{},yss:class extends self.UF{},Mss:class extends self.rWt{},wss:class extends self.rWt{}};